class Lt{}let Nx=class extends Lt{constructor(){super(),this._events={}}bind(t,e,s){const i=Wc(t),n=$c(e),o=i.length;if(e===void 0){for(let a in t)this.bind(a,t[a]);return this}for(let a=0;a<o;a++){const l=i[a];let h=n?e:e[l];if(h){if(s){const d=h;h=()=>{this.unbind(l,h),d.apply(this,arguments)},h.original=d}(this._events[l]=this._events[l]||[]).push(h)}}return this}one(t,e){return this.bind(t,e,!0)}first(t,e){const s=Wc(t),i=$c(e);for(let n=0,o=s.length;n<o;n++){const a=s[n],l=i?e:e[a];l&&(this._events[a]=this._events[a]||[]).unshift(l)}return this}trigger(t,e={}){let s=this._events[t];if(s){const i=s.length;e.sender=this,e._defaultPrevented=!1,e.preventDefault=Fx,e.isDefaultPrevented=Hx,s=s.slice();for(let n=0;n<i;n++)s[n].call(this,e);return e._defaultPrevented===!0}return!1}unbind(t,e){const s=this._events[t];if(t===void 0)this._events={};else if(s)if(e)for(let i=s.length-1;i>=0;i--)(s[i]===e||s[i].original===e)&&s.splice(i,1);else this._events[t]=[];return this}};function $c(r){return typeof r=="function"}function Wc(r){return typeof r=="string"?[r]:r}function Fx(){this._defaultPrevented=!0}function Hx(){return this._defaultPrevented===!0}let cr=r=>{const t=typeof window<"u"?window:{},e=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(s){setTimeout(s,1e3/60)};cr=s=>e.call(t,s),cr(r)};const Ux=/&/g,jx=/</g,Gx=/"/g,$x=/'/g,Wx=/>/g;function Ys(r){return String(r).replace(Ux,"&amp;").replace(jx,"&lt;").replace(Wx,"&gt;").replace(Gx,"&quot;").replace($x,"&#39;")}function Hp(r){const t=window.console;typeof t<"u"&&t.log&&t.log(r)}function Xx(r){const t={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+))/i};let e={};for(let s in t)if(t.hasOwnProperty(s)){const i=r.match(t[s]);if(i){e[s]=!0,e[i[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,e.version=parseInt(document.documentMode||i[2],10);break}}return e}let Oo=null;const Fn={get browser(){return typeof window>"u"||Oo||(Oo=Xx(window.navigator.userAgent)),Oo}},Hn=Date.now||function(){return new Date().getTime()};function Ur(r,t){let e=0,s;if(!t||t<=0)return r;const i=function(){const n=Hn()-e,o=arguments,a=function(){r.apply(null,o),e=Hn()};if(!e)return a();s&&clearTimeout(s),n>t?a():s=setTimeout(a,t-n)};return i.cancel=function(){clearTimeout(s)},i}const Kl={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},Xc=Fn.browser;let Up=r=>{const t=Object.keys(Kl);t.push("transparent");const e=new RegExp("^("+t.join("|")+")(\\W|$)","i");return Up=s=>e.exec(s),e.exec(r)};class jr extends Lt{constructor(){super()}toHSV(){return this}toRGB(){return this}toHex(t){return this.toBytes().toHex(t)}toBytes(){return this}toCss(t){return"#"+this.toHex(t)}toCssRgba(){const t=this.toBytes();return`rgba(${t.r}, ${t.g}, ${t.b}, ${parseFloat(Number(this.a).toFixed(3))})`}toDisplay(){return Xc.msie&&Xc.version<9?this.toCss():this.toCssRgba()}equals(t){return t===this||t!=null&&this.toCssRgba()===Gr(t).toCssRgba()}diff(t){if(t===null)return NaN;const e=this.toBytes(),s=t.toBytes();return Math.sqrt(Math.pow((e.r-s.r)*.3,2)+Math.pow((e.g-s.g)*.59,2)+Math.pow((e.b-s.b)*.11,2))}clone(){let t=this.toBytes();return t===this&&(t=new je(t.r,t.g,t.b,t.a)),t}}class Ze extends jr{constructor(t,e,s,i){super(),this.r=t,this.g=e,this.b=s,this.a=i}toHSV(){const{r:t,g:e,b:s}=this,i=Math.min(t,e,s),n=Math.max(t,e,s),o=n-i,a=n;let l,h;return o===0?new hl(0,0,a,this.a):(n!==0?(h=o/n,t===n?l=(e-s)/o:e===n?l=2+(s-t)/o:l=4+(t-e)/o,l*=60,l<0&&(l+=360)):(h=0,l=-1),new hl(l,h,a,this.a))}toHSL(){const{r:t,g:e,b:s}=this,i=Math.max(t,e,s),n=Math.min(t,e,s);let o,a,l=(i+n)/2;if(i===n)o=a=0;else{const h=i-n;switch(a=l>.5?h/(2-i-n):h/(i+n),i){case t:o=(e-s)/h+(e<s?6:0);break;case e:o=(s-t)/h+2;break;case s:o=(t-e)/h+4;break}}return new jp(o*60,a*100,l*100,this.a)}toBytes(){return new je(this.r*255,this.g*255,this.b*255,this.a)}}class je extends Ze{constructor(t,e,s,i){super(Math.round(t),Math.round(e),Math.round(s),i)}toRGB(){return new Ze(this.r/255,this.g/255,this.b/255,this.a)}toHSV(){return this.toRGB().toHSV()}toHSL(){return this.toRGB().toHSL()}toHex(t){let e=Bo(this.r,2)+Bo(this.g,2)+Bo(this.b,2);return t&&t.alpha&&(e+=Bo(Math.round(this.a*255),2)),e}toBytes(){return this}}function Bo(r,t,e="0"){let s=r.toString(16);for(;t>s.length;)s=e+s;return s}class hl extends jr{constructor(t,e,s,i){super(),this.h=t,this.s=e,this.v=s,this.a=i}toRGB(){let{h:t,s:e,v:s}=this,i,n,o;if(e===0)i=n=o=s;else{t/=60;const a=Math.floor(t),l=t-a,h=s*(1-e),c=s*(1-e*l),d=s*(1-e*(1-l));switch(a){case 0:i=s,n=d,o=h;break;case 1:i=c,n=s,o=h;break;case 2:i=h,n=s,o=d;break;case 3:i=h,n=c,o=s;break;case 4:i=d,n=h,o=s;break;default:i=s,n=h,o=c;break}}return new Ze(i,n,o,this.a)}toHSL(){return this.toRGB().toHSL()}toBytes(){return this.toRGB().toBytes()}}class jp extends jr{constructor(t,e,s,i){super(),this.h=t,this.s=e,this.l=s,this.a=i}toRGB(){let t=this.h/360,e=this.s/100,s=this.l/100,i,n,o;if(e===0)i=n=o=s;else{const a=s<.5?s*(1+e):s+e-s*e,l=2*s-a;i=Ma(l,a,t+1/3),n=Ma(l,a,t),o=Ma(l,a,t-1/3)}return new Ze(i,n,o,this.a)}toHSV(){return this.toRGB().toHSV()}toBytes(){return this.toRGB().toBytes()}}function Ma(r,t,e){let s=e;return s<0&&(s+=1),s>1&&(s-=1),s<1/6?r+(t-r)*6*s:s<1/2?t:s<2/3?r+(t-r)*(2/3-s)*6:r}function Yc(r){return parseFloat(parseFloat(parseInt(r,16)/255).toFixed(3))}function Gr(r,t){let e,s;if(!r||r==="none")return null;if(r instanceof jr)return r;let i=r.toLowerCase();if(e=Up(i))return e[1]==="transparent"?i=new Ze(1,1,1,0):i=Gr(Kl[e[1]],t),i.match=[e[1]],i;if((e=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(i))?s=new je(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1):(e=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(i))?s=new je(parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1):(e=/^#?([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(i))?s=new je(parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Yc(e[4]+e[4])):(e=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(i))?s=new je(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),Yc(e[4])):(e=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(i))?s=new je(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),1):(e=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(i))?s=new je(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),parseFloat(e[4])):(e=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(i))?s=new Ze(parseFloat(e[1])/100,parseFloat(e[2])/100,parseFloat(e[3])/100,1):(e=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(i))?s=new Ze(parseFloat(e[1])/100,parseFloat(e[2])/100,parseFloat(e[3])/100,parseFloat(e[4])):(e=/^color\(\s*srgb\s*([0-9]*\.?[0-9]+)\s+([0-9]*\.?[0-9]+)\s+([0-9]*\.?[0-9]+)\s*(\/\s+([0-9]*\.?[0-9]+))?\)/.exec(i))&&(s=new Ze(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[5]||"1"))),s)s.match=e;else if(!t)throw new Error("Cannot parse color: "+i);return s}const Yx=180;class Nt extends Lt{constructor(t){if(super(),arguments.length===1){const e=Nt.formats,s=this.resolveColor(t);for(let i=0;i<e.length;i++){const n=e[i].re,o=e[i].process,a=n.exec(s);if(a){const l=o(a);this.r=l[0],this.g=l[1],this.b=l[2]}}}else this.r=arguments[0],this.g=arguments[1],this.b=arguments[2];this.r=this.normalizeByte(this.r),this.g=this.normalizeByte(this.g),this.b=this.normalizeByte(this.b)}toHex(){const t=this.padDigit,e=this.r.toString(16),s=this.g.toString(16),i=this.b.toString(16);return"#"+t(e)+t(s)+t(i)}resolveColor(t){let e=t||"black";return e.charAt(0)==="#"&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase(),e=Nt.namedColors[e]||e,e}normalizeByte(t){return t<0||isNaN(t)?0:t>255?255:t}padDigit(t){return t.length===1?"0"+t:t}brightness(t){const e=Math.round;return this.r=e(this.normalizeByte(this.r*t)),this.g=e(this.normalizeByte(this.g*t)),this.b=e(this.normalizeByte(this.b*t)),this}percBrightness(){return Math.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)}isDark(){return this.percBrightness()<Yx}static fromBytes(t,e,s,i){return new je(t,e,s,i??1)}static fromRGB(t,e,s,i){return new Ze(t,e,s,i??1)}static fromHSV(t,e,s,i){return new hl(t,e,s,i??1)}static fromHSL(t,e,s,i){return new jp(t,e,s,i??1)}}Nt.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(r){return[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(r){return[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(r){return[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)]}}];Nt.namedColors=Kl;class se extends Lt{observers(){return this._observers=this._observers||[],this._observers}addObserver(t){return this._observers?this._observers.push(t):this._observers=[t],this}removeObserver(t){const e=this.observers(),s=e.indexOf(t);return s!==-1&&e.splice(s,1),this}trigger(t,e){const s=this._observers;if(s&&!this._suspended)for(let i=0;i<s.length;i++){let n=s[i];n[t]&&n[t](e)}return this}optionsChange(t={}){t.element=this,this.trigger("optionsChange",t)}geometryChange(){this.trigger("geometryChange",{element:this})}suspend(){return this._suspended=(this._suspended||0)+1,this}resume(){return this._suspended=Math.max((this._suspended||0)-1,0),this}_observerField(t,e){this[t]&&this[t].removeObserver(this),this[t]=e,e.addObserver(this)}}const qx={}.toString;class Ks extends se{constructor(t,e=""){super(),this.prefix=e;for(let s in t){let i=t[s];i=this._wrap(i,s),this[s]=i}}get(t){const e=t.split(".");let s=this;for(;e.length&&s;){let i=e.shift();s=s[i]}return s}set(t,e){this.get(t)!==e&&(this._set(t,this._wrap(e,t)),this.optionsChange({field:this.prefix+t,value:e}))}_set(t,e){const s=t.indexOf(".")>=0;let i=this,n=t;if(s){const o=n.split(".");let a=this.prefix;for(;o.length>1;){n=o.shift(),a+=n+".";let l=i[n];l||(l=new Ks({},a),l.addObserver(this),i[n]=l),i=l}n=o[0]}i._clear(n),i[n]=e}_clear(t){const e=this[t];e&&e.removeObserver&&e.removeObserver(this)}_wrap(t,e){const s=qx.call(t);let i=t;return i!=null&&s==="[object Object]"&&(!(t instanceof Ks)&&!(t instanceof Lt)&&(i=new Ks(i,this.prefix+e+".")),i.addObserver(this)),i}}function Zx(r){return function(t){return this[r]!==t&&(this[r]=t,this.geometryChange()),this}}function Qx(r){return function(){return this[r]}}function Kx(r,t){for(let e=0;e<t.length;e++){let s=t[e],i=s.charAt(0).toUpperCase()+s.substring(1,s.length);r["set"+i]=Zx(s),r["get"+i]=Qx(s)}}const $r=(r,t)=>{const e=class extends r{};return Kx(e.prototype,t),e};function Un(r,t){return r.push.apply(r,t),r}const Jx={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"};function ty(r){const t=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1];let e="";for(;r>0;)r<t[0]?t.shift():(e+=Jx[t[0]],r-=t[0]);return e}function jn(){let r,t;const e=new Promise((s,i)=>{r=n=>(e._state="resolved",s(n),e),t=n=>(e._state="rejected",i(n),e)});return e._state="pending",e.resolve=r,e.reject=t,e.state=()=>e._state,e}const ey="undefined";function Jl(r){return typeof r!==ey}let sy=1;function Gn(){return"kdef"+sy++}const th=Math.PI/180,Ei=Number.MAX_VALUE,Mi=-Number.MAX_VALUE;function Ts(r){return r/th}const Ee=String.fromCharCode;function iy(r){let t="";for(let e=0;e<r.length;e++){let s=r.charCodeAt(e);if(55296<=s&&s<=56319){const i=s,n=r.charCodeAt(++e);isNaN(n)||(s=(i-55296)*1024+(n-56320)+65536)}s<128?t+=Ee(s):s<2048?(t+=Ee(192|s>>>6),t+=Ee(128|s&63)):s<65536?(t+=Ee(224|s>>>12),t+=Ee(128|s>>>6&63),t+=Ee(128|s&63)):s<1114111&&(t+=Ee(240|s>>>18),t+=Ee(128|s>>>12&63),t+=Ee(128|s>>>6&63),t+=Ee(128|s&63))}return t}const Do="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Gp(r){let t="",e=0;const s=iy(r);for(;e<s.length;){let i=s.charCodeAt(e++),n=s.charCodeAt(e++),o=s.charCodeAt(e++),a=i>>2,l=(i&3)<<4|n>>4,h=(n&15)<<2|o>>6,c=o&63;isNaN(n)?h=c=64:isNaN(o)&&(c=64),t=t+Do.charAt(a)+Do.charAt(l)+Do.charAt(h)+Do.charAt(c)}return t}function $p(r){return(r.x||{}).location!==void 0?{x:r.x.location,y:r.y.location}:{x:r.pageX||r.clientX||0,y:r.pageY||r.clientY||0}}function Wp(r={}){return r.touch?r.touch.initialTouch:r.target}function ni(r){return r===""||r===null||r==="none"||r==="transparent"||r===void 0}function St(r){if(r)return r[r.length-1]}function dr(r,t,e){return Math.max(Math.min(r,e),t)}function ny(r,t){if(r.length<2)return r.slice();function e(s,i){for(var n=[],o=0,a=0,l=0;o<s.length&&a<i.length;)t(s[o],i[a])<=0?n[l++]=s[o++]:n[l++]=i[a++];return o<s.length&&n.push.apply(n,s.slice(o)),a<i.length&&n.push.apply(n,i.slice(a)),n}return(function s(i){if(i.length<=1)return i;var n=Math.floor(i.length/2),o=i.slice(0,n),a=i.slice(n);return o=s(o),a=s(a),e(o,a)})(r)}function Xp(r){return Promise.all(r)}function Le(r){return r*th}function oy(r){return r?Math.pow(10,r):1}function nt(r,t){const e=oy(t);return Math.round(r*e)/e}function ur(r,t){return r!==void 0?r:t}function eh(r,t){for(let e in t){const s=e.trim().split(" ");for(let i=0;i<s.length;i++)r.addEventListener(s[i],t[e],!1)}}function Yp(r){const t=r.getBoundingClientRect(),e=document.documentElement;return{top:t.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||0),left:t.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}}function Wr(r,t){const e={},s=window.getComputedStyle(r)||{},i=Array.isArray(t)?t:[t];for(let n=0;n<i.length;n++){let o=i[n];e[o]=s[o]}return e}function qc(r){return isNaN(r)?r:r+"px"}function Bn(r,t){if(t){const{width:e,height:s}=t;e!==void 0&&(r.style.width=qc(e)),s!==void 0&&(r.style.height=qc(s))}else{const e=Wr(r,["width","height"]);return{width:parseInt(e.width,10),height:parseInt(e.height,10)}}}function sh(r,t={}){for(let e in t){const s=e.trim().split(" ");for(let i=0;i<s.length;i++)r.removeEventListener(s[i],t[e],!1)}}function qp(r){const{paddingLeft:t,paddingTop:e}=Wr(r,["paddingLeft","paddingTop"]);return{top:parseFloat(e),left:parseFloat(t)}}let It=class vs extends Lt{constructor(t=0,e=0,s=0,i=0,n=0,o=0){super(),this.a=t,this.b=e,this.c=s,this.d=i,this.e=n,this.f=o}multiplyCopy(t){return new vs(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)}invert(){const{a:t,b:e,c:s,d:i,e:n,f:o}=this,a=t*i-e*s;return a===0?null:new vs(i/a,-e/a,-s/a,t/a,(s*o-i*n)/a,(e*n-t*o)/a)}clone(){return new vs(this.a,this.b,this.c,this.d,this.e,this.f)}equals(t){return t?this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f:!1}round(t){return this.a=nt(this.a,t),this.b=nt(this.b,t),this.c=nt(this.c,t),this.d=nt(this.d,t),this.e=nt(this.e,t),this.f=nt(this.f,t),this}toArray(t){const e=[this.a,this.b,this.c,this.d,this.e,this.f];if(t!==void 0)for(let s=0;s<e.length;s++)e[s]=nt(e[s],t);return e}toString(t,e=","){return this.toArray(t).join(e)}static translate(t,e){return new vs(1,0,0,1,t,e)}static unit(){return new vs(1,0,0,1,0,0)}static rotate(t,e,s){const i=new vs;return i.a=Math.cos(Le(t)),i.b=Math.sin(Le(t)),i.c=-i.b,i.d=i.a,i.e=e-e*i.a+s*i.b||0,i.f=s-s*i.a-e*i.b||0,i}static scale(t,e){return new vs(t,0,0,e,0,0)}};It.IDENTITY=It.unit();const ry=/matrix\((.*)\)/;function ay(r){const t=r.match(ry);if(t===null||t.length!==2)return It.unit();const e=t[1].split(",").map(s=>parseFloat(s));return new It(...e)}function Zc(r){const t=getComputedStyle(r).transform;return t==="none"?It.unit():ay(t)}function Zp(r){if(!r)return It.unit();let t=Zc(r),e=r.parentElement;for(;e;){const s=Zc(e);t=t.multiplyCopy(s),e=e.parentElement}return t.b=t.c=t.e=t.f=0,t}class Qp extends Lt{constructor(t){super(),this._size=t,this._length=0,this._map={}}put(t,e){const s=this._map,i={key:t,value:e};s[t]=i,this._head?(this._tail.newer=i,i.older=this._tail,this._tail=i):this._head=this._tail=i,this._length>=this._size?(s[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++}get(t){const e=this._map[t];if(e)return e===this._head&&e!==this._tail&&(this._head=e.newer,this._head.older=null),e!==this._tail&&(e.older&&(e.older.newer=e.newer,e.newer.older=e.older),e.older=this._tail,e.newer=null,this._tail.newer=e,this._tail=e),e.value}}const ly=/\r?\n|\r|\t/g,hy=" ";function ih(r){return String(r).replace(ly,hy)}function Kp(r){const t=[];for(let e in r)t.push(e+r[e]);return t.sort().join("")}function Jp(r){let t=2166136261;for(let e=0;e<r.length;++e)t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24),t^=r.charCodeAt(e);return t>>>0}function Qc(){return{width:0,height:0,baseline:0}}const cy={baselineMarkerSize:1};let ae;typeof document<"u"&&(ae=document.createElement("div"),ae.style.setProperty("position","absolute","important"),ae.style.setProperty("top","-4000px","important"),ae.style.setProperty("width","auto","important"),ae.style.setProperty("height","auto","important"),ae.style.setProperty("padding","0","important"),ae.style.setProperty("margin","0","important"),ae.style.setProperty("border","0","important"),ae.style.setProperty("line-height","normal","important"),ae.style.setProperty("visibility","hidden","important"),ae.style.setProperty("white-space","pre","important"));class pr extends Lt{constructor(t){super(),this._cache=new Qp(1e3),this.options=Object.assign({},cy,t)}measure(t,e,s={}){if(typeof t>"u"||t===null)return Qc();const i=Kp(e),n=Jp(t+i),o=this._cache.get(n);if(o)return o;const a=Qc(),l=s.box||ae,h=this._baselineMarker().cloneNode(!1);for(let d in e){let u=e[d];typeof u<"u"&&(l.style[d]=u)}const c=s.normalizeText!==!1?ih(t):String(t);return l.textContent=c,l.appendChild(h),document.body.appendChild(l),c.length&&(a.width=l.offsetWidth-this.options.baselineMarkerSize,a.height=l.offsetHeight,a.baseline=h.offsetTop+this.options.baselineMarkerSize),a.width>0&&a.height>0&&this._cache.put(n,a),l.parentNode.removeChild(l),a}_baselineMarker(){const t=document.createElement("div");return t.style.display="inline-block",t.style.verticalAlign="baseline",t.style.width=this.options.baselineMarkerSize+"px",t.style.height=this.options.baselineMarkerSize+"px",t.style.overflow="hidden",t}}pr.current=new pr;function Xr(r,t,e){return pr.current.measure(r,t,e)}var dy=function(){return typeof window<"u"},Ia={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)(\.(\d+(\.\d+)?))?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},uy={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},Ra={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i},py={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i},Kc=function(r,t,e){for(var s in t)if(t.hasOwnProperty(s)&&t[s].test(r))return s;return e!==void 0?e:r},gy=function(r){var t,e=[];for(var s in Ia)if(Ia.hasOwnProperty(s)){if(e=r.match(Ia[s]),!e)continue;if(s==="windows"&&"plugins"in window.navigator)return null;var i={};return i.device=s,i.browser=Kc(r,py,"default"),i.name=Kc(s,uy),i[i.name]=!0,i.majorVersion=e[2],i.minorVersion=e[3]?e[3].replace("_","."):".0",t=i.minorVersion.replace(".","").substr(0,2),i.flatVersion=i.majorVersion+t+new Array(3-(t.length<3?t.length:2)).join("0"),i.cordova=typeof window.PhoneGap!==void 0||typeof window.cordova!==void 0,i.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||i.cordova,i}return null},fy=function(r){var t=null,e=[];for(var s in Ra)if(Ra.hasOwnProperty(s)&&(e=r.match(Ra[s]),e)){t={},t[s]=!0,t[e[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,t.version=parseInt(document.documentMode||e[2],10);break}return t},gr=dy()&&window.navigator?window.navigator.userAgent:null,fr=gr?fy(gr):null;gr&&gy(gr);fr&&!fr.chrome&&window.MSPointerEvent;fr&&!fr.chrome&&window.PointerEvent;var my=/\/\*[\s\S]*?\*\//g,Jc=/([^\s:;]+?)\s*:\s*((?:(?:url\(\s*(?:(?:[^"')\\]|\\.)*|"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\s*\)|"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|[^;"'])*?)\s*)(?=;|$)/gi,xy=/&quot;|&#34;|&#x22;/gi,yy=/&apos;|&#39;|&#x27;/gi,vy='"',by="'",td="";function wy(r){return r.replace(xy,vy).replace(yy,by)}function _y(r){for(var t={},e=wy((r||td).replace(my,td)),s=Jc.exec(e),i,n;s!==null;)i=s[1].trim(),n=s[2].trim(),t[i]=n,s=Jc.exec(e);return t}const Ay=(r,t)=>{const e=_y(t);Object.keys(e).forEach(s=>{r.style[s]=e[s]})},Jo="data-style",tg=r=>(r||"").replace(/\sstyle=/g," "+Jo+"="),eg=r=>{Array.from(r.querySelectorAll("["+Jo+"]")).forEach(t=>{const e=t.getAttribute(Jo);t.removeAttribute(Jo),Ay(t,e)})},sg=(r,t)=>{r.innerHTML=tg(t),eg(r)},ig=Object.freeze(Object.defineProperty({__proto__:null,DEG_TO_RAD:th,LRUCache:Qp,MAX_NUM:Ei,MIN_NUM:Mi,TextMetrics:pr,append:Un,arabicToRoman:ty,bindEvents:eh,createPromise:jn,defined:Jl,definitionId:Gn,deg:Ts,elementOffset:Yp,elementPadding:qp,elementScale:Zp,elementSize:Bn,elementStyles:Wr,encodeBase64:Gp,eventCoordinates:$p,eventElement:Wp,hashKey:Jp,isTransparent:ni,last:St,limitValue:dr,measureText:Xr,mergeSort:ny,normalizeText:ih,now:Hn,objectKey:Kp,promiseAll:Xp,rad:Le,round:nt,setInnerHTML:sg,unbindEvents:sh,valueOrDefault:ur},Symbol.toStringTag,{value:"Module"}));function oi(r){return r&&typeof r.matrix=="function"?r.matrix():r}let w=class le extends $r(se,["x","y"]){constructor(t,e){super(),this.x=t||0,this.y=e||0}equals(t){return t&&t.x===this.x&&t.y===this.y}clone(){return new le(this.x,this.y)}rotate(t,e){const s=le.create(e)||le.ZERO;return this.transform(It.rotate(t,s.x,s.y))}translate(t,e){return this.x+=t,this.y+=e,this.geometryChange(),this}translateWith(t){return this.translate(t.x,t.y)}move(t,e){return this.x=this.y=0,this.translate(t,e)}scale(t,e=t){return this.x*=t,this.y*=e,this.geometryChange(),this}scaleCopy(t,e){return this.clone().scale(t,e)}transform(t){const e=oi(t),{x:s,y:i}=this;return this.x=e.a*s+e.c*i+e.e,this.y=e.b*s+e.d*i+e.f,this.geometryChange(),this}transformCopy(t){const e=this.clone();return t&&e.transform(t),e}distanceTo(t){const e=this.x-t.x,s=this.y-t.y;return Math.sqrt(e*e+s*s)}round(t){return this.x=nt(this.x,t),this.y=nt(this.y,t),this.geometryChange(),this}toArray(t){const e=t!==void 0,s=e?nt(this.x,t):this.x,i=e?nt(this.y,t):this.y;return[s,i]}toString(t,e=" "){let{x:s,y:i}=this;return t!==void 0&&(s=nt(s,t),i=nt(i,t)),s+e+i}static create(t,e){if(t!==void 0)return t instanceof le?t:arguments.length===1&&t.length===2?new le(t[0],t[1]):new le(t,e)}static min(){let t=Ei,e=Ei;for(let s=0;s<arguments.length;s++){let i=arguments[s];t=Math.min(i.x,t),e=Math.min(i.y,e)}return new le(t,e)}static max(){let t=Mi,e=Mi;for(let s=0;s<arguments.length;s++){const i=arguments[s];t=Math.max(i.x,t),e=Math.max(i.y,e)}return new le(t,e)}static minPoint(){return new le(Mi,Mi)}static maxPoint(){return new le(Ei,Ei)}static get ZERO(){return new le(0,0)}};class zt extends $r(se,["width","height"]){constructor(t,e){super(),this.width=t||0,this.height=e||0}equals(t){return t&&t.width===this.width&&t.height===this.height}clone(){return new zt(this.width,this.height)}toArray(t){const e=t!==void 0,s=e?nt(this.width,t):this.width,i=e?nt(this.height,t):this.height;return[s,i]}static create(t,e){if(t!==void 0)return t instanceof zt?t:arguments.length===1&&t.length===2?new zt(t[0],t[1]):new zt(t,e)}static get ZERO(){return new zt(0,0)}}let H=class Ws extends se{constructor(t=new w,e=new zt,s=0){super(),this.setOrigin(t),this.setSize(e),this.setCornerRadius(s)}clone(){return new Ws(this.origin.clone(),this.size.clone())}equals(t){return t&&t.origin.equals(this.origin)&&t.size.equals(this.size)}setOrigin(t){return this._observerField("origin",w.create(t)),this.geometryChange(),this}getOrigin(){return this.origin}setCornerRadius(t){return this.cornerRadius=Array.isArray(t)?t:[t,t],this.geometryChange(),this}getCornerRadius(){return this.cornerRadius}setSize(t){return this._observerField("size",zt.create(t)),this.geometryChange(),this}getSize(){return this.size}width(){return this.size.width}height(){return this.size.height}topLeft(){return this.origin.clone()}bottomRight(){return this.origin.clone().translate(this.width(),this.height())}topRight(){return this.origin.clone().translate(this.width(),0)}bottomLeft(){return this.origin.clone().translate(0,this.height())}center(){return this.origin.clone().translate(this.width()/2,this.height()/2)}bbox(t){const e=this.topLeft().transformCopy(t),s=this.topRight().transformCopy(t),i=this.bottomRight().transformCopy(t),n=this.bottomLeft().transformCopy(t);return Ws.fromPoints(e,s,i,n)}transformCopy(t){return Ws.fromPoints(this.topLeft().transform(t),this.bottomRight().transform(t))}expand(t,e=t){return this.size.width+=2*t,this.size.height+=2*e,this.origin.translate(-t,-e),this}expandCopy(t,e){return this.clone().expand(t,e)}containsPoint(t){const e=this.origin,s=this.bottomRight();return!(t.x<e.x||t.y<e.y||s.x<t.x||s.y<t.y)}_isOnPath(t,e){const s=this.expandCopy(e,e),i=this.expandCopy(-e,-e);return s.containsPoint(t)&&!i.containsPoint(t)}static fromPoints(){const t=w.min.apply(null,arguments),e=w.max.apply(null,arguments),s=new zt(e.x-t.x,e.y-t.y);return new Ws(t,s)}static union(t,e){return Ws.fromPoints(w.min(t.topLeft(),e.topLeft()),w.max(t.bottomRight(),e.bottomRight()))}static intersect(t,e){const s={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y},i={left:e.topLeft().x,top:e.topLeft().y,right:e.bottomRight().x,bottom:e.bottomRight().y};if(s.left<=i.right&&i.left<=s.right&&s.top<=i.bottom&&i.top<=s.bottom)return Ws.fromPoints(new w(Math.max(s.left,i.left),Math.max(s.top,i.top)),new w(Math.min(s.right,i.right),Math.min(s.bottom,i.bottom)))}};class mr extends se{constructor(t=It.unit()){super(),this._matrix=t}clone(){return new mr(this._matrix.clone())}equals(t){return t&&t._matrix.equals(this._matrix)}translate(t,e){return this._matrix=this._matrix.multiplyCopy(It.translate(t,e)),this._optionsChange(),this}scale(t,e=t,s=null){let i=s;return i&&(i=w.create(i),this._matrix=this._matrix.multiplyCopy(It.translate(i.x,i.y))),this._matrix=this._matrix.multiplyCopy(It.scale(t,e)),i&&(this._matrix=this._matrix.multiplyCopy(It.translate(-i.x,-i.y))),this._optionsChange(),this}rotate(t,e){const s=w.create(e)||w.ZERO;return this._matrix=this._matrix.multiplyCopy(It.rotate(t,s.x,s.y)),this._optionsChange(),this}multiply(t){const e=oi(t);return this._matrix=this._matrix.multiplyCopy(e),this._optionsChange(),this}matrix(t){return t?(this._matrix=t,this._optionsChange(),this):this._matrix}_optionsChange(){this.optionsChange({field:"transform",value:this})}}function K(r){return r===null?null:r instanceof mr?r:new mr(r)}const ng={dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},xr="solid",og="butt",Zi="Pattern";class Be extends se{get nodeType(){return"Rect"}constructor(t){super(),this._initOptions(t)}_initOptions(t={}){const{clip:e,transform:s}=t;s&&(t.transform=K(s)),e&&!e.id&&(e.id=Gn()),this.options=new Ks(t),this.options.addObserver(this)}transform(t){if(t!==void 0)this.options.set("transform",K(t));else return this.options.get("transform")}parentTransform(){let t=this,e;for(;t.parent;){t=t.parent;let s=t.transform();s&&(e=s.matrix().multiplyCopy(e||It.unit()))}if(e)return K(e)}currentTransform(t=this.parentTransform()){const e=this.transform(),s=oi(e);let i=oi(t),n;if(s&&i?n=i.multiplyCopy(s):n=s||i,n)return K(n)}visible(t){return t!==void 0?(this.options.set("visible",t),this):this.options.get("visible")!==!1}clip(t){const e=this.options;return t!==void 0?(t&&!t.id&&(t.id=Gn()),e.set("clip",t),this):e.get("clip")}opacity(t){return t!==void 0?(this.options.set("opacity",t),this):ur(this.options.get("opacity"),1)}className(t){return t!==void 0?(this.options.set("className",t),this):this.options.get("className")}clippedBBox(t){const e=this._clippedBBox(t);if(e){const s=this.clip();return s?H.intersect(e,s.bbox(t)):e}}containsPoint(t,e){if(this.visible()){const s=this.currentTransform(e);let i=t;return s&&(i=t.transformCopy(s.matrix().invert())),this._hasFill()&&this._containsPoint(i)||this._isOnPath&&this._hasStroke()&&this._isOnPath(i)}return!1}_hasFill(){const t=this.options.fill;return t&&(t.nodeType===Zi||!ni(t.color))}_hasStroke(){const t=this.options.stroke;return t&&t.width>0&&!ni(t.color)}_clippedBBox(t){return this.bbox(t)}}function rg(r,t,e,s){let i=0,n=0;return s&&(i=Math.atan2(s.c*e,s.a*t),s.b!==0&&(n=Math.atan2(s.d*e,s.b*t))),{x:i,y:n}}const ed=Math.PI/2;let Rt=class ag extends $r(se,["radius"]){constructor(t=new w,e=0){super(),this.setCenter(t),this.setRadius(e)}setCenter(t){return this._observerField("center",w.create(t)),this.geometryChange(),this}getCenter(){return this.center}equals(t){return t&&t.center.equals(this.center)&&t.radius===this.radius}clone(){return new ag(this.center.clone(),this.radius)}pointAt(t){return this._pointAt(Le(t))}bbox(t){const e=rg(this.center,this.radius,this.radius,t);let s=w.maxPoint(),i=w.minPoint();for(let n=0;n<4;n++){let o=this._pointAt(e.x+n*ed).transformCopy(t),a=this._pointAt(e.y+n*ed).transformCopy(t),l=new w(o.x,a.y);s=w.min(s,l),i=w.max(i,l)}return H.fromPoints(s,i)}_pointAt(t){const{center:e,radius:s}=this;return new w(e.x+s*Math.cos(t),e.y+s*Math.sin(t))}containsPoint(t){const{center:e,radius:s}=this;return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(s,2)}_isOnPath(t,e){const{center:s,radius:i}=this,n=s.distanceTo(t);return i-e<=n&&n<=i+e}};const Sy="Gradient",Qi=r=>class extends r{fill(t,e){const s=this.options;if(t!==void 0){if(t&&t.nodeType!==Sy){const i={color:t};e!==void 0&&(i.opacity=e),s.set("fill",i)}else s.set("fill",t);return this}return s.get("fill")}stroke(t,e,s){return t!==void 0?(this.options.set("stroke.color",t),e!==void 0&&this.options.set("stroke.width",e),s!==void 0&&this.options.set("stroke.opacity",s),this):this.options.get("stroke")}},ky=It.IDENTITY.toString(),ro=r=>class extends r{bbox(t){const e=oi(this.currentTransform(t)),s=e?e.toString():ky;let i;this._bboxCache&&this._matrixHash===s?i=this._bboxCache.clone():(i=this._bbox(e),this._bboxCache=i?i.clone():null,this._matrixHash=s);const n=this.options.get("stroke.width");return n&&i&&i.expand(n/2),i}geometryChange(){delete this._bboxCache,this.trigger("geometryChange",{element:this})}};function Cy(r){const t="_"+r;return function(e){return e!==void 0?(this._observerField(t,e),this.geometryChange(),this):this[t]}}function Ty(r,t){for(let e=0;e<t.length;e++)r[t[e]]=Cy(t[e])}const Yr=(r,t=["geometry"])=>{const e=class extends r{};return Ty(e.prototype,t),e},Py="#000";let Kt=class extends Qi(ro(Yr(Be))){get nodeType(){return"Circle"}constructor(t=new Rt,e={}){super(e),this.geometry(t),this.options.stroke===void 0&&this.stroke(Py)}rawBBox(){return this._geometry.bbox()}_bbox(t){return this._geometry.bbox(t)}_containsPoint(t){return this.geometry().containsPoint(t)}_isOnPath(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)}};const Ke=10;function lg(r,t,e=Ke){return nt(Math.abs(r-t),e)===0}function La(r,t,e){return r<t||lg(r,t,e)}function Ey(r,t,e,s){const i=t.x-r.x,n=s.x-e.x,o=t.y-r.y,a=s.y-e.y,l=r.x-e.x,h=r.y-e.y,c=i*a-n*o,d=(i*h-o*l)/c,u=(n*h-a*l)/c;if(d>=0&&d<=1&&u>=0&&u<=1)return new w(r.x+u*i,r.y+u*o)}const My=45,zo=Math.pow,Iy=["radiusX","radiusY","startAngle","endAngle","anticlockwise"];let Ps=class cl extends $r(se,Iy){constructor(t=new w,e={}){super(),this.setCenter(t),this.radiusX=e.radiusX,this.radiusY=e.radiusY||e.radiusX,this.startAngle=e.startAngle,this.endAngle=e.endAngle,this.anticlockwise=e.anticlockwise||!1,this.xRotation=e.xRotation}clone(){return new cl(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})}setCenter(t){return this._observerField("center",w.create(t)),this.geometryChange(),this}getCenter(){return this.center}pointAt(t){const e=this.center,s=Le(t);return new w(e.x+this.radiusX*Math.cos(s),e.y+this.radiusY*Math.sin(s))}curvePoints(){const t=this.startAngle,e=this.anticlockwise?-1:1,s=[this.pointAt(t)],i=this._arcInterval(),n=i.endAngle-i.startAngle,o=Math.ceil(n/My),a=n/o;let l=t,h;this.xRotation&&(h=K().rotate(this.xRotation,this.center));for(let c=1;c<=o;c++){const d=l+e*a,u=this._intervalCurvePoints(l,d,h);s.push(u.cp1,u.cp2,u.p2),l=d}return s}bbox(t){const e=this._arcInterval(),s=e.startAngle,i=e.endAngle,n=rg(this.center,this.radiusX,this.radiusY,t),o=Ts(n.x),a=Ts(n.y),l=this.pointAt(i).transformCopy(t);let h=id(o,s),c=id(a,s),d=this.pointAt(s).transformCopy(t),u=w.min(d,l),p=w.max(d,l);for(;h<i||c<i;){let g;h<i&&(g=this.pointAt(h).transformCopy(t),h+=90);let f;c<i&&(f=this.pointAt(c).transformCopy(t),c+=90),d=new w(g.x,f.y),u=w.min(u,d),p=w.max(p,d)}return H.fromPoints(u,p)}_arcInterval(){let{startAngle:t,endAngle:e,anticlockwise:s}=this;if(s){let i=t;t=e,e=i}return(t>e||s&&t===e)&&(e+=360),{startAngle:t,endAngle:e}}_intervalCurvePoints(t,e,s){const i=this.pointAt(t),n=this.pointAt(e),o=this._derivativeAt(t),a=this._derivativeAt(e),l=(Le(e)-Le(t))/3,h=new w(i.x+l*o.x,i.y+l*o.y),c=new w(n.x-l*a.x,n.y-l*a.y);return s&&(i.transform(s),n.transform(s),h.transform(s),c.transform(s)),{p1:i,cp1:h,cp2:c,p2:n}}_derivativeAt(t){const e=Le(t);return new w(-this.radiusX*Math.sin(e),this.radiusY*Math.cos(e))}containsPoint(t){const e=this._arcInterval(),s=e.endAngle-e.startAngle,{center:i,radiusX:n,radiusY:o}=this,a=i.distanceTo(t),l=Math.atan2(t.y-i.y,t.x-i.x),h=n*o/Math.sqrt(zo(n,2)*zo(Math.sin(l),2)+zo(o,2)*zo(Math.cos(l),2)),c=this.pointAt(this.startAngle).round(Ke),d=this.pointAt(this.endAngle).round(Ke),u=Ey(i,t.round(Ke),c,d);let p;if(s<180)p=u&&La(i.distanceTo(u),a)&&La(a,h);else{let g=sd(i.x,i.y,n,o,t.x,t.y);g!==360&&(g=(360+g)%360);let f=e.startAngle<=g&&g<=e.endAngle;p=f&&La(a,h)||!f&&(!u||u.equals(t))}return p}_isOnPath(t,e){const s=this._arcInterval(),i=this.center;let n=sd(i.x,i.y,this.radiusX,this.radiusY,t.x,t.y);return n!==360&&(n=(360+n)%360),s.startAngle<=n&&n<=s.endAngle&&this.pointAt(n).distanceTo(t)<=e}static fromPoints(t,e,s,i,n,o,a){const l=Ry({x1:t.x,y1:t.y,x2:e.x,y2:e.y,rx:s,ry:i,largeArc:n,swipe:o,rotation:a});return new cl(l.center,{startAngle:l.startAngle,endAngle:l.endAngle,radiusX:l.radiusX,radiusY:l.radiusY,xRotation:l.xRotation,anticlockwise:o===0})}};function sd(r,t,e,s,i,n){const o=nt((i-r)/e,3),a=nt((n-t)/s,3);return nt(Ts(Math.atan2(a,o)))}function Ry(r){let{x1:t,y1:e,x2:s,y2:i,rx:n,ry:o,largeArc:a,swipe:l,rotation:h=0}=r;const c=Le(h),d=Math.cos(c),u=Math.sin(c),p=d*(t-s)/2+u*(e-i)/2,g=-u*(t-s)/2+d*(e-i)/2,f=a!==l?1:-1,x=Math.pow(p,2),y=Math.pow(g,2);let v=Math.pow(n,2),k=Math.pow(o,2),E=x/v+y/k;E>1&&(E=Math.sqrt(x/v+y/k),n=E*n,v=Math.pow(n,2),o=E*o,k=Math.pow(o,2));let I=f*Math.sqrt((v*k-v*y-k*x)/(v*y+k*x));isNaN(I)&&(I=0);const B=I*(n*g)/o,V=-I*(o*p)/n,q=d*B-u*V+(t+s)/2,ht=u*B+d*V+(e+i)/2,$=(p-B)/n,mt=(g-V)/o,xt=-(p+B)/n,Pe=-(g+V)/o,ms=(mt>=0?1:-1)*Ts(Math.acos($/Math.sqrt($*$+mt*mt))),J=nt(($*xt+mt*Pe)/(Math.sqrt($*$+mt*mt)*Math.sqrt(xt*xt+Pe*Pe)),10);let Z=($*Pe-mt*xt>=0?1:-1)*Ts(Math.acos(J));!l&&Z>0&&(Z-=360),l&&Z<0&&(Z+=360);let ct=ms+Z;const _t=ct>=0?1:-1;return ct=Math.abs(ct)%360*_t,{center:new w(q,ht),startAngle:ms,endAngle:ct,radiusX:n,radiusY:o,xRotation:h}}function id(r,t){let e=r;for(;e<t;)e+=90;return e}const Ly=[].splice,Oy=[].slice;class hg extends se{constructor(t=[]){super(),this.length=0,this._splice(0,t.length,t)}elements(t){return t?(this._splice(0,this.length,t),this._change(),this):this.slice(0)}push(...t){let e=this.length;const s=t.length;for(let i=0;i<s;i++)this[e+i]=t[i],t[i].addObserver(this);return this.length=e+s,this._change(),this.length}slice(){return Oy.call(this)}pop(){if(this.length>0){const t=this[this.length-1];return this.length--,t.removeObserver(this),this._change(),t}}splice(t,e,...s){const i=this._splice(t,e,s);return this._change(),i}shift(){if(this.length>0){const t=this[0];for(let e=1;e<this.length;e++)this[e-1]=this[e];return this.length--,t.removeObserver(this),this._change(),t}}unshift(...t){const e=t.length;for(let s=this.length-1;s>=0;s--)this[s+e]=this[s];for(let s=0;s<e;s++)this[s]=t[s],t[s].addObserver(this);return this.length+=e,this._change(),this.length}indexOf(t){const e=this.length;for(let s=0;s<e;s++)if(this[s]===t)return s;return-1}_splice(t,e,s){const i=Ly.apply(this,[t,e].concat(s));return this._clearObserver(i),this._setObserver(s),i}_add(t){this._setObserver(t),this._change()}_remove(t){this._clearObserver(t),this._change()}_setObserver(t){for(let e=0;e<t.length;e++)t[e].addObserver(this)}_clearObserver(t){for(let e=0;e<t.length;e++)t[e].removeObserver(this)}_change(){}}class cg extends hg{_change(){this.geometryChange()}}function nd(r,t,e){const s=Ts(Math.atan2(t.y-r.y,t.x-r.x));return e.transformCopy(K().rotate(-s,r)).x<r.x}function yr(r,t,e){const s=1-r;return Math.pow(s,3)*e[0][t]+3*Math.pow(s,2)*r*e[1][t]+3*Math.pow(r,2)*s*e[2][t]+Math.pow(r,3)*e[3][t]}function dg(r,t){return[-r[0][t]+3*r[1][t]-3*r[2][t]+r[3][t],3*(r[0][t]-2*r[1][t]+r[2][t]),3*(-r[0][t]+r[1][t]),r[0][t]]}class de extends Lt{constructor(t=0,e=0){super(),this.real=t,this.img=e}add(t){return new de(nt(this.real+t.real,Ke),nt(this.img+t.img,Ke))}addConstant(t){return new de(this.real+t,this.img)}negate(){return new de(-this.real,-this.img)}multiply(t){return new de(this.real*t.real-this.img*t.img,this.real*t.img+this.img*t.real)}multiplyConstant(t){return new de(this.real*t,this.img*t)}nthRoot(t){const e=Math.atan2(this.img,this.real),s=Math.sqrt(Math.pow(this.img,2)+Math.pow(this.real,2)),i=Math.pow(s,1/t);return new de(i*Math.cos(e/t),i*Math.sin(e/t))}equals(t){return this.real===t.real&&this.img===t.img}isReal(){return this.img===0}}function od(r){return r<0?-1:1}function By(r,t,e){const s=Math.sqrt(Math.pow(t,2)-4*r*e);return[(-t+s)/(2*r),(-t-s)/(2*r)]}function ug(r,t,e,s){if(r===0)return By(t,e,s);const i=(3*r*e-Math.pow(t,2))/(3*Math.pow(r,2)),n=(2*Math.pow(t,3)-9*r*t*e+27*Math.pow(r,2)*s)/(27*Math.pow(r,3)),o=Math.pow(i/3,3)+Math.pow(n/2,2),a=new de(0,1),l=-t/(3*r);let h,c,d,u,p,g,f;o<0?(h=new de(-n/2,Math.sqrt(-o)).nthRoot(3),c=new de(-n/2,-Math.sqrt(-o)).nthRoot(3)):(h=-n/2+Math.sqrt(o),h=new de(od(h)*Math.pow(Math.abs(h),1/3)),c=-n/2-Math.sqrt(o),c=new de(od(c)*Math.pow(Math.abs(c),1/3))),d=h.add(c),g=h.add(c).multiplyConstant(-1/2),f=h.add(c.negate()).multiplyConstant(Math.sqrt(3)/2),u=g.add(a.multiply(f)),p=g.add(a.negate().multiply(f));const x=[];return d.isReal()&&x.push(nt(d.real+l,Ke)),u.isReal()&&x.push(nt(u.real+l,Ke)),p.isReal()&&x.push(nt(p.real+l,Ke)),x}function Vo(r,t,e,s,i){const n=dg(r,s),o=ug(n[0],n[1],n[2],n[3]-t[s]);let a;for(let l=0;l<o.length;l++)if(0<=o[l]&&o[l]<=1&&(a=yr(o[l],e,r),Math.abs(a-t[e])<=i))return!0}function Dy(r,t,e){const s=dg(r,"x"),i=ug(s[0],s[1],s[2],s[3]-t.x);let n,o,a=0;for(let l=0;l<i.length;l++)n=yr(i[l],"y",r),o=lg(n,t.y)||n>t.y,o&&((i[l]===0||i[l]===1)&&e.bottomRight().x>t.x||0<i[l]&&i[l]<1)&&a++;return a}function pg(r,t,e){let s;if(r.x!==t.x){const i=Math.min(r.x,t.x),n=Math.max(r.x,t.x),o=Math.min(r.y,t.y),a=Math.max(r.y,t.y),l=i<=e.x&&e.x<n;o===a?s=e.y<=o&&l:s=l&&(a-o)*((r.x-t.x)*(r.y-t.y)>0?e.x-i:n-e.x)/(n-i)+o-e.y>=0}return s?1:0}function zy(r){const t="_"+r;return function(e){return e!==void 0?(this._observerField(t,w.create(e)),this.geometryChange(),this):this[t]}}function Vy(r,t){for(let e=0;e<t.length;e++)r[t[e]]=zy(t[e])}const qr=(r,t)=>{const e=class extends r{};return Vy(e.prototype,t),e},Ny=["anchor","controlIn","controlOut"];class Tt extends qr(se,Ny){constructor(t,e,s){super(),this.anchor(t||new w),this.controlIn(e),this.controlOut(s)}bboxTo(t,e){const s=this.anchor().transformCopy(e),i=t.anchor().transformCopy(e);let n;return this.controlOut()&&t.controlIn()?n=this._curveBoundingBox(s,this.controlOut().transformCopy(e),t.controlIn().transformCopy(e),i):n=this._lineBoundingBox(s,i),n}_lineBoundingBox(t,e){return H.fromPoints(t,e)}_curveBoundingBox(t,e,s,i){const n=[t,e,s,i],o=this._curveExtremesFor(n,"x"),a=this._curveExtremesFor(n,"y"),l=rd([o.min,o.max,t.x,i.x]),h=rd([a.min,a.max,t.y,i.y]);return H.fromPoints(new w(l.min,h.min),new w(l.max,h.max))}_curveExtremesFor(t,e){const s=this._curveExtremes(t[0][e],t[1][e],t[2][e],t[3][e]);return{min:yr(s.min,e,t),max:yr(s.max,e,t)}}_curveExtremes(t,e,s,i){const n=t-3*e+3*s-i,o=-2*(t-2*e+s),a=t-e,l=Math.sqrt(o*o-4*n*a);let h=0,c=1;n===0?o!==0&&(h=c=-a/o):isNaN(l)||(h=(-o+l)/(2*n),c=(-o-l)/(2*n));let d=Math.max(Math.min(h,c),0);(d<0||d>1)&&(d=0);let u=Math.min(Math.max(h,c),1);return(u>1||u<0)&&(u=1),{min:d,max:u}}_intersectionsTo(t,e){let s;return this.controlOut()&&t.controlIn()?s=Dy([this.anchor(),this.controlOut(),t.controlIn(),t.anchor()],e,this.bboxTo(t)):s=pg(this.anchor(),t.anchor(),e),s}_isOnCurveTo(t,e,s,i){if(this.bboxTo(t).expand(s,s).containsPoint(e)){const o=this.anchor(),a=this.controlOut(),l=t.controlIn(),h=t.anchor();if(i==="start"&&o.distanceTo(e)<=s)return!nd(o,a,e);if(i==="end"&&h.distanceTo(e)<=s)return!nd(h,l,e);const c=[o,a,l,h];if(Vo(c,e,"x","y",s)||Vo(c,e,"y","x",s))return!0;const d=K().rotate(45,e),u=[o.transformCopy(d),a.transformCopy(d),l.transformCopy(d),h.transformCopy(d)];return Vo(u,e,"x","y",s)||Vo(u,e,"y","x",s)}}_isOnLineTo(t,e,s){const i=this.anchor(),n=t.anchor(),o=Ts(Math.atan2(n.y-i.y,n.x-i.x));return new H([i.x,i.y-s/2],[i.distanceTo(n),s]).containsPoint(e.transformCopy(K().rotate(-o,i)))}_isOnPathTo(t,e,s,i){let n;return this.controlOut()&&t.controlIn()?n=this._isOnCurveTo(t,e,s/2,i):n=this._isOnLineTo(t,e,s),n}}function rd(r){let t=r.length,e=Ei,s=Mi;for(let i=0;i<t;i++)s=Math.max(s,r[i]),e=Math.min(e,r[i]);return{min:e,max:s}}const gg=.333,Fy=.01,he="x",ce="y";function Hy(r,t){const e=r.slice(0),s=[];let i=e.length;if(i>2&&(ad(0,e),i=e.length),i<2||i===2&&e[0].equals(e[1]))return s;let n=e[0],o=e[1],a=e[2];for(s.push(new Tt(n));n.equals(e[i-1]);)t=!0,e.pop(),i--;if(i===2){const d=Dn(n,o,he,ce);return St(s).controlOut(dl(d,n,o,he,ce)),s.push(new Tt(o,ul(d,n,o,he,ce))),s}let l,h;if(t){n=e[i-1],o=e[0],a=e[1];const d=Oa(n,o,a);l=d[1],h=d[0]}else{const d=Dn(n,o,he,ce);l=dl(d,n,o,he,ce)}let c=l;for(let d=0;d<=i-3;d++)if(ad(d,e),i=e.length,d+3<=i){n=e[d],o=e[d+1],a=e[d+2];const u=Oa(n,o,a);St(s).controlOut(c),c=u[1];const p=u[0];s.push(new Tt(o,p))}if(t){n=e[i-2],o=e[i-1],a=e[0];const d=Oa(n,o,a);St(s).controlOut(c),s.push(new Tt(o,d[0])),St(s).controlOut(d[1]),s.push(new Tt(a,h))}else{const d=Dn(o,a,he,ce);St(s).controlOut(c),s.push(new Tt(a,ul(d,o,a,he,ce)))}return s}function ad(r,t){for(;t[r+1]&&(t[r].equals(t[r+1])||t[r+1].equals(t[r+2]));)t.splice(r+1,1)}function Uy(r,t,e){let s=!1;if(r.x===t.x)s=!0;else if(t.x===e.x)(t.y<e.y&&r.y<=t.y||e.y<t.y&&t.y<=r.y)&&(s=!0);else{const i=fg(r,t),n=xg(i,e.x);!(r.y<=t.y&&e.y<=n)&&!(t.y<=r.y&&e.y>=n)&&(s=!0)}return s}function jy(r,t,e){const s=fg(r,t),i=xg(s,e.x);return r.x===t.x&&t.x===e.x||nt(i,1)===nt(e.y,1)}function fg(r,t){const e=(t.y-r.y)/(t.x-r.x);return[r.y-e*r.x,e]}function Oa(r,t,e){let s=he,i=ce,n=!1,o=!1,a;if(jy(r,t,e))a=Dn(r,t,he,ce);else{const c={x:hd(r,t,e,he),y:hd(r,t,e,ce)};if(c.x&&c.y)a=Dn(r,e,he,ce),n=!0;else if(Uy(r,t,e)&&(s=ce,i=he),c[s])a=0;else{let d;e[i]<r[i]&&r[i]<=t[i]||r[i]<e[i]&&t[i]<=r[i]?d=cd((e[i]-r[i])*(t[s]-r[s])):d=-cd((e[s]-r[s])*(t[i]-r[i])),a=Fy*d,o=!0}}const l=ul(a,r,t,s,i);if(o){const c=s;s=i,i=c}const h=dl(a,t,e,s,i);return n&&(ld(r,t,l,a),ld(t,e,h,a)),[l,h]}function ld(r,t,e,s){r.y<t.y?t.y<e.y?(e.x=r.x+(t.y-r.y)/s,e.y=t.y):e.y<r.y&&(e.x=t.x-(t.y-r.y)/s,e.y=r.y):e.y<t.y?(e.x=r.x-(r.y-t.y)/s,e.y=t.y):r.y<e.y&&(e.x=t.x+(r.y-t.y)/s,e.y=r.y)}function Dn(r,t,e,s){const i=t[e]-r[e],n=t[s]-r[s];let o;return i===0?o=0:o=n/i,o}function hd(r,t,e,s){return e[s]>t[s]&&t[s]>r[s]||e[s]<t[s]&&t[s]<r[s]}function dl(r,t,e,s,i){const n=t[s],a=(e[s]-n)*gg;return mg(n+a,t[i]+a*r,s,i)}function ul(r,t,e,s,i){const n=t[s],o=e[s],a=(o-n)*gg;return mg(o-a,e[i]-a*r,s,i)}function mg(r,t,e,s){const i=new w;return i[e]=r,i[s]=t,i}function xg(r,t){const e=r.length;let s=0;for(let i=0;i<e;i++)s+=Math.pow(t,i)*r[i];return s}function cd(r){return r<=0?-1:1}const dd={l:function(r,t){const{parameters:e,position:s}=t;for(let i=0;i<e.length;i+=2){let n=new w(e[i],e[i+1]);t.isRelative&&n.translateWith(s),r.lineTo(n.x,n.y),s.x=n.x,s.y=n.y}},c:function(r,t){const{parameters:e,position:s}=t;for(let i=0;i<e.length;i+=6){let n=new w(e[i],e[i+1]),o=new w(e[i+2],e[i+3]),a=new w(e[i+4],e[i+5]);t.isRelative&&(o.translateWith(s),n.translateWith(s),a.translateWith(s)),r.curveTo(n,o,a),s.x=a.x,s.y=a.y}},v:function(r,t){const e=t.isRelative?0:t.position.x;ud(t.parameters,!0,e),this.l(r,t)},h:function(r,t){const e=t.isRelative?0:t.position.y;ud(t.parameters,!1,e),this.l(r,t)},a:function(r,t){const{parameters:e,position:s}=t;for(let i=0;i<e.length;i+=7){const n=e[i],o=e[i+1],a=e[i+2],l=e[i+3],h=e[i+4],c=new w(e[i+5],e[i+6]);t.isRelative&&c.translateWith(s),(s.x!==c.x||s.y!==c.y)&&(r.arcTo(c,n,o,l,h,a),s.x=c.x,s.y=c.y)}},s:function(r,t){const{parameters:e,position:s,previousCommand:i}=t;let n;(i==="s"||i==="c")&&(n=St(St(r.paths).segments).controlIn());for(let o=0;o<e.length;o+=4){let a=new w(e[o],e[o+1]),l=new w(e[o+2],e[o+3]),h;t.isRelative&&(a.translateWith(s),l.translateWith(s)),n?h=pd(n,s):h=s.clone(),n=a,r.curveTo(h,a,l),s.x=l.x,s.y=l.y}},q:function(r,t){const{parameters:e,position:s}=t;for(let i=0;i<e.length;i+=4){let n=new w(e[i],e[i+1]),o=new w(e[i+2],e[i+3]);t.isRelative&&(n.translateWith(s),o.translateWith(s));let a=fd(s,n,o);r.curveTo(a.controlOut,a.controlIn,o),s.x=o.x,s.y=o.y}},t:function(r,t){const{parameters:e,position:s,previousCommand:i}=t;let n;(i==="q"||i==="t")&&(n=St(St(r.paths).segments).controlIn().clone().translateWith(s.scaleCopy(-1/3)).scale(3/2));for(let o=0;o<e.length;o+=2){let a=new w(e[o],e[o+1]);t.isRelative&&a.translateWith(s),n?n=pd(n,s):n=s.clone();let l=fd(s,n,a);r.curveTo(l.controlOut,l.controlIn,a),s.x=a.x,s.y=a.y}}};function ud(r,t,e){const s=t?0:1;for(let i=0;i<r.length;i+=2)r.splice(i+s,0,e)}function pd(r,t){if(r&&t)return t.scaleCopy(2).translate(-r.x,-r.y)}const gd=1/3;function fd(r,t,e){const s=t.clone().scale(.6666666666666666);return{controlOut:s.clone().translateWith(r.scaleCopy(gd)),controlIn:s.translateWith(e.scaleCopy(gd))}}const Gy=/([a-df-z]{1})([^a-df-z]*)(z)?/gi,$y=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g,md="m",Wy="z";function Xy(r){const t=[];return r.replace($y,function(e,s){t.push(parseFloat(s))}),t}function nh(r,t){const e=new w;let s;return t.replace(Gy,(i,n,o,a)=>{let l=n.toLowerCase();const h=l===n,c=Xy(o.trim());if(l===md&&(h?(e.x+=c[0],e.y+=c[1]):(e.x=c[0],e.y=c[1]),r.moveTo(e.x,e.y),c.length>2&&(l="l",c.splice(0,2))),dd[l])dd[l](r,{parameters:c,position:e,isRelative:h,previousCommand:s}),a&&a.toLowerCase()===Wy&&r.close();else if(l!==md)throw new Error("Error while parsing SVG path. Unsupported command: "+l);s=l}),r}function vr(r,t,e){let s;for(let i=0;i<r.length;i++){let n=r[i];if(n.visible()){let o=t?n.bbox(e):n.rawBBox();o&&(s?s=H.union(s,o):s=o)}}return s}function yg(r,t){let e;for(let s=0;s<r.length;s++){let i=r[s];if(i.visible()){let n=i.clippedBBox(t);n&&(e?e=H.union(e,n):e=n)}}return e}const br=" ",Yy=r=>(...t)=>t.map(e=>e.toString(r)).join(br),qy=(r,t)=>r.controlOut()&&t.controlIn()?"C":"L";let C=class kn extends Qi(ro(Be)){get nodeType(){return"Path"}constructor(t){super(t),this.segments=new cg,this.segments.addObserver(this),this.options.stroke===void 0&&(this.stroke("#000"),this.options.stroke.lineJoin===void 0&&this.options.set("stroke.lineJoin","miter"))}moveTo(t,e){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(t,e),this}lineTo(t,e){const s=e!==void 0?new w(t,e):t,i=new Tt(s);return this.segments.push(i),this}curveTo(t,e,s){if(this.segments.length>0){const i=St(this.segments),n=new Tt(s,e);this.suspend(),i.controlOut(t),this.resume(),this.segments.push(n)}return this}arc(t,e,s,i,n){if(this.segments.length>0){const a=St(this.segments).anchor(),l=Le(t),h=new w(a.x-s*Math.cos(l),a.y-i*Math.sin(l)),c=new Ps(h,{startAngle:t,endAngle:e,radiusX:s,radiusY:i,anticlockwise:n});this._addArcSegments(c)}return this}arcTo(t,e,s,i,n,o){if(this.segments.length>0){const l=St(this.segments).anchor(),h=Ps.fromPoints(l,w.create(t),e,s,i,n,o);this._addArcSegments(h)}return this}_addArcSegments(t){this.suspend();const e=t.curvePoints();for(let s=1;s<e.length;s+=3)this.curveTo(e[s],e[s+1],e[s+2]);this.resume(),this.geometryChange()}close(){return this.options.closed=!0,this.geometryChange(),this}rawBBox(){return this._bbox()}toString(t){let e="";const s=this.segments,i=s.length;if(i>0){const n=[],o=Yy(t);let a;for(let l=1;l<i;l++){let h=qy(s[l-1],s[l]);h!==a&&(a=h,n.push(h)),h==="L"?n.push(o(s[l].anchor())):n.push(o(s[l-1].controlOut(),s[l].controlIn(),s[l].anchor()))}e="M"+o(s[0].anchor())+br+n.join(br),this.options.closed&&(e+="Z")}return e}_containsPoint(t){const e=this.segments,s=e.length;let i=0,n,o;for(let a=1;a<s;a++)n=e[a-1],o=e[a],i+=n._intersectionsTo(o,t);return(this.options.closed||!e[0].anchor().equals(e[s-1].anchor()))&&(i+=pg(e[0].anchor(),e[s-1].anchor(),t)),i%2!==0}_isOnPath(t,e){const s=this.segments,i=s.length,n=e||this.options.stroke.width;if(i>1){if(s[0]._isOnPathTo(s[1],t,n,"start"))return!0;for(let o=2;o<=i-2;o++)if(s[o-1]._isOnPathTo(s[o],t,n))return!0;if(s[i-2]._isOnPathTo(s[i-1],t,n,"end"))return!0}return!1}_bbox(t){const e=this.segments,s=e.length;let i;if(s===1){let n=e[0].anchor().transformCopy(t);i=new H(n,zt.ZERO)}else if(s>0)for(let n=1;n<s;n++){let o=e[n-1].bboxTo(e[n],t);i?i=H.union(i,o):i=o}return i}static parse(t,e){return Wt.parse(t,e)}static fromRect(t,e){const s=new kn(e);let[i,n]=t.cornerRadius;if(i===0&&n===0)s.moveTo(t.topLeft()).lineTo(t.topRight()).lineTo(t.bottomRight()).lineTo(t.bottomLeft()).close();else{const o=t.origin,{x:a,y:l}=o,h=t.width(),c=t.height();i=dr(i,0,h/2),n=dr(n,0,c/2),s.moveTo(a+i,l).lineTo(a+h-i,l).arcTo([a+h,l+n],i,n,!1).lineTo(a+h,l+c-n).arcTo([a+h-i,l+c],i,n,!1).lineTo(a+i,l+c).arcTo([a,l+c-n],i,n,!1).lineTo(a,l+n).arcTo([a+i,l],i,n,!1)}return s}static fromPoints(t,e){if(t){const s=new kn(e);for(let i=0;i<t.length;i++){let n=w.create(t[i]);n&&(i===0?s.moveTo(n):s.lineTo(n))}return s}}static curveFromPoints(t,e){if(t){const s=Hy(t),i=new kn(e);return i.segments.push.apply(i.segments,s),i}}static fromArc(t,e){const s=new kn(e),i=t.startAngle,n=t.pointAt(i);return s.moveTo(n.x,n.y),s.arc(i,t.endAngle,t.radiusX,t.radiusY,t.anticlockwise),s}};class Wt extends Qi(ro(Be)){static parse(t,e){const s=new Wt(e);return nh(s,t)}toString(t){const e=this.paths;let s="";if(e.length>0){const i=[];for(let n=0;n<e.length;n++)i.push(e[n].toString(t));s=i.join(br)}return s}get nodeType(){return"MultiPath"}constructor(t){super(t),this.paths=new cg,this.paths.addObserver(this),this.options.stroke===void 0&&this.stroke("#000")}moveTo(t,e){const s=new C;return s.moveTo(t,e),this.paths.push(s),this}lineTo(t,e){return this.paths.length>0&&St(this.paths).lineTo(t,e),this}curveTo(t,e,s){return this.paths.length>0&&St(this.paths).curveTo(t,e,s),this}arc(t,e,s,i,n){return this.paths.length>0&&St(this.paths).arc(t,e,s,i,n),this}arcTo(t,e,s,i,n,o){return this.paths.length>0&&St(this.paths).arcTo(t,e,s,i,n,o),this}close(){return this.paths.length>0&&St(this.paths).close(),this}_bbox(t){return vr(this.paths,!0,t)}rawBBox(){return vr(this.paths,!1)}_containsPoint(t){const e=this.paths;for(let s=0;s<e.length;s++)if(e[s]._containsPoint(t))return!0;return!1}_isOnPath(t){const e=this.paths,s=this.options.stroke.width;for(let i=0;i<e.length;i++)if(e[i]._isOnPath(t,s))return!0;return!1}_clippedBBox(t){return yg(this.paths,this.currentTransform(t))}}const Zy="#000";let Qy=class extends Qi(ro(Yr(Be))){get nodeType(){return"Arc"}constructor(t=new Ps,e={}){super(e),this.geometry(t),this.options.stroke===void 0&&this.stroke(Zy)}_bbox(t){return this._geometry.bbox(t)}rawBBox(){return this.geometry().bbox()}toPath(){const t=new C,e=this.geometry().curvePoints();if(e.length>0){t.moveTo(e[0].x,e[0].y);for(let s=1;s<e.length;s+=3)t.curveTo(e[s],e[s+1],e[s+2])}return t}_containsPoint(t){return this.geometry().containsPoint(t)}_isOnPath(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)}};const Ky="12px sans-serif",Jy="#000";let vg=class extends Qi(qr(Be,["position"])){get nodeType(){return"Text"}constructor(t,e=new w,s={}){super(s),this.content(t),this.position(e),this.options.font||(this.options.font=Ky),this.options.fill===void 0&&this.fill(Jy)}content(t){return t!==void 0?(this.options.set("content",t),this):this.options.get("content")}measure(){return Xr(this.content(),{font:this.options.get("font")})}rect(){const t=this.measure(),e=this.position().clone();return new H(e,[t.width,t.height])}bbox(t){const e=oi(this.currentTransform(t));return this.rect().bbox(e)}rawBBox(){return this.rect().bbox()}_containsPoint(t){return this.rect().containsPoint(t)}},bg=class extends Yr(Be,["rect"]){get nodeType(){return"Image"}constructor(t,e=new H,s={}){super(s),this.src(t),this.rect(e)}src(t){return t!==void 0?(this.options.set("src",t),this):this.options.get("src")}bbox(t){const e=oi(this.currentTransform(t));return this._rect.bbox(e)}rawBBox(){return this._rect.bbox()}_containsPoint(t){return this._rect.containsPoint(t)}_hasFill(){return this.src()}};const oh=(r,t)=>class extends r{traverse(e){const s=this[t];for(let i=0;i<s.length;i++){let n=s[i];n.traverse?n.traverse(e):e(n)}return this}};let W=class extends oh(Be,"children"){get nodeType(){return"Group"}constructor(t){super(t),this.children=[]}childrenChange(t,e,s){this.trigger("childrenChange",{action:t,items:e,index:s})}append(){return Un(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this}insert(t,e){return this.children.splice(t,0,e),e.parent=this,this.childrenChange("add",[e],t),this}insertAt(t,e){return this.insert(e,t)}remove(t){const e=this.children.indexOf(t);return e>=0&&(this.children.splice(e,1),t.parent=null,this.childrenChange("remove",[t],e)),this}removeAt(t){if(0<=t&&t<this.children.length){let e=this.children[t];this.children.splice(t,1),e.parent=null,this.childrenChange("remove",[e],t)}return this}clear(){const t=this.children;return this.children=[],this._reparent(t,null),this.childrenChange("remove",t,0),this}bbox(t){return vr(this.children,!0,this.currentTransform(t))}rawBBox(){return vr(this.children,!1)}_clippedBBox(t){return yg(this.children,this.currentTransform(t))}currentTransform(t){return Be.prototype.currentTransform.call(this,t)||null}containsPoint(t,e){if(this.visible()){const s=this.children,i=this.currentTransform(e);for(let n=0;n<s.length;n++)if(s[n].containsPoint(t,i))return!0}return!1}_reparent(t,e){for(let s=0;s<t.length;s++){const i=t[s],n=i.parent;n&&n!==this&&n.remove&&n.remove(i),i.parent=e}}};function Zr(r,t,e){const s=e.transform()||K(),i=s.matrix();i.e+=r.x-t.origin.x,i.f+=r.y-t.origin.y,s.matrix(i),e.transform(s)}function Cn(r,t,e,s,i){let n;return e==="start"?n=t.origin[s]:e==="end"?n=t.origin[s]+t.size[i]-r:n=t.origin[s]+(t.size[i]-r)/2,n}function tv(r,t,e,s,i){let n;return e==="start"?n=t.origin[s]+t.size[i]-r:e==="end"?n=t.origin[s]:n=t.origin[s]+(t.size[i]-r)/2,n}const ev={alignContent:"start",justifyContent:"start",alignItems:"start",spacing:0,orientation:"horizontal",lineSpacing:0,wrap:!0,revers:!1},sv=(r,t)=>{r.forEach(t)},iv=(r,t)=>{const e=r.length;for(let s=e-1;s>=0;s--)t(r[s],s)};class wg extends W{constructor(t,e){super(Object.assign({},ev,e)),this._rect=t,this._fieldMap={}}rect(t){return t?(this._rect=t,this):this._rect}appendBreak(){const t=new W;return t._isBreakMarker=!0,this.append(t),this}_initMap(){const t=this.options,e=this._fieldMap;t.orientation==="horizontal"?(e.sizeField="width",e.groupsSizeField="height",e.groupAxis="x",e.groupsAxis="y"):(e.sizeField="height",e.groupsSizeField="width",e.groupAxis="y",e.groupsAxis="x"),t.reverse?(this.forEach=iv,this.justifyAlign=tv):(this.forEach=sv,this.justifyAlign=Cn)}reflow(){if(!this._rect||this.children.length===0)return;this._initMap(),this.options.transform&&this.transform(null);const t=this.options,e=this._rect,{groups:s,groupsSize:i}=this._initGroups(),{sizeField:n,groupsSizeField:o,groupAxis:a,groupsAxis:l}=this._fieldMap,h=new w,c=new w,d=new zt;let u=Cn(i,e,t.alignContent,l,o),p,g,f;const x=(y,v)=>{const k=g.elements[v];c[a]=p,c[l]=Cn(y.size[o],f,t.alignItems,l,o),Zr(c,y,k),p+=y.size[n]+t.spacing};for(let y=0;y<s.length;y++)g=s[y],h[a]=p=this.justifyAlign(g.size,e,t.justifyContent,a,n),h[l]=u,d[n]=g.size,d[o]=g.lineSize,f=new H(h,d),this.forEach(g.bboxes,x),u+=g.lineSize+t.lineSpacing;if(!t.wrap&&g.size>e.size[n]){const y=e.size[n]/f.size[n],v=f.topLeft().scale(y,y),k=f.size[o]*y,E=Cn(k,e,t.alignContent,l,o),I=K();a==="x"?I.translate(e.origin.x-v.x,E-v.y):I.translate(E-v.x,e.origin.y-v.y),I.scale(y,y),this.transform(I)}}_initGroups(){const{options:t,children:e}=this,{lineSpacing:s,wrap:i,spacing:n}=t,o=this._fieldMap.sizeField;let a=this._newGroup();const l=[],h=function(){l.push(a),c+=a.lineSize+s};let c=-s;for(let d=0;d<e.length;d++){let u=e[d],p=e[d].clippedBBox();if(u._isBreakMarker){a.bboxes.length>0&&(h(),a=this._newGroup());continue}u.visible()&&p&&(i&&a.size+p.size[o]+n>this._rect.size[o]?a.bboxes.length===0?(this._addToGroup(a,p,u),h(),a=this._newGroup()):(h(),a=this._newGroup(),this._addToGroup(a,p,u)):this._addToGroup(a,p,u))}return a.bboxes.length&&h(),{groups:l,groupsSize:c}}_addToGroup(t,e,s){t.size+=e.size[this._fieldMap.sizeField]+this.options.spacing,t.lineSize=Math.max(e.size[this._fieldMap.groupsSizeField],t.lineSize),t.bboxes.push(e),t.elements.push(s)}_newGroup(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}}}class rh extends Qi(ro(Yr(Be))){get nodeType(){return"Rect"}constructor(t=new H,e={}){super(e),this.geometry(t),this.options.stroke===void 0&&this.stroke("#000")}_bbox(t){return this._geometry.bbox(t)}rawBBox(){return this._geometry.bbox()}_containsPoint(t){return this._geometry.containsPoint(t)}_isOnPath(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)}}function _g(r,t,e,s,i){for(let n=0;n<r.length;n++){const o=r[n].clippedBBox();if(o){const a=o.origin.clone();a[s]=Cn(o.size[i],t,e||"start",s,i),Zr(a,o,r[n])}}}function nv(r,t,e){_g(r,t,e,"x","width")}function ov(r,t,e){_g(r,t,e,"y","height")}function ah(r,t,e,s){if(r.length>1){const i=new w;let n=r[0].bbox;for(let o=1;o<r.length;o++){let a=r[o].element,l=r[o].bbox;i[t]=n.origin[t]+n.size[s],i[e]=l.origin[e],Zr(i,l,a),l.origin[t]=i[t],n=l}}}function Ag(r){const t=[];for(let e=0;e<r.length;e++){let s=r[e],i=s.clippedBBox();i&&t.push({element:s,bbox:i})}return t}function rv(r){ah(Ag(r),"x","y","width")}function av(r){ah(Ag(r),"y","x","height")}function lv(r,t,e){const s=t.size[e],i=[];let n=[],o=0,a,l;const h=function(){n.push({element:a,bbox:l})};for(let c=0;c<r.length;c++)if(a=r[c],l=a.clippedBBox(),l){let d=l.size[e];o+d>s?n.length?(i.push(n),n=[],h(),o=d):(h(),i.push(n),n=[],o=0):(h(),o+=d)}return n.length&&i.push(n),i}function Sg(r,t,e,s,i){const n=lv(r,t,i),o=t.origin.clone(),a=[];for(let l=0;l<n.length;l++){let h=n[l],c=h[0];o[s]=c.bbox.origin[s],Zr(o,c.bbox,c.element),c.bbox.origin[e]=o[e],ah(h,e,s,i),a.push([]);for(let d=0;d<h.length;d++)a[l].push(h[d].element)}return a}function hv(r,t){return Sg(r,t,"x","y","width")}function cv(r,t){return Sg(r,t,"y","x","height")}function dv(r,t){const e=r.clippedBBox();if(e){const s=e.size,i=t.size;if(i.width<s.width||i.height<s.height){const n=Math.min(i.width/s.width,i.height/s.height),o=r.transform()||K();o.scale(n,n),r.transform(o)}}}class uv extends hg{_change(){this.optionsChange({field:"stops"})}}function pv(r){return function(t){return t!==void 0?(this.options.set(r,t),this):this.options.get(r)}}function gv(r,t){for(let e=0;e<t.length;e++)r[t[e]]=pv(t[e])}const fv=(r,t)=>{const e=class extends r{};return gv(e.prototype,t),e},mv=["offset","color","opacity"];class Js extends fv(se,mv){constructor(t,e,s){super(),this.options=new Ks({offset:t,color:e,opacity:s!==void 0?s:1}),this.options.addObserver(this)}static create(t){if(t!==void 0){let e;return t instanceof Js?e=t:t.length>1?e=new Js(t[0],t[1],t[2]):e=new Js(t.offset,t.color,t.opacity),e}}}class lh extends se{get nodeType(){return"Gradient"}constructor(t={}){super(),this.stops=new uv(this._createStops(t.stops)),this.stops.addObserver(this),this._userSpace=t.userSpace,this.id=Gn()}userSpace(t){return t!==void 0?(this._userSpace=t,this.optionsChange(),this):this._userSpace}_createStops(t=[]){const e=[];for(let s=0;s<t.length;s++)e.push(Js.create(t[s]));return e}addStop(t,e,s){this.stops.push(new Js(t,e,s))}removeStop(t){const e=this.stops.indexOf(t);e>=0&&this.stops.splice(e,1)}optionsChange(t){this.trigger("optionsChange",{field:"gradient"+(t?"."+t.field:""),value:this})}geometryChange(){this.optionsChange()}}const xv=["start","end"];class Qr extends qr(lh,xv){constructor(t={}){super(t),this.start(t.start||new w),this.end(t.end||new w(1,0))}}class Kr extends qr(lh,["center"]){constructor(t={}){super(t),this.center(t.center||new w),this._radius=t.radius!==void 0?t.radius:1,this._fallbackFill=t.fallbackFill}radius(t){return t!==void 0?(this._radius=t,this.geometryChange(),this):this._radius}fallbackFill(t){return t!==void 0?(this._fallbackFill=t,this.optionsChange(),this):this._fallbackFill}}const ao="#aba4a6",Di={width:2,gap:18},xd={radius:10,gap:10},yd={size:18,gap:2};class Ki extends W{get nodeType(){return Zi}constructor(t){super();const{width:e,height:s}=t;this._size=zt.create([e,s]),this.id=Gn()}size(t){return t?(this._size=zt.create(t),this):this._size}}const lo=(r,t,e)=>{t&&r.append(new rh(new H([0,0],e),{fill:{color:t},stroke:null}))};function yv(r={}){const{gap:t=xd.gap,radius:e=xd.radius,color:s=ao,background:i}=r,n={fill:{color:s},stroke:null},o=4*e+2*t,a=3*e+1.5*t,l=[o/2,e+1/2*t],h=[0,a],c=[o,a],d=new Ki({width:o,height:o});return lo(d,i,[o,o]),d.append(new Kt(new Rt(l,e),n),new Kt(new Rt(h,e),n),new Kt(new Rt(c,e),n)),d}function vv(r={}){const{gap:t=Di.gap,width:e=Di.width,color:s=ao,background:i}=r,n=e+t,o={fill:null,stroke:{color:s,width:e/2}},a=new Ki({width:n,height:n});lo(a,i,[n,n]);const l=e/4,h=n-e/4,c=new C(o);c.moveTo(l,0).lineTo(l,n);const d=new C(o);return d.moveTo(h,0).lineTo(h,n),a.append(c,d),a}function bv(r={}){const{gap:t=Di.gap,width:e=Di.width,color:s=ao,background:i}=r,n=Math.sqrt(2)*(e+t),o={fill:null,stroke:{color:s,width:e}},a=new Ki({width:n,height:n});lo(a,i,[n,n]);const l=new C(o);l.moveTo(0,0).lineTo(n,n);const h=new C(o);return h.moveTo(n,0).lineTo(0,n),a.append(l,h),a}function wv(r={}){const{gap:t=Di.gap,width:e=Di.width,color:s=ao,background:i}=r,n=Math.sqrt(2)*(e+t),o={fill:null,stroke:{color:s,width:e,lineCap:"square"}},a=new Ki({width:n,height:n});lo(a,i,[n,n]);const l=new C(o);l.moveTo(0,n/2).lineTo(n/2,0);const h=new C(o);return h.moveTo(n/2,n).lineTo(n,n/2),a.append(l,h),a}function _v(r={}){const{gap:t=yd.gap,size:e=yd.size,color:s=ao,background:i}=r,n=e+t,o=t/2,a={fill:{color:s},stroke:null},l=new Ki({width:n,height:n});lo(l,i,[n,n]);const h=new rh(new H([o,o],[e,e]),a);return l.append(h),l}function Av(r){return .5-Math.cos(r*Math.PI)/2}function Sv(r){return r}function kv(r){if(r===0||r===1)return r;const t=.5,e=t/4;return Math.pow(2,-10*r)*Math.sin((r-e)*(1.1*Math.PI)/t)+1}function Cv(r){return 1-Math.pow(1-r,3)}function Tv(r){return r<.5?4*r*r*r:1-Math.pow(-2*r+2,3)/2}function Pv(r){return 1-Math.pow(1-r,2)}function Ev(r){return r<.5?2*r*r:1-Math.pow(-2*r+2,2)/2}function Mv(r){return Math.sqrt(1-Math.pow(r-1,2))}function Iv(r){return-(Math.cos(Math.PI*r)-1)/2}function Rv(r){return r===1?1:1-Math.pow(2,-10*r)}function Lv(r){return r===0||r===1?r:r<.5?Math.pow(2,20*r-10)/2:(2-Math.pow(2,-20*r+10))/2}function Ov(r){return 1+2.70158*Math.pow(r-1,3)+1.70158*Math.pow(r-1,2)}function Bv(r){const e=2.5949095;return r<.5?Math.pow(2*r,2)*((e+1)*2*r-e)/2:(Math.pow(2*r-2,2)*((e+1)*(r*2-2)+e)+2)/2}function Dv(r){return 1-Math.pow(1-r,5)}function zv(r){return r<.5?16*Math.pow(r,5):1-Math.pow(-2*r+2,5)/2}const Vv=Object.freeze(Object.defineProperty({__proto__:null,easeInOutBack:Bv,easeInOutCubic:Tv,easeInOutExpo:Lv,easeInOutQuad:Ev,easeInOutQuint:zv,easeInOutSine:Iv,easeOutBack:Ov,easeOutCirc:Mv,easeOutCubic:Cv,easeOutElastic:kv,easeOutExpo:Rv,easeOutQuad:Pv,easeOutQuint:Dv,linear:Sv,swing:Av},Symbol.toStringTag,{value:"Module"}));let Ba;class ie extends Lt{static get current(){return Ba||(Ba=new ie),Ba}constructor(){super(),this._items=[]}register(t,e){this._items.push({name:t,type:e})}create(t,e){const s=this._items;let i;if(e&&e.type){const n=e.type.toLowerCase();for(let o=0;o<s.length;o++)if(s[o].name.toLowerCase()===n){i=s[o];break}}if(i)return new i.type(t,e)}}let ne=class extends Lt{static create(t,e,s){return ie.current.create(t,e,s)}get options(){return this._options||{duration:500,easing:"swing"}}set options(t){this._options=t}constructor(t,e){super(),this.options=Object.assign({},this.options,e),this.element=t}setup(){}step(){}play(){const t=this.options,{duration:e,delay:s=0}=t,i=Vv[t.easing],n=Hn()+s,o=n+e;e===0?(this.step(1),this.abort()):setTimeout(()=>{const a=()=>{if(this._stopped)return;const l=Hn(),h=dr(l-n,0,e),c=i(h/e);this.step(c),l<o?cr(a):this.abort()};a()},s)}abort(){this._stopped=!0}destroy(){this.abort()}},Da;class hh extends Lt{static get current(){return Da||(Da=new hh),Da}parse(t,e){const s=new Wt(e);return nh(s,t)}}class ho extends Lt{constructor(t){super(),this.childNodes=[],this.parent=null,t&&(this.srcElement=t,this.observe())}destroy(){this.srcElement&&this.srcElement.removeObserver(this);const t=this.childNodes;for(let e=0;e<t.length;e++)this.childNodes[e].destroy();this.parent=null}load(){}observe(){this.srcElement&&this.srcElement.addObserver(this)}append(t){this.childNodes.push(t),t.parent=this}insertAt(t,e){this.childNodes.splice(e,0,t),t.parent=this}remove(t,e){const s=t+e;for(let i=t;i<s;i++)this.childNodes[i].removeSelf();this.childNodes.splice(t,e)}removeSelf(){this.clear(),this.destroy()}clear(){this.remove(0,this.childNodes.length)}invalidate(){this.parent&&this.parent.invalidate()}geometryChange(){this.invalidate()}optionsChange(){this.invalidate()}childrenChange(t){t.action==="add"?this.load(t.items,t.index):t.action==="remove"&&this.remove(t.index,t.items.length),this.invalidate()}}const Nv=["click","mouseenter","mouseleave","mousemove","resize"];let ch=class extends Nx{constructor(t,e){super(),this.options=Object.assign({},e),this.element=t,this.element._kendoExportVisual=this.exportVisual.bind(this),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._mousemove=this._handler("mousemove"),this._visual=new W,Bn(t,this.options),this.bind(Nv,this.options),this._enableTracking()}draw(t){this._visual.children.push(t)}clear(){this._visual.children=[]}destroy(){this._visual=null,this.element._kendoExportVisual=null,this.unbind()}eventTarget(t){let e=Wp(t),s;for(;!s&&e&&(s=e._kendoNode,e!==this.element);)e=e.parentElement;if(s)return s.srcElement}exportVisual(){return this._visual}getSize(){return Bn(this.element)}currentSize(t){if(t)this._size=t;else return this._size}setSize(t){Bn(this.element,t),this.currentSize(t),this._resize()}resize(t){const e=this.getSize(),s=this.currentSize();(t||(e.width>0||e.height>0)&&(!s||e.width!==s.width||e.height!==s.height))&&(this.currentSize(e),this._resize(e,t),this.trigger("resize",e))}size(t){if(!t)return this.getSize();this.setSize(t)}suspendTracking(){this._suspendedTracking=!0}resumeTracking(){this._suspendedTracking=!1}_enableTracking(){}_resize(){}_handler(t){return e=>{const s=this.eventTarget(e);s&&!this._suspendedTracking&&this.trigger(t,{element:s,originalEvent:e,type:t})}}_elementOffset(){const t=this.element,e=qp(t),{left:s,top:i}=Yp(t);return{left:s+e.left,top:i+e.top}}_surfacePoint(t){const e=this._elementOffset(),s=$p(t),i=s.x-e.left,n=s.y-e.top,o=Zp(this.element).invert();return new w(i,n).transform(o)}};function Ut(r,t){return t!=null?` ${r}="${t}" `:""}function ri(r){let t="";for(let e=0;e<r.length;e++)t+=Ut(r[e][0],r[e][1]);return t}function kg(r){let t="";for(let e=0;e<r.length;e++){let s=r[e][1];s!==void 0&&(t+=r[e][0]+":"+s+";")}if(t!=="")return t}const cs={},$n="http://www.w3.org/2000/svg",wr="none",dh=3,Fv=(r,t)=>{sg(r,t)},Hv=(r,t)=>{const s=new DOMParser().parseFromString(tg(t),"text/xml");eg(s);const i=document.adoptNode(s.documentElement);r.innerHTML="",r.appendChild(i)};let yn;const Cg=(r,t)=>{if(yn)return yn(r,t);if(yn=Fv,typeof document<"u"){const e="<svg xmlns='"+$n+"'></svg>",s=document.createElement("div"),i=typeof DOMParser<"u";s.innerHTML=e,i&&s.firstChild.namespaceURI!==$n&&(yn=Hv)}return yn(r,t)},vd="transform",No={clip:"clip-path",fill:"fill"};function bd(r,t){return r==="clip"||r==="fill"&&(!t||t.nodeType==="Gradient"||t.nodeType===Zi)}let ds=class extends ho{constructor(t,e){super(t),this.definitions={},this.options=e}destroy(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),super.destroy()}load(t,e){for(let s=0;s<t.length;s++){const i=t[s],n=i.children,o=new cs[i.nodeType](i,this.options);e!==void 0?this.insertAt(o,e):this.append(o),o.createDefinitions(),n&&n.length>0&&o.load(n);const a=this.element;a&&o.attachTo(a,e)}}root(){let t=this;for(;t.parent;)t=t.parent;return t}attachTo(t,e){const s=document.createElement("div");Cg(s,"<svg xmlns='"+$n+"' version='1.1'>"+this.render()+"</svg>");const i=s.firstChild.firstChild;i&&(e!==void 0?t.insertBefore(i,t.childNodes[e]||null):t.appendChild(i),this.setElement(i))}setElement(t){this.element&&(this.element._kendoNode=null),this.element=t,this.element._kendoNode=this;const e=this.childNodes;for(let s=0;s<e.length;s++){let i=t.childNodes[s];e[s].setElement(i)}}clear(){this.clearDefinitions(),this.element&&(this.element.innerHTML="");const t=this.childNodes;for(let e=0;e<t.length;e++)t[e].destroy();this.childNodes=[]}removeSelf(){if(this.element){const t=this.element.parentNode;t&&t.removeChild(this.element),this.element=null}super.removeSelf()}template(){return this.renderChildren()}render(){return this.template()}renderChildren(){const t=this.childNodes;let e="";for(let s=0;s<t.length;s++)e+=t[s].render();return e}optionsChange(t){const{field:e,value:s}=t;e==="visible"?this.css("display",s?"":wr):No[e]&&bd(e,s)?this.updateDefinition(e,s):e==="opacity"?this.attr("opacity",s):e==="cursor"?this.css("cursor",s):e==="id"&&(s?this.attr("id",s):this.removeAttr("id")),super.optionsChange(t)}accessibilityOptionsChange(t){const{field:e,value:s}=t;e==="role"?s?this.attr("role",s):this.removeAttr("role"):e==="ariaLabel"?s?this.attr("aria-label",Ys(s)):this.removeAttr("aria-label"):e==="ariaRoleDescription"?s?this.attr("aria-roledescription",Ys(s)):this.removeAttr("aria-roledescription"):e==="ariaChecked"?s!==void 0?this.attr("aria-checked",s):this.removeAttr("aria-checked"):e==="className"&&this.className(s)}attr(t,e){this.element&&this.element.setAttribute(t,e)}allAttr(t){for(let e=0;e<t.length;e++)this.attr(t[e][0],t[e][1])}toggleAttr(t,e){e?this.attr(t,e):this.removeAttr(t)}css(t,e){this.element&&(this.element.style[t]=e)}allCss(t){for(let e=0;e<t.length;e++)this.css(t[e][0],t[e][1])}className(t){this.element&&(this.element.classList.remove(...this.element.classList),t&&t.split(" ").forEach(e=>{e&&this.element.classList.add(e)}))}removeAttr(t){this.element&&this.element.removeAttribute(t)}mapTransform(t){const e=[];return t&&e.push([vd,"matrix("+t.matrix().toString(6)+")"]),e}renderTransform(){return ri(this.mapTransform(this.srcElement.transform()))}transformChange(t){t?this.allAttr(this.mapTransform(t)):this.removeAttr(vd)}mapStyle(){const t=this.srcElement.options,e=[["cursor",t.cursor]];return t.visible===!1&&e.push(["display",wr]),e}renderStyle(){return Ut("style",kg(this.mapStyle(!0)))}renderOpacity(){return Ut("opacity",this.srcElement.options.opacity)}renderId(){return Ut("id",this.srcElement.options.id)}renderClassName(){return Ut("class",this.srcElement.options.className)}renderRole(){return Ut("role",this.srcElement.options.role)}renderAriaLabel(){let t=this.srcElement.options.ariaLabel;return t&&(t=Ys(t)),Ut("aria-label",t)}renderAriaRoleDescription(){let t=this.srcElement.options.ariaRoleDescription;return t&&(t=Ys(t)),Ut("aria-roledescription",t)}renderAriaChecked(){return Ut("aria-checked",this.srcElement.options.ariaChecked)}createDefinitions(){const t=this.srcElement,e=this.definitions;if(t){const s=t.options;let i;for(let n in No){let o=s.get(n);o&&bd(n,o)&&(e[n]=o,i=!0)}i&&this.definitionChange({action:"add",definitions:e})}}definitionChange(t){this.parent&&this.parent.definitionChange(t)}updateDefinition(t,e){const s=this.definitions,i=s[t],n=No[t],o={};i&&(o[t]=i,this.definitionChange({action:"remove",definitions:o}),delete s[t]),e?(o[t]=e,this.definitionChange({action:"add",definitions:o}),s[t]=e,this.attr(n,this.refUrl(e.id))):i&&this.removeAttr(n)}clearDefinitions(){const t=this.definitions;this.definitionChange({action:"remove",definitions:t}),this.definitions={}}renderDefinitions(){return ri(this.mapDefinitions())}mapDefinitions(){const t=this.definitions,e=[];for(let s in t){const i=t[s];e.push([No[s],this.refUrl(i.id)])}return e}refUrl(t){return`url(#${t})`}};class Tg extends ds{template(){return`<stop ${this.renderOffset()} ${this.renderStyle()} />`}renderOffset(){return Ut("offset",this.srcElement.offset())}mapStyle(){const t=this.srcElement;return[["stop-color",t.color()],["stop-opacity",t.opacity()]]}optionsChange(t){t.field==="offset"?this.attr(t.field,t.value):(t.field==="color"||t.field==="opacity")&&this.css("stop-"+t.field,t.value)}}class Pg extends ds{constructor(t){super(t),this.id=t.id,this.loadStops()}loadStops(){const t=this.srcElement.stops,e=this.element;for(let s=0;s<t.length;s++){let i=new Tg(t[s]);this.append(i),e&&i.attachTo(e)}}optionsChange(t){t.field==="gradient.stops"?(ho.prototype.clear.call(this),this.loadStops()):t.field==="gradient"&&this.allAttr(this.mapCoordinates())}renderCoordinates(){return ri(this.mapCoordinates())}mapSpace(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]}}class Eg extends Pg{template(){return`<linearGradient id='${this.id}' ${this.renderCoordinates()}>${this.renderChildren()}</linearGradient>`}mapCoordinates(){const t=this.srcElement,e=t.start(),s=t.end();return[["x1",e.x],["y1",e.y],["x2",s.x],["y2",s.y],this.mapSpace()]}}class Mg extends Pg{template(){return`<radialGradient id='${this.id}' ${this.renderCoordinates()}>${this.renderChildren()}</radialGradient>`}mapCoordinates(){const t=this.srcElement,e=t.center(),s=t.radius();return[["cx",e.x],["cy",e.y],["r",s],this.mapSpace()]}}class Uv extends ds{constructor(t){super(t),this.id=t.id,this.load(t.children)}template(){const t=this.srcElement.size().getWidth(),e=this.srcElement.size().getHeight();return`<pattern id='${this.srcElement.id}' width='${t}' height='${e}' patternUnits='userSpaceOnUse'>${this.renderChildren()}</pattern>`}}class Ig extends ds{constructor(t){super(),this.srcElement=t,this.id=t.id,this.load([t])}renderClipRule(){return Ut("clip-rule","evenodd")}template(){return`<clipPath ${this.renderClipRule()} id='${this.id}'>${this.renderChildren()}</clipPath>`}}class Rg extends ds{constructor(){super(),this.definitionMap={}}attachTo(t){this.element=t}template(){return`<defs>${this.renderChildren()}</defs>`}definitionChange(t){const{definitions:e,action:s}=t;s==="add"?this.addDefinitions(e):s==="remove"&&this.removeDefinitions(e)}createDefinition(t,e){let s;return t==="clip"?s=Ig:t==="fill"&&(e instanceof Qr?s=Eg:e instanceof Kr?s=Mg:e.nodeType===Zi&&(s=Uv)),new s(e)}addDefinitions(t){for(let e in t)this.addDefinition(e,t[e])}addDefinition(t,e){const{element:s,definitionMap:i}=this,n=e.id,o=i[n];if(o)o.count++;else{const a=this.createDefinition(t,e);i[n]={element:a,count:1},this.append(a),s&&a.attachTo(this.element)}}removeDefinitions(t){for(let e in t)this.removeDefinition(t[e])}removeDefinition(t){const e=this.definitionMap,s=t.id,i=e[s];i&&(i.count--,i.count===0&&(this.remove(this.childNodes.indexOf(i.element),1),delete e[s]))}}let uh=class extends ds{constructor(t){super(),this.options=t,this.defs=new Rg}attachTo(t){this.element=t,this.defs.attachTo(t.firstElementChild)}clear(){ho.prototype.clear.call(this)}template(){return this.defs.render()+this.renderChildren()}definitionChange(t){this.defs.definitionChange(t)}};const jv={"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"};let Os=class extends ds{geometryChange(){this.attr("d",this.renderData()),this.invalidate()}optionsChange(t){switch(t.field){case"fill":t.value?this.allAttr(this.mapFill(t.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:t.value}));break;case"stroke":t.value?this.allAttr(this.mapStroke(t.value)):this.removeAttr("stroke");break;case"transform":this.transformChange(t.value);break;default:{const e=jv[t.field];e&&this.attr(e,t.value);break}}this.accessibilityOptionsChange(t),super.optionsChange(t)}content(){this.element&&(this.element.textContent=this.srcElement.content())}renderData(){return this.srcElement.toString(dh)||void 0}mapStroke(t){const e=[];return t&&!ni(t.color)?(e.push(["stroke",t.color]),e.push(["stroke-width",t.width]),e.push(["stroke-linecap",this.renderLinecap(t)]),e.push(["stroke-linejoin",t.lineJoin]),t.opacity!==void 0&&e.push(["stroke-opacity",t.opacity]),t.dashType!==void 0&&e.push(["stroke-dasharray",this.renderDashType(t)])):e.push(["stroke",wr]),e}renderStroke(){return ri(this.mapStroke(this.srcElement.options.stroke))}renderDashType(t){const{dashType:e,width:s=1}=t;if(e&&e!==xr){const i=ng[e.toLowerCase()],n=[];for(let o=0;o<i.length;o++)n.push(i[o]*s);return n.join(" ")}}renderLinecap(t){const{dashType:e,lineCap:s}=t;return e&&e!==xr?og:s}mapFill(t){const e=[];return t&&(t.nodeType==="Gradient"||t.nodeType===Zi)||(t&&!ni(t.color)?(e.push(["fill",t.color]),t.opacity!==void 0&&e.push(["fill-opacity",t.opacity])):e.push(["fill",wr])),e}renderFill(){return ri(this.mapFill(this.srcElement.options.fill))}template(){return`<path ${this.renderId()} ${this.renderStyle()} ${this.renderOpacity()} ${Ut("d",this.renderData())}${this.renderStroke()}${this.renderFill()}${this.renderDefinitions()}${this.renderTransform()}${this.renderClassName()} ${this.renderRole()}${this.renderAriaLabel()} ${this.renderAriaRoleDescription()}${this.renderAriaChecked()} ></path>`}},Lg=class extends Os{renderData(){return this.srcElement.toPath().toString(dh)}},Og=class extends Os{geometryChange(){const t=this.center();this.attr("cx",t.x),this.attr("cy",t.y),this.attr("r",this.radius()),this.invalidate()}center(){return this.srcElement.geometry().center}radius(){return this.srcElement.geometry().radius}template(){return`<circle ${this.renderId()} ${this.renderStyle()} ${this.renderOpacity()}cx='${this.center().x}' cy='${this.center().y}' r='${this.radius()}'${this.renderStroke()} ${this.renderFill()} ${this.renderDefinitions()}${this.renderClassName()} ${this.renderRole()}${this.renderAriaLabel()} ${this.renderAriaRoleDescription()}${this.renderAriaChecked()} ${this.renderTransform()} ></circle>`}},Bg=class extends ds{template(){return`<g${this.renderId()+this.renderTransform()+this.renderClassName()+this.renderStyle()+this.renderOpacity()+this.renderRole()+this.renderAriaLabel()+this.renderAriaRoleDescription()+this.renderAriaChecked()+this.renderDefinitions()}>${this.renderChildren()}</g>`}optionsChange(t){const{field:e,value:s}=t;e==="transform"&&this.transformChange(s),this.accessibilityOptionsChange(t),super.optionsChange(t)}},Dg=class extends Os{geometryChange(){this.allAttr(this.mapPosition()),this.invalidate()}optionsChange(t){t.field==="src"&&this.allAttr(this.mapSource()),super.optionsChange(t)}mapPosition(){const t=this.srcElement.rect(),e=t.topLeft();return[["x",e.x],["y",e.y],["width",t.width()+"px"],["height",t.height()+"px"]]}renderPosition(){return ri(this.mapPosition())}mapSource(t){let e=this.srcElement.src();return t&&(e=Ys(e)),[["xlink:href",e]]}renderSource(){return ri(this.mapSource(!0))}template(){return`<image preserveAspectRatio='none' ${this.renderId()} ${this.renderStyle()} ${this.renderTransform()} ${this.renderOpacity()}${this.renderPosition()} ${this.renderSource()} ${this.renderDefinitions()}${this.renderClassName()} ${this.renderRole()}${this.renderAriaLabel()} ${this.renderAriaRoleDescription()}${this.renderAriaChecked()} ></image>`}},zg=class extends Os{renderData(){return this.srcElement.toString(dh)||"undefined"}},Vg=class extends Os{geometryChange(){const t=this.srcElement.geometry();this.attr("x",t.origin.x),this.attr("y",t.origin.y),this.attr("width",t.size.width),this.attr("height",t.size.height),this.attr("rx",t.cornerRadius[0]),this.attr("ry",t.cornerRadius[1]),this.invalidate()}size(){return this.srcElement.geometry().size}origin(){return this.srcElement.geometry().origin}rx(){return this.srcElement.geometry().cornerRadius[0]}ry(){return this.srcElement.geometry().cornerRadius[1]}template(){return`<rect ${this.renderId()} ${this.renderStyle()} ${this.renderOpacity()} x='${this.origin().x}' y='${this.origin().y}' rx='${this.rx()}' ry='${this.ry()}' width='${this.size().width}' height='${this.size().height}' ${this.renderStroke()} ${this.renderFill()} ${this.renderDefinitions()} ${this.renderTransform()}${this.renderClassName()} ${this.renderRole()}${this.renderAriaLabel()} ${this.renderAriaRoleDescription()}${this.renderAriaChecked()} />`}};const za=/&(?:[a-zA-Z]+|#\d+);/g;function ph(r){if(!r||typeof r!="string"||!za.test(r))return r;const t=ph._element;return za.lastIndex=0,r.replace(za,e=>(t.innerHTML=e,t.textContent||t.innerText))}typeof document<"u"&&(ph._element=document.createElement("span"));let Ng=class extends Os{geometryChange(){const t=this.pos();this.attr("x",t.x),this.attr("y",t.y),this.invalidate()}optionsChange(t){t.field==="font"?(this.attr("style",kg(this.mapStyle())),this.geometryChange()):t.field==="content"&&super.content(this.srcElement.content()),super.optionsChange(t)}mapStyle(t){const e=super.mapStyle(t);let s=this.srcElement.options.font;return t&&(s=Ys(s)),e.push(["font",s],["white-space","pre"]),e}pos(){const t=this.srcElement.position(),e=this.srcElement.measure();return t.clone().setY(t.y+e.baseline)}renderContent(){let t=this.srcElement.content();return t=ph(t),t=Ys(t),ih(t)}renderTextAnchor(){let t;return(this.options||{}).rtl&&!(Fn.browser.msie||Fn.browser.edge)&&(t="end"),Ut("text-anchor",t)}renderPaintOrder(){const t=this.srcElement.options.paintOrder;return t?Ut("paint-order",t):""}template(){return`<text ${this.renderId()} ${this.renderTextAnchor()} ${this.renderStyle()} ${this.renderOpacity()}x='${this.pos().x}' y='${this.pos().y}' ${this.renderStroke()} ${this.renderTransform()} ${this.renderDefinitions()}${this.renderPaintOrder()}${this.renderFill()}${this.renderClassName()} ${this.renderRole()}${this.renderAriaLabel()} ${this.renderAriaRoleDescription()}${this.renderAriaChecked()}>${this.renderContent()}</text>`}};cs.Arc=Lg;cs.Circle=Og;cs.Group=Bg;cs.Image=Dg;cs.MultiPath=zg;cs.Path=Os;cs.Rect=Vg;cs.Text=Ng;const Gv="rtl";function $v(r){let t;try{t=r.getScreenCTM?r.getScreenCTM():null}catch{}if(t){const e=-t.e%1,s=-t.f%1,i=r.style;(e!==0||s!==0)&&(i.left=e+"px",i.top=s+"px")}}let Fg=class extends ch{get type(){return"svg"}constructor(t,e){super(t,e),this._root=new uh(Object.assign({rtl:Wr(t,"direction").direction===Gv},this.options)),Cg(this.element,this._template("")),this._rootElement=this.element.firstElementChild,this._rootElement.style.width="100%",this._rootElement.style.height="100%",this._rootElement.style.overflow="hidden",$v(this._rootElement),this._root.attachTo(this._rootElement),eh(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove}),this.resize()}destroy(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,sh(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove})),super.destroy()}translate(t){const e=`${Math.round(t.x)} ${Math.round(t.y)} ${this._size.width} ${this._size.height}`;this._offset=t,this._rootElement.setAttribute("viewBox",e)}draw(t){super.draw(t),this._root.load([t])}clear(){super.clear(),this._root.clear()}svg(){return"<?xml version='1.0' ?>"+this._template()}exportVisual(){let{_visual:t,_offset:e}=this;if(e){const s=new W;s.children.push(t),s.transform(K().translate(-e.x,-e.y)),t=s}return t}_resize(){this._offset&&this.translate(this._offset)}_template(t){return`<svg ${typeof t=="string"?t:"style='width: 100%; height: 100%; overflow: hidden;' "}xmlns='${$n}' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>${this._root.render()}</svg>`}};const De={};let gh=class extends ho{constructor(t){super(t),t&&this.initClip()}initClip(){const t=this.srcElement.clip();t&&(this.clip=t,t.addObserver(this))}clear(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),super.clear()}clearClip(){this.clip&&(this.clip.removeObserver(this),delete this.clip)}setClip(t){this.clip&&(t.beginPath(),new De[this.clip.nodeType](this.clip).renderPoints(t,this.clip),t.clip("evenodd"))}optionsChange(t){t.field==="clip"&&(this.clearClip(),this.initClip()),super.optionsChange(t)}setTransform(t){if(this.srcElement){const e=this.srcElement.transform();e&&t.transform.apply(t,e.matrix().toArray(6))}}loadElements(t,e,s){for(let i=0;i<t.length;i++){let n=t[i],o=n.children,a=new De[n.nodeType](n,s);o&&o.length>0&&a.load(o,e,s),e!==void 0?this.insertAt(a,e):this.append(a)}}load(t,e,s){this.loadElements(t,e,s),this.invalidate()}setOpacity(t){if(this.srcElement){const e=this.srcElement.opacity();e!==void 0&&this.globalAlpha(t,e)}}globalAlpha(t,e){let s=e;s&&t.globalAlpha&&(s*=t.globalAlpha),t.globalAlpha=s}visible(){const t=this.srcElement;return!t||t&&t.options.visible!==!1}};class fh extends oh(gh,"childNodes"){renderTo(t){if(!this.visible())return;t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t);const e=this.childNodes;for(let s=0;s<e.length;s++){let i=e[s];i.visible()&&i.renderTo(t)}t.restore()}}const Wv=1e3/60;class Hg extends oh(fh,"childNodes"){constructor(t,e){super(),this.canvas=t,this.size=e,this.ctx=t.getContext("2d");const s=this._invalidate.bind(this);this.invalidate=Ur(()=>{cr(s)},Wv)}destroy(){super.destroy(),this.canvas=null,this.ctx=null}load(t,e,s){this.loadElements(t,e,s),this._invalidate()}_rescale(t){const{canvas:e,size:s}=this;e.width=s.width*t,e.height=s.height*t,this.ctx.scale(t,t)}_devicePixelRatio(){return typeof window.devicePixelRatio=="number"?window.devicePixelRatio:1}_invalidate(t){if(!this.ctx)return;const s=t&&t.fixedScale?1:this._devicePixelRatio();this._rescale(s),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx)}}class Ug extends Lt{constructor(){super(),this.shapes=[]}_add(t,e){this.shapes.push({bbox:e,shape:t}),t._quadNode=this}pointShapes(t){const e=this.shapes,s=e.length,i=[];for(let n=0;n<s;n++)e[n].bbox.containsPoint(t)&&i.push(e[n].shape);return i}insert(t,e){this._add(t,e)}remove(t){const e=this.shapes,s=e.length;for(let i=0;i<s;i++)if(e[i].shape===t){e.splice(i,1);break}}}class qs extends Ug{constructor(t){super(),this.children=[],this.rect=t}inBounds(t){const e=this.rect,s=e.bottomRight(),i=t.bottomRight();return e.origin.x<=t.origin.x&&e.origin.y<=t.origin.y&&i.x<=s.x&&i.y<=s.y}pointShapes(t){const e=this.children,s=e.length,i=super.pointShapes(t);for(let n=0;n<s;n++)Un(i,e[n].pointShapes(t));return i}insert(t,e){const s=this.children;let i=!1;if(this.inBounds(e)){if(this.shapes.length<4)this._add(t,e);else{s.length||this._initChildren();for(let n=0;n<s.length;n++)if(s[n].insert(t,e)){i=!0;break}i||this._add(t,e)}i=!0}return i}_initChildren(){const{rect:t,children:e}=this,s=t.center(),i=t.width()/2,n=t.height()/2;e.push(new qs(new H([t.origin.x,t.origin.y],[i,n])),new qs(new H([s.x,t.origin.y],[i,n])),new qs(new H([t.origin.x,s.y],[i,n])),new qs(new H([s.x,s.y],[i,n])))}}const Me=3e3,wd=BigInt(1e4);class pl extends Lt{constructor(){super(),this.initRoots()}initRoots(){this.rootMap={},this.root=new Ug,this.rootElements=[]}clear(){const t=this.rootElements;for(let e=0;e<t.length;e++)this.remove(t[e]);this.initRoots()}pointShape(t){const e=(this.rootMap[Math.floor(t.x/Me)]||{})[Math.floor(t.y/Me)];let s=this.root.pointShapes(t);e&&(s=s.concat(e.pointShapes(t)));const i=Zv(s);this.assignZindex(s,i),s.sort(Xv);for(let n=0;n<s.length;n++)if(s[n].containsPoint(t))return s[n]}assignZindex(t,e){const s=qv(wd,BigInt(e)),i=[],n=BigInt(0);for(let o=0;o<t.length;o++){let a=t[o],l=n,h=s,c=[];for(;a;)c.push(a),a=a.parent;for(;c.length;)a=c.pop(),l+=BigInt((a.parent?a.parent.children:this.rootElements).indexOf(a)+1)*h,h/=wd;t[o]._zIndex=l,i.push(l)}i.sort(Yv);for(let o=0;o<t.length;o++)t[o]._zIndex=i.indexOf(t[o]._zIndex)}optionsChange(t){(t.field==="transform"||t.field==="stroke.width")&&this.bboxChange(t.element)}geometryChange(t){this.bboxChange(t.element)}bboxChange(t){if(t.nodeType==="Group")for(let e=0;e<t.children.length;e++)this.bboxChange(t.children[e]);else t._quadNode&&t._quadNode.remove(t),this._insertShape(t)}add(t){const e=Array.isArray(t)?t.slice(0):[t];Un(this.rootElements,e),this._insert(e)}childrenChange(t){if(t.action==="remove")for(let e=0;e<t.items.length;e++)this.remove(t.items[e]);else this._insert(Array.prototype.slice.call(t.items,0))}_insert(t){let e;for(;t.length>0;)e=t.pop(),e.addObserver(this),e.nodeType==="Group"?Un(t,e.children):this._insertShape(e)}_insertShape(t){const e=t.bbox();if(e){const s=this.getSectors(e),i=s[0][0],n=s[1][0];if(this.inRoot(s))this.root.insert(t,e);else{const o=this.rootMap;o[i]||(o[i]={}),o[i][n]||(o[i][n]=new qs(new H([i*Me,n*Me],[Me,Me]))),o[i][n].insert(t,e)}}}remove(t){if(t.removeObserver(this),t.nodeType==="Group"){const e=t.children;for(let s=0;s<e.length;s++)this.remove(e[s])}else t._quadNode&&(t._quadNode.remove(t),delete t._quadNode)}inRoot(t){return t[0].length>1||t[1].length>1}getSectors(t){const e=t.bottomRight(),s=Math.floor(e.x/Me),i=Math.floor(e.y/Me),n=[[],[]];for(let o=Math.floor(t.origin.x/Me);o<=s;o++)n[0].push(o);for(let o=Math.floor(t.origin.y/Me);o<=i;o++)n[1].push(o);return n}}function Xv(r,t){return r._zIndex<t._zIndex?1:r._zIndex>t._zIndex?-1:0}function Yv(r,t){return r<t?-1:r>t?1:0}function qv(r,t){let e=r,s=t;const i=BigInt(1);let n=i;for(;s;)s&i&&(n*=e),s>>=i,s&&(e*=e);return n}function Zv(r){let t=0;for(let e=0;e<r.length;e++){let s=r[e],i=[];for(;s;)i.push(s),s=s.parent;t=Math.max(t,i.length)}return t+1}class Qv{constructor(t){t.bind("mouseenter",this._mouseenter.bind(this)),t.bind("mouseleave",this._mouseleave.bind(this)),this.element=t.element}clear(){this._resetCursor()}destroy(){this._resetCursor(),delete this.element}_mouseenter(t){const e=this._shapeCursor(t);e?(this._current||(this._defaultCursor=this._getCursor()),this._setCursor(e)):this._resetCursor()}_mouseleave(){this._resetCursor()}_shapeCursor(t){let e=t.element;for(;e&&e.options.cursor===void 0;)e=e.parent;if(e)return e.options.cursor}_getCursor(){if(this.element)return this.element.style.cursor}_setCursor(t){this.element&&(this.element.style.cursor=t,this._current=t)}_resetCursor(){this._current&&(this._setCursor(this._defaultCursor||""),delete this._current)}}function mh(r,t){const e=t.segments;if(e.length===0)return;let s=e[0],i=s.anchor();r.moveTo(i.x,i.y);for(let n=1;n<e.length;n++){s=e[n],i=s.anchor();let a=e[n-1].controlOut(),l=s.controlIn();a&&l?r.bezierCurveTo(a.x,a.y,l.x,l.y,i.x,i.y):r.lineTo(i.x,i.y)}t.options.closed&&r.closePath()}function Kv(r,t){for(let e=0;e<t.length;e++){let s=t[e],i=Gr(s.color());i.a*=s.opacity(),r.addColorStop(s.offset(),i.toCssRgba())}}class Bs extends gh{renderTo(t){t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t),t.beginPath(),this.renderPoints(t,this.srcElement),this.setLineDash(t),this.setLineCap(t),this.setLineJoin(t),this.setFill(t),this.setStroke(t),t.restore()}setFill(t){const e=this.srcElement.options.fill;let s=!1;return e&&(e.nodeType==="Gradient"?(this.setGradientFill(t,e),s=!0):e.nodeType===Zi?(this.setPatternFill(t,e),s=!0):ni(e.color)||(t.fillStyle=e.color,t.save(),this.globalAlpha(t,e.opacity),t.fill(),t.restore(),s=!0)),s}setGradientFill(t,e){const s=this.srcElement.rawBBox();let i;if(e instanceof Qr){let n=e.start(),o=e.end();i=t.createLinearGradient(n.x,n.y,o.x,o.y)}else if(e instanceof Kr){let n=e.center();i=t.createRadialGradient(n.x,n.y,0,n.x,n.y,e.radius())}Kv(i,e.stops),t.save(),e.userSpace()||t.transform(s.width(),0,0,s.height(),s.origin.x,s.origin.y),t.fillStyle=i,t.fill(),t.restore()}setPatternFill(t,e){const s=e.size(),i=document.createElement("canvas"),n=i.getContext("2d");i.width=s.getWidth(),i.height=s.getHeight(),this.childNodes.length=0,this.loadElements(e.children);const o=this.childNodes;for(let a=0;a<o.length;a++)o[a].renderTo(n);t.save(),t.fillStyle=t.createPattern(i,"repeat"),t.fill(),t.restore()}setStroke(t){const e=this.srcElement.options.stroke;if(e&&!ni(e.color)&&e.width>0)return t.strokeStyle=e.color,t.lineWidth=ur(e.width,1),t.lineJoin=ur(e.lineJoin,t.lineJoin),t.save(),this.globalAlpha(t,e.opacity),t.stroke(),t.restore(),!0}dashType(){const t=this.srcElement.options.stroke;if(t&&t.dashType)return t.dashType.toLowerCase()}setLineDash(t){const e=this.dashType();if(e&&e!==xr){const s=ng[e];t.setLineDash?t.setLineDash(s):(t.mozDash=s,t.webkitLineDash=s)}}setLineCap(t){const e=this.dashType(),s=this.srcElement.options.stroke;e&&e!==xr?t.lineCap=og:s&&s.lineCap&&(t.lineCap=s.lineCap)}setLineJoin(t){const e=this.srcElement.options.stroke;e&&e.lineJoin&&(t.lineJoin=e.lineJoin)}renderPoints(t,e){mh(t,e)}}class jg extends Bs{renderPoints(t){const e=this.srcElement.toPath();mh(t,e)}}class Gg extends Bs{renderPoints(t){const{center:e,radius:s}=this.srcElement.geometry();t.arc(e.x,e.y,s,0,Math.PI*2)}}class $g extends Bs{constructor(t,e){super(t),this.onLoad=this.onLoad.bind(this),this.onError=this.onError.bind(this),this.loading=jn();const s=this.img=new Image,i=t.src();e&&!/^data:/i.test(i)&&(s.crossOrigin=e),i&&(s.src=i),s.complete?this.onLoad():(s.onload=this.onLoad,s.onerror=this.onError)}renderTo(t){this.loading.state()==="resolved"&&(t.save(),this.setTransform(t),this.setClip(t),this.drawImage(t),t.restore())}optionsChange(t){t.field==="src"?(this.loading=jn(),this.img.src=this.srcElement.src()):super.optionsChange(t)}onLoad(){this.loading.resolve(),this.invalidate()}onError(){this.loading.reject(new Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))}drawImage(t){const e=this.srcElement.rect(),s=e.topLeft();t.drawImage(this.img,s.x,s.y,e.width(),e.height())}}class Wg extends Bs{renderPoints(t){const e=this.srcElement.paths;for(let s=0;s<e.length;s++)mh(t,e[s])}}class Xg extends Bs{renderPoints(t){const e=this.srcElement.geometry(),[s,i]=e.cornerRadius;if(s===0&&i===0){const{origin:n,size:o}=e;t.rect(n.x,n.y,o.width,o.height)}else super.renderPoints(t,C.fromRect(e))}}class Yg extends Bs{renderTo(t){const e=this.srcElement,s=e.position(),i=e.measure();t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t),t.beginPath(),t.font=e.options.font,t.textAlign="left",e.options.paintOrder==="stroke"?(this.stroke(t,e,s,i),this.fill(t,e,s,i)):(this.fill(t,e,s,i),this.stroke(t,e,s,i)),t.restore()}stroke(t,e,s,i){this.setStroke(t)&&(this.setLineDash(t),t.strokeText(e.content(),s.x,s.y+i.baseline))}fill(t,e,s,i){this.setFill(t)&&t.fillText(e.content(),s.x,s.y+i.baseline)}}De.Arc=jg;De.Circle=Gg;De.Group=fh;De.Image=$g;De.MultiPath=Wg;De.Path=Bs;De.Rect=Xg;De.Text=Yg;let xh=class extends ch{get type(){return"canvas"}constructor(t,e){super(t,e),this.element.innerHTML=this._template(this);const s=this.element.firstElementChild;s.style.width="100%",s.style.height="100%";const i=Bn(t);s.width=i.width,s.height=i.height,this._rootElement=s,this._root=new Hg(s,i),this._mouseTrackHandler=this._trackMouse.bind(this),eh(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})}destroy(){super.destroy(),this._root&&(this._root.destroy(),this._root=null),this._searchTree&&(this._searchTree.clear(),delete this._searchTree),this._cursor&&(this._cursor.destroy(),delete this._cursor),sh(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})}draw(t){super.draw(t),this._root.load([t],void 0,this.options.cors),this._searchTree&&this._searchTree.add([t])}clear(){super.clear(),this._root.clear(),this._searchTree&&this._searchTree.clear(),this._cursor&&this._cursor.clear()}eventTarget(t){if(this._searchTree){const e=this._surfacePoint(t);return this._searchTree.pointShape(e)}}image(){const{_root:t,_rootElement:e}=this,s=[];t.traverse(o=>{o.loading&&s.push(o.loading)});const i=jn(),n=()=>{t._invalidate({fixedScale:!0});try{const o=e.toDataURL();i.resolve(o)}catch(o){i.reject(o)}};return Xp(s).then(n,n),i}suspendTracking(){super.suspendTracking(),this._searchTree&&(this._searchTree.clear(),delete this._searchTree)}resumeTracking(){if(super.resumeTracking(),!this._searchTree){this._searchTree=new pl;const t=this._root.childNodes,e=[];for(let s=0;s<t.length;s++)e.push(t[s].srcElement);this._searchTree.add(e)}}_resize(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.size=this._size,this._root.invalidate()}_template(){return"<canvas></canvas>"}_enableTracking(){this._searchTree=new pl,this._cursor=new Qv(this),super._enableTracking()}_trackMouse(t){if(this._suspendedTracking)return;const e=this.eventTarget(t);if(t.type!=="click"){const s=this._currentShape;s&&s!==e&&this.trigger("mouseleave",{element:s,originalEvent:t,type:"mouseleave"}),e&&s!==e&&this.trigger("mouseenter",{element:e,originalEvent:t,type:"mouseenter"}),this.trigger("mousemove",{element:e,originalEvent:t,type:"mousemove"}),this._currentShape=e}else e&&this.trigger("click",{element:e,originalEvent:t,type:"click"})}},Va,Na;const qg=()=>typeof document<"u",Jv=()=>qg()&&document.createElement("canvas").getContext,tb=()=>qg()&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");class Wn extends Lt{static get support(){return Na||(Na={canvas:Jv(),svg:tb()}),Na}static get current(){return Va||(Va=new Wn),Va}constructor(){super(),this._items=[{name:"svg",type:Fg},{name:"canvas",type:xh}]}create(t,e){const s=this._items;let i=s[0];if(e&&e.type){const n=e.type.toLowerCase();for(let o=0;o<s.length;o++)if(s[o].name===n){i=s[o];break}}if(i)return new i.type(t,e);Hp(`Warning: Unable to create Kendo UI Drawing Surface. Possible causes:
- The browser does not support SVG and Canvas. User agent: ${navigator.userAgent}`)}}let ai=class extends ch{static get support(){return Wn.support}static create(t,e){return Wn.current.create(t,e)}};function Zg(r){const t=new uh({skipBaseHref:!0}),e=r.clippedBBox();let s=r;if(e){const n=e.getOrigin(),o=new W;o.transform(K().translate(-n.x,-n.y)),o.children.push(r),s=o}t.load([s]);const i=`<?xml version='1.0' ?><svg xmlns='${$n}' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>${t.render()}</svg>`;return t.destroy(),i}const eb=Object.freeze(Object.defineProperty({__proto__:null,ArcNode:Lg,CircleNode:Og,ClipNode:Ig,DefinitionNode:Rg,GradientStopNode:Tg,GroupNode:Bg,ImageNode:Dg,LinearGradientNode:Eg,MultiPathNode:zg,Node:ds,PathNode:Os,RadialGradientNode:Mg,RectNode:Vg,RootNode:uh,Surface:Fg,TextNode:Ng,exportGroup:Zg},Symbol.toStringTag,{value:"Module"})),sb=Object.freeze(Object.defineProperty({__proto__:null,ArcNode:jg,CircleNode:Gg,GroupNode:fh,ImageNode:$g,MultiPathNode:Wg,Node:gh,PathNode:Bs,RectNode:Xg,RootNode:Hg,Surface:xh,TextNode:Yg},Symbol.toStringTag,{value:"Module"}));function ib(r,t){const e={width:"800px",height:"600px",cors:"Anonymous"};let s=r;const i=r.clippedBBox();if(i){const d=i.getOrigin();s=new W,s.transform(K().translate(-d.x,-d.y)),s.children.push(r);const u=i.getSize();e.width=u.width+"px",e.height=u.height+"px"}const n=Object.assign(e,t),o=document.createElement("div"),a=o.style;a.display="none",a.width=n.width,a.height=n.height,document.body.appendChild(o);const l=new xh(o,n);l.suspendTracking(),l.draw(s);const h=l.image(),c=()=>{l.destroy(),document.body.removeChild(o)};return h.then(c,c),h}function nb(r,t){let e=Zg(r);return(!t||!t.raw)&&(e="data:image/svg+xml;base64,"+Gp(e)),jn().resolve(e)}const pi=Object.freeze(Object.defineProperty({__proto__:null,Animation:ne,AnimationFactory:ie,Arc:Qy,BaseNode:ho,Circle:Kt,Element:Be,Gradient:lh,GradientStop:Js,Group:W,HasObservers:se,Image:bg,Layout:wg,LinearGradient:Qr,MultiPath:Wt,OptionsStore:Ks,Path:C,PathParser:hh,Pattern:Ki,QuadNode:qs,RadialGradient:Kr,Rect:rh,ShapesQuadTree:pl,Surface:ai,SurfaceFactory:Wn,Text:vg,align:nv,canvas:sb,crosshatchPattern:bv,diagonalStripesPattern:wv,dotsPattern:yv,exportImage:ib,exportSVG:nb,fit:dv,gridPattern:_v,parsePath:nh,stack:rv,svg:eb,util:ig,vAlign:ov,vStack:av,vWrap:cv,verticalStripesPattern:vv,wrap:hv},Symbol.toStringTag,{value:"Module"})),Ss="arc",_d="ArrowUp",Ad="ArrowDown",Sd="ArrowLeft",kd="ArrowRight",ob="Tab",zi="aria-activedescendant",rb="axisLabelClick",ut="#000",j="bottom",O="center",Xt="circle",At=3,yh="cross",Je="date",Qg="12px sans-serif",Kg=400,tt=10,vh=600,Xn="end",ab="Enter",lb="Escape",Cd=/\{\d+:?/,gl="height",Jg=100,fl="inside",tf="inherit",z="left",gt=Number.MAX_VALUE,vt=-Number.MAX_VALUE,ml="none",hb="noteClick",cb="noteHover",db="noteLeave",Yn="object",tr="outside",G="right",ef="roundedRect",_r="start",bh="string",N="top",ub="triangle",pb="square",gb="rect",Qt="value",U="#fff",xl="width",T="x",P="y",Td=1,yl="pointer",vl="horizontal",fb="vertical";function Ct(r){return Array.isArray(r)}function dt(r,t){const e=Ct(t)?t:[t];for(let s=0;s<e.length;s++){const i=e[s];r.className.indexOf(i)===-1&&(r.className+=" "+i)}}const mb=/\s+/g;function Jr(r,t){r&&r.className&&(r.className=r.className.replace(t,"").replace(mb," "))}function Jt(r){let t=.5;r.options.stroke&&Jl(r.options.stroke.width)&&r.options.stroke.width%2===0&&(t=0);for(let e=0;e<r.segments.length;e++)r.segments[e].anchor().round(0).translate(t,t);return r}function Pd(r,t){return-r.x*t.y+r.y*t.x<0}function F(r){return typeof r=="number"&&!isNaN(r)}function Yt(r){return typeof r===bh}function sf(r){return F(r)||Yt(r)&&isFinite(r)}function Ed(r,t){return(r+1)%t}function Md(r,t){let e=r-1;return e<0?t-1:e}function Ar(r,t){return t===1||r%t===0?0:r<0?t+r%t:r>=t?r%t:r}function rt(r){return typeof r=="function"}const Id="object",xb="undefined";function nf(r,t){for(let e in t){if(e==="__proto__"||e==="constructor")continue;let s=t[e],i=typeof s,n;if(i===Id&&s!==null?n=s.constructor:n=null,n&&n!==Array)if(s instanceof Date)r[e]=new Date(s.getTime());else if(rt(s.clone))r[e]=s.clone();else{let o=r[e];typeof o===Id?r[e]=o||{}:r[e]={},nf(r[e],s)}else i!==xb&&(r[e]=s)}return r}function m(r){const t=arguments.length;for(let e=1;e<t;e++)nf(r,arguments[e]);return r}function me(r){return typeof r=="object"}function Ci(r){return F(r)?r+"px":r}const yb=/width|height|top|left|bottom|right/i;function vb(r){return yb.test(r)}function at(r,t){const e=Yt(t)?[t]:t;if(Ct(e)){const s={},i=window.getComputedStyle(r);for(let n=0;n<e.length;n++){let o=e[n];s[o]=vb(o)?parseFloat(i[o]):i[o]}return s}else if(me(t))for(let s in t)r.style[s]=Ci(t[s])}function X(r,t=0){const e={top:0,right:0,bottom:0,left:0};return typeof r=="number"?e[N]=e[G]=e[j]=e[z]=r:(e[N]=r[N]||t,e[G]=r[G]||t,e[j]=r[j]||t,e[z]=r[z]||t),e}let Rd={compile:function(r){return r}};class ta{static register(t){Rd=t}static compile(t,e){return Rd.compile(t,e)}}function bt(r={}){let t;return r.template?r.template=t=ta.compile(r.template):rt(r.content)&&(t=r.content),t}function wh(r={}){let t;return r.ariaTemplate?r.ariaTemplate=t=ta.compile(r.ariaTemplate):rt(r.ariaContent)&&(t=r.ariaContent),t}const bb=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g,Tn={};Tn.undefined=function(r){return r};function ks(r){if(Tn[r])return Tn[r];const t=[];return r.replace(bb,function(e,s,i,n){t.push(s!==void 0?s:i||n)}),Tn[r]=function(e){let s=e;for(let i=0;i<t.length&&s;i++)s=s[t[i]];return s},Tn[r]}const te=(r,t)=>r.filter(t);function qn(r,t){if(r.className){const e=t.split(" ");for(let s=0;s<e.length;s++)if(r.className.indexOf&&r.className.indexOf(e[s])!==-1)return!0}}class wb{constructor(){this._map=new Map}get(t){return this._map.get(t)}set(t,e){this._map.set(t,e)}}function D(r,t){if(t)return t.includes(r)}function ue(r,t,e){return nt(r+(t-r)*e,At)}const Ld="trigger";class Od{constructor(t,e){this.observer=t,this.handlerMap=m({},this.handlerMap,e)}trigger(t,e){const{observer:s,handlerMap:i}=this;let n;return i[t]?n=this.callObserver(i[t],e):s[Ld]&&(n=this.callObserver(Ld,t,e)),n}callObserver(t,...e){return this.observer[t].apply(this.observer,e)}requiresHandlers(t){if(this.observer.requiresHandlers)return this.observer.requiresHandlers(t);for(let e=0;e<t.length;e++)if(this.handlerMap[t[e]])return!0}}function _b(r){return Object.prototype.toString.call(r)==="[object Object]"}function of(r,t){const e=r.length,s=[];for(let i=0;i<e;i++){let n=t(r[i]);Jl(n)&&s.push(n)}return s}const Ab=Fn.browser||{};function _h(r){let t=0;return r.wheelDelta?(t=-r.wheelDelta/120,Ab.webkit&&(t=t/(2*Math.max(window.devicePixelRatio,.625)))):r.detail&&(t=r.detail/3),t=t>0?Math.ceil(t):Math.floor(t),t}const{append:gi,bindEvents:Pn,defined:A,deg:_s,elementOffset:Vi,elementSize:We,eventCoordinates:rf,eventElement:Ae,hashKey:Sb,last:pt,limitValue:M,objectKey:kb,rad:yt,round:S,unbindEvents:En,valueOrDefault:L}=ig;class zn{static fetchFonts(t,e,s={depth:0}){!t||s.depth>5||!document.fonts||Object.keys(t).forEach(function(n){const o=t[n];n==="dataSource"||n[0]==="$"||!o||(n==="font"?e.push(o):typeof o=="object"&&(s.depth++,zn.fetchFonts(o,e,s),s.depth--))})}static loadFonts(t,e){let s=[];if(t.length>0&&document.fonts){try{s=t.map(function(i){return document.fonts.load(i)})}catch(i){Hp(i)}Promise.all(s).then(e,e)}else e()}static preloadFonts(t,e){const s=[];zn.fetchFonts(t,s),zn.loadFonts(s,e)}}function b(r,t){const e=r.prototype;e.options?e.options=m({},e.options,t):e.options=t}const Cb="k-icon",Fa="k-i-",Tb="k-font-icon",Pb="k-svg-icon",Bd="k-svg-i-";class Ah{constructor(t,e){this.element=t,this.options=m({},this.options,e),this.wrapper()}wrapper(){this.addClasses()}addClasses(){}html(){return this.element.outerHTML}}b(Ah,{name:"",size:"none",themeColor:"none",flip:"default",iconClass:"",stylingOptions:["size","themeColor","fill"]});class af extends Ah{constructor(t,e){super(t,e)}wrapper(){let t=this.element.className.split(" ").find(s=>s.startsWith(Fa)),e=this.options.icon?`${this.options.icon.startsWith(Fa)?"":Fa}${this.options.icon}`:"";this._className=e,dt(this.element,Cb),dt(this.element,Tb),Jr(this.element,t),dt(this.element,e),dt(this.element,this.options.iconClass||""),super.wrapper()}}b(af,{name:"HTMLFontIcon",icon:null});class lf extends Ah{constructor(t,e){t.innerHTML="",super(t,e)}wrapper(){let t=this.options.icon,e=this.options.iconClass,s=this.element.className.split(" ").find(n=>n.startsWith(Bd));if(!t&&e){const n=/k-i-(\w+(?:-\w+)*)/;let o=e.match(n);o&&(t=o[1],e=e.replace(o[0],""))}Yt(t)&&(t=t.replace("k-i-","").replace(/-./g,n=>n[1].toUpperCase()),t=this.options.svgIcons[t]||this.options.svgIcons[`${t}Icon`]);let i=t&&t.name?`${Bd}${t.name}`:"";if(this._className=i,dt(this.element,Pb),Jr(this.element,s),dt(this.element,i),dt(this.element,e||""),this.element.setAttribute("aria-hidden","true"),t&&_b(t)){let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox",t.viewBox||""),n.setAttribute("focusable","false"),n.innerHTML=t.content||"",this.element.appendChild(n)}super.wrapper()}}b(lf,{name:"HTMLSvgIcon",icon:null,svgIcons:{}});const Dd={svg:lf,font:af};function Ii(r,t){let e=r,s=t;return(!e||me(e)&&!(e instanceof HTMLElement)||Yt(e))&&(s=e,e=document.createElement("span")),Yt(s)&&(s={icon:s}),s.type||(s.type="svg"),Dd[s.type]?new Dd[s.type](e,s).html():null}function bl(r){let t=gt,e=vt;for(let s=0,i=r.length;s<i;s++){const n=r[s];n!==null&&isFinite(n)&&(t=Math.min(t,n),e=Math.max(e,n))}return{min:t===gt?void 0:t,max:e===vt?void 0:e}}function hf(r,t){for(let e=0;e<r.length;e++){const s=r[e];if(t(s,e,r))return s}}const Sr=It,Eb=/matrix\((.*)\)/;function Mb(r){const t=r.match(Eb);if(t===null||t.length!==2)return Sr.unit();const e=t[1].split(",").map(s=>parseFloat(s));return new Sr(...e)}function zd(r){const t=getComputedStyle(r).transform;return t==="none"?Sr.unit():Mb(t)}function Ib(r){if(!r)return Sr.unit();let t=zd(r),e=r.parentElement;for(;e;){const s=zd(e);t=t.multiplyCopy(s),e=e.parentElement}return t.b=t.c=t.e=t.f=0,t}function ea(r){return new Nt(r).isDark()?U:ut}const Vd={};class Rb{constructor(t){this._index={},this._values=t?t.slice(0):[];for(let e=0;e<this._values.length;e++)this._index[this._values[e]]=e}values(){return this._values.filter(t=>t!==Vd)}has(t){return this._index[t]!==void 0}add(t){this.has(t)||(this._index[t]=this._values.length,this._values.push(t))}delete(t){const e=this._index[t];e!==void 0&&(this._values[e]=Vd,delete this._index[t])}clear(){this._index={},this._values=[]}get size(){return this._values.length}}class Lb{constructor(t){this._set=new Set(t)}values(){return Array.from(this._set)}has(t){return this._set.has(t)}add(t){this._set.add(t)}delete(t){this._set.delete(t)}clear(){this._set.clear()}get size(){return this._set.size}}let Ob=()=>{let r=!1;return typeof Set=="function"&&(r=new Set([1]).has(1)),r};function Nd(r){return Ob()?new Lb(r):new Rb(r)}function cf(r){throw r}let Ri={LEFT:37,UP:38,RIGHT:39,DOWN:40,NUMPAD_PLUS:107,NUMPAD_MINUS:109};function Sh(r,t){return Object.prototype.hasOwnProperty.call(r,t)}class Ge{constructor(){this.height=0,this.width=0,this.data=[]}clone(){const t=new Ge;return t.height=this.height,t.width=this.width,t.data=this.data.map(e=>e.slice()),t}get(t,e){const s=this.data[t];return s?s[e]:null}set(t,e,s){let i=this.data[t];i==null&&(i=this.data[t]=[]),i[e]=s,t>=this.height&&(this.height=t+1),e>=this.width&&(this.width=e+1)}each(t,e){for(let s=0;s<this.height;++s)for(let i=0;i<this.width;++i){let n=this.get(s,i);if((e||n!=null)&&(n=t(n,s,i),n!==void 0))return n}}map(t,e){const s=new Ge;return this.each(function(i,n,o){s.set(n,o,t(i,n,o))},e),s}transpose(){const t=new Ge;return this.each(function(e,s,i){t.set(i,s,e)}),t}unit(t){this.width=this.height=t;const e=this.data=new Array(t);for(let s=t;--s>=0;){const i=e[s]=new Array(t);for(let n=t;--n>=0;)i[n]=s===n?1:0}return this}multiply(t){const e=this,s=new Ge;for(let i=0;i<e.height;++i)for(let n=0;n<t.width;++n){let o=0;for(let a=0;a<e.width;++a){const l=e.get(i,a),h=t.get(a,n);typeof l=="number"&&typeof h=="number"&&(o+=l*h)}s.set(i,n,o)}return s}inverse(){const t=this.width,e=this.augment(new Ge().unit(t)),s=e.data;for(let i=0;i<t;++i){const n=Bb(i,t,function(o){return s[o][i]});if(!s[n][i])return null;if(i!==n){let o=s[i];s[i]=s[n],s[n]=o}for(let o=i+1;o<t;++o){for(let a=i+1;a<2*t;++a)s[o][a]-=s[i][a]*s[o][i]/s[i][i];s[o][i]=0}}for(let i=0;i<t;++i)for(let n=s[i][i],o=0;o<2*t;++o)s[i][o]/=n;for(let i=t;--i>=0;)for(let n=i;--n>=0;)if(s[n][i])for(let o=2*t;--o>=t;)s[n][o]-=s[i][o]*s[n][i];return e.slice(0,t,t,t)}augment(t){const e=this.clone(),s=e.width;return t.each(function(i,n,o){e.set(n,o+s,i)}),e}slice(t,e,s,i){const n=new Ge;for(let o=0;o<s;++o)for(let a=0;a<i;++a)n.set(o,a,this.get(t+o,e+a));return n}}function Bb(r,t,e){let s=e(r),i=r;for(let n=r+1;n<t;n++){const o=e(r);o>s&&(s=o,i=r)}return i}const Li={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"};function Db(r){return Li[r]||r}const Ie=r=>{const t=/([^ ]+)/g;return r.replace(t,Db)};let zb=1;function df(){return"kchart"+zb++}function sa(){return df()}const wl=new WeakMap,Vn=Symbol("id");function jt(r,t,e,s,i){Nb(r,t,e,s,i)}function Zt(r,t,e,s,i){Hb(r,t,e,s)}function Vb(r){return typeof r=="string"}function Nb(r,t,e,s,i){(Ct(t)?t:(t||"").split(" ")).forEach(function(o){Fb(r,o,e,s,i)})}function Fb(r,t,e,s,i){let n=s,o;e&&rt(e)&&!s?n=e:e&&Vb(e)&&rt(n)&&(o=e);const a=function(h){const c=h.target?h.target.closest(o):null;if(!o||o&&h.target&&c){const d=o?c:h.currentTarget;Object.defineProperty(h,"currentTarget",{value:d}),Object.defineProperty(h,"delegateTarget",{value:r}),n(h)}};n[Vn]||(n[Vn]=sa());let l=wl.get(r);l||(l=new Map,wl.set(r,l)),l.set(t+n[Vn],a),r.addEventListener(t,a,!!i)}function Hb(r,t,e,s){(Ct(t)?t:(t||"").split(" ")).forEach(function(n){Ub(r,n,e,s)})}function Ub(r,t,e,s){const i=wl.get(r);if(i&&e&&e[Vn]){const n=t+e[Vn],o=i.get(n);i.delete(n),o&&r.removeEventListener(t,o,!!s)}}function co(){const r=jb(navigator.userAgent),t={};return t.mobileOS=r,t}function jb(r){let t=!1;const e={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[._]([\d._]+)/,ipad:/(iPad).*OS\s+(\d+)[._]([\d_]+)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i},s={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i};for(let i in e)if(r.match(e[i])){if(i==="windows"&&"plugins"in navigator)return!1;t={},t.device=i,t.name=Gb(i,s),t[t.name]=!0;break}return t}function Gb(r,t,e){for(let s in t)if(t[s].test(r))return s;return e!==void 0?e:r}function Fd(){}function Es(){return new Date().getTime()}const Hd="string",Ud="function";let $b=function(){this._defaultPrevented=!0},Wb=function(){return this._defaultPrevented===!0};class xe{constructor(){this._events={}}destroy(){this.unbind()}bind(t,e,s){let i=this,n,o=typeof t===Hd?[t]:t||[],a,l,h,c=typeof e===Ud,d;if(e===void 0){for(n in t)i.bind(n,t[n]);return i}for(n=0,a=o.length;n<a;n++){let u=o[n];h=c?e:e[u],h&&(s&&(l=h,h=function(){i.unbind(u,h),l.apply(i,arguments)},h.original=l),d=i._events[u]=i._events[u]||[],d.push(h))}return i}one(t,e){return this.bind(t,e,!0)}first(t,e){let s=this,i,n=typeof t===Hd?[t]:t,o,a,l=typeof e===Ud,h;for(i=0,o=n.length;i<o;i++){let c=n[i];a=l?e:e[c],a&&(h=s._events[c]=s._events[c]||[],h.unshift(a))}return s}trigger(t,e){let s=this,i=s._events[t],n,o;if(i){let a=e||{};for(a.sender=s,a._defaultPrevented=!1,a.preventDefault=$b,a.isDefaultPrevented=Wb,i=i.slice(),n=0,o=i.length;n<o;n++)i[n].call(s,a);return a._defaultPrevented===!0}return!1}unbind(t,e){let s=this,i=s._events[t],n;if(t===void 0)s._events={};else if(i)if(e)for(n=i.length-1;n>=0;n--)(i[n]===e||i[n].original===e)&&i.splice(n,1);else s._events[t]=[];return s}_setEvents(t){const e=(this.events||[]).length;for(let s=0;s<e;s++){let i=this.events[s];this.options[i]&&t[i]&&(this.unbind(i,this.options[i]),this._events&&this._events[i]&&delete this._events[i])}this.bind(this.events,t)}}const er=Object.assign,Xb=r=>{r.preventDefault()};let jd=800,Yb=300,Gd=0,uf="press",pf="hold",$d="select",gf="start",_l="move",Al="end",Wd="cancel",kr="tap",ff="doubleTap",mf="release",qb="gesturestart",Xd="gesturechange",Yd="gestureend",qd="gesturetap",Zb={api:0,touch:0,mouse:9,pointer:9};function Qb(r,t){let e=r.x.location,s=r.y.location,i=t.x.location,n=t.y.location,o=e-i,a=s-n;return{center:{x:(e+i)/2,y:(s+n)/2},distance:Math.sqrt(o*o+a*a)}}function Zd(r){let t=[],e=r.originalEvent||r,s=r.currentTarget;return r.api?t.push({id:2,event:r,target:r.target,currentTarget:r.target,location:r,type:"api"}):t.push({location:e,event:r,target:r.target,currentTarget:s,id:e.pointerId,type:"pointer"}),t}class Qd{constructor(t,e){let s=this;s.support=co(),s.invalidZeroEvents=this.support.mobileOS&&this.support.mobileOS.android,s.axis=t,s._updateLocationData(e),s.startLocation=s.location,s.velocity=s.delta=0,s.timeStamp=Es()}move(t){let e=this,s=t["page"+e.axis],i=Es(),n=i-e.timeStamp||1;!s&&this.invalidZeroEvents||(e.delta=s-e.location,e._updateLocationData(t),e.initialDelta=s-e.startLocation,e.velocity=e.delta/n,e.timeStamp=i)}_updateLocationData(t){let e=this,s=e.axis;e.location=t["page"+s],e.client=t["client"+s],e.screen=t["screen"+s]}}class Kb{constructor(t,e,s){er(this,{x:new Qd("X",s.location),y:new Qd("Y",s.location),type:s.type,threshold:t.threshold||Zb[s.type],userEvents:t,target:e,currentTarget:s.currentTarget,initialTouch:s.target,id:s.id,pressEvent:s,_clicks:t._clicks,supportDoubleTap:t.supportDoubleTap,_moved:!1,_finished:!1})}press(){this._holdTimeout=setTimeout(()=>this._hold(),this.userEvents.minHold),this._trigger(uf,this.pressEvent)}_tap(t){let e=this;e.userEvents._clicks++,e.userEvents._clicks===1&&(e._clickTimeout=setTimeout(function(){e.userEvents._clicks===1?e._trigger(kr,t):e._trigger(ff,t),e.userEvents._clicks=0},Yb))}_hold(){this._trigger(pf,this.pressEvent)}move(t){let e=this,s=t.type!=="api"&&e.userEvents._shouldNotMove;if(!(e._finished||s)){if(e.x.move(t.location),e.y.move(t.location),!e._moved){if(e._withinIgnoreThreshold())return;if(!li.current||li.current===e.userEvents)e._start(t);else return e.dispose()}e._finished||e._trigger(_l,t)}}end(t){this.endTime=Es(),!this._finished&&(this._finished=!0,this._trigger(mf,t),this._moved?this._trigger(Al,t):this.supportDoubleTap?this._tap(t):this._trigger(kr,t),clearTimeout(this._holdTimeout),this.dispose())}dispose(){let t=this.userEvents,e=t.touches||[];this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout);const s=e.indexOf(this);e.splice(s,1)}skip(){this.dispose()}cancel(){this.dispose()}isMoved(){return this._moved}_start(t){clearTimeout(this._holdTimeout),this.startTime=Es(),this._moved=!0,this._trigger(gf,t)}_trigger(t,e){const s=e.event,i={touch:this,x:this.x,y:this.y,target:this.target,event:s};this.userEvents.notify(t,i)&&s.preventDefault()}_withinIgnoreThreshold(){let t=this.x.initialDelta,e=this.y.initialDelta;return Math.sqrt(t*t+e*e)<=this.threshold}}function Kd(r){let t=Li.up.split(" "),e=0,s=t.length;for(;e<s;e++)r(t[e])}class li extends xe{constructor(t,e){super();let s=this,i;const n=co();if(this.support=n,e=e||{},this.options=e,i=s.filter=e.filter,s.threshold=e.threshold||Gd,s.minHold=e.minHold||jd,s.touches=[],s._maxTouches=e.multiTouch?2:1,s.allowSelection=e.allowSelection,s.captureUpIfMoved=e.captureUpIfMoved,s._clicks=0,s.supportDoubleTap=e.supportDoubleTap,er(s,{element:t,surface:e.surface||t,stopPropagation:e.stopPropagation,pressed:!1}),this._surfaceMoveHandler=this._move.bind(this),jt(s.surface,Ie("move"),this._surfaceMoveHandler),this._surfaceEndHandler=this._end.bind(this),jt(s.surface,Ie("up cancel"),this._surfaceEndHandler),this._elementStartHandler=this._start.bind(this),jt(t,Ie("down"),i,this._elementStartHandler),t.style["touch-action"]=e.touchAction||"none",e.preventDragEvent&&(this._elementDragStartHandler=Xb,jt(t,Ie("dragstart"),this._elementDragStartHandler)),this._elementSelectHandler=this._select.bind(this),jt(t,Ie("mousedown"),i,this._elementSelectHandler),s.captureUpIfMoved){let o=s.surface;s._preventIfMovingProxy=s.preventIfMoving.bind(s),Kd(function(a){o.addEventListener(a,s._preventIfMovingProxy,!0)})}s.bind([uf,pf,kr,ff,gf,_l,Al,mf,Wd,qb,Xd,Yd,qd,$d],e)}preventIfMoving(t){this._isMoved()&&t.preventDefault()}destroy(){let t=this;const e=this.options,s=this.element;if(!t._destroyed){if(t._destroyed=!0,t.captureUpIfMoved){let i=t.surface;Kd(function(n){i.removeEventListener(n,t._preventIfMovingProxy,!0)})}Zt(t.surface,Ie("move"),this._surfaceMoveHandler),Zt(t.surface,Ie("up cancel"),this._surfaceEndHandler),Zt(s,Ie("down"),this._elementStartHandler),e.preventDragEvent&&Zt(s,Ie("dragstart"),this._elementDragStartHandler),Zt(s,Ie("mousedown"),this._elementSelectHandler),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget}}capture(){li.current=this}cancel(){this._disposeAll(),this.trigger(Wd)}notify(t,e){let s=this,i=s.touches,n=t;if(this._isMultiTouch()){switch(n){case _l:n=Xd;break;case Al:n=Yd;break;case kr:n=qd;break}er(e,{touches:i},Qb(i[0],i[1]))}return this.trigger(n,er(e,{type:n}))}press(t,e,s){this._apiCall("_start",t,e,s)}move(t,e){this._apiCall("_move",t,e)}end(t,e){this._apiCall("_end",t,e)}_isMultiTouch(){return this.touches.length>1}_maxTouchesReached(){return this.touches.length>=this._maxTouches}_disposeAll(){let t=this.touches;for(;t.length>0;)t.pop().dispose()}_isMoved(){return te(this.touches,function(t){return t.isMoved()}).length}_select(t){(!this.allowSelection||this.trigger($d,{event:t}))&&t.preventDefault()}_start(t){if(t.which&&t.which>1||this._maxTouchesReached())return;li.current=null,this.currentTarget=t.currentTarget,this.stopPropagation&&t.stopPropagation();let e;const s=Zd(t);for(let i=0;i<s.length&&!this._maxTouchesReached();i++){const n=s[i];if(this.filter?e=n.currentTarget:e=this.element,e&&e.length===0)continue;const o=new Kb(this,e,n);this.touches.push(o),o.press(),this._isMultiTouch()&&this.notify("gesturestart",{})}}_move(t){this._eachTouch("move",t)}_end(t){this._eachTouch("end",t)}_eachTouch(t,e){let s=this,i={},n=Zd(e),o=s.touches,a,l,h,c;for(a=0;a<o.length;a++)l=o[a],i[l.id]=l;for(a=0;a<n.length;a++)h=n[a],c=i[h.id],c&&(t==="move"&&h.type==="pointer"&&!this.surface.hasPointerCapture(h.id)&&this.surface.setPointerCapture(h.id),c[t](h))}_apiCall(t,e,s,i){this[t]({api:!0,pageX:e,pageY:s,clientX:e,clientY:s,target:i||this.element,stopPropagation:Fd,preventDefault:Fd})}static defaultThreshold(t){Gd=t}static minHold(t){jd=t}}function Ji(r,t){let e=S(t-r,tt-1);if(e===0){if(t===0)return .1;e=Math.abs(t)}const s=Math.pow(10,Math.floor(Math.log(e)/Math.log(10))),i=S(e/s,tt);let n=1;return i<1.904762?n=.2:i<4.761904?n=.5:i<9.523809?n=1:n=2,S(s*n,tt)}let R=class Sl{constructor(t,e){this.x=t||0,this.y=e||0}clone(){return new Sl(this.x,this.y)}equals(t){return t&&this.x===t.x&&this.y===t.y}rotate(t,e){const s=yt(e),i=Math.cos(s),n=Math.sin(s),{x:o,y:a}=t,{x:l,y:h}=this;return this.x=S(o+(l-o)*i+(h-a)*n,At),this.y=S(a+(h-a)*i-(l-o)*n,At),this}multiply(t){return this.x*=t,this.y*=t,this}distanceTo(t){const e=this.x-t.x,s=this.y-t.y;return Math.sqrt(e*e+s*s)}static onCircle(t,e,s){const i=yt(e);return new Sl(t.x-s*Math.cos(i),t.y-s*Math.sin(i))}};class _{constructor(t,e,s,i){this.x1=t||0,this.y1=e||0,this.x2=s||0,this.y2=i||0}equals(t){return this.x1===t.x1&&this.x2===t.x2&&this.y1===t.y1&&this.y2===t.y2}width(){return this.x2-this.x1}height(){return this.y2-this.y1}translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this}move(t,e){const s=this.height(),i=this.width();return t!==void 0&&(this.x1=t,this.x2=this.x1+i),e!==void 0&&(this.y1=e,this.y2=this.y1+s),this}wrap(t){return this.x1=Math.min(this.x1,t.x1),this.y1=Math.min(this.y1,t.y1),this.x2=Math.max(this.x2,t.x2),this.y2=Math.max(this.y2,t.y2),this}wrapLimit(t,e,s){return this.x1=Math.min(this.x1,Math.max(this.x1-e,t.x1)),this.y1=Math.min(this.y1,Math.max(this.y1-s,t.y1)),this.x2=Math.max(this.x2,Math.min(this.x2+e,t.x2)),this.y2=Math.max(this.y2,Math.min(this.y2+s,t.y2)),this}wrapPoint(t){const e=Ct(t),s=e?t[0]:t.x,i=e?t[1]:t.y;return this.wrap(new _(s,i,s,i)),this}snapTo(t,e){return(e===T||!e)&&(this.x1=t.x1,this.x2=t.x2),(e===P||!e)&&(this.y1=t.y1,this.y2=t.y2),this}alignTo(t,e){const s=this.height(),i=this.width(),n=e===N||e===j?P:T,o=n===P?s:i;if(e===O){const a=t.center(),l=this.center();this.x1+=a.x-l.x,this.y1+=a.y-l.y}else e===N||e===z?this[n+1]=t[n+1]-o:this[n+1]=t[n+2];return this.x2=this.x1+i,this.y2=this.y1+s,this}shrink(t,e){return this.x2-=t,this.y2-=e,this}expand(t,e){return this.shrink(-t,-e),this}pad(t){const e=X(t);return this.x1-=e.left,this.x2+=e.right,this.y1-=e.top,this.y2+=e.bottom,this}unpad(t){const e=X(t);return e.left=-e.left,e.top=-e.top,e.right=-e.right,e.bottom=-e.bottom,this.pad(e)}clone(){return new _(this.x1,this.y1,this.x2,this.y2)}center(){return new R(this.x1+this.width()/2,this.y1+this.height()/2)}containsPoint(t){return t.x>=this.x1&&t.x<=this.x2&&t.y>=this.y1&&t.y<=this.y2}points(){return[new R(this.x1,this.y1),new R(this.x2,this.y1),new R(this.x2,this.y2),new R(this.x1,this.y2)]}getHash(){return[this.x1,this.y1,this.x2,this.y2].join(",")}overlaps(t){return!(t.y2<this.y1||this.y2<t.y1||t.x2<this.x1||this.x2<t.x1)}rotate(t){let e=this.width(),s=this.height();const{x:i,y:n}=this.center(),o=Fo(0,0,i,n,t),a=Fo(e,0,i,n,t),l=Fo(e,s,i,n,t),h=Fo(0,s,i,n,t);return e=Math.max(o.x,a.x,l.x,h.x)-Math.min(o.x,a.x,l.x,h.x),s=Math.max(o.y,a.y,l.y,h.y)-Math.min(o.y,a.y,l.y,h.y),this.x2=this.x1+e,this.y2=this.y1+s,this}toRect(){return new H([this.x1,this.y1],[this.width(),this.height()])}hasSize(){return this.width()!==0&&this.height()!==0}align(t,e,s){return e===T?this.alignX(t,s):this.alignY(t,s),this}alignX(t,e){const s=this.width();e===z?(this.x1=t.x1,this.x2=this.x1+s):e===G?(this.x2=t.x2,this.x1=this.x2-s):e===O&&(this.x1=t.x1+(t.width()-s)/2,this.x2=this.x1+s)}alignY(t,e){const s=this.height();e===N?(this.y1=t.y1,this.y2=this.y1+s):e===j?(this.y2=t.y2,this.y1=this.y2-s):e===O&&(this.y1=t.y1+(t.height()-s)/2,this.y2=this.y1+s)}}function Fo(r,t,e,s,i){const n=yt(i);return new R(e+(r-e)*Math.cos(n)+(t-s)*Math.sin(n),s-(r-e)*Math.sin(n)+(t-s)*Math.cos(n))}class tn{constructor(t,e,s,i,n){this.center=t,this.innerRadius=e,this.radius=s,this.startAngle=i,this.angle=n}clone(){return new tn(this.center,this.innerRadius,this.radius,this.startAngle,this.angle)}middle(){return this.startAngle+this.angle/2}setRadius(t,e){return e?this.innerRadius=t:this.radius=t,this}point(t,e){const s=yt(t),i=Math.cos(s),n=Math.sin(s),o=e?this.innerRadius:this.radius,a=S(this.center.x-i*o,At),l=S(this.center.y-n*o,At);return new R(a,l)}adjacentBox(t,e,s){const i=this.clone().expand(t),n=i.middle(),o=i.point(n),a=e/2,l=s/2,h=Math.sin(yt(n)),c=Math.cos(yt(n));let d=o.x-a,u=o.y-l;return Math.abs(h)<.9&&(d+=a*-c/Math.abs(c)),Math.abs(c)<.9&&(u+=l*-h/Math.abs(h)),new _(d,u,d+e,u+s)}containsPoint(t){const e=this.center,s=this.innerRadius,i=this.radius,n=this.startAngle,o=this.startAngle+this.angle,a=t.x-e.x,l=t.y-e.y,h=new R(a,l),c=this.point(n),d=new R(c.x-e.x,c.y-e.y),u=this.point(o),p=new R(u.x-e.x,u.y-e.y),g=S(a*a+l*l,At);return(d.equals(h)||Pd(d,h))&&!Pd(p,h)&&g>=s*s&&g<=i*i}getBBox(){const t=new _(gt,gt,vt,vt),e=S(this.startAngle%360),s=S((e+this.angle)%360),i=this.innerRadius,n=[0,90,180,270,e,s].sort(Jb),o=n.indexOf(e),a=n.indexOf(s);let l;e===s?l=n:o<a?l=n.slice(o,a+1):l=[].concat(n.slice(0,a+1),n.slice(o,n.length));for(let h=0;h<l.length;h++){let c=this.point(l[h]);t.wrapPoint(c),t.wrapPoint(c,i)}return i||t.wrapPoint(this.center),t}expand(t){return this.radius+=t,this}}function Jb(r,t){return r-t}const tw=.001;class Ni{createRing(t,e){const s=t.startAngle+180;let i=t.angle+s;(t.angle===0||t.angle>0&&s===i)&&(i+=tw);const n=new w(t.center.x,t.center.y),o=Math.max(t.radius,0),a=Math.max(t.innerRadius,0),l=new Ps(n,{startAngle:s,endAngle:i,radiusX:o,radiusY:o}),h=C.fromArc(l,e).close();if(a){l.radiusX=l.radiusY=a;const c=l.pointAt(i);h.lineTo(c.x,c.y),h.arc(i,s,a,a,!0)}else h.lineTo(n.x,n.y);return h}}Ni.current=new Ni;class Y{constructor(t){this.children=[],this.initOptions(t)}initOptions(t){this.options=m({},this.options,this.initUserOptions(t))}initUserOptions(t){return t}reflow(t){const e=this.children;let s;for(let i=0;i<e.length;i++){let n=e[i];n.reflow(t),s=s?s.wrap(n.box):n.box.clone()}this.box=s||t}destroy(){const t=this.children;this.animation&&this.animation.destroy();for(let e=0;e<t.length;e++)t[e].destroy()}getRoot(){const t=this.parent;return t?t.getRoot():null}getSender(){const t=this.getService();if(t)return t.sender}getService(){let t=this;for(;t;){if(t.chartService)return t.chartService;t=t.parent}}translateChildren(t,e){const s=this.children,i=s.length;for(let n=0;n<i;n++)s[n].box.translate(t,e)}append(){for(let t=0;t<arguments.length;t++){let e=arguments[t];this.children.push(e),e.parent=this}}renderVisual(){this.options.visible!==!1&&(this.createVisual(),this.addVisual(),this.renderChildren(),this.createAnimation(),this.renderComplete())}addVisual(){this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual))}renderChildren(){const t=this.children,e=t.length;for(let s=0;s<e;s++)t[s].renderVisual()}createVisual(){this.visual=new W({zIndex:this.options.zIndex,visible:L(this.options.visible,!0)})}createAnimation(){this.visual&&this.options.animation&&(this.animation=ne.create(this.visual,this.options.animation))}appendVisual(t){t.chartElement||(t.chartElement=this),t.options.noclip?this.clipRoot().visual.append(t):t.options.zIndex!==void 0?this.stackRoot().stackVisual(t):this.isStackRoot?this.stackVisual(t):this.visual?this.visual.append(t):this.parent.appendVisual(t)}clipRoot(){return this.parent?this.parent.clipRoot():this}stackRoot(){return this.parent?this.parent.stackRoot():this}stackVisual(t){const e=t.options.zIndex||0,s=this.visual.children,i=s.length;let n;for(n=0;n<i;n++){let o=s[n];if(L(o.options.zIndex,0)>e)break}this.visual.insert(n,t)}traverse(t){const e=this.children,s=e.length;for(let i=0;i<s;i++){let n=e[i];t(n),n.traverse&&n.traverse(t)}}closest(t){let e=this,s=!1;for(;e&&!s;)s=t(e),s||(e=e.parent);if(s)return e}renderComplete(){}hasHighlight(){const t=(this.options||{}).highlight;return!(!this.createHighlight||t&&t.visible===!1||this.visible===!1)}toggleHighlight(t,e){const s=(this.options||{}).highlight||{},i=s.visual;let n=this._highlight;if(!n){const o={fill:{color:U,opacity:e||.2},stroke:{color:U,width:1,opacity:e||.2}};if(i){if(n=this._highlight=i(Object.assign(this.highlightVisualArgs(),{createVisual:()=>this.createHighlight(o),sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total})),!n)return}else n=this._highlight=this.createHighlight(o);n.options.zIndex===void 0&&(n.options.zIndex=L(s.zIndex,this.options.zIndex)),this.appendVisual(n)}n.visible(t)}toggleFocusHighlight(t){const e=(this.options||{}).focusHighlight||{};let s=this._focusHighlight;if(!(!t&&!s)){if(!s){const i=this.getRoot().options.background,n=ea(i),o={fill:{opacity:e.opacity,color:e.color},stroke:Object.assign({},{color:n},e.border),zIndex:e.zIndex};s=this._focusHighlight=this.createFocusHighlight(o),this.appendVisual(s)}s.visible(t)}}createGradientOverlay(t,e,s){const i=new C(Object.assign({stroke:{color:"none"},fill:this.createGradient(s),closed:t.options.closed},e));return i.segments.elements(t.segments.elements()),i}createGradient(t){if(this.parent)return this.parent.createGradient(t)}supportsPointInactiveOpacity(){return!0}}Y.prototype.options={};const{dotsPattern:ew,verticalStripesPattern:sw,crosshatchPattern:iw,diagonalStripesPattern:nw,gridPattern:ow}=pi,rw={dots:ew,verticalStripes:sw,crosshatch:iw,diagonalStripes:nw,grid:ow};function aw(r,t){return rt(r)?r(t):r}function Ds(r,t,e){const s=aw(r,e),i=s&&rw[s.type];return i?i(Object.assign({},t,s)):t}class es extends Y{constructor(t){super(t),this.options.margin=X(this.options.margin),this.options.padding=X(this.options.padding)}reflow(t){const e=this.options,{width:s,height:i,shrinkToFit:n}=e,o=s&&i,a=e.margin,l=e.padding,h=e.border.width;let c;const d=()=>{this.align(t,T,e.align),this.align(t,P,e.vAlign),this.paddingBox=c.clone().unpad(a).unpad(h)};let u=t.clone();o&&(u.x2=u.x1+s,u.y2=u.y1+i),n&&u.unpad(a).unpad(h).unpad(l),super.reflow(u),o?c=this.box=new _(0,0,s,i):c=this.box,n&&o?(d(),u=this.contentBox=this.paddingBox.clone().unpad(l)):(u=this.contentBox=c.clone(),c.pad(l).pad(h).pad(a),d()),this.translateChildren(c.x1-u.x1+a.left+h+l.left,c.y1-u.y1+a.top+h+l.top);const p=this.children;for(let g=0;g<p.length;g++){let f=p[g];f.reflow(f.box)}}align(t,e,s){this.box.align(t,e,s)}hasBox(){const t=this.options;return t.border.width||t.background}createVisual(){super.createVisual(),this.options.visible&&this.hasBox()&&this.visual.append(C.fromRect(this.paddingBox.toRect(),this.visualStyle()))}visualStyle(){const t=this.options,e=t.border||{};return{stroke:{width:e.width,color:e.color,opacity:L(e.opacity,t.opacity),dashType:e.dashType},fill:Ds(t.pattern,{color:t.background,opacity:t.opacity},void 0),cursor:t.cursor}}}b(es,{align:z,vAlign:N,margin:{},padding:{},border:{color:ut,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0});function kh(r,t){t&&(r.options.className=t.className,r.options.role=t.role,r.options.ariaLabel=t.ariaLabel,r.options.ariaRoleDescription=t.ariaRoleDescription,r.options.ariaChecked=t.ariaChecked)}class Et extends es{constructor(t,e){super(t),this.pointData=e}getElement(){const{options:t,paddingBox:e}=this,{type:s,rotation:i}=t,n=e.center(),o=e.width()/2,a=e.height()/2;if(!t.visible||!this.hasBox())return null;const l=this.visualStyle();let h;if(s===Xt)h=new Kt(new Rt([S(e.x1+o,At),S(e.y1+a,At)],Math.min(o,a)),l);else if(s===ub)h=C.fromPoints([[e.x1+o,e.y1],[e.x1,e.y2],[e.x2,e.y2]],l).close();else if(s===yh)h=new Wt(l),h.moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),h.moveTo(e.x1,e.y2).lineTo(e.x2,e.y1);else{const c=e.toRect();if(s===ef){const d=L(t.borderRadius,c.width()/5);c.setCornerRadius(d)}h=C.fromRect(c,l)}return i&&h.transform(K().rotate(-i,[n.x,n.y])),h.options.zIndex=t.zIndex,h}createElement(){const t=this.options.visual,e=this.pointData||{};let s;return t?s=t({value:e.value,dataItem:e.dataItem,sender:this.getSender(),series:e.series,category:e.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:()=>this.getElement()}):s=this.getElement(),s}visualOptions(){const t=this.options;return{background:t.background,border:t.border,margin:t.margin,padding:t.padding,type:t.type,size:t.width,visible:t.visible}}createVisual(){this.visual=this.createElement(),kh(this.visual,this.options.accessibilityOptions)}}b(Et,{type:Xt,align:O,vAlign:O});const lw="linear",vn="radial",hw={glass:{type:lw,rotation:0,stops:[{offset:0,color:U,opacity:0},{offset:.25,color:U,opacity:.3},{offset:1,color:U,opacity:0}]},sharpBevel:{type:vn,stops:[{offset:0,color:U,opacity:.55},{offset:.65,color:U,opacity:0},{offset:.95,color:U,opacity:.25}]},roundedBevel:{type:vn,stops:[{offset:.33,color:U,opacity:.06},{offset:.83,color:U,opacity:.2},{offset:.95,color:U,opacity:0}]},roundedGlass:{type:vn,supportVML:!1,stops:[{offset:0,color:U,opacity:0},{offset:.5,color:U,opacity:.3},{offset:.99,color:U,opacity:0}]},sharpGlass:{type:vn,supportVML:!1,stops:[{offset:0,color:U,opacity:.2},{offset:.15,color:U,opacity:.15},{offset:.17,color:U,opacity:.35},{offset:.85,color:U,opacity:.05},{offset:.87,color:U,opacity:.15},{offset:.99,color:U,opacity:0}]},bubbleShadow:{type:vn,center:[.5,.5],radius:.5}};function cw(r,t){if(r.x1===t.x1&&r.y1===t.y1&&r.x2===t.x2&&r.y2===t.y2)return t;const e=Math.min(r.x1,t.x1),s=Math.max(r.x1,t.x1),i=Math.min(r.x2,t.x2),n=Math.max(r.x2,t.x2),o=Math.min(r.y1,t.y1),a=Math.max(r.y1,t.y1),l=Math.min(r.y2,t.y2),h=Math.max(r.y2,t.y2),c=[];return c[0]=new _(s,o,i,a),c[1]=new _(e,a,s,l),c[2]=new _(i,a,n,l),c[3]=new _(s,l,i,h),r.x1===e&&r.y1===o||t.x1===e&&t.y1===o?(c[4]=new _(e,o,s,a),c[5]=new _(i,l,n,h)):(c[4]=new _(i,o,n,a),c[5]=new _(e,l,s,h)),te(c,function(d){return d.height()>0&&d.width()>0})[0]}class xf extends Y{constructor(t){super(t);const e=this.options;e.width=parseInt(e.width,10),e.height=parseInt(e.height,10),this.gradients={}}reflow(){const{options:t,children:e}=this;let s=new _(0,0,t.width,t.height);this.box=s.unpad(t.margin);for(let i=0;i<e.length;i++)e[i].reflow(s),s=cw(s,e[i].box)||new _}createVisual(){this.visual=new W,this.createBackground()}createBackground(){const t=this.options,e=t.border||{},s=this.box.clone().pad(t.margin).unpad(e.width),i=C.fromRect(s.toRect(),{stroke:{color:e.width?e.color:"",width:e.width,dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},zIndex:-10});this.visual.append(i)}getRoot(){return this}createGradient(t){const e=this.gradients,s=kb(t),i=hw[t.gradient];let n;if(e[s])n=e[s];else{const o=Object.assign({},i,t);i.type==="linear"?n=new Qr(o):(t.innerRadius&&(o.stops=dw(o)),n=new Kr(o),n.supportVML=i.supportVML!==!1),e[s]=n}return n}cleanGradients(){const t=this.gradients;for(let e in t)t[e]._observers=[]}size(){const t=this.options;return new _(0,0,t.width,t.height)}}b(xf,{width:vh,height:Kg,background:U,border:{color:ut,width:0},margin:X(5),zIndex:-2});function dw(r){const t=r.stops,e=r.innerRadius/r.radius*100,s=t.length,i=[];for(let n=0;n<s;n++){let o=Object.assign({},t[n]);o.offset=(o.offset*(100-e)+e)/100,i.push(o)}return i}class ia extends Y{constructor(t){super(t),this._initDirection()}_initDirection(){const t=this.options;t.vertical?(this.groupAxis=T,this.elementAxis=P,this.groupSizeField=xl,this.elementSizeField=gl,this.groupSpacing=t.spacing,this.elementSpacing=t.vSpacing):(this.groupAxis=P,this.elementAxis=T,this.groupSizeField=gl,this.elementSizeField=xl,this.groupSpacing=t.vSpacing,this.elementSpacing=t.spacing)}reflow(t){this.box=t.clone(),this.reflowChildren()}reflowChildren(){const{box:t,elementAxis:e,groupAxis:s,elementSizeField:i,groupSizeField:n}=this,{groups:o,groupsSize:a,maxGroupElementsSize:l}=this.groupOptions(),h=o.length,c=t[s+1]+this.alignStart(a,t[n]());if(h){let d=c;for(let u=0;u<h;u++){let p=o[u],g=p.groupElements,f=t[e+1],x=g.length;for(let y=0;y<x;y++){let v=g[y],k=this.elementSize(v),E=d+this.alignStart(k[n],p.groupSize),I=new _;I[s+1]=E,I[s+2]=E+k[n],I[e+1]=f,I[e+2]=f+k[i],v.reflow(I),f+=k[i]+this.elementSpacing}d+=p.groupSize+this.groupSpacing}t[s+1]=c,t[s+2]=c+a,t[e+2]=t[e+1]+l}}alignStart(t,e){let s=0;const i=this.options.align;return i===G||i===j?s=e-t:i===O&&(s=(e-t)/2),s}groupOptions(){const{box:t,children:e,elementSizeField:s,groupSizeField:i,elementSpacing:n,groupSpacing:o}=this,a=S(t[s]()),l=e.length,h=[];let c=0,d=0,u=0,p=0,g=[];for(let f=0;f<l;f++){let x=e[f];x.box||x.reflow(t);let y=this.elementSize(x);this.options.wrap&&S(d+n+y[s])>a&&(h.push({groupElements:g,groupSize:c,groupElementsSize:d}),p=Math.max(p,d),u+=o+c,c=0,d=0,g=[]),c=Math.max(c,y[i]),d>0&&(d+=n),d+=y[s],g.push(x)}return h.push({groupElements:g,groupSize:c,groupElementsSize:d}),p=Math.max(p,d),u+=c,{groups:h,groupsSize:u,maxGroupElementsSize:p}}elementSize(t){return{width:t.box.width(),height:t.box.height()}}createVisual(){}}b(ia,{vertical:!0,wrap:!0,vSpacing:0,spacing:0});const uw=vg;let yf=class extends Y{constructor(t,e){super(e),this.content=t,this.reflow(new _)}reflow(t){const e=this.options,s=e.size=Xr(this.content,{font:e.font});this.baseline=s.baseline,this.box=new _(t.x1,t.y1,t.x1+s.width,t.y1+s.height)}createVisual(){const{font:t,color:e,opacity:s,cursor:i,stroke:n,paintOrder:o}=this.options;this.visual=new uw(this.content,this.box.toRect().topLeft(),{font:t,fill:{color:e,opacity:s},cursor:i,stroke:n,paintOrder:o})}};b(yf,{font:Qg,color:ut});function Fi(r){const t=r.origin,e=r.bottomRight();return new _(t.x,t.y,e.x,e.y)}const pw=/\n/m;class qt extends es{constructor(t,e,s){super(e),this.content=t,this.data=s,this._initContainer(),this.options._autoReflow!==!1&&this.reflow(new _)}_initContainer(){const t=this.options,e=String(this.content).split(pw),s=new ia({vertical:!0,align:t.align,wrap:!1}),i=m({},t,{opacity:1,animation:null});this.container=s,this.append(s);for(let n=0;n<e.length;n++){let o=new yf(e[n].trim(),i);s.append(o)}}reflow(t){const e=this.options,s=e.visual;if(this.container.options.align=e.align,s&&!this._boxReflow){let i=t;i.hasSize()||(this._boxReflow=!0,this.reflow(i),this._boxReflow=!1,i=this.box);const n=this.visual=s(this.visualContext(i));n&&(i=Fi(n.clippedBBox()||new H),n.options.zIndex=e.zIndex),this.box=this.contentBox=this.paddingBox=i}else if(super.reflow(t),e.rotation){const i=X(e.margin);let n=this.box.unpad(i);this.targetBox=t,this.normalBox=n.clone(),n=this.rotate(),n.translate(i.left-i.right,i.top-i.bottom),this.rotatedBox=n.clone(),n.pad(i)}}createVisual(){const t=this.options;if(this.visual=new W({transform:this.rotationTransform(),zIndex:t.zIndex,noclip:t.noclip}),this.hasBox()){const e=C.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(e)}}renderVisual(){if(this.options.visible)if(this.options.visual){const t=this.visual;t&&!A(t.options.noclip)&&(t.options.noclip=this.options.noclip),this.addVisual(),this.createAnimation()}else super.renderVisual()}visualContext(t){const e={text:this.content,rect:t.toRect(),sender:this.getSender(),options:this.options,createVisual:()=>(this._boxReflow=!0,this.reflow(t),this._boxReflow=!1,this.getDefaultVisual())};return this.data&&Object.assign(e,this.data),e}getDefaultVisual(){this.createVisual(),this.renderChildren();const t=this.visual;return delete this.visual,t}rotate(){const t=this.options;return this.box.rotate(t.rotation),this.align(this.targetBox,T,t.align),this.align(this.targetBox,P,t.vAlign),this.box}rotationTransform(){const t=this.options.rotation;if(!t)return null;const{x:e,y:s}=this.normalBox.center(),i=this.rotatedBox.center();return K().translate(i.x-e,i.y-s).rotate(t,[e,s])}}let Oi=class vf extends Y{constructor(t){super(t),this._textBox=new qt(this.options.text,Object.assign({},this.options,{vAlign:this.options.position})),this.append(this._textBox)}reflow(t){super.reflow(t),this.box.snapTo(t,T)}static buildTitle(t,e){let s=t;typeof t=="string"&&(s={text:t}),s=Object.assign({visible:!0},e,s);let i;return s&&s.visible&&s.text&&(i=new vf(s)),i}static orderTitles(t){const e=[].concat(t),s=e.filter(n=>n&&n.options.position!==j),i=e.filter(n=>n&&n.options.position===j);return Jd(s),Jd(i),i.reverse(),s.concat(i)}};function Jd(r){for(let t=1;t<r.length;t++){const e=r[t]._textBox,s=r[t-1]._textBox;s.options.margin=Object.assign(X(s.options.margin),{bottom:0}),e.options.margin=Object.assign(X(e.options.margin),{top:0})}}b(Oi,{color:ut,position:N,align:O,margin:X(5),padding:X(5)});class Ms extends qt{constructor(t,e,s,i,n){super(e,n),this.text=e,this.value=t,this.index=s,this.dataItem=i,this.reflow(new _)}visualContext(t){const e=super.visualContext(t);return e.value=this.value,e.dataItem=this.dataItem,e.format=this.options.format,e.culture=this.options.culture,e}click(t,e){t.trigger(rb,{element:Ae(e),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})}rotate(){if(this.options.alignRotation!==O){const t=this.normalBox.toRect(),e=this.rotationTransform();this.box=Fi(t.bbox(e.matrix()))}else super.rotate();return this.box}rotationTransform(){const t=this.options,e=t.rotation;if(!e)return null;if(t.alignRotation===O)return super.rotationTransform();const s=K().rotate(e).matrix(),i=this.normalBox.toRect(),n=this.targetBox.toRect(),o=t.rotationOrigin||N,a=o===N||o===j?T:P,l=o===N||o===j?P:T,h=o===N||o===z?n.origin:n.bottomRight(),c=i.topLeft().transformCopy(s),d=i.topRight().transformCopy(s),u=i.bottomRight().transformCopy(s),p=i.bottomLeft().transformCopy(s),g=H.fromPoints(c,d,u,p),f={[l]:n.origin[l]-g.origin[l]},x=Math.abs(c[l]+f[l]-h[l]),y=Math.abs(d[l]+f[l]-h[l]);let v,k;S(x,tt)===S(y,tt)?(v=c,k=d):y<x?(v=d,k=u):(v=c,k=p);const E=v[a]+(k[a]-v[a])/2;return f[a]=n.center()[a]-E,K().translate(f.x,f.y).rotate(e)}}b(Ms,{_autoReflow:!1});const tu=7,gw="#fff";class Ch extends es{constructor(t,e,s){super(e),this.fields=t,this.chartService=s,this.render()}hide(){this.options.visible=!1}show(){this.options.visible=!0}render(){const t=this.options;if(t.visible){const{label:e,icon:s}=t,i=new _,n=()=>this;let o=s.size,a=this.fields.text,l,h;if(A(e)&&e.visible){const d=bt(e);d?a=d(this.fields):e.format&&(a=this.chartService.format.auto(e.format,a)),e.color||(e.color=e.position===fl?gw:s.background),this.label=new qt(a,m({},e)),this.label.aliasFor=n,e.position===fl&&!A(o)&&(s.type===Xt?o=Math.max(this.label.box.width(),this.label.box.height()):(l=this.label.box.width(),h=this.label.box.height()),i.wrap(this.label.box))}s.width=l||o||tu,s.height=h||o||tu;const c=new Et(m({},s));c.aliasFor=n,this.marker=c,this.append(c),this.label&&this.append(this.label),c.reflow(new _),this.wrapperBox=i.wrap(c.box)}}reflow(t){const{options:e,label:s,marker:i,wrapperBox:n}=this,o=t.center(),a=e.line.length,l=e.position;if(e.visible){let h,c,d;D(l,[z,G])?l===z?(d=n.alignTo(t,l).translate(-a,t.center().y-n.center().y),e.line.visible&&(h=[t.x1,o.y],this.linePoints=[h,[d.x2,o.y]],c=d.clone().wrapPoint(h))):(d=n.alignTo(t,l).translate(a,t.center().y-n.center().y),e.line.visible&&(h=[t.x2,o.y],this.linePoints=[h,[d.x1,o.y]],c=d.clone().wrapPoint(h))):l===j?(d=n.alignTo(t,l).translate(t.center().x-n.center().x,a),e.line.visible&&(h=[o.x,t.y2],this.linePoints=[h,[o.x,d.y1]],c=d.clone().wrapPoint(h))):(d=n.alignTo(t,l).translate(t.center().x-n.center().x,-a),e.line.visible&&(h=[o.x,t.y1],this.linePoints=[h,[o.x,d.y2]],c=d.clone().wrapPoint(h))),i&&i.reflow(d),s&&(s.reflow(d),i&&(e.label.position===tr&&s.box.alignTo(i.box,l),s.reflow(s.box))),this.contentBox=d,this.targetBox=t,this.box=c||d}}createVisual(){super.createVisual(),this.visual.options.noclip=this.options.noclip,this.options.visible&&this.createLine()}renderVisual(){const t=this.options,e=t.visual;t.visible&&e?(this.visual=e(Object.assign(this.fields,{sender:this.getSender(),rect:this.targetBox.toRect(),options:{background:t.background,border:t.background,icon:t.icon,label:t.label,line:t.line,position:t.position,visible:t.visible},createVisual:()=>{this.createVisual(),this.renderChildren();const s=this.visual;return delete this.visual,s}})),this.addVisual()):super.renderVisual()}createLine(){const t=this.options.line;if(this.linePoints){const e=C.fromPoints(this.linePoints,{stroke:{color:t.color,width:t.width,dashType:t.dashType}});Jt(e),this.visual.append(e)}}click(t,e){const s=this.eventArgs(e);t.trigger(hb,s)||e.preventDefault()}over(t,e){const s=this.eventArgs(e);t.trigger(cb,s)||e.preventDefault()}out(t,e){const s=this.eventArgs(e);t.trigger(db,s)}eventArgs(t){const e=this.options;return Object.assign(this.fields,{element:Ae(t),text:A(e.label)?e.label.text:"",visual:this.visual})}}b(Ch,{icon:{visible:!0,type:Xt},label:{position:fl,visible:!0,align:O,vAlign:O},line:{visible:!0},visible:!0,position:N,zIndex:2});const fw={format:(r,t)=>t,toString:r=>r,parseDate:r=>new Date(r),firstDay:()=>0};let eu=fw;class bf{static register(t){eu=t}static get implementation(){return eu}}const mw=/\{(\d+)(:[^\}]+)?\}/g;class xw{constructor(t){this._intlService=t}get intl(){return this._intlService||bf.implementation}set intl(t){this._intlService=t}auto(t,...e){const s=this.intl;return Yt(t)&&t.match(Cd)?s.format(t,...e):s.toString(e[0],t)}localeAuto(t,e,s){const i=this.intl;let n;return Yt(t)&&t.match(Cd)?n=t.replace(mw,function(o,a,l){let h=e[parseInt(a,10)];return i.toString(h,l?l.substring(1):"",s)}):n=i.toString(e[0],t,s),n}}class Th{constructor(t,e={}){this._intlService=e.intlService,this.sender=e.sender||t,this.format=new xw(e.intlService),this.chart=t,this.rtl=!!e.rtl}get intl(){return this._intlService||bf.implementation}set intl(t){this._intlService=t,this.format.intl=t}notify(t,e){this.chart&&this.chart.trigger(t,e)}isPannable(t){const e=((this.chart||{}).options||{}).pannable;return e&&e.lock!==t}}let Ha;class wf{static register(t){Ha=t}static create(t,e){let s;return Ha?s=Ha.create(t,e):s=new li(t,Object.assign({},{multiTouch:!0,touchAction:"manipulation"},e)),s}}function _f(r,t){const{tickX:e,tickY:s,position:i}=r,n=new C({stroke:{width:t.width,color:t.color}});return r.vertical?n.moveTo(e,i).lineTo(e+t.size,i):n.moveTo(i,s).lineTo(i,s+t.size),Jt(n),n}function Af(r,t){const{lineStart:e,lineEnd:s,position:i}=r,n=new C({stroke:{width:t.width,color:t.color,dashType:t.dashType}});return r.vertical?n.moveTo(e,i).lineTo(s,i):n.moveTo(i,e).lineTo(i,s),Jt(n),n}class en extends Y{constructor(t,e=new Th){super(t),this.chartService=e,this.options.visible||(this.options=m({},this.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),this.options.minorTicks=m({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.minorTickType!==ml},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType}),this.options.majorTicks=m({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.majorTickType!==ml},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType}),this.initFields(),this.options._deferLabels||this.createLabels(),this.createTitle(),this.createNotes()}initFields(){}labelsRange(){return{min:this.options.labels.skip,max:this.labelsCount()}}normalizeLabelRotation(t){const e=t.rotation;me(e)&&(t.alignRotation=e.align,t.rotation=e.angle)}createLabels(){const t=this.options,e=t.vertical?G:O,s=m({},t.labels,{align:e,zIndex:t.zIndex}),i=Math.max(1,s.step);if(this.clearLabels(),s.visible){this.normalizeLabelRotation(s),s.rotation==="auto"&&(s.rotation=0,t.autoRotateLabels=!0);const n=this.labelsRange();for(let o=n.min;o<n.max;o+=i){const a={index:o,count:n.max};let l=this.createAxisLabel(o,s,a);l&&(this.append(l),this.labels.push(l))}}}clearLabels(){this.children=te(this.children,t=>!(t instanceof Ms)),this.labels=[]}clearTitle(){this.title&&(this.children=te(this.children,t=>t!==this.title),this.title=void 0)}clear(){this.clearLabels(),this.clearTitle()}lineBox(){const{options:t,box:e}=this,s=t.vertical,i=t.labels.mirror,n=i?e.x1:e.x2,o=i?e.y2:e.y1,a=t.line.width||0;return s?new _(n,e.y1,n,e.y2-a):new _(e.x1,o,e.x2-a,o)}createTitle(){const t=this.options,e=m({rotation:t.vertical?-90:0,text:"",zIndex:1,visualSize:!0},t.title);if(e.visible&&e.text){const s=new qt(e.text,e);this.append(s),this.title=s}}createNotes(){const t=this.options,e=t.notes,s=e.data||[];this.notes=[];for(let i=0;i<s.length;i++){const n=m({},e,s[i]);n.value=this.parseNoteValue(n.value);const o=new Ch({value:n.value,text:n.label.text,dataItem:n},n,this.chartService);o.options.visible&&(A(o.options.position)?t.vertical&&!D(o.options.position,[z,G])?o.options.position=t.reverse?z:G:!t.vertical&&!D(o.options.position,[N,j])&&(o.options.position=t.reverse?j:N):t.vertical?o.options.position=t.reverse?z:G:o.options.position=t.reverse?j:N,this.append(o),this.notes.push(o))}}parseNoteValue(t){return t}renderVisual(){super.renderVisual(),this.createPlotBands()}createVisual(){super.createVisual(),this.createBackground(),this.createLine()}gridLinesVisual(){let t=this._gridLines;return t||(t=this._gridLines=new W({zIndex:-2}),this.appendVisual(this._gridLines)),t}createTicks(t){const e=this.options,s=this.lineBox(),i=e.labels.mirror,n=e.majorTicks.visible?e.majorUnit:0,o={vertical:e.vertical};function a(l,h,c){const d=l.length,u=Math.max(1,h.step);if(h.visible)for(let p=h.skip;p<d;p+=u)A(c)&&p%c===0||(o.tickX=i?s.x2:s.x2-h.size,o.tickY=i?s.y1-h.size:s.y1,o.position=l[p],t.append(_f(o,h)))}a(this.getMajorTickPositions(),e.majorTicks),a(this.getMinorTickPositions(),e.minorTicks,n/e.minorUnit)}createLine(){const t=this.options,e=t.line,s=this.lineBox();if(e.width>0&&e.visible){const i=new C({stroke:{width:e.width,color:e.color,dashType:e.dashType}});i.moveTo(s.x1,s.y1).lineTo(s.x2,s.y2),t._alignLines&&Jt(i);const n=this._lineGroup=new W;n.append(i),this.visual.append(n),this.createTicks(n)}}getActualTickSize(){const t=this.options;let e=0;return t.majorTicks.visible&&t.minorTicks.visible?e=Math.max(t.majorTicks.size,t.minorTicks.size):t.majorTicks.visible?e=t.majorTicks.size:t.minorTicks.visible&&(e=t.minorTicks.size),e}createBackground(){const{options:t,box:e}=this,s=t.background;s&&(this._backgroundPath=C.fromRect(e.toRect(),{fill:{color:s},stroke:null}),this.visual.append(this._backgroundPath))}createPlotBands(){const t=this.options,e=t.plotBands||[],s=t.vertical,i=this.plotArea;if(e.length===0)return;const n=this._plotbandGroup=new W({zIndex:-1}),o=te(this.pane.axes,a=>a.options.vertical!==this.options.vertical)[0];for(let a=0;a<e.length;a++){let l=e[a],h,c,d=l.label,u;if(s?(h=(o||i.axisX).lineBox(),c=this.getSlot(l.from,l.to,!0)):(h=this.getSlot(l.from,l.to,!0),c=(o||i.axisY).lineBox()),d&&(d.vAlign=d.position||z,u=this.createPlotBandLabel(d,l,new _(h.x1,c.y1,h.x2,c.y2))),h.width()!==0&&c.height()!==0){const p=new H([h.x1,c.y1],[h.width(),c.height()]),g=C.fromRect(p,{fill:{color:l.color,opacity:l.opacity},stroke:null});n.append(g),u&&n.append(u)}}this.appendVisual(n)}createPlotBandLabel(t,e,s){if(t.visible===!1)return null;let i=t.text,n;if(A(t)&&t.visible){const o=bt(t);o?i=o({text:i,item:e}):t.format&&(i=this.chartService.format.auto(t.format,i)),t.color||(t.color=this.options.labels.color)}return n=new qt(i,t),n.reflow(s),n.renderVisual(),n.visual}createGridLines(t){const e=this.options,{minorGridLines:s,majorGridLines:i,minorUnit:n,vertical:o}=e,a=t.options.line.visible,l=i.visible?e.majorUnit:0,h=t.lineBox(),c=h[o?"y1":"x1"],d={lineStart:h[o?"x1":"y1"],lineEnd:h[o?"x2":"y2"],vertical:o},u=[],p=this.gridLinesVisual();function g(f,x,y){const v=f.length,k=Math.max(1,x.step);if(x.visible)for(let E=x.skip;E<v;E+=k){let I=S(f[E]);D(I,u)||E%y!==0&&(!a||c!==I)&&(d.position=I,p.append(Af(d,x)),u.push(I))}}return g(this.getMajorTickPositions(),i),g(this.getMinorTickPositions(),s,l/n),p.children}reflow(t){const{options:e,labels:s,title:i}=this,n=e.vertical,o=s.length,a=n?xl:gl,l=i?i.box[a]():0,h=this.getActualTickSize()+e.margin+l,d=((this.getRoot()||{}).box||t)[a]();let u=0;for(let p=0;p<o;p++){let g=s[p].box[a]();g+h<=d&&(u=Math.max(u,g))}n?this.box=new _(t.x1,t.y1,t.x1+u+h,t.y2):this.box=new _(t.x1,t.y1,t.x2,t.y1+u+h),this.arrangeTitle(),this.arrangeLabels(),this.arrangeNotes()}getLabelsTickPositions(){return this.getMajorTickPositions()}labelTickIndex(t){return t.index}arrangeLabels(){const{options:t,labels:e}=this,s=this.labelsBetweenTicks(),i=t.vertical,n=t.labels.mirror,o=this.getLabelsTickPositions();for(let a=0;a<e.length;a++){const l=e[a],h=this.labelTickIndex(l),c=i?l.box.height():l.box.width(),d=o[h],u=o[h+1];let p,g;i?(s?p=d+(u-d)/2-c/2:p=d-c/2,g=p):s?(p=d,g=u):(p=d-c/2,g=p+c),this.positionLabel(l,n,p,g)}}positionLabel(t,e,s,i=s){const n=this.options,o=n.vertical,a=this.lineBox(),l=this.getActualTickSize()+n.margin;let h;if(o){let c=a.x2;e?(c+=l,t.options.rotationOrigin=z):(c-=l+t.box.width(),t.options.rotationOrigin=G),h=t.box.move(c,s)}else{let c=a.y1;e?(c-=l+t.box.height(),t.options.rotationOrigin=j):(c+=l,t.options.rotationOrigin=N),h=new _(s,c,i,c+t.box.height())}t.reflow(h)}autoRotateLabelAngle(t,e){return t.width()<e?0:t.height()>e?-90:-45}autoRotateLabels(){if(!this.options.autoRotateLabels||this.options.vertical)return!1;const t=this.getMajorTickPositions(),e=this.labels,s=Math.min(e.length,t.length-1);let i=0;for(let n=0;n<s;n++){const o=Math.abs(t[n+1]-t[n]),a=e[n].box,l=this.autoRotateLabelAngle(a,o);if(l!==0&&(i=l),i===-90)break}if(i!==0){for(let n=0;n<e.length;n++)e[n].options.rotation=i,e[n].reflow(new _);return!0}}arrangeTitle(){const{options:t,title:e}=this,s=t.labels.mirror,i=t.vertical;e&&(i?(e.options.align=s?G:z,e.options.vAlign=e.options.position):(e.options.align=e.options.position,e.options.vAlign=s?N:j),e.reflow(this.box))}arrangeNotes(){for(let t=0;t<this.notes.length;t++){const e=this.notes[t],s=e.options.value;let i;A(s)?(this.shouldRenderNote(s)?e.show():e.hide(),i=this.noteSlot(s)):e.hide(),e.reflow(i||this.lineBox())}}noteSlot(t){return this.getSlot(t)}alignTo(t){const e=t.lineBox(),s=this.options.vertical,i=s?P:T;this.box.snapTo(e,i),s?this.box.shrink(0,this.lineBox().height()-e.height()):this.box.shrink(this.lineBox().width()-e.width(),0),this.box[i+1]-=this.lineBox()[i+1]-e[i+1],this.box[i+2]-=this.lineBox()[i+2]-e[i+2]}axisLabelText(t,e,s){let i;const n=bt(e),o=()=>e.format?this.chartService.format.localeAuto(e.format,[t],e.culture):t;if(n){const a=Object.assign({},s,{get text(){return o()},value:t,format:e.format,culture:e.culture});i=n(a)}else i=o();return i}slot(t,e,s){const i=this.getSlot(t,e,s);if(i)return i.toRect()}contentBox(){const t=this.box.clone(),e=this.labels;if(e.length){const s=this.options.vertical?P:T;if(this.chartService.isPannable(s)){const i=this.maxLabelOffset();t[s+1]-=i.start,t[s+2]+=i.end}else{e[0].options.visible&&t.wrap(e[0].box);const i=e[e.length-1];i.options.visible&&t.wrap(i.box)}}return t}maxLabelOffset(){const{vertical:t,reverse:e}=this.options,s=this.labelsBetweenTicks(),i=this.getLabelsTickPositions(),n=t?P:T,o=this.labels,a=e?1:0,l=e?0:1;let h=0,c=0;for(let d=0;d<o.length;d++){const u=o[d],p=this.labelTickIndex(u);let g,f;s?(g=i[p+a],f=i[p+l]):g=f=i[p],h=Math.max(h,g-u.box[n+1]),c=Math.max(c,u.box[n+2]-f)}return{start:h,end:c}}limitRange(t,e,s,i,n){const o=this.options;if(t<s&&n<0&&(!A(o.min)||o.min<=s)||i<e&&n>0&&(!A(o.max)||i<=o.max))return null;if(e<s&&n>0||i<t&&n<0)return{min:t,max:e};const a=e-t;let l=t,h=e;return t<s&&n<0?(l=M(t,s,i),h=M(t+a,s+a,i)):e>i&&n>0&&(h=M(e,s,i),l=M(e-a,s,i-a)),{min:l,max:h}}valueRange(){return{min:this.seriesMin,max:this.seriesMax}}lineDir(){const{vertical:t,reverse:e}=this.options;return(t?-1:1)*(e?-1:1)}lineInfo(){const{vertical:t}=this.options,e=this.lineBox(),s=t?e.height():e.width(),i=t?P:T,n=this.lineDir(),a=i+(n===1?1:2).toString(),l=e[a];return{axis:i,axisOrigin:a,axisDir:n,lineBox:e,lineSize:s,lineStart:l}}pointOffset(t){const{axis:e,axisDir:s,axisOrigin:i,lineBox:n,lineSize:o}=this.lineInfo();return(s>0?t[e]-n[i]:n[i]-t[e])/o}scaleToDelta(t,e){const i=M(t,-.999,.999);let n;return i>0?n=e*Math.min(1,i):n=e-e/(1+i),n}labelsBetweenTicks(){return!this.options.justified}prepareUserOptions(){}}b(en,{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:ut,visible:!0},title:{visible:!0,position:O},majorTicks:{align:tr,size:4,skip:0,step:1},minorTicks:{align:tr,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:tr,minorTickType:ml,majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:ut,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0,_deferLabels:!1});const Cr="milliseconds",Ph="seconds",Eh="minutes",uo="hours",ze="days",po="weeks",hi="months",ss="years",yw=1,Mh=1e3,sn=60*Mh,na=60*sn,is=24*na,Ih=7*is,Rh=31*is,Lh=365*is,Oe={years:Lh,months:Rh,weeks:Ih,days:is,hours:na,minutes:sn,seconds:Mh,milliseconds:yw};function Oh(r,t){const e=r.getTime()-t,s=r.getTimezoneOffset()-t.getTimezoneOffset();return e-s*sn}function wt(r,t){return new Date(r.getTime()+t)}function st(r){let t;return r instanceof Date?t=r:r&&(t=new Date(r)),t}function vw(r,t=0){let e=0,s=r.getDay();if(!isNaN(s))for(;s!==t;)s===0?s=6:s--,e++;return wt(r,-e*is)}function Ho(r,t){return t===0&&r.getHours()===23?(r.setHours(r.getHours()+2),!0):!1}function bw(r,t){const e=new Date(r);e.setMinutes(0,0,0);const s=(r.getTimezoneOffset()-e.getTimezoneOffset())*sn;return wt(e,s+t*na)}function Pt(r,t,e,s){let i=r;if(r){let n=st(r);const o=n.getHours();e===ss?(i=new Date(n.getFullYear()+t,0,1),Ho(i,0)):e===hi?(i=new Date(n.getFullYear(),n.getMonth()+t,1),Ho(i,o)):e===po?(i=Pt(vw(n,s),t*7,ze),Ho(i,o)):e===ze?(i=new Date(n.getFullYear(),n.getMonth(),n.getDate()+t),Ho(i,o)):e===uo?i=bw(n,t):e===Eh?(i=wt(n,t*sn),i.getSeconds()>0&&i.setSeconds(0)):e===Ph?i=wt(n,t*Mh):e===Cr&&(i=wt(n,t)),e!==Cr&&i.getMilliseconds()>0&&i.setMilliseconds(0)}return i}function Bh(r,t,e){return Pt(st(r),0,t,e)}function Sf(r,t,e){const s=st(r);return s&&Bh(s,t,e).getTime()===s.getTime()?s:Pt(s,1,t,e)}function Tr(r,t){return r&&t?r.getTime()-t.getTime():-1}function be(r,t){return r.getTime()-t}function it(r){if(Ct(r)){let t=[];for(let e=0;e<r.length;e++)t.push(it(r[e]));return t}else if(r)return st(r).getTime()}function Pr(r,t){return r&&t?it(r)===it(t):r===t}function su(r,t,e){return Oh(r,t)/Oe[e]}function Xs(r,t,e,s){const i=st(r),n=st(t);let o;return e===hi?o=i.getMonth()-n.getMonth()+(i.getFullYear()-n.getFullYear())*12+su(i,new Date(i.getFullYear(),i.getMonth()),ze)/new Date(i.getFullYear(),i.getMonth()+1,0).getDate():e===ss?o=i.getFullYear()-n.getFullYear()+Xs(i,new Date(i.getFullYear(),0),hi,1)/12:e===ze||e===po?o=su(i,n,e):o=be(i,t)/Oe[e],o/s}function Dh(r,t,e){let s;return e===ss?s=t.getFullYear()-r.getFullYear():e===hi?s=Dh(r,t,ss)*12+t.getMonth()-r.getMonth():e===ze?s=Math.floor(be(t,r)/is):s=Math.floor(be(t,r)/Oe[e]),s}function kt(r,t){let e;return Yt(t)?e=r.parseDate(t)||st(t):e=st(t),e}function kf(r,t){if(Ct(t)){const e=[];for(let s=0;s<t.length;s++)e.push(kt(r,t[s]));return e}return kt(r,t)}function Cf(r,t){return F(r.weekStartDay)?r.weekStartDay:t&&t.firstDay?t.firstDay():0}const ww=.01,iu=.1;function _w(r,t){return r instanceof Date?t.findIndex(e=>Pr(e,r)):t.indexOf(r)}class pe extends en{initFields(){this._ticks={}}categoriesHash(){return""}clone(){const t=new pe(Object.assign({},this.options,{categories:this.options.srcCategories}),this.chartService);return t.createLabels(),t}initUserOptions(t){const e=t.categories||[],s=t.min!==void 0,i=t.max!==void 0;if(t.srcCategories=t.categories=e,(s||i)&&e.length){const n=s?Math.floor(t.min):0;let o;i?o=t.justified?Math.floor(t.max)+1:Math.ceil(t.max):o=e.length,t.categories=t.categories.slice(n,o)}return t}rangeIndices(){const t=this.options,e=t.categories.length||1,s=F(t.min)?t.min%1:0;let i;return F(t.max)&&t.max%1!==0&&t.max<this.totalRange().max?i=e-(1-t.max%1):i=e-(t.justified?1:0),{min:s,max:i}}range(){const t=this.options,e=F(t.min)?t.min:0,s=F(t.max)?t.max:this.totalRange().max;return{min:e,max:s}}roundedRange(){return this.range()}totalRange(){const t=this.options;return{min:0,max:Math.max(this._seriesMax||0,t.srcCategories.length)-(t.justified?1:0)}}scaleOptions(){const{min:t,max:e}=this.rangeIndices(),s=this.lineBox();return{scale:(this.options.vertical?s.height():s.width())/(e-t||1)*(this.options.reverse?-1:1),box:s,min:t,max:e}}arrangeLabels(){super.arrangeLabels(),this.hideOutOfRangeLabels()}hideOutOfRangeLabels(){const{box:t,labels:e}=this;if(e.length>0){const s=this.options.vertical?P:T,i=t[s+1],n=t[s+2],o=e[0],a=pt(e);(o.box[s+1]>n||o.box[s+2]<i)&&(o.options.visible=!1),(a.box[s+1]>n||a.box[s+2]<i)&&(a.options.visible=!1)}}getMajorTickPositions(){return this.getTicks().majorTicks}getMinorTickPositions(){return this.getTicks().minorTicks}getLabelsTickPositions(){return this.getTicks().labelTicks}tickIndices(t){const{min:e,max:s}=this.rangeIndices(),i=Math.ceil(s);let n=Math.floor(e);const o=[];for(;n<=i;)o.push(n),n+=t;return o}getTickPositions(t){const{vertical:e,reverse:s}=this.options,{scale:i,box:n,min:o}=this.scaleOptions(),a=n[(e?P:T)+(s?2:1)],l=this.tickIndices(t),h=[];for(let c=0;c<l.length;c++)h.push(a+S(i*(l[c]-o),At));return h}getTicks(){const t=this.options,e=this._ticks,s=this.rangeIndices(),i=this.lineBox(),n=i.getHash()+s.min+","+s.max+t.reverse+t.justified;if(e._hash!==n){const o=t.minorTicks.visible||t.minorGridLines.visible;e._hash=n,e.labelTicks=this.getTickPositions(1),e.majorTicks=this.filterOutOfRangePositions(e.labelTicks,i),e.minorTicks=o?this.filterOutOfRangePositions(this.getTickPositions(.5),i):[]}return e}filterOutOfRangePositions(t,e){if(!t.length)return t;const s=this.options.vertical?P:T,i=l=>e[s+1]<=l&&l<=e[s+2],n=t.length-1;let o=0;for(;!i(t[o])&&o<=n;)o++;let a=n;for(;!i(t[a])&&a>=0;)a--;return t.slice(o,a+1)}lineInfo(){const{vertical:t,reverse:e}=this.options,s=this.lineBox(),i=t?s.height():s.width(),n=t?P:T,o=e?-1:1,l=n+(o===1?1:2).toString(),h=s[l];return{axis:n,axisOrigin:l,axisDir:o,lineBox:s,lineSize:i,lineStart:h}}lineDir(){const{reverse:t}=this.options;return t?-1:1}getSlot(t,e,s){const i=this.options,{reverse:n,justified:o}=i,{scale:a,box:l,min:h}=this.scaleOptions(),{axis:c,lineStart:d}=this.lineInfo(),u=l.clone(),p=e===void 0,g=L(t,0);let f=L(e,g);f=Math.max(f-1,g),f=Math.max(g,f);let x=d+(g-h)*a,y=d+(f+1-h)*a;return p&&o&&(y=x),s&&(x=M(x,l[c+1],l[c+2]),y=M(y,l[c+1],l[c+2])),u[c+1]=n?y:x,u[c+2]=n?x:y,u}limitSlot(t){const s=this.options.vertical?P:T,i=this.lineBox(),n=t.clone();return n[s+1]=M(t[s+1],i[s+1],i[s+2]),n[s+2]=M(t[s+2],i[s+1],i[s+2]),n}slot(t,e,s){const i=Math.floor(this.options.min||0);let n=t,o=e;return typeof n=="string"?n=this.categoryIndex(n):F(n)&&(n-=i),typeof o=="string"?o=this.categoryIndex(o):F(o)&&(o-=i),super.slot(n,o,s)}pointCategoryIndex(t){const{reverse:e,justified:s,vertical:i}=this.options,n=i?P:T,{scale:o,box:a,min:l,max:h}=this.scaleOptions(),c=e?h:l,d=a[n+1],u=a[n+2],p=t[n];if(p<d||p>u)return null;let g=c+(p-d)/o;const f=g%1;return s?g=Math.round(g):f===0&&g>0&&g--,Math.floor(g)}getCategory(t){const e=this.pointCategoryIndex(t);return e===null?null:this.options.categories[e]}categoryIndex(t){return this.totalIndex(t)-Math.floor(this.options.min||0)}categoryAt(t,e){const s=this.options;return(e?s.srcCategories:s.categories)[t]}categoriesCount(){return(this.options.categories||[]).length}translateRange(t){const e=this.options,s=this.lineBox(),i=e.vertical?s.height():s.width(),n=e.categories.length,o=i/n,a=S(t/o,tt);return{min:a,max:n+a}}scaleRange(t,e){const s=Math.abs(this.pointOffset(e)),i=this.limitedRangeIndices(),n=i.max-i.min,o=this.scaleToDelta(t,n),a=s*o,l=(1-s)*o,h=i.min+a;let c=i.max-l;return c-h<iu&&(c=h+iu),{min:h,max:c}}zoomRange(t,e){const{min:s,max:i}=this.totalRange(),n=this.scaleRange(t,e);return{min:M(n.min,s,i),max:M(n.max,s,i)}}labelsCount(){const t=this.labelsRange();return t.max-t.min}labelsRange(){const t=this.options,{justified:e,labels:s}=t;let{min:i,max:n}=this.limitedRangeIndices(!0);const o=Math.floor(i);e?(i=Math.ceil(i),n=Math.floor(n)):(i=Math.floor(i),n=Math.ceil(n));let a;return i>s.skip?a=s.skip+s.step*Math.ceil((i-s.skip)/s.step):a=s.skip,{min:a-o,max:(t.categories.length?n+(e?1:0):0)-o}}createAxisLabel(t,e,s){const i=this.options,n=i.dataItems?i.dataItems[t]:null,o=L(i.categories[t],"");s.dataItem=n;const a=this.axisLabelText(o,e,s);return new Ms(o,a,t,n,e)}shouldRenderNote(t){const e=this.limitedRangeIndices();return Math.floor(e.min)<=t&&t<=Math.ceil(e.max)}noteSlot(t){const e=this.options,s=t-Math.floor(e.min||0);return this.getSlot(s)}arrangeNotes(){super.arrangeNotes(),this.hideOutOfRangeNotes()}hideOutOfRangeNotes(){const{notes:t,box:e}=this;if(t&&t.length){const s=this.options.vertical?P:T,i=e[s+1],n=e[s+2];for(let o=0;o<t.length;o++){const a=t[o];a.box&&(n<a.box[s+1]||a.box[s+2]<i)&&a.hide()}}}pan(t){const e=this.limitedRangeIndices(!0),{scale:s}=this.scaleOptions(),i=S(t/s,tt),n=this.totalRange(),o=e.min+i,a=e.max+i;return this.limitRange(o,a,0,n.max,i)}pointsRange(t,e){const{reverse:s,vertical:i}=this.options,n=i?P:T,o=this.limitedRangeIndices(!0),{scale:a,box:l}=this.scaleOptions(),h=l[n+(s?2:1)],c=t[n]-h,d=e[n]-h,u=o.min+c/a,p=o.min+d/a,g=Math.min(u,p),f=Math.max(u,p);if(f-g>=ww)return{min:g,max:f}}valueRange(){return this.range()}totalIndex(t){const e=this.options;return this._categoriesMap?this._categoriesMap.get(t):_w(t,e.srcCategories)}currentRangeIndices(){const t=this.options;let e=0;F(t.min)&&(e=Math.floor(t.min));let s;return F(t.max)?s=t.justified?Math.floor(t.max):Math.ceil(t.max)-1:s=this.totalCount()-1,{min:e,max:s}}limitedRangeIndices(t){const e=this.options;let s=F(e.min)?e.min:0,i;if(F(e.max)?i=e.max:F(e.min)?i=s+e.categories.length:i=this.totalRange().max||1,t){const n=this.totalRange();s=M(s,0,n.max),i=M(i,0,n.max)}return{min:s,max:i}}totalRangeIndices(){return{min:0,max:this.totalRange().max||1}}indexCategories(){if(!this._categoriesMap){const t=this._categoriesMap=new wb,e=this.options.srcCategories;for(let s=0;s<e.length;s++)t.set(e[s],s)}}totalCount(){return Math.max(this.options.srcCategories.length,this._seriesMax||0)}}b(pe,{type:"category",vertical:!1,majorGridLines:{visible:!1,width:1,color:ut},labels:{zIndex:1},justified:!1,_deferLabels:!0});const nu=3e5,Tf={milliseconds:"HH:mm:ss.fff",seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},Pf=.2,Aw="auto",Xe=[Cr,Ph,Eh,uo,ze,po,hi,ss],Er="fit";function sr(r,t){t&&(r._range=void 0);let e=r._range;return e||(e=r._range=bl(r),e.min=st(e.min),e.max=st(e.max)),e}class Sw{constructor(t){this.options=t}displayIndices(){return{min:0,max:1}}displayRange(){return{}}total(){return{}}valueRange(){return{}}valueIndex(){return-1}values(){return[]}totalIndex(){return-1}valuesCount(){return 0}totalCount(){return 0}dateAt(){return null}}class Ua{constructor(t,e,s){this.options=s,s.baseUnitStep=s.baseUnitStep||1;const{roundToBaseUnit:i,justified:n}=s;this.start=Pt(t,0,s.baseUnit,s.weekStartDay);const o=this.roundToTotalStep(e),a=!n&&Pr(e,o)&&!s.justifyEnd;this.end=this.roundToTotalStep(e,!n,a?1:0);const l=s.min||t;this.valueStart=this.roundToTotalStep(l),this.displayStart=i?this.valueStart:l;const h=s.max;if(!h)this.valueEnd=o,this.displayEnd=i||a?this.end:e;else{const c=!n&&Pr(h,this.roundToTotalStep(h))?-1:0;this.valueEnd=this.roundToTotalStep(h,!1,c),this.displayEnd=i?this.roundToTotalStep(h,!n):s.max}this.valueEnd<this.valueStart&&(this.valueEnd=this.valueStart),this.displayEnd<=this.displayStart&&(this.displayEnd=this.roundToTotalStep(this.displayStart,!1,1))}displayRange(){return{min:this.displayStart,max:this.displayEnd}}displayIndices(){if(!this._indices){const t=this.options,{baseUnit:e,baseUnitStep:s}=t,i=Xs(this.displayStart,this.valueStart,e,s),n=Xs(this.displayEnd,this.valueStart,e,s);this._indices={min:i,max:n}}return this._indices}total(){return{min:this.start,max:this.end}}totalCount(){return this.totalIndex(this.end)+(this.options.justified?1:0)}valueRange(){return{min:this.valueStart,max:this.valueEnd}}valueIndex(t){const e=this.options;return Math.floor(Xs(t,this.valueStart,e.baseUnit,e.baseUnitStep))}totalIndex(t){const e=this.options;return Math.floor(Xs(t,this.start,e.baseUnit,e.baseUnitStep))}dateIndex(t){const e=this.options;return Xs(t,this.valueStart,e.baseUnit,e.baseUnitStep)}valuesCount(){return this.valueIndex(this.valueEnd)+1}values(){let t=this._values;if(!t){const e=this.options,s=this.valueRange();this._values=t=[];for(let i=s.min;i<=s.max;)t.push(i),i=Pt(i,e.baseUnitStep,e.baseUnit,e.weekStartDay)}return t}dateAt(t,e){const s=this.options;return Pt(e?this.start:this.valueStart,s.baseUnitStep*t,s.baseUnit,s.weekStartDay)}roundToTotalStep(t,e,s){const{baseUnit:i,baseUnitStep:n,weekStartDay:o}=this.options,a=this.start,l=Xs(t,a,i,n);let h=e?Math.ceil(l):Math.floor(l);return s&&(h+=s),Pt(a,h*n,i,o)}}function Ef(r,t,e){const s=sr(r.categories),i=(r.max||s.max)-(r.min||s.min),{autoBaseUnitSteps:n,maxDateGroups:o}=r,a=r.baseUnit===Er;let l=t?Xe.indexOf(t):0,h=a?Xe[l++]:r.baseUnit,c=i/Oe[h],d=c,u,p,g;for(;!p||c>=o;){u=u||n[h].slice(0);do g=u.shift();while(g&&t===h&&g<e);if(g)p=g,c=d/p;else if(h===pt(Xe)){p=Math.ceil(d/o);break}else if(a)h=Xe[l++]||pt(Xe),d=i/Oe[h],u=null;else{c>o&&(p=Math.ceil(d/o));break}}r.baseUnitStep=p,r.baseUnit=h}function kw(r){const t=r.categories,e=A(t)?t.length:0;let s=gt,i,n;for(let o=0;o<e;o++){const a=t[o];if(a&&i){let l=Math.abs(Oh(a,i));l!==0&&(s=Math.min(s,l),s>=Lh?n=ss:s>=Rh-is*3?n=hi:s>=Ih?n=po:s>=is?n=ze:s>=na?n=uo:s>=sn?n=Eh:n=Ph)}i=a}r.baseUnit=n||ze}function Cw(r){const t=(r.baseUnit||"").toLowerCase();return t!==Er&&!D(t,Xe)&&kw(r),(t===Er||r.baseUnitStep===Aw)&&Ef(r),r}class fi extends pe{clone(){const t=new fi(Object.assign({},this.options),this.chartService);return t.createLabels(),t}categoriesHash(){const t=this.dataRange.total().min;return this.options.baseUnit+this.options.baseUnitStep+t}initUserOptions(t){return t}initFields(){super.initFields();const t=this.chartService,e=t.intl;let s=this.options,i=s.categories||[];if(i._parsed||(i=kf(e,i),i._parsed=!0),s=m({roundToBaseUnit:!0},s,{categories:i,min:kt(e,s.min),max:kt(e,s.max),weekStartDay:Cf(s,e)}),t.panning&&t.isPannable(s.vertical?P:T)&&(s.roundToBaseUnit=!1),s.userSetBaseUnit=s.userSetBaseUnit||s.baseUnit,s.userSetBaseUnitStep=s.userSetBaseUnitStep||s.baseUnitStep,this.options=s,s.srcCategories=i,i.length>0){const n=sr(i,!0),o=s.maxDivisions,a=Cw(s),l=s._forecast;if(l&&(l.before>0&&(n.min=Pt(n.min,-l.before,a.baseUnit,a.weekStartDay)),l.after>0&&(n.max=Pt(n.max,l.after,a.baseUnit,a.weekStartDay))),this.dataRange=new Ua(n.min,n.max,a),o){const h=this.dataRange.displayRange(),c=Object.assign({},s,{justified:!0,roundToBaseUnit:!1,baseUnit:"fit",min:h.min,max:h.max,maxDateGroups:o}),d=this.dataRange.options;Ef(c,d.baseUnit,d.baseUnitStep),this.divisionRange=new Ua(n.min,n.max,c)}else this.divisionRange=this.dataRange}else s.baseUnit=s.baseUnit||ze,this.dataRange=this.divisionRange=new Sw(s);this.rangeLabels=[]}tickIndices(t){const{dataRange:e,divisionRange:s}=this,i=s.valuesCount();if(!this.options.maxDivisions||!i)return super.tickIndices(t);const n=[];let o=s.values(),a=0;this.options.justified||(o=o.concat(s.dateAt(i)),a=.5);for(let l=0;l<o.length;l++)if(n.push(e.dateIndex(o[l])+a),t!==1&&l>=1){const h=n.length-1;n.splice(l,0,n[h-1]+(n[h]-n[h-1])*t)}return n}shouldRenderNote(t){const e=this.range(),s=this.options.categories||[];return Tr(t,e.min)>=0&&Tr(t,e.max)<=0&&s.length}parseNoteValue(t){return kt(this.chartService.intl,t)}noteSlot(t){return this.getSlot(t)}translateRange(t){const e=this.options,{baseUnit:s,weekStartDay:i,vertical:n}=e,o=this.lineBox(),a=n?o.height():o.width();let l=this.range();const h=a/(l.max-l.min),c=S(t/h,tt);if(l.min&&l.max){const d=wt(e.min||l.min,c),u=wt(e.max||l.max,c);l={min:Pt(d,0,s,i),max:Pt(u,0,s,i)}}return l}labelsRange(){return{min:this.options.labels.skip,max:this.divisionRange.valuesCount()}}pan(t){if(this.isEmpty())return null;const e=this.options,s=this.lineBox(),i=e.vertical?s.height():s.width(),{min:n,max:o}=this.dataRange.displayRange(),a=this.dataRange.total(),l=i/(o-n),h=S(t/l,tt)*(e.reverse?-1:1),c=wt(n,h),d=wt(o,h),u=this.limitRange(it(c),it(d),it(a.min),it(a.max),h);if(u)return u.min=st(u.min),u.max=st(u.max),u.baseUnit=e.baseUnit,u.baseUnitStep=e.baseUnitStep||1,u.userSetBaseUnit=e.userSetBaseUnit,u.userSetBaseUnitStep=e.userSetBaseUnitStep,u}pointsRange(t,e){if(this.isEmpty())return null;const s=super.pointsRange(t,e),i=this.dataRange.displayRange(),n=this.dataRange.displayIndices(),o=be(i.max,i.min)/(n.max-n.min),a=this.options,l=wt(i.min,s.min*o),h=wt(i.min,s.max*o);return{min:l,max:h,baseUnit:a.userSetBaseUnit||a.baseUnit,baseUnitStep:a.userSetBaseUnitStep||a.baseUnitStep}}scaleRange(t,e){if(this.isEmpty())return{};const s=this.options,i=s.userSetBaseUnit===Er,n=this.dataRange.total(),{min:o,max:a}=this.dataRange.displayRange(),l=Math.abs(this.pointOffset(e)),h=a-o,c=this.scaleToDelta(t,h),d=Math.round(l*c),u=Math.round((1-l)*c);let{baseUnit:p}=this.dataRange.options,g=new Date(o.getTime()+d),f=new Date(a.getTime()-u);if(i){const{autoBaseUnitSteps:x,maxDateGroups:y}=s,v=pt(x[p])*y*Oe[p],k=be(a,o),E=be(f,g);let I=Xe.indexOf(p),B,V;if(E<Oe[p]&&p!==Cr)p=Xe[I-1],B=pt(x[p]),V=(k-(y-1)*B*Oe[p])/2,g=wt(o,V),f=wt(a,-V);else if(E>v&&p!==ss){let q=0;do{I++,p=Xe[I],q=0,V=2*Oe[p];do B=x[p][q],q++;while(q<x[p].length&&V*B<k)}while(p!==ss&&V*B<k);V=(V*B-k)/2,V>0&&(g=wt(o,-V),f=wt(a,V),g=wt(g,M(f,n.min,n.max)-f),f=wt(f,M(g,n.min,n.max)-g))}}if(g&&f&&be(f,g)>0)return{min:g,max:f,baseUnit:s.userSetBaseUnit||s.baseUnit,baseUnitStep:s.userSetBaseUnitStep||s.baseUnitStep}}zoomRange(t,e){const s=this.dataRange.total(),i=this.scaleRange(t,e);if(i){if(i.min<s.min){if(t<0&&this.options.justified){const n=be(s.min,i.min);i.max=wt(i.max,n)}i.min=s.min}i.max>s.max&&(i.max=s.max)}return i}range(){return this.dataRange.displayRange()}createLabels(){super.createLabels(),this.createRangeLabels()}clearLabels(){super.clearLabels(),this.rangeLabels=[]}arrangeLabels(){this.arrangeRangeLabels(),super.arrangeLabels()}arrangeRangeLabels(){const{options:t,rangeLabels:e}=this;if(e.length===0)return;const s=this.lineBox(),i=t.vertical,n=t.rangeLabels.mirror||t.labels.mirror,o=e[0];if(o){const l=i?s.y1-o.box.height()/2:s.x1;this.positionLabel(o,n,l)}const a=e[1];if(a){const l=i?s.y2-a.box.height()/2:s.x2;this.positionLabel(a,n,l)}}autoRotateLabels(){super.autoRotateLabels(),this.autoRotateRangeLabels()}hideOutOfRangeLabels(){super.hideOutOfRangeLabels(),this.hideOverlappingLabels()}hideOverlappingLabels(){const{rangeLabels:t,labels:e}=this;if(t.length===0)return;function s(o,a){return!a.options.visible||a.box.overlaps(o.box)?(a.options.visible=!1,!0):!1}const i=t[0];if(i&&i.options.visible)for(let o=0;o<e.length&&s(i,e[o]);o++);const n=t[1];if(n&&n.options.visible)for(let o=e.length-1;o>0&&s(n,e[o]);--o);}contentBox(){const t=super.contentBox(),e=this.rangeLabels;for(let s=0;s<e.length;s++){const i=e[s];i.options.visible&&t.wrap(i.box)}return t}createAxisLabel(t,e,s={}){const i=this.options,n=i.dataItems&&!i.maxDivisions?i.dataItems[t]:null,o=this.divisionRange.dateAt(t),a=e.dateFormats[this.divisionRange.options.baseUnit];e.format=e.format||a,s.dataItem=n;const l=this.axisLabelText(o,e,s);if(l)return new Ms(o,l,t,n,e)}createRangeLabels(){const{displayStart:t,displayEnd:e}=this.divisionRange,s=this.options,i=Object.assign({},s.labels,s.rangeLabels,{align:O,zIndex:s.zIndex});if(i.visible!==!0)return;this.normalizeLabelRotation(i),i.alignRotation=O,i.rotation==="auto"&&(i.rotation=0,s.autoRotateRangeLabels=!0);const n=i.dateFormats[this.divisionRange.options.baseUnit];i.format=i.format||n;const o=(h,c,d)=>{if(d){const u=new Ms(c,d,h,null,i);this.append(u),this.rangeLabels.push(u)}},a=this.axisLabelText(t,i,{index:0,count:2});o(0,t,a);const l=this.axisLabelText(e,i,{index:1,count:2});o(1,e,l)}autoRotateRangeLabels(){const t=this.rangeLabels;if(!this.options.autoRotateRangeLabels||this.options.vertical||t.length!==2)return;const e=(i,n,o)=>{const a=Math.abs(n[o+1]-n[o])*2,l=this.autoRotateLabelAngle(i.box,a);l!==0&&(i.options.rotation=l,i.reflow(new _))},s=this.getMajorTickPositions();e(t[0],s,0),e(t[1],s,s.length-2)}categoryIndex(t){return this.dataRange.valueIndex(t)}slot(t,e,s){const i=this.dataRange;let n=t,o=e;n instanceof Date&&(n=i.dateIndex(n)),o instanceof Date&&(o=i.dateIndex(o));const a=this.getSlot(n,o,s);if(a)return a.toRect()}getSlot(t,e,s){let i=t,n=e;return typeof i===Yn&&(i=this.categoryIndex(i)),typeof n===Yn&&(n=this.categoryIndex(n)),super.getSlot(i,n,s)}valueRange(){const t=this.options,e=sr(t.srcCategories);return{min:st(e.min),max:st(e.max)}}categoryAt(t,e){return this.dataRange.dateAt(t,e)}categoriesCount(){return this.dataRange.valuesCount()}rangeIndices(){return this.dataRange.displayIndices()}labelsBetweenTicks(){return!this.divisionRange.options.justified}prepareUserOptions(){this.isEmpty()||(this.options.categories=this.dataRange.values())}getCategory(t){const e=this.pointCategoryIndex(t);return e===null?null:this.dataRange.dateAt(e)}totalIndex(t){return this.dataRange.totalIndex(t)}currentRangeIndices(){const t=this.dataRange.valueRange();return{min:this.dataRange.totalIndex(t.min),max:this.dataRange.totalIndex(t.max)}}totalRange(){return this.dataRange.total()}totalRangeIndices(){const t=this.dataRange.total();return{min:this.dataRange.totalIndex(t.min),max:this.dataRange.totalIndex(t.max)}}totalCount(){return this.dataRange.totalCount()}isEmpty(){return!this.options.srcCategories.length}roundedRange(){if(this.options.roundToBaseUnit!==!1||this.isEmpty())return this.range();const t=this.options,e=sr(t.srcCategories);return new Ua(e.min,e.max,Object.assign({},t,{justified:!1,roundToBaseUnit:!0,justifyEnd:!1})).displayRange()}}b(fi,{type:Je,labels:{dateFormats:Tf},rangeLabels:{visible:!1},autoBaseUnitSteps:{milliseconds:[1,10,100],seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10});function Tw(r,t,e){if(!r&&!t)return 0;let s;if(r>=0&&t>=0){const i=r===t?0:r;let n=(t-i)/t;if(e===!1||!e&&n>Pf)return 0;s=Math.max(0,i-(t-i)/2)}else s=r;return s}function Pw(r,t,e){if(!r&&!t)return 1;let s;if(r<=0&&t<=0){const i=r===t?0:t;let n=Math.abs((i-r)/i);if(e===!1||!e&&n>Pf)return 0;s=Math.min(0,i-(r-i)/2)}else s=t;return s}function Mf(r,t){return S(Math.floor(r/t)*t,tt)}function Mr(r,t){return S(Math.ceil(r/t)*t,tt)}function Ir(r){return Math.max(Math.min(r,nu),-nu)}const ja=Math.pow(10,-tt+1);class Ft extends en{constructor(t,e,s,i){super(Object.assign({},s,{seriesMin:t,seriesMax:e}),i)}initUserOptions(t){const e=Ew(t.seriesMin,t.seriesMax,t);return this.totalOptions=Mw(e,t),Rw(e,t)}initFields(){this.totalMin=this.totalOptions.min,this.totalMax=this.totalOptions.max,this.totalMajorUnit=this.totalOptions.majorUnit,this.seriesMin=this.options.seriesMin,this.seriesMax=this.options.seriesMax}clone(){return new Ft(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)}startValue(){return 0}range(){const t=this.options;return{min:t.min,max:t.max}}getDivisions(t){if(t===0)return 1;const e=this.options,s=e.max-e.min;return Math.floor(S(s/t,At))+1}getTickPositions(t,e){const s=this.options,{axisDir:i,axisOrigin:n,lineBox:o,lineSize:a}=this.lineInfo(),l=s.max-s.min,h=a/l,c=t*h,d=this.getDivisions(t),u=[];let p=o[n],g=0;e&&(g=e/t);for(let f=0;f<d;f++)f%g!==0&&u.push(S(p,At)),p=p+c*i;return u}getMajorTickPositions(){return this.getTickPositions(this.options.majorUnit)}getMinorTickPositions(){return this.getTickPositions(this.options.minorUnit)}getSlot(t,e,s=!1){const i=this.options,{axis:n,axisDir:o,lineBox:a,lineSize:l,lineStart:h}=this.lineInfo(),c=o*(l/(i.max-i.min));let d=L(t,e||0),u=L(e,t||0);s&&(d=M(d,i.min,i.max),u=M(u,i.min,i.max));const p=Math.min(d,u)-i.min,g=Math.max(d,u)-i.min,f=new _(a.x1,a.y1,a.x1,a.y1);return f[n+1]=Ir(h+c*(o>0?p:g)),f[n+2]=Ir(h+c*(o>0?g:p)),f}getValue(t){const e=this.options,s=Number(e.max),i=Number(e.min),n=this.pointOffset(t),o=n*(s-i);if(n<0||n>1)return null;const a=i+o;return S(a,tt)}translateRange(t){const e=this.options,{vertical:s,reverse:i,max:n,min:o}=e,{lineSize:a}=this.lineInfo(),l=n-o,h=a/l;let c=S(t/h,tt);return(s||i)&&!(s&&i)&&(c=-c),{min:o+c,max:n+c,offset:c}}labelsCount(){return this.getDivisions(this.options.majorUnit)}createAxisLabel(t,e,s){const i=this.options,n=S(i.min+t*i.majorUnit,tt),o=this.axisLabelText(n,e,s);return new Ms(n,o,t,null,e)}shouldRenderNote(t){const e=this.range();return e.min<=t&&t<=e.max}pan(t){const e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)}pointsRange(t,e){const s=this.getValue(t),i=this.getValue(e),n=Math.min(s,i),o=Math.max(s,i);if(this.isValidRange(n,o))return{min:n,max:o}}scaleRange(t,e){const s=Math.abs(this.pointOffset(e)),i=this.options.max-this.options.min,n=this.scaleToDelta(t,i),o=s*n,a=(1-s)*n,l=S(this.options.min+o,tt);let h=S(this.options.max-a,tt);return h-l<ja&&(h=l+ja),{min:l,max:h}}zoomRange(t,e){const{totalMin:s,totalMax:i}=this,n=this.scaleRange(t,e);return{min:M(n.min,s,i),max:M(n.max,s,i),narrowRange:!1}}isValidRange(t,e){return e-t>ja}}function Ew(r,t,e){const s=e.narrowRange;let i=Tw(r,t,s),n=Pw(r,t,s);const o=Ji(i,n),a={majorUnit:o};return e.roundToMajorUnit!==!1&&(i<0&&ou(i,o,1/3)&&(i-=o),n>0&&ou(n,o,1/3)&&(n+=o)),a.min=Mf(i,o),a.max=Mr(n,o),a}function Mw(r,t){return{min:A(t.min)?Math.min(r.min,t.min):r.min,max:A(t.max)?Math.max(r.max,t.max):r.max,majorUnit:r.majorUnit}}function Iw(r,t){for(let e=0;e<t.length;e++){const s=t[e];r[s]===null&&(r[s]=void 0)}}function Rw(r,t){let e=t,s,i;if(t){Iw(t,["min","max"]),s=A(t.min),i=A(t.max);const o=s||i;o&&t.min===t.max&&(t.min>0?t.min=0:t.max=1),t.majorUnit?(r.min=Mf(r.min,t.majorUnit),r.max=Mr(r.max,t.majorUnit)):o&&(e=m(r,t),r.majorUnit=Ji(e.min,e.max))}r.minorUnit=(e.majorUnit||r.majorUnit)/5;const n=m(r,e);return n.min>=n.max&&(s&&!i?n.max=n.min+n.majorUnit:!s&&i&&(n.min=n.max-n.majorUnit)),n}function ou(r,t,e){const s=S(Math.abs(r%t),tt),i=t*(1-e);return s===0||s>i}b(Ft,{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:ut},labels:{format:"#.####################"},zIndex:1});const ru=1e3;class oa extends en{constructor(t,e,s,i){const n=st(t),o=st(e),a=i.intl;let l=s||{};l=m(l||{},{min:kt(a,l.min),max:kt(a,l.max),axisCrossingValue:kf(a,l.axisCrossingValues||l.axisCrossingValue),weekStartDay:Cf(l,a)}),l=Ow(n,o,l),super(l,i),this.intlService=a,this.seriesMin=n,this.seriesMax=o;const h=l.weekStartDay||0;this.totalMin=it(Bh(it(n)-1,l.baseUnit,h)),this.totalMax=it(Sf(it(o)+1,l.baseUnit,h))}clone(){return new oa(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)}range(){const t=this.options;return{min:t.min,max:t.max}}getDivisions(t){const e=this.options;return Math.floor(Dh(e.min,e.max,e.baseUnit)/t+1)}getTickPositions(t){const e=this.options,{axisDir:s,lineSize:i,lineStart:n}=this.lineInfo(),o=this.getDivisions(t),a=be(e.max,e.min),l=i/a,h=e.weekStartDay||0,c=[n];for(let d=1;d<o;d++){const u=Pt(e.min,d*t,e.baseUnit,h),p=n+be(u,e.min)*l*s;c.push(S(p,At))}return c}getMajorTickPositions(){return this.getTickPositions(this.options.majorUnit)}getMinorTickPositions(){return this.getTickPositions(this.options.minorUnit)}getSlot(t,e,s){return Ft.prototype.getSlot.call(this,kt(this.intlService,t),kt(this.intlService,e),s)}getValue(t){const e=Ft.prototype.getValue.call(this,t);return e!==null?st(e):null}labelsCount(){return this.getDivisions(this.options.majorUnit)}createAxisLabel(t,e,s){const i=this.options,n=t*i.majorUnit,o=i.weekStartDay||0;let a=i.min;n>0&&(a=Pt(a,n,i.baseUnit,o));const l=e.dateFormats[i.baseUnit];e.format=e.format||l;const h=this.axisLabelText(a,e,s);return new Ms(a,h,t,null,e)}translateRange(t){const e=this.options,s=this.lineBox(),{vertical:i,reverse:n}=e,o=i?s.height():s.width(),a=this.range(),l=o/be(a.max,a.min);let h=S(t/l,tt);(i||n)&&!(i&&n)&&(h=-h);let c=wt(e.min,h),d=wt(e.max,h);return{min:c,max:d,offset:h}}shouldRenderNote(t){const e=this.range();return Tr(t,e.min)>=0&&Tr(t,e.max)<=0}pan(t){const e=this.translateRange(t,!0),s=this.limitRange(it(e.min),it(e.max),this.totalMin,this.totalMax,e.offset);if(s)return{min:st(s.min),max:st(s.max)}}pointsRange(t,e){const s=this.getValue(t),i=this.getValue(e),n=Math.min(s,i),o=Math.max(s,i);return{min:st(n),max:st(o)}}scaleRange(t,e){const s=Math.abs(this.pointOffset(e)),i=this.options.max-this.options.min,n=this.scaleToDelta(t,i),o=s*n,a=(1-s)*n,l=st(it(this.options.min)+o);let h=st(it(this.options.max)-a);return h-l<ru&&(h=st(it(l)+ru)),{min:l,max:h}}zoomRange(t,e){const s=this.scaleRange(t,e),i=st(M(it(s.min),this.totalMin,this.totalMax)),n=st(M(it(s.max),this.totalMin,this.totalMax));return{min:i,max:n}}}function Lw(r){let t=uo;return r>=Lh?t=ss:r>=Rh?t=hi:r>=Ih?t=po:r>=is&&(t=ze),t}function Ow(r,t,e){const s=e.min||r,i=e.max||t,n=e.baseUnit||(i&&s?Lw(Oh(i,s)):uo),o=Oe[n],a=e.weekStartDay||0,l=Bh(it(s)-1,n,a)||st(i),h=Sf(it(i)+1,n,a),d=(e.majorUnit?e.majorUnit:void 0)||Mr(Ji(l.getTime(),h.getTime()),o)/o,u=Dh(l,h,n),g=Mr(u,d)-u,f=Math.floor(g/2),x=g-f;return e.baseUnit||delete e.baseUnit,e.baseUnit=e.baseUnit||n,e.min=e.min||Pt(l,-f,n,a),e.max=e.max||Pt(h,x,n,a),e.minorUnit=e.minorUnit||d/5,e.majorUnit=d,e}b(oa,{type:Je,majorGridLines:{visible:!0,width:1,color:ut},labels:{dateFormats:Tf}});const If=10,au=1e-6;class ci extends en{constructor(t,e,s,i){const n=m({majorUnit:If,min:t,max:e},s),o=n.majorUnit,a=zw(e,o),l=Dw(t,e,n),h=Bw(l,a,n,s);n.max=h.max,n.min=h.min,n.minorUnit=s.minorUnit||S(o-1,tt),super(n,i),this.totalMin=A(s.min)?Math.min(l,s.min):l,this.totalMax=A(s.max)?Math.max(a,s.max):a,this.logMin=S(ve(h.min,o),tt),this.logMax=S(ve(h.max,o),tt),this.seriesMin=t,this.seriesMax=e,this.createLabels()}clone(){return new ci(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)}startValue(){return this.options.min}getSlot(t,e,s){const{options:i,logMin:n,logMax:o}=this,{majorUnit:a,min:l,max:h}=i,{axis:c,axisDir:d,lineBox:u,lineSize:p,lineStart:g}=this.lineInfo(),f=d*(p/(o-n));let x=L(t,e||1),y=L(e,t||1);if(x<=0||y<=0)return null;s&&(x=M(x,l,h),y=M(y,l,h)),x=ve(x,a),y=ve(y,a);const v=Math.min(x,y)-n,k=Math.max(x,y)-n,E=new _(u.x1,u.y1,u.x1,u.y1);return E[c+1]=Ir(g+f*(d>0?v:k)),E[c+2]=Ir(g+f*(d>0?k:v)),E}getValue(t){const{options:e,logMin:s,logMax:i}=this,{majorUnit:n}=e,{axis:o,axisDir:a,lineStart:l,lineSize:h}=this.lineInfo(),c=(i-s)/h,d=a*(t[o]-l),u=d*c;if(d<0||d>h)return null;const p=s+u;return S(Math.pow(n,p),tt)}range(){const t=this.options;return{min:t.min,max:t.max}}translateRange(t){const{options:e,logMin:s,logMax:i}=this,{reverse:n,vertical:o,majorUnit:a}=e,l=this.lineBox(),c=(o?l.height():l.width())/(i-s);let d=S(t/c,tt);return(o||n)&&!(o&&n)&&(d=-d),{min:Math.pow(a,s+d),max:Math.pow(a,i+d),offset:d}}labelsCount(){const t=Math.floor(this.logMax);return Math.floor(t-this.logMin)+1}getMajorTickPositions(){const t=[];return this.traverseMajorTicksPositions(e=>{t.push(e)},{step:1,skip:0}),t}createTicks(t){const e=this.options,{majorTicks:s,minorTicks:i,vertical:n}=e,o=e.labels.mirror,a=this.lineBox(),l=[],h={vertical:n};function c(d,u){h.tickX=o?a.x2:a.x2-u.size,h.tickY=o?a.y1-u.size:a.y1,h.position=d,t.append(_f(h,u))}return s.visible&&this.traverseMajorTicksPositions(c,s),i.visible&&this.traverseMinorTicksPositions(c,i),l}createGridLines(t){const e=this.options,{minorGridLines:s,majorGridLines:i,vertical:n}=e,o=t.lineBox(),a={lineStart:o[n?"x1":"y1"],lineEnd:o[n?"x2":"y2"],vertical:n},l=[],h=this.gridLinesVisual();function c(d,u){D(d,l)||(a.position=d,h.append(Af(a,u)),l.push(d))}return i.visible&&this.traverseMajorTicksPositions(c,i),s.visible&&this.traverseMinorTicksPositions(c,s),h.children}traverseMajorTicksPositions(t,e){const{lineStart:s,step:i}=this.lineInfo(),{logMin:n,logMax:o}=this;for(let a=Math.ceil(n)+e.skip;a<=o;a+=e.step){let l=S(s+i*(a-n),tt);t(l,e)}}traverseMinorTicksPositions(t,e){const{min:s,max:i,minorUnit:n,majorUnit:o}=this.options,{lineStart:a,step:l}=this.lineInfo(),{logMin:h,logMax:c}=this,d=Math.floor(h);for(let u=d;u<c;u++){const p=this._minorIntervalOptions(u);for(let g=e.skip;g<n;g+=e.step){const f=p.value+g*p.minorStep;if(f>i)break;if(f>=s){const x=S(a+l*(ve(f,o)-h),tt);t(x,e)}}}}createAxisLabel(t,e,s){const i=Math.ceil(this.logMin+t),n=Math.pow(this.options.majorUnit,i),o=this.axisLabelText(n,e,s);return new Ms(n,o,t,null,e)}shouldRenderNote(t){const e=this.range();return e.min<=t&&t<=e.max}pan(t){const e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)}pointsRange(t,e){const s=this.getValue(t),i=this.getValue(e),n=Math.min(s,i),o=Math.max(s,i);return{min:n,max:o}}scaleRange(t,e){const{majorUnit:s}=this.options,i=ve(this.options.min,s),n=ve(this.options.max,s),o=Math.abs(this.pointOffset(e)),a=n-i,l=this.scaleToDelta(t,a),h=Math.pow(s,i+o*l);let c=Math.pow(s,n-(1-o)*l);return c-h<au&&(c=h+au),{min:h,max:c}}zoomRange(t,e){const s=this.scaleRange(t,e),{totalMin:i,totalMax:n}=this;return{min:M(s.min,i,n),max:M(s.max,i,n)}}_minorIntervalOptions(t){const{minorUnit:e,majorUnit:s}=this.options,i=Math.pow(s,t),a=(Math.pow(s,t+1)-i)/e;return{value:i,minorStep:a}}lineInfo(){const t=super.lineInfo();return t.step=t.axisDir*(t.lineSize/(this.logMax-this.logMin)),t}}function Bw(r,t,e,s){let{min:i,max:n}=e;return A(e.axisCrossingValue)&&e.axisCrossingValue<=0&&Ga(),A(s.max)?s.max<=0&&Ga():n=t,A(s.min)?s.min<=0&&Ga():i=r,{min:i,max:n}}function Dw(r,t,e){const s=e.majorUnit;let i=r;return r<=0?i=t<=1?Math.pow(s,-2):1:e.narrowRange||(i=Math.pow(s,Math.floor(ve(r,s)))),i}function zw(r,t){const e=S(ve(r,t),tt)%1;let s;return r<=0?s=t:e!==0&&(e<.3||e>.9)?s=Math.pow(t,ve(r,t)+.2):s=Math.pow(t,Math.ceil(ve(r,t))),s}function Ga(){throw new Error("Non positive values cannot be used for a logarithmic axis")}function ve(r,t){return Math.log(r)/Math.log(t)}b(ci,{type:"log",majorUnit:If,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:ut},zIndex:1,_deferLabels:!0});const Rf={createGridLines:function(r){const t=this.options,e=Math.abs(this.box.center().y-r.lineBox().y1);let s=[],i=!1,n,o;return t.majorGridLines.visible&&(n=this.majorGridLineAngles(r),i=!0,s=this.renderMajorGridLines(n,e,t.majorGridLines)),t.minorGridLines.visible&&(o=this.minorGridLineAngles(r,i),gi(s,this.renderMinorGridLines(o,e,t.minorGridLines,r,i))),s},renderMajorGridLines:function(r,t,e){return this.renderGridLines(r,t,e)},renderMinorGridLines:function(r,t,e,s,i){const n=this.radiusCallback&&this.radiusCallback(t,s,i);return this.renderGridLines(r,t,e,n)},renderGridLines:function(r,t,e,s){const i={stroke:{width:e.width,color:e.color,dashType:e.dashType}},n=this.box.center(),o=new Rt([n.x,n.y],t),a=this.gridLinesVisual();for(let l=0;l<r.length;l++){const h=new C(i);s&&(o.radius=s(r[l])),h.moveTo(o.center).lineTo(o.pointAt(r[l]+180)),a.append(h)}return a.children},gridLineAngles:function(r,t,e,s,i){const n=this.intervals(t,e,s,i),o=r.options,a=o.visible&&(o.line||{}).visible!==!1;return of(n,l=>{const h=this.intervalAngle(l);if(!a||h!==90)return h})}};class Zn extends pe{range(){return{min:0,max:this.options.categories.length}}reflow(t){this.box=t,this.reflowLabels()}lineBox(){return this.box}reflowLabels(){const{labels:t,options:{labels:e}}=this,s=e.skip||0,i=e.step||1,n=new _;for(let o=0;o<t.length;o++){t[o].reflow(n);const a=t[o].box;t[o].reflow(this.getSlot(s+o*i).adjacentBox(0,a.width(),a.height()))}}intervals(t,e,s,i=!1){const n=this.options,a=n.categories.length/t||1,l=360/a,h=e||0,c=s||1,d=[];let u=0;for(let p=h;p<a;p+=c)n.reverse?u=360-p*l:u=p*l,u=S(u,At)%360,i&&D(u,i)||d.push(u);return d}majorIntervals(){return this.intervals(1)}minorIntervals(){return this.intervals(.5)}intervalAngle(t){return(360+t+this.options.startAngle)%360}majorAngles(){return of(this.majorIntervals(),t=>this.intervalAngle(t))}createLine(){return[]}majorGridLineAngles(t){const e=this.options.majorGridLines;return this.gridLineAngles(t,1,e.skip,e.step)}minorGridLineAngles(t,e){const{minorGridLines:s,majorGridLines:i}=this.options,n=e?this.intervals(1,i.skip,i.step):null;return this.gridLineAngles(t,.5,s.skip,s.step,n)}radiusCallback(t,e,s){if(e.options.type!==Ss){const i=yt(360/(this.options.categories.length*2)),n=Math.cos(i)*t,o=this.majorAngles();return function(l){return!s&&D(l,o)?t:n}}}createPlotBands(){const t=this.options.plotBands||[],e=this._plotbandGroup=new W({zIndex:-1});for(let s=0;s<t.length;s++){const i=t[s],n=this.plotBandSlot(i),o=this.getSlot(i.from),a=i.from-Math.floor(i.from);n.startAngle+=a*o.angle;const l=Math.ceil(i.to)-i.to;n.angle-=(l+a)*o.angle;const h=Ni.current.createRing(n,{fill:{color:i.color,opacity:i.opacity},stroke:{opacity:i.opacity}});e.append(h)}this.appendVisual(e)}plotBandSlot(t){return this.getSlot(t.from,t.to-1)}getSlot(t,e){const s=this.options,i=s.justified,n=this.box,o=this.majorAngles(),a=o.length,l=360/a;let h=t;s.reverse&&!i&&(h=(h+1)%a),h=M(Math.floor(h),0,a-1);let c=o[h];i&&(c=c-l/2,c<0&&(c+=360));const u=M(Math.ceil(e||h),h,a-1)-h+1,p=l*u;return new tn(n.center(),0,n.height()/2,c,p)}slot(t,e){const s=this.getSlot(t,e),i=s.startAngle+180,n=i+s.angle;return new Ps([s.center.x,s.center.y],{startAngle:i,endAngle:n,radiusX:s.radius,radiusY:s.radius})}pointCategoryIndex(t){const e=this.options.categories.length;let s=null;for(let i=0;i<e;i++)if(this.getSlot(i).containsPoint(t)){s=i;break}return s}}b(Zn,{startAngle:90,labels:{margin:X(10)},majorGridLines:{visible:!0},justified:!0});m(Zn.prototype,Rf);class zh extends en{constructor(t,e){super(t,e);const s=this.options;s.minorUnit=s.minorUnit||s.majorUnit/2}getDivisions(t){return Ft.prototype.getDivisions.call(this,t)-1}reflow(t){this.box=t,this.reflowLabels()}reflowLabels(){const{options:t,labels:e,options:{labels:s}}=this,i=s.skip||0,n=s.step||1,o=new _,a=this.intervals(t.majorUnit,i,n);for(let l=0;l<e.length;l++){e[l].reflow(o);const h=e[l].box;e[l].reflow(this.getSlot(a[l]).adjacentBox(0,h.width(),h.height()))}}lineBox(){return this.box}intervals(t,e,s,i=!1){const n=this.options.min,o=this.getDivisions(t),a=[],l=e||0,h=s||1;for(let c=l;c<o;c+=h){const d=(360+n+c*t)%360;i&&D(d,i)||a.push(d)}return a}majorIntervals(){return this.intervals(this.options.majorUnit)}minorIntervals(){return this.intervals(this.options.minorUnit)}intervalAngle(t){return(540-t-this.options.startAngle)%360}createLine(){return[]}majorGridLineAngles(t){const e=this.options.majorGridLines;return this.gridLineAngles(t,this.options.majorUnit,e.skip,e.step)}minorGridLineAngles(t,e){const s=this.options,{minorGridLines:i,majorGridLines:n}=s,o=e?this.intervals(s.majorUnit,n.skip,n.step):null;return this.gridLineAngles(t,s.minorUnit,i.skip,i.step,o)}plotBandSlot(t){return this.getSlot(t.from,t.to)}getSlot(t,e){const{options:s,box:i}=this,n=s.startAngle;let o=M(t,s.min,s.max),a=M(e||o,o,s.max);if(s.reverse&&(o*=-1,a*=-1),o=(540-o-n)%360,a=(540-a-n)%360,a<o){const l=o;o=a,a=l}return new tn(i.center(),0,i.height()/2,o,a-o)}slot(t,e=t){const s=this.options,i=360-s.startAngle,n=this.getSlot(t,e),o=Math.min(t,e),a=Math.max(t,e);let l,h;return s.reverse?(l=o,h=a):(l=360-a,h=360-o),l=(l+i)%360,h=(h+i)%360,new Ps([n.center.x,n.center.y],{startAngle:l,endAngle:h,radiusX:n.radius,radiusY:n.radius})}getValue(t){const e=this.options,s=this.box.center(),i=t.x-s.x,n=t.y-s.y;let o=Math.round(_s(Math.atan2(n,i))),a=e.startAngle;return e.reverse||(o*=-1,a*=-1),(o+a+360)%360}valueRange(){return{min:0,max:Math.PI*2}}}b(zh,{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:X(10)},majorGridLines:{color:ut,visible:!0,width:1},minorGridLines:{color:"#aaa"}});m(zh.prototype,Rf,{createPlotBands:Zn.prototype.createPlotBands,majorAngles:Zn.prototype.majorAngles,range:Ft.prototype.range,labelsCount:Ft.prototype.labelsCount,createAxisLabel:Ft.prototype.createAxisLabel});const Lf={options:{majorGridLines:{visible:!0}},createPlotBands:function(){const{majorGridLines:{type:r},plotBands:t=[]}=this.options,e=this.plotArea.polarAxis,s=e.majorAngles(),i=e.box.center(),n=this._plotbandGroup=new W({zIndex:-1});for(let o=0;o<t.length;o++){const a=t[o],l={fill:{color:a.color,opacity:a.opacity},stroke:{opacity:a.opacity}},h=this.getSlot(a.from,a.to,!0),c=new tn(i,i.y-h.y2,i.y-h.y1,0,360);let d;r===Ss?d=Ni.current.createRing(c,l):d=C.fromPoints(this.plotBandPoints(c,s),l).close(),n.append(d)}this.appendVisual(n)},plotBandPoints:function(r,t){const e=[],s=[],i=[r.center.x,r.center.y],n=new Rt(i,r.innerRadius),o=new Rt(i,r.radius);for(let a=0;a<t.length;a++)e.push(n.pointAt(t[a]+180)),s.push(o.pointAt(t[a]+180));return e.reverse(),e.push(e[0]),s.push(s[0]),s.concat(e)},createGridLines:function(r){const t=this.options,e=this.radarMajorGridLinePositions(),s=r.majorAngles(),i=r.box.center();let n=[];if(t.majorGridLines.visible&&(n=this.renderGridLines(i,e,s,t.majorGridLines)),t.minorGridLines.visible){const o=this.radarMinorGridLinePositions();gi(n,this.renderGridLines(i,o,s,t.minorGridLines))}return n},renderGridLines:function(r,t,e,s){const i={stroke:{width:s.width,color:s.color,dashType:s.dashType}},{skip:n=0,step:o=0}=s,a=this.gridLinesVisual();for(let l=n;l<t.length;l+=o){const h=r.y-t[l];if(h>0){const c=new Rt([r.x,r.y],h);if(s.type===Ss)a.append(new Kt(c,i));else{const d=new C(i);for(let u=0;u<e.length;u++)d.lineTo(c.pointAt(e[u]+180));d.close(),a.append(d)}}}return a.children},getValue:function(r){const t=this.lineBox(),e=this.plotArea.polarAxis,s=e.majorAngles(),i=e.box.center(),n=r.distanceTo(i);let o=n;if(this.options.majorGridLines.type!==Ss&&s.length>1){const a=r.x-i.x,l=r.y-i.y,h=(_s(Math.atan2(l,a))+540)%360;s.sort(function(g,f){return Uo(g,h)-Uo(f,h)});const c=Uo(s[0],s[1])/2,d=Uo(h,s[0]),u=90-c,p=180-d-u;o=n*(Math.sin(yt(p))/Math.sin(yt(u)))}return this.axisType().prototype.getValue.call(this,new R(t.x1,t.y2-o))}};function Uo(r,t){return 180-Math.abs(Math.abs(r-t)-180)}class Of extends Ft{radarMajorGridLinePositions(){return this.getTickPositions(this.options.majorUnit)}radarMinorGridLinePositions(){const t=this.options;let e=0;return t.majorGridLines.visible&&(e=t.majorUnit),this.getTickPositions(t.minorUnit,e)}axisType(){return Ft}}m(Of.prototype,Lf);class Bf extends ci{radarMajorGridLinePositions(){const t=[];return this.traverseMajorTicksPositions(function(e){t.push(e)},this.options.majorGridLines),t}radarMinorGridLinePositions(){const t=[];return this.traverseMinorTicksPositions(function(e){t.push(e)},this.options.minorGridLines),t}axisType(){return ci}}m(Bf.prototype,Lf);const lu=.333,Vw=.01;class ra{constructor(t){this.closed=t}process(t){const e=t.slice(0),s=[];let i=this.closed,n=e.length;if(n>2&&(this.removeDuplicates(0,e),n=e.length),n<2||n===2&&e[0].equals(e[1]))return s;let o=e[0],a=e[1],l=e[2];for(s.push(new Tt(o));o.equals(e[n-1]);)i=!0,e.pop(),n--;if(n===2){const u=this.tangent(o,a,T,P);return pt(s).controlOut(this.firstControlPoint(u,o,a,T,P)),s.push(new Tt(a,this.secondControlPoint(u,o,a,T,P))),s}let h,c;if(i){o=e[n-1],a=e[0],l=e[1];const u=this.controlPoints(o,a,l);h=u[1],c=u[0]}else{const u=this.tangent(o,a,T,P);h=this.firstControlPoint(u,o,a,T,P)}let d=h;for(let u=0;u<=n-3;u++)if(this.removeDuplicates(u,e),n=e.length,u+3<=n){o=e[u],a=e[u+1],l=e[u+2];const p=this.controlPoints(o,a,l);pt(s).controlOut(d),d=p[1];const g=p[0];s.push(new Tt(a,g))}if(i){o=e[n-2],a=e[n-1],l=e[0];const u=this.controlPoints(o,a,l);pt(s).controlOut(d),s.push(new Tt(a,u[0])),pt(s).controlOut(u[1]),s.push(new Tt(l,c))}else{const u=this.tangent(a,l,T,P);pt(s).controlOut(d),s.push(new Tt(l,this.secondControlPoint(u,a,l,T,P)))}return s}removeDuplicates(t,e){for(;e[t+1]&&(e[t].equals(e[t+1])||e[t+1].equals(e[t+2]));)e.splice(t+1,1)}invertAxis(t,e,s){let i=!1;if(t.x===e.x)i=!0;else if(e.x===s.x)(e.y<s.y&&t.y<=e.y||s.y<e.y&&e.y<=t.y)&&(i=!0);else{const n=this.lineFunction(t,e),o=this.calculateFunction(n,s.x);!(t.y<=e.y&&s.y<=o)&&!(e.y<=t.y&&s.y>=o)&&(i=!0)}return i}isLine(t,e,s){const i=this.lineFunction(t,e),n=this.calculateFunction(i,s.x);return t.x===e.x&&e.x===s.x||S(n,1)===S(s.y,1)}lineFunction(t,e){const s=(e.y-t.y)/(e.x-t.x);return[t.y-s*t.x,s]}controlPoints(t,e,s){let i=T,n=P,o=!1,a=!1,l;if(this.isLine(t,e,s))l=this.tangent(t,e,T,P);else{const d={x:this.isMonotonicByField(t,e,s,T),y:this.isMonotonicByField(t,e,s,P)};if(d.x&&d.y)l=this.tangent(t,s,T,P),o=!0;else if(this.invertAxis(t,e,s)&&(i=P,n=T),d[i])l=0;else{let u;s[n]<t[n]&&t[n]<=e[n]||t[n]<s[n]&&e[n]<=t[n]?u=hu((s[n]-t[n])*(e[i]-t[i])):u=-hu((s[i]-t[i])*(e[n]-t[n])),l=Vw*u,a=!0}}const h=this.secondControlPoint(l,t,e,i,n);if(a){const d=i;i=n,n=d}const c=this.firstControlPoint(l,e,s,i,n);return o&&(this.restrictControlPoint(t,e,h,l),this.restrictControlPoint(e,s,c,l)),[h,c]}restrictControlPoint(t,e,s,i){t.y<e.y?e.y<s.y?(s.x=t.x+(e.y-t.y)/i,s.y=e.y):s.y<t.y&&(s.x=e.x-(e.y-t.y)/i,s.y=t.y):s.y<e.y?(s.x=t.x-(t.y-e.y)/i,s.y=e.y):t.y<s.y&&(s.x=e.x+(t.y-e.y)/i,s.y=t.y)}tangent(t,e,s,i){const n=e[s]-t[s],o=e[i]-t[i];let a;return n===0?a=0:a=o/n,a}isMonotonicByField(t,e,s,i){return s[i]>e[i]&&e[i]>t[i]||s[i]<e[i]&&e[i]<t[i]}firstControlPoint(t,e,s,i,n){const o=e[i],l=(s[i]-o)*lu;return this.point(o+l,e[n]+l*t,i,n)}secondControlPoint(t,e,s,i,n){const o=e[i],a=s[i],l=(a-o)*lu;return this.point(a-l,s[n]-l*t,i,n)}point(t,e,s,i){const n=new w;return n[s]=t,n[i]=e,n}calculateFunction(t,e){const s=t.length;let i=0;for(let n=0;n<s;n++)i+=Math.pow(e,n)*t[n];return i}}function hu(r){return r<=0?-1:1}class Nw{constructor(t){this._axis=t,this.options=t.options}value(t){const e=this._axis;return e.getCategory?e.getCategory(t):e.getValue(t)}slot(t,e,s=!0){return this._axis.slot(t,e,s)}range(){return this._axis.range()}valueRange(){return this._axis.valueRange()}}function Df(r,t){for(let e=0;e<t.length;e++)if(t[e].options.name===r)return t[e].prepareUserOptions(),new Nw(t[e])}class kl{constructor(t){this.visual=t.visual,this.chartsVisual=t.chartContainer.visual,this._pane=t}findAxisByName(t){return Df(t,this._pane.axes)}}class Fw{constructor(t){this._plotArea=t,this.visual=t.visual,this.backgroundVisual=t._bgVisual}}function Cl(r){const t=r.length;let e=0;for(let s=0;s<t;s++){const i=r[s];F(i)&&e++}return e}const Tl={min:function(r){const t=r.length;let e=gt;for(let s=0;s<t;s++){const i=r[s];F(i)&&(e=Math.min(e,i))}return e===gt?r[0]:e},max:function(r){const t=r.length;let e=vt;for(let s=0;s<t;s++){const i=r[s];F(i)&&(e=Math.max(e,i))}return e===vt?r[0]:e},sum:function(r){const t=r.length;let e=0;for(let s=0;s<t;s++){const i=r[s];F(i)&&(e+=i)}return e},sumOrNull:function(r){let t=null;return Cl(r)&&(t=Tl.sum(r)),t},count:function(r){const t=r.length;let e=0;for(let s=0;s<t;s++){const i=r[s];i!=null&&e++}return e},avg:function(r){const t=Cl(r);let e=r[0];return t>0&&(e=Tl.sum(r)/t),e},first:function(r){const t=r.length;for(let e=0;e<t;e++){const s=r[e];if(s!=null)return s}return r[0]}};function Hw(r,t){return t===null?t:ks(r)(t)}class et{constructor(){this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}}register(t,e=[Qt],s={}){for(let i=0;i<t.length;i++){const n=t[i];this._valueFields[n]=e,this._otherFields[n]=s,this._nullValue[n]=this._makeValue(e,null),this._undefinedValue[n]=this._makeValue(e,void 0)}}canonicalFields(t){return this.valueFields(t).concat(this.otherFields(t))}valueFields(t){return this._valueFields[t.type]||[Qt]}otherFields(t){return this._otherFields[t.type]||[Qt]}bindPoint(t,e,s){const i=t.data,n=s!==void 0?s:i[e],o={valueFields:{value:n}},a=this.valueFields(t),l=this._otherFields[t.type];let h,c;if(n===null)c=this._nullValue[t.type];else if(n===void 0)c=this._undefinedValue[t.type];else if(Array.isArray(n)){const d=n.slice(a.length);c=this._bindFromArray(n,a),h=this._bindFromArray(d,l)}else if(typeof n=="object"){const d=this.sourceFields(t,a),u=this.sourceFields(t,l);c=this._bindFromObject(n,a,d),h=this._bindFromObject(n,l,u)}return c!==void 0&&(a.length===1?o.valueFields.value=c[a[0]]:o.valueFields=c),o.fields=h||{},o}_makeValue(t,e){const s={},i=t.length;for(let n=0;n<i;n++){const o=t[n];s[o]=e}return s}_bindFromArray(t,e){const s={};if(e){const i=Math.min(e.length,t.length);for(let n=0;n<i;n++)s[e[n]]=t[n]}return s}_bindFromObject(t,e,s=e){const i={};if(e){const n=e.length;for(let o=0;o<n;o++){const a=e[o],l=s[o];l!==null&&(i[a]=Hw(l,t))}}return i}sourceFields(t,e){const s=[];if(e){const i=e.length;for(let n=0;n<i;n++){const o=e[n],a=o===Qt?"field":o+"Field";s.push(t[a]!==null?t[a]||o:null)}}return s}}et.current=new et;const Uw="stderr",jw="stddev",Gw=/percent(?:\w*)\((\d+)\)/,$w=new RegExp("^"+jw+"(?:\\((\\d+(?:\\.\\d+)?)\\))?$");class zf{constructor(t,e,s){this.initGlobalRanges(t,e,s)}initGlobalRanges(t,e,s){const i=e.data,n=$w.exec(t);if(n){this.valueGetter=this.createValueGetter(e,s);const o=this.getAverage(i),a=this.getStandardDeviation(i,o,!1),l=n[1]?parseFloat(n[1]):1,h={low:o.value-a*l,high:o.value+a*l};this.globalRange=function(){return h}}else if(t.indexOf&&t.indexOf(Uw)>=0){this.valueGetter=this.createValueGetter(e,s);const o=this.getStandardError(i,this.getAverage(i));this.globalRange=function(a){return{low:a-o,high:a+o}}}}createValueGetter(t,e){const s=t.data,i=et.current,n=i.valueFields(t),o=A(s[0])?s[0]:{};let a;if(Ct(o)){const l=e?n.indexOf(e):0;a=ks("["+l+"]")}else if(F(o))a=ks();else if(typeof o===Yn){const l=i.sourceFields(t,n);a=ks(l[n.indexOf(e)])}return a}getErrorRange(t,e){let s,i,n;if(!A(e))return null;if(this.globalRange)return this.globalRange(t);if(Ct(e))s=t-e[0],i=t+e[1];else if(F(n=parseFloat(e)))s=t-n,i=t+n;else if(n=Gw.exec(e)){const o=t*(parseFloat(n[1])/100);s=t-Math.abs(o),i=t+Math.abs(o)}else throw new Error("Invalid ErrorBar value: "+e);return{low:s,high:i}}getStandardError(t,e){return this.getStandardDeviation(t,e,!0)/Math.sqrt(e.count)}getStandardDeviation(t,e,s){const i=t.length,n=s?e.count-1:e.count;let o=0;for(let a=0;a<i;a++){const l=this.valueGetter(t[a]);F(l)&&(o+=Math.pow(l-e.value,2))}return Math.sqrt(o/n)}getAverage(t){const e=t.length;let s=0,i=0;for(let n=0;n<e;n++){const o=this.valueGetter(t[n]);F(o)&&(s+=o,i++)}return{value:s/i,count:i}}}const Ww=Fn.browser||{},ge=600,zs="fadeIn",aa=.8,we=5,Qn=Ww.msie?.001:0,Vf="errorLow",Nf="errorHigh",Xw="xErrorLow",Yw="xErrorHigh",qw="yErrorLow",Zw="yErrorHigh",Rr=8,ns="zero",Hi="interpolate",cu="gap",Lr="above",Pl="below",nn="smooth",Nn="step",os="area",fe="bar",go="boxPlot",on="bubble",Is="bullet",rn="candlestick",Ve="column",Or="donut",Kn="funnel",Jn="pyramid",Vh="heatmap",Ui="horizontalWaterfall",rs="line",an="ohlc",Rs="pie",Nh="polarArea",Br="polarLine",Fh="polarScatter",fo="radarArea",la="radarColumn",ji="radarLine",Gi="rangeArea",$i="rangeBar",mo="rangeColumn",Hh="scatter",Uh="scatterLine",ti="verticalArea",Wi="verticalBoxPlot",xo="verticalBullet",ei="verticalLine",si="verticalRangeArea",yo="waterfall",Ff=[fe,Ve,an,rn,go,Wi,Is,mo,$i,yo,Ui],jh="exponentialTrendline",Gh="linearTrendline",$h="logarithmicTrendline",Wh="movingAverageTrendline",Xh="polynomialTrendline",Yh="powerTrendline",ln=[jh,Gh,$h,Wh,Xh,Yh],Hf="legendItemClick",Qw="legendItemHover",Kw="legendItemLeave",Uf="seriesClick",jf="seriesHover",Gf="seriesOver",$f="seriesLeave",Jw="plotAreaClick",Wf="plotAreaHover",$a="plotAreaLeave",Mn="drag",In="dragEnd",Wa="dragStart",bn="zoomStart",Ti="zoom",Pi="zoomEnd",El="selectStart",Rn="select",Ml="selectEnd",t1="render",Xf="showTooltip",Yf="hideTooltip",e1="paneRender",Vs="graphics-symbol",Ns="k-chart-point",Fs="Point",s1="checkbox",i1="k-chart-legend-item",n1="Legend item",Dr="log",ke="category",zr="insideEnd",o1="insideBase",ii="outsideEnd",Vr="wheel",Il=150,r1=.3,a1="drilldown",us="drilldown",ye="pattern",qh=2,du=4;class Zh extends Y{constructor(t,e,s,i,n,o){super(o),this.low=t,this.high=e,this.isVertical=s,this.chart=i,this.series=n}reflow(t){const e=this.options.endCaps,s=this.isVertical,n=this.getAxis().getSlot(this.low,this.high),o=t.center(),a=this.getCapsWidth(t,s),l=s?o.x:o.y,h=l-a,c=l+a;let d;s?(d=[new R(o.x,n.y1),new R(o.x,n.y2)],e&&d.push(new R(h,n.y1),new R(c,n.y1),new R(h,n.y2),new R(c,n.y2)),this.box=new _(h,n.y1,c,n.y2)):(d=[new R(n.x1,o.y),new R(n.x2,o.y)],e&&d.push(new R(n.x1,h),new R(n.x1,c),new R(n.x2,h),new R(n.x2,c)),this.box=new _(n.x1,h,n.x2,c)),this.linePoints=d}getCapsWidth(t,e){const s=e?t.width():t.height();return Math.min(Math.floor(s/2),du)||du}createVisual(){const t=this.options,e=t.visual;e?this.visual=e({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:t.endCaps,color:t.color,line:t.line},createVisual:()=>{this.createDefaultVisual();const s=this.visual;return delete this.visual,s}}):this.createDefaultVisual()}createDefaultVisual(){const{options:t,linePoints:e}=this,s={stroke:{color:t.color,width:t.line.width,dashType:t.line.dashType}};super.createVisual();for(let i=0;i<e.length;i+=2){const n=new C(s).moveTo(e[i].x,e[i].y).lineTo(e[i+1].x,e[i+1].y);Jt(n),this.visual.append(n)}}}b(Zh,{animation:{type:zs,delay:ge},endCaps:!0,line:{width:2},zIndex:1});class l1 extends Zh{getAxis(){return this.chart.seriesValueAxis(this.series)}}function qf(r){for(let t=0;t<r.length;t++)if(A(r[t].zIndex))return!0}function ir(r,t){t!==null&&r.push(t)}function Zf(r){return Cl(r)===r.length}function h1(r,t,e){const s=t.visible;if(A(s))return s;const i=r.pointVisibility;if(i)return i[e]}function Qf(r){const t=r.data,e=[];let s=0,i=0;for(let n=0;n<t.length;n++){const o=et.current.bindPoint(r,n);let a=o.valueFields.value;Yt(a)&&(a=parseFloat(a)),F(a)?(o.visible=h1(r,o.fields,n)!==!1,o.value=Math.abs(a),e.push(o),o.visible&&(s+=o.value),a!==0&&i++):e.push(null)}return{total:s,points:e,count:i}}function Qh(r){const t=r.length;let e=0;for(let s=0;s<t;s++)e=Math.max(e,r[s].data.length);return e}function Ye(r,t){return r&&t?r.toLowerCase()===t.toLowerCase():r===t}const c1=5;function as(r,t,e={},s=!1){const i=e.defaults=e.defaults||{},n=e.depth=e.depth||0;let o=!1;if(e.excluded=e.excluded||[],n>c1)return null;for(let a in r)if(!D(a,e.excluded)&&Sh(r,a)){const l=r[a];rt(l)?(o=!0,s||(r[a]=L(l(t),i[a]))):me(l)&&(s||(e.defaults=i[a]),e.depth++,o=as(l,t,e,s)||o,e.depth--)}return o}function lt(r,t){const e=[],s=[].concat(t);for(let i=0;i<r.length;i++){const n=r[i];D(n.type,s)&&e.push(n)}return e}const uu=new WeakMap;function Kf(r,t,e){if(t===null||typeof t!="object")return kt(e,r);let s=uu.get(t);return s||(s=kt(e,r),uu.set(t,s)),s}function Kh(r){const t=r.overlay;return t&&t.gradient&&t.gradient!=="none"}function Gt(r){return A(r)&&r!==null}function Jf(r,t){const e=r.type,s=t instanceof Date;return!e&&s||Ye(e,Je)}function Xi(r){return r.length===1?r[0]:r}const d1=/area/i;function u1(r){return r.missingValues?r.missingValues:d1.test(r.type)||r.stack?ns:Hi}function Rl(r,t){const s=et.current.bindPoint(r,null,t).valueFields;for(let i in s)if(sf(s[i]))return!0}function pu({start:r,dir:t,min:e,max:s,getter:i,hasItem:n,series:o}){let a,l,h=r;do h+=t,n(h)&&(l=i(h),a=Rl(o,l.item));while(e<=h&&h<=s&&!a);if(a)return l}function gu(r,t,e,s,i){const{min:n,max:o}=t,a=n>0&&n<e,l=o+1<e;if(a||l){const h=u1(r);let c,d;if(h!==Hi)a&&(c=s(n-1)),l&&(d=s(o+1));else{let u,p;a&&(u=s(n-1),p=Rl(r,u.item),p?c=u:c=pu({start:n,dir:-1,min:0,max:e-1,getter:s,hasItem:i,series:r})),l&&(u=s(o+1),p=Rl(r,u.item),p?d=u:d=pu({start:o,dir:1,min:0,max:e-1,getter:s,hasItem:i,series:r}))}c&&(r._outOfRangeMinPoint=c),d&&(r._outOfRangeMaxPoint=d)}}function tm(r,t){return t.forEach(e=>{const s=e&&e.options,i=e&&(e.box||e.wrapperBox);s&&i&&s.noclip!==!1&&s.visible!==!1&&!s.visual&&r.wrap(i)}),r}class Hs extends Y{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this.categoryAxis=t.seriesCategoryAxis(e.series[0]),this.valueAxisRanges={},this.points=[],this.categoryPoints=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[],this.render()}render(){this.traverseDataPoints(this.addValue.bind(this))}pointOptions(t,e){let s=this.seriesOptions[e];if(!s){const i=this.pointType().prototype.defaults;this.seriesOptions[e]=s=m({},i,{vertical:!this.options.invertAxes},t)}return s}plotValue(t){if(!t)return 0;if(this.options.isStacked100&&F(t.value)){const e=t.categoryIx,s=this.categoryPoints[e],i=[];let n=0;for(let o=0;o<s.length;o++){const a=s[o];if(a){const l=t.series.stack,h=a.series.stack;if(l&&h&&l.group!==h.group)continue;F(a.value)&&(n+=Math.abs(a.value),i.push(Math.abs(a.value)))}}if(n>0)return t.value/n}return t.value}plotRange(t,e=0){const s=this.categoryPoints[t.categoryIx];if(this.options.isStacked){let a=this.plotValue(t);const l=a>=0;let h=e,c=!1;const d=t.series.stack!==void 0?t.series.stack:this.options.defaultStack,u=p=>p===!0||typeof p===Yn&&!p.group;if(d)for(let p=0;p<s.length;p++){const g=s[p];if(t===g)break;const f=g.series.stack!==void 0?g.series.stack:this.options.defaultStack;if(!f||typeof d===bh&&d!==f||u(d)&&!u(f)||d.group&&d.group!==f.group)continue;const x=this.plotValue(g);(x>=0&&l||x<0&&!l)&&(e===0||x!==0)&&(h+=x,a+=x,c=!0,this.options.isStacked100&&(a=Math.min(a,1)))}return c&&(h-=e),[h,a]}const i=t.series,n=this.seriesValueAxis(i),o=this.categoryAxisCrossingValue(n);return[o,sf(t.value)?t.value:o]}stackLimits(t,e){let s=gt,i=vt;for(let n=0;n<this.categoryPoints.length;n++){const o=this.categoryPoints[n];if(o)for(let a=0;a<o.length;a++){const l=o[a];if(l&&(l.series.stack===e||l.series.axis===t)){const h=this.plotRange(l,0)[1];h!==void 0&&isFinite(h)&&(i=Math.max(i,h),s=Math.min(s,h))}}}return{min:s,max:i}}updateStackRange(){const{isStacked:t,series:e}=this.options,s={};if(t)for(let i=0;i<e.length;i++){const n=e[i],o=n.axis,a=o+n.stack;let l=s[a];if(!l){l=this.stackLimits(o,n.stack);const h=this.errorTotals;h&&(h.negative.length&&(l.min=Math.min(l.min,bl(h.negative).min)),h.positive.length&&(l.max=Math.max(l.max,bl(h.positive).max))),l.min!==gt||l.max!==vt?s[a]=l:l=null}l&&(this.valueAxisRanges[o]=l)}}addErrorBar(t,e,s){const{value:i,series:n,seriesIx:o}=t,a=t.options.errorBars,l=e.fields[Vf],h=e.fields[Nf];let c;F(l)&&F(h)?c={low:l,high:h}:a&&a.value!==void 0&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[o]=this.seriesErrorRanges[o]||new zf(a.value,n,Qt),c=this.seriesErrorRanges[o].getErrorRange(i,a.value)),c&&(t.low=c.low,t.high=c.high,this.addPointErrorBar(t,s))}addPointErrorBar(t,e){const s=!this.options.invertAxes,i=t.options.errorBars;let{series:n,low:o,high:a}=t;if(this.options.isStacked){const h=this.stackedErrorRange(t,e);o=h.low,a=h.high}else{const h={categoryIx:e,series:n};this.updateRange({value:o},h),this.updateRange({value:a},h)}const l=new l1(o,a,s,this,n,i);t.errorBars=[l],t.append(l)}stackedErrorRange(t,e){const s=this.plotRange(t,0)[1]-t.value,i=t.low+s,n=t.high+s;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},i<0&&(this.errorTotals.negative[e]=Math.min(this.errorTotals.negative[e]||0,i)),n>0&&(this.errorTotals.positive[e]=Math.max(this.errorTotals.positive[e]||0,n)),{low:i,high:n}}addValue(t,e){const{categoryIx:s,series:i,seriesIx:n}=e;let o=this.categoryPoints[s];o||(this.categoryPoints[s]=o=[]);let a=this.seriesPoints[n];a||(this.seriesPoints[n]=a=[]);const l=this.createPoint(t,e);l&&(Object.assign(l,e),l.owner=this,l.noteText=t.fields.noteText,l.dataItem===void 0&&(l.dataItem=i.data[s]),this.addErrorBar(l,t,s)),this.points.push(l),a.push(l),o.push(l),this.updateRange(t.valueFields,e)}evalPointOptions(t,e,s){const i=s.categoryIx,n=s.category,o=s.series,a=s.seriesIx,l={defaults:o._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory","ariaTemplate","ariaContent"]};let h=this._evalSeries[a];h===void 0&&(this._evalSeries[a]=h=as(t,{},l,!0));let c=t;return h&&(c=m({},c),as(c,{value:e,category:n,index:i,series:o,dataItem:o.data[i]},l)),c}updateRange(t,e){const s=e.series.axis,i=t.value;let n=this.valueAxisRanges[s];isFinite(i)&&i!==null&&(n=this.valueAxisRanges[s]=n||{min:gt,max:vt},n.min=Math.min(n.min,i),n.max=Math.max(n.max,i))}seriesValueAxis(t){const e=this.plotArea,s=t.axis,i=s?e.namedValueAxes[s]:e.valueAxis;if(!i)throw new Error("Unable to locate value axis with name "+s);return i}reflow(t){const e=this.categorySlots=[],s=this.points,i=this.categoryAxis;let n=0;this.traverseDataPoints((o,a)=>{const{categoryIx:l,series:h}=a,c=this.seriesValueAxis(h),d=s[n++];let u=e[l];if(u||(e[l]=u=this.categorySlot(i,l,c)),d){const p=this.plotRange(d,c.startValue()),g=this.valueSlot(c,p);if(g){const f=this.pointSlot(u,g);d.aboveAxis=this.aboveAxis(d,c),d.stackValue=p[1],this.options.isStacked100&&(d.percentage=this.plotValue(d)),this.reflowPoint(d,f)}else d.visible=!1}}),this.reflowCategories(e),!this.options.clip&&this.options.limitPoints&&this.points.length&&this.limitPoints(),this.box=t}valueSlot(t,e){return t.getSlot(e[0],e[1],!this.options.clip)}limitPoints(){const t=this.categoryPoints,e=t[0].concat(pt(t));for(let s=0;s<e.length;s++)e[s]&&this.limitPoint(e[s])}limitPoint(t){const e=this.categoryAxis.limitSlot(t.box);e.equals(t.box)||t.reflow(e)}aboveAxis(t,e){const s=this.categoryAxisCrossingValue(e),i=t.value;return e.options.reverse?i<s:i>=s}categoryAxisCrossingValue(t){const e=this.categoryAxis,s=t.options;return[].concat(s.axisCrossingValues||s.axisCrossingValue)[e.axisIndex||0]||0}reflowPoint(t,e){t.reflow(e)}reflowCategories(){}pointSlot(t,e){const i=this.options.invertAxes,n=i?e:t,o=i?t:e;return new _(n.x1,o.y1,n.x2,o.y2)}categorySlot(t,e){return t.getSlot(e)}traverseDataPoints(t){const e=this.options.series,s=Qh(e),i=e.length;for(let n=0;n<i;n++)this._outOfRangeCallback(e[n],"_outOfRangeMinPoint",n,t);for(let n=0;n<s;n++){const o=this.categoryAxis.categoryAt(n);for(let a=0;a<i;a++){const l=e[a],h=this.plotArea.bindPoint(l,n);t(h,{category:o,categoryIx:n,categoriesCount:s,series:l,seriesIx:a})}}for(let n=0;n<i;n++)this._outOfRangeCallback(e[n],"_outOfRangeMaxPoint",n,t)}_outOfRangeCallback(t,e,s,i){const n=t[e];if(n){const o=n.categoryIx,a=this.plotArea.bindPoint(t,o,n.item);i(a,{category:n.category,categoryIx:o,series:t,seriesIx:s,dataItem:n.item})}}formatPointValue(t,e){return t.value===null?"":this.chartService.format.auto(e,t.value)}pointValue(t){return t.valueFields.value}}b(Hs,{series:[],invertAxes:!1,isStacked:!1,clip:!0,limitPoints:!0});const Ce={click:function(r,t){return r.trigger(Uf,this.eventArgs(t))},hover:function(r,t){return r.trigger(jf,this.eventArgs(t))},over:function(r,t){return r.trigger(Gf,this.eventArgs(t))},out:function(r,t){return r.trigger($f,this.eventArgs(t))},eventArgs:function(r){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:Ae(r),originalEvent:r,point:this}}},hn={createNote:function(){const r=this.options.notes,t=this.noteText||r.label.text;r.visible!==!1&&t!==void 0&&t!==null&&(this.note=new Ch({value:this.value,text:t,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService),this.append(this.note))}};class Ne extends Y{constructor(t,e){super(e),this.value=t,this.aboveAxis=L(this.options.aboveAxis,!0),this.tooltipTracking=!0,this._id=df()}initOptions(t){this.options=Object.assign({},t)}render(){const{markers:t}=this.options;this._rendered||(this._rendered=!0,t.visible&&t.size&&(this.marker=this.createMarker(),this.append(this.marker)),this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))}createLabel(){const e=this.options.labels;e.visible&&(this.label=this.createLabelElement(e),this.append(this.label))}createLabelElement(t){return new qt(this.getLabelText(t),Object.assign({},{align:O,vAlign:O,zIndex:L(t.zIndex,this.series.zIndex)},t,{margin:Object.assign({},{left:5,right:5},t.margin)}),this.pointData())}getLabelText(t){let e=bt(t);return e?e(this.pointData()):t.format?this.formatValue(t.format):this.value}getAriaLabelText(){const t=this.options.labels,e=wh(t);return e?e(this.pointData()):this.getLabelText(t)}markerBorder(){const t=this.options.markers,e=t.background,s=Object.assign({},{color:this.color},t.border);return s.color===void 0&&(s.color=new Nt(e).brightness(aa).toHex()),s}createVisual(){}createMarker(){const t=this.options.markers;return new Et({type:t.type,width:t.size,height:t.size,rotation:t.rotation,background:t.background,border:this.markerBorder(),opacity:t.opacity,pattern:this.options.pattern,zIndex:L(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual,accessibilityOptions:Object.assign({},{ariaLabel:this.getAriaLabelText(this.options.labels)},this.options.accessibility)},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category})}markerBox(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box}reflow(t){const{options:e,aboveAxis:s}=this,i=e.vertical;this.render(),this.box=t;const n=t.clone();if(i?s?n.y1-=n.height():n.y2+=n.height():s?n.x1+=n.width():n.x2-=n.width(),this._childBox=n,this.marker&&this.marker.reflow(n),this.reflowLabel(n),this.errorBars)for(let o=0;o<this.errorBars.length;o++)this.errorBars[o].reflow(n);if(this.note){let o=this.markerBox();if(!(e.markers.visible&&e.markers.size)){const a=o.center();o=new _(a.x,a.y,a.x,a.y)}this.note.reflow(o)}}reflowLabel(t){const{options:e,label:s}=this;let i=e.labels.position;s&&(i=i===Lr?N:i,i=i===Pl?j:i,s.reflow(t),s.box.alignTo(this.markerBox(),i),s.reflow(s.box))}createHighlight(){const t=this.options.highlight.markers,e=this.markerBorder().color,s=this.options.markers,i=s.size+(s.border.width||0)+(t.border.width||0),n=new Et({type:s.type,width:i,height:i,rotation:s.rotation,background:t.color||e,border:{color:t.border.color,width:t.border.width,opacity:L(t.border.opacity,1)},opacity:L(t.opacity,1)});return n.reflow(this._childBox),n.getElement()}highlightVisual(){return(this.marker||{}).visual}highlightVisualArgs(){const t=this.marker;let e,s;if(t)s=t.paddingBox.toRect(),e=t.visual;else{const i=this.options.markers.size,n=i/2,o=this.box.center();s=new H([o.x-n,o.y-n],[i,i])}return{options:this.options,rect:s,visual:e}}createFocusHighlight(){const t=this.options.markers,e=this.options.focusHighlight,s=t.size+(t.border.width||0),i=new Et({type:t.type,width:s,height:s,rotation:t.rotation,background:e.color,border:e.border,opacity:e.opacity,padding:e.border.width/2,zIndex:e.zIndex});return i.reflow(this._childBox),i.getElement()}tooltipAnchor(){const t=this.markerBox(),e=this.owner.pane.clipBox();if(!e||e.overlaps(t)){const i=t.x2+we,n=z;let o,a;return this.aboveAxis?(o=t.y1,a=j):(o=t.y2,a=N),{point:new R(i,o),align:{horizontal:n,vertical:a}}}}formatValue(t){return this.owner.formatPointValue(this,t)}overlapsBox(t){return this.markerBox().overlaps(t)}clipElements(){this.options.visible=!1}unclipElements(){this.label&&(this.label.options.noclip=!0),this.note&&(this.note.options.noclip=!0)}unclipBox(){return tm(this.markerBox().clone(),[this.label,this.note])}labelBox(){return this.label?this.label.box:new _}noteBox(){return this.note?this.note.box:new _}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}}focusVisual(){this.marker&&(this.marker.visual&&this.marker.visual.options.set("id",this._id),this.toggleFocusHighlight(!0))}clearFocusFromVisual(){this.marker&&(this.marker.visual&&this.marker.visual.options.set("id",""),this.toggleFocusHighlight(!1))}getIndex(){return this.categoryIx!==void 0?this.categoryIx:this.pointIx}}Ne.prototype.defaults={vertical:!0,markers:{visible:!0,background:U,size:Rr,type:Xt,border:{width:2},opacity:1},labels:{visible:!1,position:Lr,margin:X(3),padding:X(4),animation:{type:zs,delay:ge}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:Jg},errorBars:{line:{width:1}},accessibility:{tabIndex:0,role:Vs,className:Ns,ariaRoleDescription:Fs}};m(Ne.prototype,Ce);m(Ne.prototype,hn);class mi extends Y{constructor(t,e,s){super(),this.linePoints=t,this.series=e,this.seriesIx=s}points(){return this.toGeometryPoints(this.linePoints)}toGeometryPoints(t){const e=[];for(let s=0,i=t.length;s<i;s++)t[s]&&t[s].visible!==!1&&e.push(t[s]._childBox.toRect().center());return e}createVisual(){const t=this.series.visual;t?(this.visual=t({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:()=>(this.segmentVisual(),this.visual)}),this.visual&&!A(this.visual.options.zIndex)&&(this.visual.options.zIndex=this.series.zIndex)):this.segmentVisual()}segmentVisual(){const{options:t,series:e}=this;let{color:s,_defaults:i}=e;rt(s)&&i&&(s=i.color);const n=C.fromPoints(this.points(),{stroke:{color:s,width:e.width,opacity:e.opacity,dashType:e.dashType},zIndex:e.zIndex});t.closed&&n.close(),this.visual=n}aliasFor(t,e){return this.parent.getNearestPoint(e.x,e.y,this.seriesIx)}}b(mi,{closed:!1});const Jh={calculateStepPoints:function(r){const t=this.parent.plotArea.seriesCategoryAxis(this.series),{justified:e,vertical:s,reverse:i}=t.options,n=s?T:P,o=s?P:T,a=i?2:1,l=a;let h=Xa(r[0],n,a,o,l);const c=[h];for(let d=1;d<r.length;d++){const u=Xa(r[d],n,a,o,l);if(h[n]!==u[n]){const p=new w;p[n]=h[n],p[o]=u[o],c.push(p,u)}h=u}return e?h!==pt(c)&&c.push(h):c.push(Xa(pt(r),n,a,o,i?1:2)),c}};function Xa(r,t,e,s,i){const n=r.box,o=new w;return o[t]=n[t+e],o[s]=n[s+i],o}class em extends mi{points(){return this.calculateStepPoints(this.linePoints)}}m(em.prototype,Jh);class tc extends mi{segmentVisual(){const t=this.series,e=t._defaults;let s=t.color;rt(s)&&e&&(s=e.color);const n=new ra(this.options.closed).process(this.points()),o=new C({stroke:{color:s,width:t.width,opacity:t.opacity,dashType:t.dashType},zIndex:t.zIndex});o.segments.push.apply(o.segments,n),this.visual=o}}const ec={renderSegments:function(){const{options:r,seriesPoints:t}=this,e=r.series,s=t.length;let i;this._segments=[];for(let n=0;n<s;n++){const o=e[n],a=this.sortPoints(t[n]),l=a.length;let h=[];for(let c=0;c<l;c++){const d=a[c];d?h.push(d):this.seriesMissingValues(o)!==Hi&&(h.length>1&&(i=this.createSegment(h,o,n,i),this._addSegment(i)),h=[])}h.length>1&&(i=this.createSegment(h,o,n,i),this._addSegment(i))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(r){this._segments.push(r),r.parent=this},sortPoints:function(r){return r},seriesMissingValues:function(r){const t=r.missingValues;return!t&&this.options.isStacked?ns:t||Hi},getNearestPoint:function(r,t,e){const s=new R(r,t),i=this.seriesPoints[e];let n=gt,o;for(let a=0;a<i.length;a++){const l=i[a];if(l&&l.value!==void 0&&l.value!==null&&l.visible!==!1){const c=l.box.center().distanceTo(s);c<n&&(o=l,n=c)}}return o}};class sc extends ne{setup(){this._setEnd(this.options.box.x1)}step(t){const e=this.options.box;this._setEnd(ue(e.x1,e.x2,t))}_setEnd(t){const e=this.element,s=e.segments,i=s[1].anchor(),n=s[2].anchor();e.suspend(),i.setX(t),e.resume(),n.setX(t)}}b(sc,{duration:ge});ie.current.register("clip",sc);const ha={createAnimation:function(){const r=this.getRoot(),t=(r&&r.options||{}).transitions;if(r&&t!==!1){const e=this.parent&&this.parent.clipBox||r.size(),s=C.fromRect(e.toRect()),i=t&&t!==!0?t.loading:t;this.visual.clip(s),this.animation=new sc(s,Object.assign({},{box:e},i)),qf(this.options.series)&&this._setChildrenAnimation(s)}},_setChildrenAnimation:function(r){const t=this.animationPoints();for(let e=0;e<t.length;e++){const s=t[e];s&&s.visual&&A(s.visual.options.zIndex)&&s.visual.clip(r)}}};class ca extends Hs{render(){super.render(),this.updateStackRange(),this.renderSegments()}pointType(){return Ne}createPoint(t,e){const{series:s,seriesIx:i}=e,n=this.seriesMissingValues(s);let o=t.valueFields.value;if(o==null)if(n===ns)o=0;else return null;let a=this.pointOptions(s,i);a=this.evalPointOptions(a,o,e);let l=t.fields.color||s.color;rt(s.color)&&(l=a.color);const h=new Ne(o,a);return h.color=l,this.append(h),h}plotRange(t){let e=this.plotValue(t);if(this.options.isStacked){const s=t.categoryIx,i=this.categoryPoints[s];for(let n=0;n<i.length;n++){const o=i[n];if(t===o)break;e+=this.plotValue(o),this.options.isStacked100&&(e=Math.min(e,1))}}return[e,e]}createSegment(t,e,s){const i=e.style;let n;return i===Nn?n=em:i===nn?n=tc:n=mi,new n(t,e,s)}animationPoints(){const t=this.points,e=[];for(let s=0;s<t.length;s++)e.push((t[s]||{}).marker);return e.concat(this._segments)}supportsPointInactiveOpacity(){return!1}}m(ca.prototype,ec,ha);class cn extends mi{constructor(t,e,s,i,n){super(t,e,s),this.prevSegment=i,this.stackPoints=n}createVisual(){const t=this.series,e=t._defaults,s=t.line||{};let i=t.color;rt(i)&&e&&(i=e.color),this.visual=new W({zIndex:t.zIndex}),this.createFill({fill:Ds(t.pattern,{color:i,opacity:t.opacity}),stroke:null}),s.width>0&&s.visible!==!1&&this.createStroke({stroke:m({color:i,opacity:t.opacity,lineCap:"butt"},s)})}strokeSegments(){let t=this._strokeSegments;return t||(t=this._strokeSegments=this.createStrokeSegments()),t}createStrokeSegments(){return this.segmentsFromPoints(this.points())}stackSegments(){return this.prevSegment?this.prevSegment.createStackSegments(this.stackPoints):this.createStackSegments(this.stackPoints)}createStackSegments(t){return this.segmentsFromPoints(this.toGeometryPoints(t)).reverse()}segmentsFromPoints(t){return t.map(e=>new Tt(e))}createStroke(t){const e=new C(t);e.segments.push.apply(e.segments,this.strokeSegments()),this.visual.append(e)}hasStackSegment(){return this.prevSegment||this.stackPoints&&this.stackPoints.length}createFill(t){const e=this.strokeSegments(),s=e.slice(0),i=this.hasStackSegment();if(i){const o=this.stackSegments();gi(s,o)}const n=new C(t);n.segments.push.apply(n.segments,s),!i&&e.length>1&&this.fillToAxes(n),this.visual.append(n)}fillToAxes(t){const e=this.parent,s=e.options.invertAxes,i=e.seriesValueAxis(this.series),n=e.categoryAxisCrossingValue(i),o=i.getSlot(n,n,!0),a=this.strokeSegments(),l=a[0].anchor(),h=pt(a).anchor();let c=s?o.x1:o.y1;s?t.lineTo(c,h.y).lineTo(c,l.y):t.lineTo(h.x,c).lineTo(l.x,c)}}class sm extends cn{createStrokeSegments(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))}createStackSegments(t){return this.segmentsFromPoints(this.calculateStepPoints(t)).reverse()}}m(sm.prototype,Jh);class ic extends cn{createStrokeSegments(){const t=new ra(this.options.closed),e=this.points();return t.process(e)}createStackSegments(){const t=this.strokeSegments(),e=[];for(let s=t.length-1;s>=0;s--){const i=t[s];e.push(new Tt(i.anchor(),i.controlOut(),i.controlIn()))}return e}}class p1 extends ca{createSegment(t,e,s,i){const n=this.options.isStacked,o=(e.line||{}).style;let a,l;n&&s>0&&i&&(this.seriesMissingValues(e)!=="gap"?(l=i.linePoints,a=i):l=this._gapStackPoints(t,s,o));let h;return o===Nn?h=sm:o===nn?h=ic:h=cn,new h(t,e,s,a,l)}reflow(t){super.reflow(t);const e=this._stackPoints;if(e)for(let s=0;s<e.length;s++){const i=e[s],n=this.categoryAxis.getSlot(i.categoryIx);i.reflow(n)}}_gapStackPoints(t,e,s){const i=this.seriesPoints;let n=t[0].categoryIx,o=t.length;n<0&&(n=0,o--);const a=n+o,l=this.seriesOptions[0]._outOfRangeMinPoint?1:0,h=[];this._stackPoints=this._stackPoints||[];for(let c=n;c<a;c++){const d=c+l;let u=e,p;do u--,p=i[u][d];while(u>0&&!p);if(p)s!==Nn&&c>n&&!i[u][d-1]&&h.push(this._previousSegmentPoint(c,d,d-1,u)),h.push(p),s!==Nn&&c+1<a&&!i[u][d+1]&&h.push(this._previousSegmentPoint(c,d,d+1,u));else{const g=this._createGapStackPoint(c);this._stackPoints.push(g),h.push(g)}}return h}_previousSegmentPoint(t,e,s,i){const n=this.seriesPoints;let o=i,a;for(;o>0&&!a;)o--,a=n[o][s];return a?a=n[o][e]:(a=this._createGapStackPoint(t),this._stackPoints.push(a)),a}_createGapStackPoint(t){const e=this.pointOptions({},0),s=new Ne(0,e);return s.categoryIx=t,s.series={},s}seriesMissingValues(t){return t.missingValues||ns}supportsPointInactiveOpacity(){return!1}}class Nr{constructor(){this.axisRanges={}}update(t){const e=this.axisRanges;for(let s in t){const i=t[s];let n=e[s];e[s]=n=n||{min:gt,max:vt},n.min=Math.min(n.min,i.min),n.max=Math.max(n.max,i.max)}}reset(t){this.axisRanges[t]=void 0}query(t){return this.axisRanges[t]}}class nc extends Y{constructor(t,e,s){super(e),this.textBox=new qt(t,this.options,s),this.append(this.textBox)}createVisual(){this.textBox.options.noclip=this.options.noclip}reflow(t){const e=this.options,{vertical:s,aboveAxis:i}=e,n=this.children[0],o=n.options,a=n.box,l=n.options.padding;let h=t;if(o.align=s?O:z,o.vAlign=s?N:O,e.position===zr)s?(o.vAlign=N,!i&&a.height()<t.height()&&(o.vAlign=j)):o.align=i?G:z;else if(e.position===O)o.vAlign=O,o.align=O;else if(e.position===o1)s?o.vAlign=i?j:N:o.align=i?z:G;else if(e.position===ii)if(s)if(i){const c=(a.width()-t.width()-l.left-l.right)/2;h=new _(t.x1-c,t.y1-a.height(),t.x2+c,t.y1)}else h=new _(t.x1,t.y2,t.x2,t.y2+a.height());else o.align=O,i?h=new _(t.x2,t.y1,t.x2+a.width(),t.y2):h=new _(t.x1-a.width(),t.y1,t.x1,t.y2);e.rotation||(s?l.left=l.right=(h.width()-n.contentBox.width())/2:l.top=l.bottom=(h.height()-n.contentBox.height())/2),n.reflow(h)}alignToClipBox(t){const s=this.options.vertical?P:T,i=s+"1",n=s+"2",o=this.children[0],a=this.parent.box;if(a[i]<t[i]||t[n]<a[n]){const l=o.paddingBox.clone();l[i]=Math.max(a[i],t[i]),l[n]=Math.min(a[n],t[n]),this.reflow(l)}}}b(nc,{position:ii,margin:X(3),padding:X(4),color:ut,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:zs,delay:ge},zIndex:2});const dn={addAccessibilityAttributesToVisual:function(){this._id=this._id||sa();const r=Object.assign({},{ariaLabel:this.getAriaLabelText()},this.options.accessibility);kh(this.visual,r)},getAriaLabelText(){const r=this.options.labels,t=wh(r);return t?t(this.pointData()):this.getLabelText(r)},focusVisual(){this.visual.options.set("id",this._id),this.toggleFocusHighlight(!0)},clearFocusFromVisual(){this.visual.options.set("id",""),this.toggleFocusHighlight(!1)}},g1=6;class ps extends Y{constructor(t,e){super(),this.options=e,this.color=e.color||U,this.aboveAxis=L(this.options.aboveAxis,!0),this.value=t}render(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))}createLabel(){const e=this.options.labels;e.visible&&(this.label=this.createLabelElement(e),this.append(this.label))}createLabelElement(t){return new nc(this.getLabelText(t),m({vertical:this.options.vertical},t),this.pointData())}getLabelText(t){let e=bt(t);return e?e(this.pointData()):this.formatValue(t.format)}formatValue(t){return this.owner.formatPointValue(this,t)}reflow(t){this.render();const e=this.label;if(this.box=t,e&&(e.options.aboveAxis=this.aboveAxis,e.reflow(t)),this.note&&this.note.reflow(t),this.errorBars)for(let s=0;s<this.errorBars.length;s++)this.errorBars[s].reflow(t)}createVisual(){const{box:t,options:e}=this,s=e.visual;if(this.visible!==!1)if(super.createVisual(),this.addAccessibilityAttributesToVisual(),s){const i=this.rectVisual=s({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:t.toRect(),createVisual:()=>{const n=new W;return this.createRect(n),n},options:e});i&&this.visual.append(i)}else t.width()>0&&t.height()>0&&this.createRect(this.visual)}createRect(t){const e=this.options,s=e.border,i=A(s.opacity)?s.opacity:e.opacity,n=this.box.toRect();n.size.width=Math.round(n.size.width);const o=this.rectVisual=C.fromRect(n,{fill:Ds(e.pattern,{color:this.color,opacity:e.opacity}),stroke:{color:this.getBorderColor(),width:s.width,opacity:i,dashType:s.dashType}}),a=this.box.width(),l=this.box.height();if((e.vertical?a:l)>g1&&(Jt(o),(a<1||l<1)&&(o.options.stroke.lineJoin="round")),t.append(o),Kh(e)){const c=this.createGradientOverlay(o,{baseColor:this.color},m({end:e.vertical?void 0:[0,1]},e.overlay));t.append(c)}}createHighlight(t){const e=C.fromRect(this.box.toRect(),t);return Jt(e)}highlightVisual(){return this.rectVisual}highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}}createFocusHighlight(t){const e=this.options.focusHighlight.border.width,s=C.fromRect(this.box.pad(e/2).toRect(),t);return Jt(s)}getBorderColor(){const t=this.color,e=this.options.border,s=e._brightness||aa;let i=e.color;return A(i)||(i=new Nt(t).brightness(s).toHex()),i}tooltipAnchor(){const{options:t,box:e,aboveAxis:s}=this,i=this.owner.pane.clipBox()||e;let n=z,o=N,a,l;if(t.vertical)a=Math.min(e.x2,i.x2)+we,s?l=Math.max(e.y1,i.y1):(l=Math.min(e.y2,i.y2),o=j);else{const h=Math.max(e.x1,i.x1),c=Math.min(e.x2,i.x2);t.isStacked?(o=j,s?(n=G,a=c):a=h,l=Math.max(e.y1,i.y1)-we):(s?a=c+we:(a=h-we,n=G),l=Math.max(e.y1,i.y1))}return{point:new R(a,l),align:{horizontal:n,vertical:o}}}overlapsBox(t){return this.box.overlaps(t)}unclipBox(){const t=this.label&&this.label.textBox;return tm(this.box.clone(),[t,this.note])}labelBox(){const t=this.label&&this.label.textBox;return t?t.box:new _}noteBox(){return this.note?this.note.box:new _}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}}getIndex(){return this.categoryIx}}m(ps.prototype,Ce);m(ps.prototype,hn);m(ps.prototype,dn);ps.prototype.defaults={border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}},accessibility:{role:Vs,className:Ns,ariaRoleDescription:Fs}};function im(r,t){r.forEach(t)}function nm(r,t){const e=r.length;for(let s=e-1;s>=0;s--)t(r[s],s-e-1)}class vo extends Y{constructor(t){super(t),this.forEach=t.rtl?nm:im}reflow(t){const{vertical:e,gap:s,spacing:i}=this.options,n=this.children,o=n.length,a=e?P:T,l=o+s+i*(o-1),h=(e?t.height():t.width())/l;let c=t[a+1]+h*(s/2);this.forEach(n,(d,u)=>{const p=(d.box||t).clone();p[a+1]=c,p[a+2]=c+h,d.reflow(p),u<o-1&&(c+=h*i),c+=h})}}b(vo,{vertical:!1,gap:0,spacing:0});class om extends Y{reflow(t){const e=this.options.vertical?T:P,s=this.children,i=s.length;let n=this.box=new _;for(let o=0;o<i;o++){const a=s[o];if(a.visible!==!1){const l=a.box.clone();l.snapTo(t,e),o===0&&(n=this.box=l.clone()),a.reflow(l),n.wrap(l)}}}}b(om,{vertical:!0});class un extends Hs{render(){super.render(),this.updateStackRange()}pointType(){return ps}clusterType(){return vo}stackType(){return om}stackLimits(t,e){return super.stackLimits(t,e)}createPoint(t,e){const{categoryIx:s,series:i,seriesIx:n}=e,{options:o,children:a}=this,l=A(i.stack)?i.stack:o.defaultStack,h=this.pointValue(t);let c=this.pointOptions(i,n);const d=c.labels;l&&d.position===ii&&(d.position=zr),c.isStacked=l;let u=t.fields.color||i.color;h<0&&c.negativeColor&&(u=c.negativeColor),c=this.evalPointOptions(c,h,e),rt(i.color)&&(u=c.color);const p=this.pointType(),g=new p(h,c);g.color=u;let f=a[s];if(!f){const x=this.clusterType();f=new x({vertical:o.invertAxes,gap:o.gap,spacing:o.spacing,rtl:!o.invertAxes&&(this.chartService||{}).rtl}),this.append(f)}return o.isStacked?this.getStackWrap(l,f).append(g):f.append(g),g}getStackWrap(t,e){const s=typeof t===Yn?t.group||!0:t,i=e.children;let n;if(typeof s===bh||s===!0){for(let o=0;o<i.length;o++)if(i[o]._stackGroup===s){n=i[o];break}}if(!n){const o=this.stackType();n=new o({vertical:!this.options.invertAxes}),n._stackGroup=s,e.append(n)}return n}categorySlot(t,e,s){const i=this.options,n=t.getSlot(e),o=s.startValue();if(i.isStacked){const a=s.getSlot(o,o,!0),l=i.invertAxes?T:P;n[l+1]=n[l+2]=a[l+1]}return n}reflowCategories(t){const e=this.children,s=e.length;for(let i=0;i<s;i++)e[i].reflow(t[i])}createAnimation(){this._setAnimationOptions(),super.createAnimation(),qf(this.options.series)&&this._setChildrenAnimation()}_setChildrenAnimation(){const t=this.points;for(let e=0;e<t.length;e++){const s=t[e],i=s.visual;i&&A(i.options.zIndex)&&(s.options.animation=this.options.animation,s.createAnimation())}}_setAnimationOptions(){const t=this.options,e=t.animation||{};let s;if(t.isStacked){const i=this.seriesValueAxis(t.series[0]);s=i.getSlot(i.startValue())}else s=this.categoryAxis.getSlot(0);e.origin=new w(s.x1,s.y1),e.vertical=!t.invertAxes}}b(un,{animation:{type:fe}});class Us extends Y{constructor(t,e){super(e),this.value=t}getLabelText(t){return this.formatValue(t.format)}reflow(t){const{options:e,value:s,owner:i}=this,n=i.seriesValueAxis(e),o=n.getSlot(s.open,s.close),a=n.getSlot(s.low,s.high);o.x1=a.x1=t.x1,o.x2=a.x2=t.x2,this.realBody=o;const l=a.center().x,h=[];h.push([[l,a.y1],[l,o.y1]]),h.push([[l,o.y2],[l,a.y2]]),this.lines=h,this.box=a.clone().wrap(o),this._rendered||(this._rendered=!0,this.createNote()),this.reflowNote()}reflowNote(){this.note&&this.note.reflow(this.box)}createVisual(){super.createVisual(),this.addAccessibilityAttributesToVisual(),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()}mainVisual(t){const e=new W;return this.createBody(e,t),this.createLines(e,t),e}createBody(t,e){const s=C.fromRect(this.realBody.toRect(),{fill:Ds(e.pattern,{color:this.color,opacity:e.opacity}),stroke:null});e.border.width>0&&s.options.set("stroke",{color:this.getBorderColor(e),width:e.border.width,dashType:e.border.dashType,opacity:L(e.border.opacity,e.opacity)}),Jt(s),t.append(s),Kh(e)&&t.append(this.createGradientOverlay(s,{baseColor:this.color},m({end:e.vertical?void 0:[0,1]},e.overlay)))}createLines(t,e){this.drawLines(t,e,this.lines,e.line)}drawLines(t,e,s,i){if(!s)return;const n={stroke:{color:i.color||this.color,opacity:L(i.opacity,e.opacity),width:i.width,dashType:i.dashType,lineCap:"butt"}};for(let o=0;o<s.length;o++){const a=C.fromPoints(s[o],n);Jt(a),t.append(a)}}getBorderColor(t){let s=t.border.color;return A(s)||(s=new Nt(this.color).brightness(this.options.border._brightness).toHex()),s}createOverlay(){const t=C.fromRect(this.box.toRect(),{fill:{color:U,opacity:0},stroke:null});this.visual.append(t)}createHighlight(){const t=this.options.highlight,e=this.color;this.color=t.color||this.color;const s=this.mainVisual(m({},this.options,{line:{color:this.getBorderColor(t)}},t));return this.color=e,s}highlightVisual(){return this._mainVisual}highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}}tooltipAnchor(){const t=this.box,e=this.owner.pane.clipBox()||t;return{point:new R(t.x2+we,Math.max(t.y1,e.y1)+we),align:{horizontal:z,vertical:N}}}formatValue(t){return this.owner.formatPointValue(this,t)}overlapsBox(t){return this.box.overlaps(t)}pointData(){return{dataItem:this.dataItem,value:this.value,meanPoints:this.meanPoints,medianPoints:this.medianPoints,whiskerPoints:this.whiskerPoints,stackValue:this.stackValue,series:this.series}}getIndex(){return this.categoryIx}}Us.prototype.createFocusHighlight=ps.prototype.createFocusHighlight;b(Us,{vertical:!0,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},labels:{format:""},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},accessibility:{role:Vs,className:Ns,ariaRoleDescription:Fs}});m(Us.prototype,Ce);m(Us.prototype,hn);m(Us.prototype,dn);class da extends Hs{reflowCategories(t){const e=this.children,s=e.length;for(let i=0;i<s;i++)e[i].reflow(t[i])}addValue(t,e){const{categoryIx:s,category:i,series:n,seriesIx:o}=e,{children:a,options:l}=this,h=t.valueFields,c=this.splitValue(h),d=Zf(c),u=n.data[s];let p=this.categoryPoints[s],g;p||(this.categoryPoints[s]=p=[]),d&&(g=this.createPoint(t,e));let f=a[s];f||(f=new vo({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl}),this.append(f)),g&&(this.updateRange(h,e),f.append(g),g.categoryIx=s,g.category=i,g.series=n,g.seriesIx=o,g.owner=this,g.dataItem=u,g.noteText=t.fields.noteText),this.points.push(g),p.push(g)}pointType(){return Us}createPoint(t,e){const{series:s}=e,i=this.pointType(),n=t.valueFields;let o=m({},s),a=t.fields.color||s.color;o=this.evalPointOptions(o,n,e),(s.type===rn||s.type===an)&&n.open>n.close&&(a=t.fields.downColor||s.downColor||s.color),rt(s.color)&&(a=o.color),o.vertical=!this.options.invertAxes;const l=new i(n,o);return l.color=a,l}splitValue(t){return[t.low,t.open,t.close,t.high]}updateRange(t,e){const s=e.series.axis,i=this.splitValue(t);let n=this.valueAxisRanges[s]||{min:gt,max:vt};this.valueAxisRanges[s]={min:Math.min.apply(Math,i.concat([n.min])),max:Math.max.apply(Math,i.concat([n.max]))}}formatPointValue(t,e){const s=t.value;return this.chartService.format.auto(e,s.open,s.high,s.low,s.close,t.category)}animationPoints(){return this.points}}m(da.prototype,ha);class ua extends Us{constructor(t,e){super(t,e),this.createNote()}reflow(t){const{options:e,value:s,owner:i}=this,n=i.seriesValueAxis(e);let o,a;this.boxSlot=a=n.getSlot(s.q1,s.q3),this.realBody=a,this.reflowBoxSlot(t),this.whiskerSlot=o=n.getSlot(s.lower,s.upper),this.reflowWhiskerSlot(t);const l=n.getSlot(s.median);if(s.mean){const h=n.getSlot(s.mean);this.meanPoints=this.calcMeanPoints(t,h)}this.whiskerPoints=this.calcWhiskerPoints(a,o),this.medianPoints=this.calcMedianPoints(t,l),this.box=o.clone().wrap(a),this.reflowNote()}reflowBoxSlot(t){this.boxSlot.x1=t.x1,this.boxSlot.x2=t.x2}reflowWhiskerSlot(t){this.whiskerSlot.x1=t.x1,this.whiskerSlot.x2=t.x2}calcMeanPoints(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]}calcWhiskerPoints(t,e){const s=e.center().x;return[[[s-5,e.y1],[s+5,e.y1],[s,e.y1],[s,t.y1]],[[s-5,e.y2],[s+5,e.y2],[s,e.y2],[s,t.y2]]]}calcMedianPoints(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]}renderOutliers(t){const e=this.value,s=e.outliers||[],i=Math.abs(e.q3-e.q1)*3,n=[];let o=t.markers||{};for(let a=0;a<s.length;a++){const l=s[a];l<e.q3+i&&l>e.q1-i?o=t.outliers:o=t.extremes;let h=m({},o.border);A(h.color)||(A(this.color)?h.color=this.color:h.color=new Nt(o.background).brightness(aa).toHex());const c=new Et({type:o.type,width:o.size,height:o.size,rotation:o.rotation,background:o.background,border:h,opacity:o.opacity});c.value=l,n.push(c)}return this.reflowOutliers(n),n}reflowOutliers(t){const e=this.owner.seriesValueAxis(this.options),s=this.box.center();for(let i=0;i<t.length;i++){const n=t[i].value,o=e.getSlot(n);this.options.vertical?o.move(s.x):o.move(void 0,s.y),this.box=this.box.wrap(o),t[i].reflow(o)}}mainVisual(t){const e=super.mainVisual(t),s=this.renderOutliers(t);for(let i=0;i<s.length;i++){const n=s[i].getElement();n&&e.append(n)}return e}createLines(t,e){this.drawLines(t,e,this.whiskerPoints,e.whiskers),this.drawLines(t,e,this.medianPoints,e.median),this.drawLines(t,e,this.meanPoints,e.mean)}getBorderColor(){return(this.options.border||{}).color?this.options.border.color:this.color?this.color:super.getBorderColor()}}b(ua,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:Rr,type:yh,background:U,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:Rr,type:Xt,background:U,border:{width:2,opacity:1},opacity:0}});m(ua.prototype,Ce);class f1 extends ua{reflowBoxSlot(t){this.boxSlot.y1=t.y1,this.boxSlot.y2=t.y2}reflowWhiskerSlot(t){this.whiskerSlot.y1=t.y1,this.whiskerSlot.y2=t.y2}calcMeanPoints(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]}calcWhiskerPoints(t,e){const s=e.center().y;return[[[e.x1,s-5],[e.x1,s+5],[e.x1,s],[t.x1,s]],[[e.x2,s-5],[e.x2,s+5],[e.x2,s],[t.x2,s]]]}calcMedianPoints(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]}}class m1 extends da{addValue(t,e){const{categoryIx:s,category:i,series:n,seriesIx:o}=e,{children:a,options:l}=this,h=t.valueFields,c=this.splitValue(h),d=Zf(c),u=n.data[s];let p=this.categoryPoints[s],g;p||(this.categoryPoints[s]=p=[]),d&&(g=this.createPoint(t,e));let f=a[s];f||(f=new vo({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl}),this.append(f)),g&&(this.updateRange(h,e),f.append(g),g.categoryIx=s,g.category=i,g.series=n,g.seriesIx=o,g.owner=this,g.dataItem=u),this.points.push(g),p.push(g)}pointType(){return this.options.invertAxes?f1:ua}splitValue(t){return[t.lower,t.q1,t.median,t.q3,t.upper]}updateRange(t,e){const s=e.series.axis;let i=this.splitValue(t).concat(this.filterOutliers(t.outliers));A(t.mean)&&(i=i.concat(t.mean));let n=this.valueAxisRanges[s]||{min:gt,max:vt};this.valueAxisRanges[s]={min:Math.min.apply(Math,i.concat([n.min])),max:Math.max.apply(Math,i.concat([n.max]))}}formatPointValue(t,e){const s=t.value;return this.chartService.format.auto(e,s.lower,s.q1,s.median,s.q3,s.upper,s.mean,t.category)}filterOutliers(t){const e=(t||[]).length,s=[];for(let i=0;i<e;i++){const n=t[i];A(n)&&n!==null&&s.push(n)}return s}supportsPointInactiveOpacity(){return!1}}class x1 extends Zh{getAxis(){const t=this.chart.seriesAxes(this.series);return this.isVertical?t.y:t.x}}class pn extends Y{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this._initFields(),this.render()}_initFields(){this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[]}render(){this.traverseDataPoints(this.addValue.bind(this))}addErrorBar(t,e,s){const i=t.value[e],n=e+"Value",o=e+"ErrorLow",a=e+"ErrorHigh",{seriesIx:l,series:h}=s,c=t.options.errorBars,d=s[o],u=s[a];if(F(i)){let p;F(d)&&F(u)&&(p={low:d,high:u}),c&&A(c[n])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[e][l]=this.seriesErrorRanges[e][l]||new zf(c[n],h,e),p=this.seriesErrorRanges[e][l].getErrorRange(i,c[n])),p&&this.addPointErrorBar(p,t,e)}}addPointErrorBar(t,e,s){const{low:i,high:n}=t,{series:o,options:{errorBars:a}}=e,l=s===P,h={};e[s+"Low"]=i,e[s+"High"]=n,e.errorBars=e.errorBars||[];const c=new x1(i,n,l,this,o,a);e.errorBars.push(c),e.append(c),h[s]=i,this.updateRange(h,o),h[s]=n,this.updateRange(h,o)}addValue(t,e){const{x:s,y:i}=t,n=e.seriesIx,o=this.options.series[n],a=this.seriesMissingValues(o),l=this.seriesPoints[n];let h=t;Gt(s)&&Gt(i)||(h=this.createMissingValue(h,a));let c;h&&(c=this.createPoint(h,e),c&&(Object.assign(c,e),this.addErrorBar(c,T,e),this.addErrorBar(c,P,e)),this.updateRange(h,e.series)),this.points.push(c),l.push(c)}seriesMissingValues(t){return t.missingValues}createMissingValue(){}updateRange(t,e){const s=this.chartService.intl,{xAxis:i,yAxis:n}=e;let{x:o,y:a}=t,l=this.xAxisRanges[i],h=this.yAxisRanges[n];Gt(o)&&(l=this.xAxisRanges[i]=l||{min:gt,max:vt},Yt(o)&&(o=kt(s,o)),l.min=Math.min(l.min,o),l.max=Math.max(l.max,o)),Gt(a)&&(h=this.yAxisRanges[n]=h||{min:gt,max:vt},Yt(a)&&(a=kt(s,a)),h.min=Math.min(h.min,a),h.max=Math.max(h.max,a))}evalPointOptions(t,e,s){const{series:i,seriesIx:n}=s,o={defaults:i._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory","ariaTemplate","ariaContent"]};let a=this._evalSeries[n];A(a)||(this._evalSeries[n]=a=as(t,{},o,!0));let l=t;return a&&(l=m({},t),as(l,{value:e,series:i,dataItem:s.dataItem},o)),l}pointType(){return Ne}pointOptions(t,e){let s=this.seriesOptions[e];if(!s){const i=this.pointType().prototype.defaults;this.seriesOptions[e]=s=m({},i,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return s}createPoint(t,e){const s=e.series;let i=this.pointOptions(s,e.seriesIx),n=e.color||s.color;i=this.evalPointOptions(i,t,e),rt(s.color)&&(n=i.color);const o=new Ne(t,i);return o.color=n,this.append(o),o}seriesAxes(t){const{xAxis:e,yAxis:s}=t,i=this.plotArea,n=e?i.namedXAxes[e]:i.axisX,o=s?i.namedYAxes[s]:i.axisY;if(!n)throw new Error("Unable to locate X axis with name "+e);if(!o)throw new Error("Unable to locate Y axis with name "+s);return{x:n,y:o}}reflow(t){const e=this.points,s=!this.options.clip;let i=0;this.traverseDataPoints((n,o)=>{const a=e[i++],l=this.seriesAxes(o.series),h=l.x.getSlot(n.x,n.x,s),c=l.y.getSlot(n.y,n.y,s);if(a)if(h&&c){const d=this.pointSlot(h,c);a.reflow(d)}else a.visible=!1}),this.box=t}pointSlot(t,e){return new _(t.x1,e.y1,t.x2,e.y2)}traverseDataPoints(t){const{options:{series:e},seriesPoints:s}=this;for(let i=0;i<e.length;i++){const n=e[i];s[i]||(s[i]=[]);for(let a=0;a<n.data.length;a++){const{valueFields:l,fields:h}=this.plotArea.bindPoint(n,a);t(l,m({pointIx:a,series:n,seriesIx:i,dataItem:n.data[a],owner:this},h))}}}formatPointValue(t,e){const s=t.value;return this.chartService.format.auto(e,s.x,s.y)}animationPoints(){const t=this.points,e=[];for(let s=0;s<t.length;s++)e.push((t[s]||{}).marker);return e}}b(pn,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0});m(pn.prototype,ha);class to extends Ne{constructor(t,e){super(t,e),this.category=t.category}createHighlight(){const t=this.options.highlight,e=t.border,s=this.options.markers,i=this.box.center(),n=(s.size+s.border.width+e.width)/2,o=new W,a=new Kt(new Rt([i.x,i.y+n/5+e.width/2],n+e.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:s.background,stops:[{offset:0,color:s.background,opacity:.3},{offset:1,color:s.background,opacity:0}]})}),l=new Kt(new Rt([i.x,i.y],n),{stroke:{color:e.color||new Nt(s.background).brightness(aa).toHex(),width:e.width,opacity:e.opacity,dashType:e.dashType},fill:Ds(this.options.pattern,{color:s.background,opacity:t.opacity})});return o.append(a,l),o}createFocusHighlight(t){const e=this.options.focusHighlight,s=this.options.markers,i=this.box.center(),n=(s.size+s.border.width)/2+e.border.width/2;return new Kt(new Rt([i.x,i.y],n),t)}}to.prototype.defaults=m({},to.prototype.defaults,{labels:{position:O},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}});to.prototype.defaults.highlight.zIndex=void 0;class rm extends pn{_initFields(){this._maxSize=vt,super._initFields()}addValue(t,e){t.size!==null&&(t.size>0||t.size<0&&e.series.negativeValues.visible)?(this._maxSize=Math.max(this._maxSize,Math.abs(t.size)),super.addValue(t,e)):(this.points.push(null),this.seriesPoints[e.seriesIx].push(null))}reflow(t){this.updateBubblesSize(t),super.reflow(t)}pointType(){return to}createPoint(t,e){const s=e.series,i=s.data.length,n=e.pointIx*(ge/i),o={delay:n,duration:ge-n,type:on};let a=e.color||s.color;t.size<0&&s.negativeValues.visible&&(a=L(s.negativeValues.color,a));let l=m({labels:{animation:{delay:n,duration:ge-n}}},this.pointOptions(s,e.seriesIx),{markers:{type:Xt,border:s.border,opacity:s.opacity,animation:o}});l=this.evalPointOptions(l,t,e),rt(s.color)&&(a=l.color),l.markers.background=a;const h=new to(t,l);return h.color=a,this.append(h),h}updateBubblesSize(t){const{options:{series:e}}=this,s=Math.min(t.width(),t.height());for(let i=0;i<e.length;i++){const n=e[i],o=this.seriesPoints[i],a=n.minSize||Math.max(s*.02,10),l=n.maxSize||s*.2,h=a/2,c=l/2,d=Math.PI*h*h,g=(Math.PI*c*c-d)/this._maxSize;for(let f=0;f<o.length;f++){const x=o[f];if(x){const y=Math.abs(x.value.size)*g,v=Math.sqrt((d+y)/Math.PI),E=L(x.options.zIndex,0)+(1-v/c);m(x.options,{zIndex:E,markers:{size:v*2,zIndex:E},labels:{zIndex:E+1}})}}}}formatPointValue(t,e){const s=t.value;return this.chartService.format.auto(e,s.x,s.y,s.size,t.category)}createAnimation(){}createVisual(){}}b(rm,{tooltip:{format:"{3}"},labels:{format:"{3}"}});class am extends Et{}m(am.prototype,Ce);class xi extends Y{constructor(t,e){super(e),this.aboveAxis=this.options.aboveAxis,this.color=e.color||U,this.value=t}render(){const t=this.options;this._rendered||(this._rendered=!0,A(this.value.target)&&(this.target=new am({type:t.target.shape,background:t.target.color||this.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:N,align:G}),this.target.value=this.value,this.target.dataItem=this.dataItem,this.target.series=this.series,this.append(this.target)),this.createLabel(),this.createNote())}createLabel(){const e=this.options.labels;e.visible&&(this.label=this.createLabelElement(e),this.append(this.label))}createLabelElement(t){return new nc(this.getLabelText(t),t,this.pointData())}getLabelText(t){let e=bt(t);return e?e(this.pointData()):this.formatValue(t.format)}reflow(t){this.render();const{options:e,target:s,owner:i}=this,n=e.invertAxes,o=i.seriesValueAxis(this.options),a=i.categorySlot(i.categoryAxis,e.categoryIx,o),l=o.getSlot(this.value.target),h=n?l:a,c=n?a:l;if(s){const u=new _(h.x1,c.y1,h.x2,c.y2);s.options.height=n?u.height():e.target.line.width,s.options.width=n?e.target.line.width:u.width(),s.reflow(u)}const d=this.label;d&&(d.options.aboveAxis=this.aboveAxis,d.reflow(t)),this.note&&this.note.reflow(t),this.box=t}createVisual(){super.createVisual(),this.addAccessibilityAttributesToVisual();const t=this.options,e=C.fromRect(this.box.toRect(),{fill:Ds(t.pattern,{color:this.color,opacity:t.opacity}),stroke:null});t.border.width>0&&e.options.set("stroke",{color:t.border.color||this.color,width:t.border.width,dashType:t.border.dashType,opacity:L(t.border.opacity,t.opacity)}),this.bodyVisual=e,Jt(e),this.visual.append(e)}createAnimation(){this.bodyVisual&&(this.animation=ne.create(this.bodyVisual,this.options.animation))}createHighlight(t){return C.fromRect(this.box.toRect(),t)}highlightVisual(){return this.bodyVisual}highlightVisualArgs(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}}formatValue(t){return this.owner.formatPointValue(this,t)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series}}overlapsBox(t){return this.box.overlaps(t)}getIndex(){return this.categoryIx}}xi.prototype.tooltipAnchor=ps.prototype.tooltipAnchor;xi.prototype.createFocusHighlight=ps.prototype.createFocusHighlight;b(xi,{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},labels:{visible:!1},tooltip:{format:"Current: {0}<br />Target: {1}"},notes:{label:{}},accessibility:{role:Vs,className:Ns,ariaRoleDescription:Fs}});m(xi.prototype,Ce);m(xi.prototype,hn);m(xi.prototype,dn);class oc extends Hs{constructor(t,e){y1(e),super(t,e)}reflowCategories(t){const e=this.children,s=e.length;for(let i=0;i<s;i++)e[i].reflow(t[i])}plotRange(t){const e=t.series,s=this.seriesValueAxis(e),i=this.categoryAxisCrossingValue(s);return[i,t.value.current||i]}createPoint(t,e){const{categoryIx:s,series:i}=e,{options:n,children:o}=this,a=t.valueFields;let l=m({vertical:!n.invertAxes,overlay:i.overlay,categoryIx:s,invertAxes:n.invertAxes},i),h=t.fields.color||i.color;l=this.evalPointOptions(l,a,e),rt(i.color)&&(h=l.color);const c=new xi(a,l);c.color=h;let d=o[s];return d||(d=new vo({vertical:n.invertAxes,gap:n.gap,spacing:n.spacing,rtl:!n.invertAxes&&(this.chartService||{}).rtl}),this.append(d)),d.append(c),c}updateRange(t,e){const{current:s,target:i}=t,n=e.series.axis;let o=this.valueAxisRanges[n];A(s)&&!isNaN(s)&&A(i&&!isNaN(i))&&(o=this.valueAxisRanges[n]=o||{min:gt,max:vt},o.min=Math.min(o.min,s,i),o.max=Math.max(o.max,s,i))}formatPointValue(t,e){return this.chartService.format.auto(e,t.value.current,t.value.target)}pointValue(t){return t.valueFields.current}aboveAxis(t){return t.value.current>0}createAnimation(){const t=this.points;this._setAnimationOptions();for(let e=0;e<t.length;e++){const s=t[e];s.options.animation=this.options.animation,s.createAnimation()}}}oc.prototype._setAnimationOptions=un.prototype._setAnimationOptions;b(oc,{animation:{type:fe}});function y1(r){const t=r.series;for(let e=0;e<t.length;e++){const s=t[e],i=s.data;i&&!Ct(i[0])&&!me(i[0])&&(s.data=[i])}}class pa{constructor(t,e){this.chartService=t,this.options=m({},this.options,e)}getStyle(t,e){let{background:s,border:{color:i}}=t;if(e){const o=e.color||e.options.color;s=L(s,o),i=L(i,o)}const n=t.padding!==void 0?X(t.padding):{};return typeof t.padding=="object"&&(n.top=t.padding.top!==void 0?n.top:void 0,n.right=t.padding.right!==void 0?n.right:void 0,n.bottom=t.padding.bottom!==void 0?n.bottom:void 0,n.left=t.padding.left!==void 0?n.left:void 0),{backgroundColor:s,borderColor:i,font:t.font,color:t.color,opacity:t.opacity,borderWidth:Ci(t.border.width),paddingTop:Ci(n.top),paddingBottom:Ci(n.bottom),paddingLeft:Ci(n.left),paddingRight:Ci(n.right)}}show(t,e,s){if(!this.chartService)return;t.format=e.format;const i=this.getStyle(e,s);t.style=i;const n=new Nt(i.backgroundColor);!A(e.color)&&!n.isDark()&&(t.className="k-chart-tooltip-inverse"),this.chartService.notify(Xf,t),this.visible=!0}hide(){this.chartService&&this.chartService.notify(Yf),this.visible=!1}destroy(){delete this.chartService}}b(pa,{border:{width:1},opacity:1});class lm extends pa{constructor(t,e,s){super(t,s),this.crosshair=e,this.formatService=t.format,this.initAxisName()}initAxisName(){const t=this.crosshair.axis,e=t.plotArea;let s;e.categoryAxis?s=t.getCategory?"categoryAxis":"valueAxis":s=t.options.vertical?"yAxis":"xAxis",this.axisName=s}showAt(t){const{crosshair:{axis:e},options:s}=this;let i=e[s.stickyMode?"getCategory":"getValue"](t),n=i;s.format?n=this.formatService.auto(s.format,i):e.options.type===Je&&(n=this.formatService.auto(e.options.labels.dateFormats[e.options.baseUnit],i)),this.show({point:t,anchor:this.getAnchor(),crosshair:this.crosshair,value:n,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)}hide(){this.chartService.notify(Yf,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})}getAnchor(){const{crosshair:t,options:{position:e,padding:s}}=this,i=!t.axis.options.vertical,n=t.line.bbox();let o,a,l;return i?(o=O,e===j?(a=N,l=n.bottomLeft().translate(0,s)):(a=j,l=n.topLeft().translate(0,-s))):(a=O,e===z?(o=G,l=n.topLeft().translate(-s,0)):(o=z,l=n.topRight().translate(s,0))),{point:l,align:{horizontal:o,vertical:a}}}}b(lm,{padding:10});class hm extends Y{constructor(t,e,s){super(s),this.axis=e,this.stickyMode=e instanceof pe;const i=this.options.tooltip;i.visible&&(this.tooltip=new lm(t,this,m({},i,{stickyMode:this.stickyMode})))}showAt(t){this.point=t,this.moveLine(),this.line.visible(!0),this.tooltip&&this.tooltip.showAt(t)}hide(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()}moveLine(){const{axis:t,point:e}=this,s=t.options.vertical,i=this.getBox(),n=s?P:T,o=new w(i.x1,i.y1);let a;if(s?a=new w(i.x2,i.y1):a=new w(i.x1,i.y2),e)if(this.stickyMode){const l=t.getSlot(t.pointCategoryIndex(e));o[n]=a[n]=l.center()[n]}else o[n]=a[n]=e[n];this.box=i,this.line.moveTo(o).lineTo(a)}getBox(){const t=this.axis,e=t.pane.axes,s=e.length,i=t.options.vertical,n=t.lineBox().clone(),o=i?T:P;let a;for(let l=0;l<s;l++){const h=e[l];h.options.vertical!==i&&(a?a.wrap(h.lineBox()):a=h.lineBox().clone())}return n[o+1]=a[o+1],n[o+2]=a[o+2],n}createVisual(){super.createVisual();const t=this.options;this.line=new C({stroke:{color:t.color,width:t.width,opacity:t.opacity,dashType:t.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)}destroy(){this.tooltip&&this.tooltip.destroy(),super.destroy()}}b(hm,{color:ut,width:2,zIndex:-1,tooltip:{visible:!1}});class cm extends Y{constructor(t,e){super(t),this.pane=e}shouldClip(){const t=this.children,e=t.length;for(let s=0;s<e;s++)if(t[s].options.clip===!0)return!0;return!1}_clipBox(){return this.pane.chartsBox()}createVisual(){if(this.visual=new W({zIndex:0}),this.shouldClip()){const e=(this.clipBox=this._clipBox()).toRect(),s=C.fromRect(e);Jt(s),this.visual.clip(s),this.unclipLabels()}}stackRoot(){return this}unclipLabels(){const{children:t,clipBox:e}=this;for(let s=0;s<t.length;s++){const i=t[s].points||[],n=i.length;for(let o=0;o<n;o++){const a=i[o];if(a&&a.visible!==!1&&a.overlapsBox&&a.overlapsBox(e))if(a.unclipElements)a.unclipElements();else{const{label:l,note:h}=a;l&&l.options.visible&&(l.alignToClipBox&&l.alignToClipBox(e),l.options.noclip=!0),h&&h.options.visible&&(h.options.noclip=!0)}}}}unclipBox(){const{children:t}=this,e=this._clipBox(),s=e.clone();for(let i=0;i<t.length;i++){const n=t[i].points||[],o=n.length;for(let a=0;a<o;a++){const l=n[a];if(l&&l.unclipBox&&l.overlapsBox&&l.visible!==!1){if(!l.overlapsBox(e)){l.clipElements&&l.clipElements();continue}const h=l.unclipBox();if(s.overlaps(h)){const c=l.labelBox?l.labelBox():new _,d=l.noteBox?l.noteBox():new _,u=Math.max(c.height(),d.height()),p=Math.max(c.width(),d.width());s.wrapLimit(h,p,u)}}}}return s}destroy(){super.destroy(),delete this.parent}}cm.prototype.isStackRoot=!0;let rc=class dm extends es{constructor(t){super(t),this.id=b1(),this.createTitle(),this.content=new Y,this.chartContainer=new cm({},this),this.append(this.content),this.axes=[],this.charts=[]}createTitle(){let t=this.options.title;me(t)&&(t=m({},t,{align:t.position,position:N})),this.title=Oi.buildTitle(t,dm.prototype.options.title),this.title&&this.append(this.title)}appendAxis(t){this.content.append(t),this.axes.push(t),t.pane=this}appendAxisAt(t,e){this.content.append(t),this.axes.splice(e,0,t),t.pane=this}appendChart(t){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(t),this.chartContainer.append(t),t.pane=this}empty(){const t=this.parent;if(t){for(let e=0;e<this.axes.length;e++)t.removeAxis(this.axes[e]);for(let e=0;e<this.charts.length;e++)t.removeChart(this.charts[e])}this.axes=[],this.charts=[],this.content.destroy(),this.content.children=[],this.chartContainer.children=[]}reflow(t){let e;pt(this.children)===this.content&&(e=this.children.pop()),super.reflow(t),e&&this.children.push(e),this.title&&(this.contentBox.y1+=this.title.box.height())}unclipBox(){return this.chartContainer.unclipBox()}visualStyle(){const t=super.visualStyle();return t.zIndex=-10,t}renderComplete(){this.options.visible&&this.createGridLines()}stackRoot(){return this}clipRoot(){return this}createGridLines(){const t=this.axes,e=t.concat(this.parent.axes),s=[],i=[];for(let n=0;n<t.length;n++){const o=t[n],a=o.options.vertical,l=a?s:i;for(let h=0;h<e.length;h++)if(l.length===0){const c=e[h];a!==c.options.vertical&&gi(l,o.createGridLines(c))}}}refresh(){this.visual.clear(),this.content.parent=null,this.content.createGradient=this.createGradient.bind(this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete(),this.notifyRender()}chartsBox(){const t=this.axes,e=t.length,s=new _;for(let i=0;i<e;i++){const n=t[i],o=n.options.vertical?P:T,a=n.lineBox();s[o+1]=a[o+1],s[o+2]=a[o+2]}if(s.x2===0){const i=this.parent.axes,n=i.length;for(let o=0;o<n;o++){const a=i[o];if(!a.options.vertical){const l=a.lineBox();s.x1=l.x1,s.x2=l.x2}}}return s}clipBox(){return this.chartContainer.clipBox}notifyRender(){const t=this.getService();t&&t.notify(e1,{pane:new kl(this),index:this.paneIndex,name:this.options.name})}},v1=1;function b1(){return"pane"+v1++}rc.prototype.isStackRoot=!0;b(rc,{zIndex:-1,shrinkToFit:!0,title:{align:z},visible:!0});const Ya=r=>r.options.visible!==!1;class gs extends Y{constructor(t,e,s){super(e),this.initFields(t,e),this.series=t,this.initSeries(),this.charts=[],this.options.legend=this.options.legend||{},this.options.legend.data=[],this.axes=[],this.crosshairs=[],this.chartService=s,this.originalOptions=e,this.originalSeries=t,this._bindCache=new WeakMap,this.createPanes(),this.render(),this.createCrosshairs()}initFields(){}initSeries(){const t=this.series;for(let e=0;e<t.length;e++)t[e].index=e}bindPoint(t,e,s){let i=this._bindCache.get(t);i||(i=[],this._bindCache.set(t,i));let n=i[e];return n||(n=i[e]=et.current.bindPoint(t,e,s)),n}createPanes(){const t=this.options.title||{},e=this.options.paneDefaults,s=this.options.panes||[],i=Math.max(s.length,1),n=[],o=m({title:{color:t.color}},e);for(let a=0;a<i;a++){const l=m({},o,s[a]);Yt(l.title)&&(l.title=m({text:l.title},o.title));const h=new rc(l);h.paneIndex=a,n.push(h),this.append(h)}this.panes=n}crosshairOptions(t){return t.options.crosshair}createCrosshairs(t=this.panes){for(let e=0;e<t.length;e++){const s=t[e];for(let i=0;i<s.axes.length;i++){const n=s.axes[i],o=this.crosshairOptions(n);if(o&&o.visible){const a=new hm(this.chartService,n,o);this.crosshairs.push(a),s.content.append(a)}}}}removeCrosshairs(t){const e=this.crosshairs,s=t.axes;for(let i=e.length-1;i>=0;i--)for(let n=0;n<s.length;n++)if(e[i].axis===s[n]){e.splice(i,1);break}}hideCrosshairs(){const t=this.crosshairs;for(let e=0;e<t.length;e++)t[e].hide()}findPane(t){const e=this.panes;let s;for(let i=0;i<e.length;i++)if(e[i].options.name===t){s=e[i];break}return s||e[0]}findPointPane(t){const e=this.panes;let s;for(let i=0;i<e.length;i++)if(e[i].box.containsPoint(t)){s=e[i];break}return s}appendAxis(t){this.findPane(t.options.pane).appendAxis(t),this.axes.push(t),t.plotArea=this}removeAxis(t){const e=[];for(let s=0;s<this.axes.length;s++){const i=this.axes[s];t!==i?e.push(i):i.destroy()}this.axes=e}appendChart(t,e){this.charts.push(t),e?e.appendChart(t):this.append(t)}removeChart(t){const e=[];for(let s=0;s<this.charts.length;s++){const i=this.charts[s];i!==t?e.push(i):i.destroy()}this.charts=e}addToLegend(t){const e=t.length,s=this.options.legend,i=s.labels||{},n=s.inactiveItems||{},o=n.labels||{},a=[];for(let l=0;l<e;l++){const h=t[l],c=h.visible!==!1;if(h.visibleInLegend===!1)continue;let d=h.name;const u=c?bt(i):bt(o)||bt(i);u&&(d=u({text:Gt(d)?d:"",series:h}));const p=h._defaults;let g=h.color;rt(g)&&p&&(g=p.color);let f,x;c?(f={},x=g):(f={color:o.color,font:o.font},x=n.markers.color),Gt(d)&&d!==""&&a.push({text:d,labels:f,markerColor:x,series:h,active:c})}gi(s.data,a)}groupAxes(t){const e=[],s=[];for(let i=0;i<t.length;i++){const n=t[i].axes;for(let o=0;o<n.length;o++){const a=n[o];a.options.vertical?s.push(a):e.push(a)}}return{x:e,y:s,any:e.concat(s)}}groupSeriesByPane(){const t=this.series,e={};for(let s=0;s<t.length;s++){const i=t[s],n=this.seriesPaneName(i);e[n]?e[n].push(i):e[n]=[i]}return e}filterVisibleSeries(t){const e=[];for(let s=0;s<t.length;s++){const i=t[s];i.visible!==!1&&e.push(i)}return e}reflow(t){const e=this.options.plotArea,s=this.panes,i=X(e.margin);this.box=t.clone().unpad(i),this.reflowArea(s),this.ensureLabelsFit(s)&&(this.reflowPanes(),this.reflowAxes(s),this.reflowCharts(s))}reflowArea(t){this.reflowPanes(),this.detachLabels(),this.reflowAxes(t),this.reflowCharts(t)}ensureLabelsFit(t){let e=!1;return t.forEach(s=>{const i=s.unclipBox(),n=s.chartContainer._clipBox(),o=X(s.options.padding||{});i.y1<n.y1+o.top&&(e=!0,o.top=n.y1-i.y1+o.top),i.y2>n.y2-o.bottom&&(e=!0,o.bottom=i.y2-n.y2+o.bottom),i.x1<n.x1+o.left&&(e=!0,o.left=n.x1-i.x1+o.left),i.x2>n.x2-o.right&&(e=!0,o.right=i.x2-n.x2+o.right),e&&(s.options.padding=o)}),e}redraw(t){const e=[].concat(t);this.initSeries();const s=this.getRoot();s&&s.cleanGradients();for(let i=0;i<e.length;i++)this.removeCrosshairs(e[i]),e[i].empty();this._bindCache=new WeakMap,this.render(e),this.detachLabels(),this.reflowAxes(this.panes),this.reflowCharts(e),this.createCrosshairs(e);for(let i=0;i<e.length;i++)e[i].refresh()}axisCrossingValues(t,e){const s=t.options,i=[].concat(s.axisCrossingValues||s.axisCrossingValue),n=e.length-i.length,o=i[0]||0;for(let a=0;a<n;a++)i.push(o);return i}alignAxisTo(t,e,s,i){const n=t.getSlot(s,s,!0),o=t.options.reverse?2:1,a=e.getSlot(i,i,!0),l=e.options.reverse?2:1,h=t.box.translate(a[T+l]-n[T+o],a[P+l]-n[P+o]);t.pane!==e.pane&&h.translate(0,t.pane.box.y1-e.pane.box.y1),t.reflow(h)}alignAxes(t,e){const s=t[0],i=e[0],n=this.axisCrossingValues(s,e),o=this.axisCrossingValues(i,t),a={},l={},h={},c={};for(let d=0;d<e.length;d++){const u=e[d],p=u.pane,g=p.id,f=u.options.visible!==!1,x=jo(t,p)||s;let y=n;if(x!==s&&(y=this.axisCrossingValues(x,e)),this.alignAxisTo(u,x,o[d],y[d]),u.options._overlap)continue;S(u.lineBox().x1)===S(x.lineBox().x1)&&(a[g]&&u.reflow(u.box.alignTo(a[g].box,z).translate(-u.options.margin,0)),f&&(a[g]=u)),S(u.lineBox().x2)===S(x.lineBox().x2)&&(u._mirrored||(u.options.labels.mirror=!u.options.labels.mirror,u._mirrored=!0),this.alignAxisTo(u,x,o[d],y[d]),l[g]&&u.reflow(u.box.alignTo(l[g].box,G).translate(u.options.margin,0)),f&&(l[g]=u));const v=jo(e,p)||i;v!==u&&(u.alignTo(v),u.reflow(u.box))}for(let d=0;d<t.length;d++){const u=t[d],p=u.pane,g=p.id,f=u.options.visible!==!1,x=jo(e,p)||i;let y=o;x!==i&&(y=this.axisCrossingValues(x,t)),this.alignAxisTo(u,x,n[d],y[d]),!u.options._overlap&&(S(u.lineBox().y1)===S(x.lineBox().y1)&&(u._mirrored||(u.options.labels.mirror=!u.options.labels.mirror,u._mirrored=!0),this.alignAxisTo(u,x,n[d],y[d]),h[g]&&u.reflow(u.box.alignTo(h[g].box,N).translate(0,-u.options.margin)),f&&(h[g]=u)),S(u.lineBox().y2,At)===S(x.lineBox().y2,At)&&(c[g]&&u.reflow(u.box.alignTo(c[g].box,j).translate(0,u.options.margin)),f&&(c[g]=u)),d!==0&&(u.alignTo(s),u.reflow(u.box)))}}shrinkAxisWidth(t){const e=this.groupAxes(t).any,s=qa(e);let i=0;for(let n=0;n<t.length;n++){const o=t[n];o.axes.length>0&&(i=Math.max(i,s.width()-o.contentBox.width()))}if(i!==0)for(let n=0;n<e.length;n++){const o=e[n];o.options.vertical||o.reflow(o.box.shrink(i,0))}}shrinkAxisHeight(t){let e;for(let s=0;s<t.length;s++){const i=t[s],n=i.axes,o=Math.max(0,qa(n).height()-i.contentBox.height());if(o!==0){for(let a=0;a<n.length;a++){const l=n[a];l.options.vertical&&l.reflow(l.box.shrink(0,o))}e=!0}}return e}fitAxes(t){const e=this.groupAxes(t).any;let s=0;for(let i=0;i<t.length;i++){const n=t[i],o=n.axes,a=n.contentBox;if(o.length>0){const l=qa(o),h=Math.max(a.y1-l.y1,a.y2-l.y2);s=Math.max(s,a.x1-l.x1);for(let c=0;c<o.length;c++){const d=o[c];d.reflow(d.box.translate(0,h))}}}for(let i=0;i<e.length;i++){const n=e[i];n.reflow(n.box.translate(s,0))}}reflowAxes(t){const e=this.groupAxes(t);for(let s=0;s<t.length;s++)this.reflowPaneAxes(t[s]);e.x.length>0&&e.y.length>0&&(this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t),this.autoRotateAxisLabels(e),this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t)&&this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t),this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t)&&this.alignAxes(e.x,e.y),this.fitAxes(t))}autoRotateAxisLabels(t){const{panes:e}=this,s=A1(e);let i;for(let n=0;n<s.length;n++)s[n].autoRotateLabels()&&(i=!0);if(i){for(let n=0;n<e.length;n++)this.reflowPaneAxes(e[n]);t.x.length>0&&t.y.length>0&&(this.alignAxes(t.x,t.y),this.shrinkAxisWidth(e))}}reflowPaneAxes(t){const e=t.axes,s=e.length;if(s>0)for(let i=0;i<s;i++)e[i].reflow(t.contentBox)}reflowCharts(t){const e=this.charts,s=e.length,i=this.box;for(let n=0;n<s;n++){const o=e[n].pane;(!o||D(o,t))&&e[n].reflow(i)}}reflowPanes(){const{box:t,panes:e}=this,s=e.length;let i=t.height(),n=0,o=t.y1;for(let a=0;a<s;a++){const l=e[a],h=l.options.height;if(l.options.width=t.width(),!l.options.height)n++;else{if(h.indexOf&&h.indexOf("%")){const c=parseInt(h,10)/100;l.options.height=c*t.height()}l.reflow(t.clone()),i-=l.options.height}}for(let a=0;a<s;a++){const l=e[a];l.options.height||(l.options.height=i/n)}for(let a=0;a<s;a++){const l=e[a],h=t.clone().move(t.x1,o);l.reflow(h),o+=l.options.height}}backgroundBox(){const t=this.axes,e=t.length;let s;for(let i=0;i<e;i++){const n=t[i];for(let o=0;o<e;o++){const a=t[o];if(n.options.vertical!==a.options.vertical){const l=n.lineBox().clone().wrap(a.lineBox());s?s=s.wrap(l):s=l}}}return s||this.box}chartsBoxes(){const t=this.panes,e=[];for(let s=0;s<t.length;s++)e.push(t[s].chartsBox());return e}addBackgroundPaths(t){const e=this.chartsBoxes();for(let s=0;s<e.length;s++)t.paths.push(C.fromRect(e[s].toRect()))}backgroundContainsPoint(t){const e=this.chartsBoxes();for(let s=0;s<e.length;s++)if(e[s].containsPoint(t))return!0}createVisual(){super.createVisual();const t=this.options.plotArea;let{opacity:e,background:s,border:i={}}=t;_1(s)&&(s=U,e=0);const n=this._bgVisual=new Wt({fill:{color:s,opacity:e},stroke:{color:i.width?i.color:"",width:i.width,dashType:i.dashType},zIndex:-1});this.addBackgroundPaths(n),this.appendVisual(n)}pointsByCategoryIndex(t){const e=this.charts,s=[];if(t!==null)for(let i=0;i<e.length;i++){if(e[i].pane.options.name==="_navigator")continue;const o=e[i].categoryPoints[t];if(o&&o.length)for(let a=0;a<o.length;a++){const l=o[a];l&&A(l.value)&&l.value!==null&&s.push(l)}}return s}pointsBySeriesIndex(t){return this.filterPoints(function(e){return e.series.index===t})}pointsByPointIndex(t){return this.filterPoints(function(e){return e.getIndex()===t})}pointsBySeriesName(t){return this.filterPoints(function(e){return e.series.name===t})}filterPoints(t){const e=this.charts,s=[];for(let i=0;i<e.length;i++){const o=e[i].points;for(let a=0;a<o.length;a++){const l=o[a];l&&l.visible!==!1&&t(l)&&s.push(l)}}return s}findPoint(t){const e=this.charts;for(let s=0;s<e.length;s++){const n=e[s].points;for(let o=0;o<n.length;o++){const a=n[o];if(a&&a.visible!==!1&&t(a))return a}}}paneByPoint(t){const e=this.panes;for(let s=0;s<e.length;s++){const i=e[s];if(i.box.containsPoint(t))return i}}detachLabels(){const t=this.groupAxes(this.panes),e=t.x,s=t.y;this.detachAxisGroupLabels(s,e),this.detachAxisGroupLabels(e,s)}detachAxisGroupLabels(t,e){let s=0;for(let i=0;i<t.length;i++){const n=t[i],o=n.pane,a=jo(e,o)||e[0],l=i+s,h=this.createLabelAxis(n,l,a);if(h){s++;const c=o.axes.indexOf(n)+s;o.appendAxisAt(h,c)}}}createLabelAxis(t,e,s){const i=t.options.labels,n=i.position,o=n!==Xn&&n!==_r,a=i.visible;if(o||a===!1)return null;const l=this.groupAxes(this.panes),h=s.options.vertical?l.x:l.y,c=this.axisCrossingValues(s,h),d=n===Xn,u=s.range(),p=d?u.max:u.min;if(M(c[e],u.min,u.max)-p===0)return null;c.splice(e+1,0,p),s.options.axisCrossingValues=c;const f=t.clone();return t.clear(),f.options.name=void 0,f.options.line.visible=!1,f.options.crosshair=void 0,f.options.notes=void 0,f.options.plotBands=void 0,f}isTrendline(t){return t&&D(t.type,ln)}trendlineFactory(){}createTrendlineSeries(){const t=[];return this.series=this.series.map(e=>{if(!this.isTrendline(e))return e;const s=this.seriesByName(e.for);if(!s)throw new Error(`Invalid Configuration: Unable to locate linked series "${e.for}" for trendline "${e.name}".`);const i=et.current.valueFields(s),n=pt(i),o=this.trendlineFactory(Object.assign({},{field:n},e),s);return o&&(s.visible===!1&&(o.visible=!1),o.color===tf&&(o.color=s.color),t.push(o)),o}).filter(e=>e!==null),t}seriesByName(t){return this.series.find(e=>e.name===t)}getFirstPoint(){for(let t=0;t<this.series.length;t++){const s=this.pointsBySeriesIndex(t).find(Ya);if(s)return s}}getPointBelow(t){return this._getNextPoint(t,this._pointsByVertical,1)}getPointAbove(t){return this._getNextPoint(t,this._pointsByVertical,-1)}getPointToTheRight(t){return this._getNextPoint(t,this._pointsByHorizontal,1)}getPointToTheLeft(t){return this._getNextPoint(t,this._pointsByHorizontal,-1)}_getNextPoint(t,e,s){let i=e.call(this,t).filter(Ya),o=i.indexOf(t)+s;const a=l=>{let h,c=0;do c+=l,h=e.call(this,t,c).filter(Ya);while(h.length===0);return h};return o<0?(i=a(-1),i.at(-1)):o>=i.length?(i=a(1),i.at(0)):i[o]}_pointsByVertical(t){return this.pointsByPointIndex(t.getIndex())}_pointsByHorizontal(t,e=0){let s=Ar(t.series.index+e,this.series.length);return this.pointsBySeriesIndex(s)}}function w1(r){return!r.pane.axes.some(t=>t.options.vertical===r.options.vertical&&t!==r&&t.options.visible!==!1)}function qa(r){const t=r.length;let e;for(let s=0;s<t;s++){const i=r[s],n=i.options.visible!==!1;if(n||w1(i)){const o=n?i.contentBox():i.lineBox();e?e.wrap(o):e=o.clone()}}return e||new _}function jo(r,t){for(let e=0;e<r.length;e++){const s=r[e];if(s&&s.pane===t)return s}}function _1(r){return r===""||r===null||r==="none"||r==="transparent"||!A(r)}const A1=r=>r.reduce((t,e)=>t.concat(e.axes),[]);b(gs,{series:[],plotArea:{margin:{}},background:"",border:{color:ut,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});const bo={hover:function(r,t){this._dispatchEvent(r,t,Wf)},click:function(r,t){this._dispatchEvent(r,t,Jw)}};class S1{constructor(t,e,s){const i=e.canonicalFields(t),n=e.valueFields(t),o=e.sourceFields(t,i),a=this._seriesFields=[],l=s.query(t.type),h=t.aggregate||l;this._series=t,this._binder=e;for(let c=0;c<i.length;c++){const d=i[c];let u;if(me(h))u=h[d];else if(c===0||D(d,n))u=h;else break;u&&a.push({canonicalName:d,name:o[c],transform:rt(u)?u:Tl[u]})}}aggregatePoints(t,e){const{_series:s,_seriesFields:i}=this,n=this._bindPoints(t||[]),o=n.dataItems[0];let a=null;if(o&&!F(o)&&!Ct(o)){const l=function(){};l.prototype=o,a=new l}for(let l=0;l<i.length;l++){const h=i[l],c=this._bindField(n.values,h.canonicalName),d=h.transform(c,s,n.dataItems,e);if(d!==null&&me(d)&&d.length===void 0&&!(d instanceof Date)){a=d;break}else d!==void 0&&(a===null&&(a={}),k1(h.name,a,d))}return a}_bindPoints(t){const{_binder:e,_series:s}=this,i=[],n=[];for(let o=0;o<t.length;o++){const a=t[o];i.push(e.bindPoint(s,a)),n.push(s.data[a])}return{values:i,dataItems:n}}_bindField(t,e){const s=[],i=t.length;for(let n=0;n<i;n++){const o=t[n],a=o.valueFields;let l;a[e]!==void 0?l=a[e]:l=o.fields[e],s.push(l)}return s}}function k1(r,t,e){let s=t,i=r;if(r.indexOf(".")>-1){const n=r.split(".");for(;n.length>1;)i=n.shift(),s[i]===void 0&&(s[i]={}),s=s[i];i=n.shift()}s[i]=e}class ls{constructor(){this._defaults={}}register(t,e){for(let s=0;s<t.length;s++)this._defaults[t[s]]=e}query(t){return this._defaults[t]}}ls.current=new ls;class Ll extends ps{createLabel(){const t=this.options.labels,e=m({},t,t.from),s=m({},t,t.to);e.visible&&(this.labelFrom=this.createLabelElement(e),this.append(this.labelFrom)),s.visible&&(this.labelTo=this.createLabelElement(s),this.append(this.labelTo))}reflow(t){this.render();const{labelFrom:e,labelTo:s,value:i}=this;this.box=t,e&&(e.options.aboveAxis=i.from>i.to,e.reflow(t)),s&&(s.options.aboveAxis=i.to>i.from,s.reflow(t)),this.note&&this.note.reflow(t)}}Ll.prototype.defaults=m({},Ll.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});class um extends un{pointType(){return Ll}pointValue(t){return t.valueFields}formatPointValue(t,e){return t.value.from===null&&t.value.to===null?"":this.chartService.format.auto(e,t.value.from,t.value.to)}plotRange(t){return t?[t.value.from,t.value.to]:0}updateRange(t,e){const s=e.series.axis,{from:i,to:n}=t;let o=this.valueAxisRanges[s];t!==null&&F(i)&&F(n)&&(o=this.valueAxisRanges[s]=o||{min:gt,max:vt},o.min=Math.min(o.min,i),o.max=Math.max(o.max,i),o.min=Math.min(o.min,n),o.max=Math.max(o.max,n))}aboveAxis(t){const e=t.value;return e.from<e.to}}um.prototype.plotLimits=Hs.prototype.plotLimits;class fu extends Ne{aliasFor(){return this.parent}}const pm="auto",C1="{0}",T1="{1}";class eo extends Y{constructor(t,e){super(),this.value=t,this.options=e,this.aboveAxis=L(this.options.aboveAxis,!0),this.tooltipTracking=!0,this._id=sa(),this.initLabelsFormat()}render(){if(this._rendered)return;this._rendered=!0;const{markers:t,labels:e}=this.options,s=this.value,i=this.fromPoint=new fu(s,m({},this.options,{labels:e.from,markers:t.from})),n=this.toPoint=new fu(s,m({},this.options,{labels:e.to,markers:t.to}));this.copyFields(i),this.copyFields(n),this.append(i),this.append(n)}reflow(t){this.render();const{from:e,to:s}=t;this.positionLabels(e,s),this.fromPoint.reflow(e),this.toPoint.reflow(s),this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())}createHighlight(){const t=new W;return t.append(this.fromPoint.createHighlight()),t.append(this.toPoint.createHighlight()),t}highlightVisual(){return this.visual}highlightVisualArgs(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}}createFocusHighlight(){const t=new W;return t.append(this.fromPoint.createFocusHighlight()),t.append(this.toPoint.createFocusHighlight()),t}tooltipAnchor(){const t=this.owner.pane.clipBox();if(!t||t.overlaps(this.box)){const s=this.box,i=s.center(),n=z;let o,a,l;return this.options.vertical?(o=i.x,a=s.y1-we,l=j):(o=s.x2+we,a=i.y,l=O),{point:new R(o,a),align:{horizontal:n,vertical:l}}}}formatValue(t){return this.owner.formatPointValue(this,t)}overlapsBox(t){return this.box.overlaps(t)}unclipElements(){this.fromPoint.unclipElements(),this.toPoint.unclipElements()}initLabelsFormat(){const t=this.options.labels;t.format||((!t.from||!t.from.format)&&(t.from=Object.assign({},t.from,{format:C1})),(!t.to||!t.to.format)&&(t.to=Object.assign({},t.to,{format:T1})))}positionLabels(t,e){const{labels:s,vertical:i}=this.options;if(s.position===pm){let n,o;i?e.y1<=t.y1?(o=Lr,n=Pl):(o=Pl,n=Lr):e.x1<=t.x1?(o=z,n=G):(o=G,n=z),(!s.from||!s.from.position)&&(this.fromPoint.options.labels.position=n),(!s.to||!s.to.position)&&(this.toPoint.options.labels.position=o)}}copyFields(t){t.dataItem=this.dataItem,t.category=this.category,t.series=this.series,t.color=this.color,t.owner=this.owner}focusVisual(){this.fromPoint.focusVisual()}clearFocusFromVisual(){this.toPoint.clearFocusFromVisual()}getIndex(){return this.categoryIx}getLabelText(t){let e=bt(t);return e?e(this.pointData()):t.format?this.formatValue(t.format):this.value}getAriaLabelText(){const t=this.options.labels,e=wh(t);return e?e(this.pointData()):this.getLabelText(t)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}}}m(eo.prototype,Ce);m(eo.prototype,hn);eo.prototype.defaults={markers:{visible:!1,background:U,size:Rr,type:Xt,border:{width:2},opacity:1},labels:{visible:!1,margin:X(3),padding:X(4),animation:{type:zs,delay:ge},position:pm},notes:{label:{}},highlight:{markers:{border:{color:U,width:2}},zIndex:Jg},tooltip:{format:"{0} - {1}"},accessibility:{role:Vs,className:Ns,ariaRoleDescription:Fs}};class ac extends cn{createStrokeSegments(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))}stackSegments(){let t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()))),t}createStroke(t){const e=new C(t),s=new C(t);e.segments.push.apply(e.segments,this.strokeSegments()),s.segments.push.apply(s.segments,this.stackSegments()),this.visual.append(e),this.visual.append(s)}hasStackSegment(){return!0}fromPoints(){return this.linePoints.map(t=>t.fromPoint)}toPoints(){return this.linePoints.map(t=>t.toPoint)}}class P1 extends ac{createStrokeSegments(){return this.createCurveSegments(this.toPoints())}stackSegments(){let t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse())),t}createCurveSegments(t){return new ra().process(this.toGeometryPoints(t))}}class gm extends ac{createStrokeSegments(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))}stackSegments(){let t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints())),t.reverse()),t}}m(gm.prototype,Jh);class fm extends Hs{render(){super.render(),this.renderSegments()}pointType(){return eo}createPoint(t,e){const{series:s,seriesIx:i}=e;let n=t.valueFields;if(!Gt(n.from)&&!Gt(n.to))if(this.seriesMissingValues(s)===ns)n={from:0,to:0};else return null;let o=this.pointOptions(s,i);o=this.evalPointOptions(o,n,e);let a=t.fields.color||s.color;rt(s.color)&&(a=o.color);const l=new eo(n,o);return l.color=a,this.append(l),l}createSegment(t,e,s){const i=(e.line||{}).style;let n;return i==="smooth"?n=P1:i==="step"?n=gm:n=ac,new n(t,e,s)}plotRange(t,e){return t?[t.value.from,t.value.to]:[e,e]}valueSlot(t,e){const s=t.getSlot(e[0],e[0],!this.options.clip),i=t.getSlot(e[1],e[1],!this.options.clip);if(s&&i)return{from:s,to:i}}pointSlot(t,e){const{from:s,to:i}=e;let n,o;return this.options.invertAxes?(n=new _(s.x1,t.y1,s.x2,t.y2),o=new _(i.x1,t.y1,i.x2,t.y2)):(n=new _(t.x1,s.y1,t.x2,s.y2),o=new _(t.x1,i.y1,t.x2,i.y2)),{from:n,to:o}}addValue(t,e){const s=t.valueFields;F(s.from)||(s.from=s.to),F(s.to)||(s.to=s.from),super.addValue(t,e)}updateRange(t,e){if(t!==null&&F(t.from)&&F(t.to)){const s=e.series.axis,i=this.valueAxisRanges[s]=this.valueAxisRanges[s]||{min:gt,max:vt},{from:n,to:o}=t;i.min=Math.min(i.min,n,o),i.max=Math.max(i.max,n,o)}}formatPointValue(t,e){const s=t.value;return this.chartService.format.auto(e,s.from,s.to)}animationPoints(){const t=this.points,e=[];for(let s=0;s<t.length;s++){const i=t[s];i&&(e.push((i.fromPoint||{}).marker),e.push((i.toPoint||{}).marker))}return e.concat(this._segments)}}m(fm.prototype,ec,ha);class E1 extends Us{reflow(t){const{options:e,value:s,owner:i}=this,n=i.seriesValueAxis(e),o=[],a=[],l=[],h=n.getSlot(s.low,s.high),c=n.getSlot(s.open,s.open),d=n.getSlot(s.close,s.close);c.x1=d.x1=h.x1=t.x1,c.x2=d.x2=h.x2=t.x2;const u=h.center().x;o.push([c.x1,c.y1]),o.push([u,c.y1]),a.push([u,d.y1]),a.push([d.x2,d.y1]),l.push([u,h.y1]),l.push([u,h.y2]),this.lines=[o,a,l],this.box=h.clone().wrap(c.clone().wrap(d)),this.reflowNote()}createBody(){}}class M1 extends da{pointType(){return E1}}class mm extends Y{constructor(t,e,s){super(),this.from=t,this.to=e,this.series=s}linePoints(){const t=this.from,{from:{box:e},to:{box:s}}=this,i=[];if(t.isVertical){const n=t.aboveAxis?e.y1:e.y2;i.push([e.x1,n],[s.x2,n])}else{const n=t.aboveAxis?e.x2:e.x1;i.push([n,e.y1],[n,s.y2])}return i}createVisual(){super.createVisual();const t=this.series.line||{},e=C.fromPoints(this.linePoints(),{stroke:{color:t.color,width:t.width,opacity:t.opacity,dashType:t.dashType}});Jt(e),this.visual.append(e)}}b(mm,{animation:{type:zs,delay:ge}});class I1 extends un{render(){super.render(),this.createSegments()}traverseDataPoints(t){const e=this.options.series,s=Qh(e),i=!this.options.invertAxes;for(let n=0;n<e.length;n++){const o=e[n];let a=0,l=0;for(let h=0;h<s;h++){const c=et.current.bindPoint(o,h),d=c.valueFields.value,u=c.fields.summary;let p=a,g;u?u.toLowerCase()==="total"?(c.valueFields.value=a,p=0,g=a):(c.valueFields.value=l,g=p-l,l=0):F(d)&&(l+=d,a+=d,g=a),t(c,{category:this.categoryAxis.categoryAt(h),categoryIx:h,series:o,seriesIx:n,total:a,runningTotal:l,from:p,to:g,isVertical:i})}}}updateRange(t,e){super.updateRange({value:e.to},e)}aboveAxis(t){return t.value>=0}plotRange(t){return[t.from,t.to]}createSegments(){const t=this.options.series,e=this.seriesPoints,s=this.segments=[];for(let i=0;i<t.length;i++){const n=t[i],o=e[i];if(o){let a;for(let l=0;l<o.length;l++){const h=o[l];if(h&&a){const c=new mm(a,h,n);s.push(c),this.append(c)}a=h}}}}}function xm(r,t,e){const s=r[String(t)];return s?s(e):null}function js(r,t){let e=0,s=0,i=0,n=0,o=0,a,l,h=Number.MAX_VALUE,c=Number.MIN_VALUE;for(let d=0;d<r.length;d++){const u=r[d],{xValue:p,yValue:g}=t(u);isFinite(p)&&p!==null&&isFinite(g)&&g!==null&&(h=Math.min(p,h),c=Math.max(p,c),o++,e+=p,s+=g,i+=Math.pow(p,2),n+=p*g)}return o>0&&(a=(o*n-e*s)/(o*i-Math.pow(e,2)),l=(s-a*e)/o),{slope:a,intercept:l,count:o,xMin:h,xMax:c}}const wo=(r,t)=>r.every(({valueFields:e})=>!Gt(e[t])||e[t]>0);function _o(r,t){const e=[],s=t.totalRangeIndices(),i=t.currentRangeIndices(),n={min:Math.floor(Math.max(i.min-1,s.min)),max:Math.ceil(Math.min(i.max+2,s.max))};for(let o=n.min;o<n.max;o++){const a=o+1;e[o]={category:t.categoryAt(o,!0),value:r(a)}}return e}function R1(r){const{options:t,categoryAxis:e,seriesValues:s}=r,i=O1({seriesValues:s,categoryAxis:e,options:t});return i?Object.assign({},t,{type:"line",data:i,categoryField:"category",field:"value"}):null}const L1=r=>({categoryIx:t,valueFields:e})=>({xValue:t+1,yValue:Math.log(e[r])});function O1({seriesValues:r,categoryAxis:t,options:e}){const s=r();if(!wo(s,e.field))return null;let{slope:i,intercept:n,count:o}=js(s,L1(e.field));if(o>0){const a=Math.exp(n),l=i;return _o(h=>a*Math.exp(l*h),t)}return null}function B1(r){const{options:t,categoryAxis:e,seriesValues:s}=r,i=z1({seriesValues:s,categoryAxis:e,options:t});return i?Object.assign({},t,{type:"line",data:i,categoryField:"category",field:"value"}):null}const D1=r=>({categoryIx:t,valueFields:e})=>({xValue:t+1,yValue:e[r]});function z1({seriesValues:r,categoryAxis:t,options:e}){const{slope:s,intercept:i,count:n}=js(r(),D1(e.field));return n>0?_o(o=>s*o+i,t):null}function V1(r){const{options:t,categoryAxis:e,seriesValues:s}=r,i=F1({seriesValues:s,categoryAxis:e,options:t});return i?Object.assign({},t,{type:"line",data:i,categoryField:"category",field:"value"}):null}const N1=r=>({categoryIx:t,valueFields:e})=>({xValue:Math.log(t+1),yValue:e[r]});function F1({seriesValues:r,categoryAxis:t,options:e}){let{slope:s,intercept:i,count:n}=js(r(),N1(e.field));if(n>0){const o=s,a=i;return _o(l=>o*Math.log(l)+a,t)}return null}function ym(r,t,e){const s=[],i=[],n=Math.max(qh,e)-1;let o=0,a=0;for(let l=0;l<r.length;l++){const h=r[l],{xValue:c,yValue:d}=t(h);if(isFinite(d)&&d!==null?(i.push(d),a+=d,o=Math.max(l,o)):i.push(null),l>=n){const u=i.filter(g=>g!==null).length,p=i.shift()||0;if(u>0){const g=a/u;s.push([c,g]),a-=p;continue}}s.push([c,null])}return s.slice(0,o+1)}function H1(r){const{options:t}=r,e=G1(r);return e?Object.assign({},t,{type:"line",data:e,categoryField:"category",field:"value"}):null}const U1=r=>({categoryIx:t,valueFields:e})=>({xValue:t,yValue:e[r]});function j1({options:r,categoryAxis:t,seriesValues:e}){const s=(r.trendline||{}).period||qh,i=t.totalRangeIndices(),n=t.currentRangeIndices(),o={min:Math.floor(Math.max(n.min-s,i.min)),max:Math.ceil(Math.min(n.max+s+2,i.max))};return ym(e(o),U1(r.field),s)}function G1(r){const{categoryAxis:t}=r,e=j1(r),s=[];return e.forEach(([i,n])=>{s[i]={category:t.categoryAt(i,!0),value:n}}),s.length>0?s:null}const mu=1,$1=6;function vm(r,t,e){let s=Math.min(Math.max(e||mu,mu),$1)+1,i=new Ge,n=new Ge,o=0,a=Number.MAX_VALUE,l=Number.MIN_VALUE,h=d=>d,c=[];for(let d=0;d<r.length;d++){const u=r[d];let{xValue:p,yValue:g}=t(u);if(isFinite(p)&&p!==null&&isFinite(g)&&g!==null){a=Math.min(p,a),l=Math.max(p,l),o++,n.set(d,0,g),i.set(d,0,1),i.set(d,1,p);for(let f=2;f<=s;f++)i.set(d,f,Math.pow(i.get(d,1),f))}else i.set(d,0,0)}return i.width=Math.min(s,o),o>0&&(c=W1(i,n),h=d=>c.reduce((u,p,g)=>u+p*Math.pow(d,g),0)),{coefficients:c,count:o,valueMapper:h,xMin:a,xMax:l}}function W1(r,t){const e=r.transpose(),s=e.multiply(r).inverse().multiply(e).multiply(t),i=[];for(let n=0;n<s.height;n++)i.push(s.get(n,0));return i}function X1(r){const{options:t,categoryAxis:e,seriesValues:s}=r,i=q1({seriesValues:s,categoryAxis:e,options:t});return i?Object.assign({},t,{type:"line",data:i,categoryField:"category",field:"value"}):null}const Y1=r=>({categoryIx:t,valueFields:e})=>({xValue:t+1,yValue:e[r]});function q1({seriesValues:r,categoryAxis:t,options:e}){const s=(e.trendline||{}).order,{count:i,valueMapper:n}=vm(r(),Y1(e.field),s);return i>0?_o(o=>n(o),t):null}function Z1(r){const{options:t,categoryAxis:e,seriesValues:s}=r,i=K1({seriesValues:s,categoryAxis:e,options:t});return i?Object.assign({},t,{type:"line",data:i,categoryField:"category",field:"value"}):null}const Q1=r=>({categoryIx:t,valueFields:e})=>({xValue:Math.log(t+1),yValue:Math.log(e[r])});function K1({seriesValues:r,categoryAxis:t,options:e}){const s=r();if(!wo(s,e.field))return null;let{slope:i,intercept:n,count:o}=js(s,Q1(e.field));if(o>0){const a=Math.exp(n),l=i;return _o(h=>a*Math.pow(h,l),t)}return null}const yi={};yi[jh]=R1;yi[Gh]=B1;yi[$h]=V1;yi[Wh]=H1;yi[Xh]=X1;yi[Yh]=Z1;const Ol=[os,ti,Gi,si],xu=[rs,ei].concat(Ol);class _e extends gs{initFields(t){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new Nr,this._seriesPointsCache={},this._currentPointsCache={},t.length>0){this.invertAxes=D(t[0].type,[fe,Is,ei,ti,si,$i,Ui,Wi]);for(let e=0;e<t.length;e++){const s=t[e].stack;if(s&&s.type==="100%"){this.stack100=!0;break}}}}render(t=this.panes){this.series=[...this.originalSeries],this.createCategoryAxes(t),this.aggregateCategories(t),this.createTrendlineSeries(t),this.createCategoryAxesLabels(t),this.createCharts(t),this.createValueAxes(t)}removeAxis(t){const e=t.options.name;super.removeAxis(t),t instanceof pe?delete this.namedCategoryAxes[e]:(this.valueAxisRangeTracker.reset(e),delete this.namedValueAxes[e]),t===this.categoryAxis&&delete this.categoryAxis,t===this.valueAxis&&delete this.valueAxis}trendlineFactory(t,e){const s=this.seriesCategoryAxis(t),i=this.seriesValues.bind(this,e.index),n=xm(yi,t.type,{options:t,categoryAxis:s,seriesValues:i});return n&&(n.categoryAxis=e.categoryAxis,n.valueAxis=e.valueAxis,this.filterSeries(n,s))}trendlineAggregateForecast(){return this.series.map(t=>(t.trendline||{}).forecast).filter(t=>t!==void 0).reduce((t,e)=>({before:Math.max(t.before,e.before||0),after:Math.max(t.after,e.after||0)}),{before:0,after:0})}seriesValues(t,e){const s=[];let i=this.srcSeries[t];const n=this.seriesCategoryAxis(i);Ye(n.options.type,Je)&&(this._seriesPointsCache={},this._currentPointsCache={},n.options.dataItems=[],i=this.aggregateSeries(i,n,n.totalRangeIndices()));const a=e?e.min:0,l=e?e.max:i.data.length;for(let h=a;h<l;h++){const c=this.bindPoint(i,h);s.push({categoryIx:h,category:c.fields.category,valueFields:c.valueFields})}return s}createCharts(t){const e=this.groupSeriesByPane();for(let s=0;s<t.length;s++){const i=t[s],n=e[i.options.name||"default"]||[];this.addToLegend(n);const o=this.filterVisibleSeries(n);if(!o)continue;const a=this.groupSeriesByCategoryAxis(o);for(let l=0;l<a.length;l++)this.createChartGroup(a[l],i)}}createChartGroup(t,e){this.createAreaChart(lt(t,[os,ti]),e),this.createRangeAreaChart(lt(t,[Gi,si]),e),this.createBarChart(lt(t,[Ve,fe]),e),this.createRangeBarChart(lt(t,[mo,$i]),e),this.createBulletChart(lt(t,[Is,xo]),e),this.createCandlestickChart(lt(t,rn),e),this.createBoxPlotChart(lt(t,[go,Wi]),e),this.createOHLCChart(lt(t,an),e),this.createWaterfallChart(lt(t,[yo,Ui]),e),this.createLineChart(lt(t,[rs,ei]),e)}aggregateCategories(t){const e=[...this.series],s=[];this._currentPointsCache={},this._seriesPointsCache=this._seriesPointsCache||{};for(let i=0;i<e.length;i++){let n=e[i];if(!this.isTrendline(n)){const o=this.seriesCategoryAxis(n),a=this.findPane(o.options.pane);(Ye(o.options.type,Je)||n.categoryField)&&D(a,t)?n=this.aggregateSeries(n,o,o.currentRangeIndices()):n=this.filterSeries(n,o)}s.push(n)}this._seriesPointsCache=this._currentPointsCache,this._currentPointsCache=null,this.srcSeries=e,this.series=s}filterSeries(t,e){const s=(t.data||{}).length;if(e._seriesMax=Math.max(e._seriesMax||0,s),!(A(e.options.min)||A(e.options.max)))return t;const i=e.currentRangeIndices(),n=D(t.type,xu),o=m({},t);return o.data=(o.data||[]).slice(i.min,i.max+1),n&&gu(o,i,s,a=>({item:t.data[a],category:e.categoryAt(a,!0),categoryIx:a-i.min}),a=>A(t.data[a])),o}clearSeriesPointsCache(){this._seriesPointsCache={}}seriesSourcePoints(t,e){const s=`${t.index};${e.categoriesHash()}`;if(this._seriesPointsCache&&this._seriesPointsCache[s])return this._currentPointsCache[s]=this._seriesPointsCache[s],this._seriesPointsCache[s];const i=e.options,n=i.srcCategories,o=Ye(i.type,Je),a=t.data,l=[];o||e.indexCategories();for(let h=0;h<a.length;h++){let c=et.current.bindPoint(t,h).fields.category;if(o&&(c=Kf(c,a[h],this.chartService.intl)),c===void 0&&(c=n[h]),c!=null){const d=e.totalIndex(c);l[d]=l[d]||{items:[],category:c},l[d].items.push(h)}}return this._currentPointsCache[s]=l,l}aggregateSeries(t,e,s){if(!t.data.length)return t;const n=this.seriesSourcePoints(t,e),o=m({},t),a=new S1(m({},t),et.current,ls.current),l=o.data=[],h=e.options.dataItems||[],c=d=>{const u=d-s.min;let p=n[d];if(p||(p=n[d]={}),p.categoryIx=u,!p.item){const g=e.categoryAt(d,!0);p.category=g,p.item=a.aggregatePoints(p.items,g)}return p};for(let d=s.min;d<=s.max;d++){const u=c(d);l[u.categoryIx]=u.item,u.items&&u.items.length&&(h[u.categoryIx]=u.item)}return D(o.type,xu)&&gu(o,s,e.totalCount(),c,d=>n[d]),e.options.dataItems=h,o}appendChart(t,e){const s=t.options.series,i=this.seriesCategoryAxis(s[0]);let n=i.options.categories,o=Math.max(0,Qh(s)-n.length);if(o>0)for(n=i.options.categories=i.options.categories.slice(0);o--;)n.push("");this.valueAxisRangeTracker.update(t.valueAxisRanges),super.appendChart(t,e)}seriesPaneName(t){const e=this.options,s=t.axis,i=[].concat(e.valueAxis),n=te(i,function(h){return h.name===s})[0],a=((e.panes||[{}])[0]||{}).name||"default";return(n||{}).pane||a}seriesCategoryAxis(t){const e=t.categoryAxis,s=e?this.namedCategoryAxes[e]:this.categoryAxis;if(!s)throw new Error("Unable to locate category axis with name "+e);return s}stackableChartOptions(t,e){const s=t.some(o=>o.stack),i=t.some(o=>o.stack&&o.stack.type==="100%"),n=e.options.clip;return{defaultStack:t[0].stack,isStacked:s,isStacked100:i,clip:n}}groupSeriesByCategoryAxis(t){const e=[],s={};for(let n=0;n<t.length;n++){const o=t[n].categoryAxis||"$$default$$";Sh(s,o)||(s[o]=!0,e.push(o))}const i=[];for(let n=0;n<e.length;n++){const o=e[n],a=J1(t,o,n);a.length!==0&&i.push(a)}return i}createBarChart(t,e){if(t.length===0)return;const s=t[0],i=new un(this,Object.assign({series:t,invertAxes:this.invertAxes,gap:s.gap,spacing:s.spacing},this.stackableChartOptions(t,e)));this.appendChart(i,e)}createRangeBarChart(t,e){if(t.length===0)return;const s=t[0],i=new um(this,{series:t,invertAxes:this.invertAxes,gap:s.gap,spacing:s.spacing});this.appendChart(i,e)}createBulletChart(t,e){if(t.length===0)return;const s=t[0],i=new oc(this,{series:t,invertAxes:this.invertAxes,gap:s.gap,spacing:s.spacing,clip:e.options.clip});this.appendChart(i,e)}createLineChart(t,e){if(t.length===0)return;const s=new ca(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(t,e)));this.appendChart(s,e)}createAreaChart(t,e){if(t.length===0)return;const s=new p1(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(t,e)));this.appendChart(s,e)}createRangeAreaChart(t,e){if(t.length===0)return;const s=new fm(this,{invertAxes:this.invertAxes,series:t,clip:e.options.clip});this.appendChart(s,e)}createOHLCChart(t,e){if(t.length===0)return;const s=t[0],i=new M1(this,{invertAxes:this.invertAxes,gap:s.gap,series:t,spacing:s.spacing,clip:e.options.clip});this.appendChart(i,e)}createCandlestickChart(t,e){if(t.length===0)return;const s=t[0],i=new da(this,{invertAxes:this.invertAxes,gap:s.gap,series:t,spacing:s.spacing,clip:e.options.clip});this.appendChart(i,e)}createBoxPlotChart(t,e){if(t.length===0)return;const s=t[0],i=new m1(this,{invertAxes:this.invertAxes,gap:s.gap,series:t,spacing:s.spacing,clip:e.options.clip});this.appendChart(i,e)}createWaterfallChart(t,e){if(t.length===0)return;const s=t[0],i=new I1(this,{series:t,invertAxes:this.invertAxes,gap:s.gap,spacing:s.spacing});this.appendChart(i,e)}axisRequiresRounding(t,e){const s=lt(this.series,Ff);for(let i=0;i<this.series.length;i++){const n=this.series[i];if(D(n.type,Ol)){const o=n.line;o&&o.style===Nn&&s.push(n)}}for(let i=0;i<s.length;i++){const n=s[i].categoryAxis||"";if(n===t||!n&&e===0)return!0}}aggregatedAxis(t,e){const s=this.series;for(let i=0;i<s.length;i++){const n=s[i].categoryAxis||"";if((n===t||!n&&e===0)&&s[i].categoryField)return!0}}createCategoryAxesLabels(){const t=this.axes;for(let e=0;e<t.length;e++)t[e]instanceof pe&&t[e].createLabels()}createCategoryAxes(t){const e=this.invertAxes,s=[].concat(this.options.categoryAxis),i=[];for(let o=0;o<s.length;o++){let a=s[o];const l=this.findPane(a.pane);if(D(l,t)){const{name:h,categories:c=[]}=a;a=m({vertical:e,reverse:!e&&this.chartService.rtl,axisCrossingValue:e?gt:0},a),A(a.justified)||(a.justified=this.isJustified()),this.axisRequiresRounding(h,o)&&(a.justified=!1);let d;if(Jf(a,c[0])?(a._forecast=this.trendlineAggregateForecast(),d=new fi(a,this.chartService)):d=new pe(a,this.chartService),s[o].categories=d.options.srcCategories,h){if(this.namedCategoryAxes[h])throw new Error(`Category axis with name ${h} is already defined`);this.namedCategoryAxes[h]=d}d.axisIndex=o,i.push(d),this.appendAxis(d)}}const n=this.categoryAxis||i[0];this.categoryAxis=n,e?this.axisY=n:this.axisX=n}isJustified(){const t=this.series;for(let e=0;e<t.length;e++){const s=t[e];if(!D(s.type,Ol))return!1}return!0}createValueAxes(t){const e=this.valueAxisRangeTracker,s=e.query(),i=[].concat(this.options.valueAxis),n=this.invertAxes,o={vertical:!n,reverse:n&&this.chartService.rtl},a=[];this.stack100&&(o.roundToMajorUnit=!1,o.labels={format:"P0"});for(let h=0;h<i.length;h++){const c=i[h],d=this.findPane(c.pane);if(D(d,t)){const u=c.name,p=Ye(c.type,Dr)?{min:.1,max:1}:{min:0,max:1},g=e.query(u)||s||p;h===0&&g&&s&&(g.min=Math.min(g.min,s.min),g.max=Math.max(g.max,s.max));let f;Ye(c.type,Dr)?f=ci:f=Ft;const x=new f(g.min,g.max,m({},o,c),this.chartService);if(u){if(this.namedValueAxes[u])throw new Error(`Value axis with name ${u} is already defined`);this.namedValueAxes[u]=x}x.axisIndex=h,a.push(x),this.appendAxis(x)}}const l=this.valueAxis||a[0];this.valueAxis=l,n?this.axisX=l:this.axisY=l}_dispatchEvent(t,e,s){const i=t._eventCoordinates(e),n=new R(i.x,i.y),o=this.pointPane(n),a=[],l=[];if(!o)return;const h=o.axes;for(let c=0;c<h.length;c++){const d=h[c];d.getValue?ir(l,d.getValue(n)):ir(a,d.getCategory(n))}a.length===0&&ir(a,this.categoryAxis.getCategory(n)),a.length>0&&l.length>0&&t.trigger(s,{element:Ae(e),originalEvent:e,category:Xi(a),value:Xi(l)})}pointPane(t){const e=this.panes;for(let s=0;s<e.length;s++){const i=e[s];if(i.contentBox.containsPoint(t))return i}}updateAxisOptions(t,e){yu(this.options,t,e),yu(this.originalOptions,t,e)}_pointsByVertical(t,e=0){return this.invertAxes?this._siblingsBySeriesIndex(t.series.index,e):this._siblingsByPointIndex(t.getIndex())}_pointsByHorizontal(t,e=0){if(this.invertAxes)return this._siblingsByPointIndex(t.getIndex());const s=this._siblingsBySeriesIndex(t.series.index,e);return this.chartService.rtl?s.reverse():s}_siblingsByPointIndex(t){const e=this.charts,s=[];for(let i=0;i<e.length;i++){let n=e[i];if(n.pane&&n.pane.options.name==="_navigator")continue;let o=n.points.filter(a=>a&&a.visible!==!1&&a.getIndex()===t);s.push(...o.sort(this._getSeriesCompareFn(o[0])))}return s}_siblingsBySeriesIndex(t,e){const s=Ar(t+e,this.series.length);return this.pointsBySeriesIndex(s)}_getSeriesCompareFn(t){const e=this._isInStackedSeries(t);return e&&this.invertAxes||!e&&!this.invertAxes?(s,i)=>s.box.center().x-i.box.center().x:(s,i)=>s.box.center().y-i.box.center().y}_isInStackedSeries(t){const e=D(t.series.type,[os,ti,Gi,si,rs,ei,ji,fo]),s=D(t.series.type,[Ve,fe]);return e||s&&t.options.isStacked}}function yu(r,t,e){const s=t instanceof pe?[].concat(r.categoryAxis):[].concat(r.valueAxis);m(s[t.axisIndex],e)}function J1(r,t,e){return te(r,function(s){return e===0&&!s.categoryAxis||s.categoryAxis===t})}b(_e,{categoryAxis:{},valueAxis:{}});m(_e.prototype,bo);class t0{constructor(){this._points=[]}destroy(){this._points=[]}show(t,e){const s=[].concat(t);this.hide();for(let i=0;i<s.length;i++){const n=s[i];n&&n.toggleHighlight&&n.hasHighlight()&&(this.togglePointHighlight(n,!0,e),this._points.push(n))}}togglePointHighlight(t,e,s){const i=(t.options.highlight||{}).toggle,n=t.options.highlight||{},o=s!==void 0?s:n.inactiveOpacity;if(i){const a={category:t.category,series:t.series,dataItem:t.dataItem,value:t.value,stackValue:t.stackValue,preventDefault:e0,visual:t.highlightVisual(),show:e};i(a),a._defaultPrevented||t.toggleHighlight(e,o)}else t.toggleHighlight(e,o)}hide(){const t=this._points;for(;t.length;){const e=t.pop(),s=e.options.highlight||{};this.togglePointHighlight(e,!1,s.inactiveOpacity)}}isHighlighted(t){const e=this._points;for(let s=0;s<e.length;s++){const i=e[s];if(t===i)return!0}return!1}}function e0(){this._defaultPrevented=!0}function bm(r,t){const e=(t||"").toLowerCase(),s=r.event;return e==="none"&&!(s.ctrlKey||s.shiftKey||s.altKey)||s[e+"Key"]}function lc(r){const t={};for(let e=0;e<r.length;e++){const s=r[e];s.axis.options.name&&(t[s.axis.options.name]={min:s.range.min,max:s.range.max})}return t}class wm{constructor(t,e){this.plotArea=t,this.options=m({},this.options,e)}start(t){return this._active=bm(t,this.options.key),this._active}move(t){if(this._active){const e=this.axisRanges=this._panAxes(t,T).concat(this._panAxes(t,P));if(e.length)return this.axisRanges=e,lc(e)}}end(){const t=this._active;return this._active=!1,t}pan(){const{plotArea:t,axisRanges:e}=this;if(e.length){for(let s=0;s<e.length;s++){const i=e[s];t.updateAxisOptions(i.axis,i.range)}t.redraw(t.panes)}}destroy(){delete this.plotArea}_panAxes(t,e){const s=this.plotArea,i=-t[e].delta,n=(this.options.lock||"").toLowerCase(),o=[];if(i!==0&&(n||"").toLowerCase()!==e){const a=s.axes;for(let l=0;l<a.length;l++){const h=a[l];if(e===T&&!h.options.vertical||e===P&&h.options.vertical){const c=h.pan(i);c&&(c.limitRange=!0,o.push({axis:h,range:c}))}}}return o}}wm.prototype.options={key:"none",lock:"none"};class _m{constructor(t,e){this.chart=t,this.options=m({},this.options,e),this.createElement()}createElement(){const t=this._marquee=document.createElement("div");t.className="k-marquee";const e=document.createElement("div");e.className="k-marquee-color",t.appendChild(e)}removeElement(){this._marquee.parentNode&&this._marquee.parentNode.removeChild(this._marquee)}setStyles(t){at(this._marquee,t)}start(t){if(bm(t,this.options.key)){const e=this.chart,s=e._eventCoordinates(t),i=this._zoomPane=e._plotArea.paneByPoint(s),n=i?i.chartsBox().clone():null;if(i&&n){const o=this._elementOffset();return n.translate(o.left,o.top),this._zoomPaneClipBox=n,document.body.appendChild(this._marquee),this.setStyles({left:t.pageX+1,top:t.pageY+1,width:0,height:0}),!0}}return!1}_elementOffset(){const t=this.chart.element,{paddingLeft:e,paddingTop:s}=at(t,["paddingLeft","paddingTop"]),i=Vi(t);return{left:e+i.left,top:s+i.top}}move(t){this._zoomPane&&this.setStyles(this._selectionPosition(t))}end(t){if(this._zoomPane){const s=this._elementOffset(),i=this._selectionPosition(t);i.left-=s.left,i.top-=s.top;const n={x:i.left,y:i.top},o={x:i.left+i.width,y:i.top+i.height};return this._updateAxisRanges(n,o),this.removeElement(),delete this._zoomPane,lc(this.axisRanges)}}zoom(){const t=this.axisRanges;if(t&&t.length){const e=this.chart._plotArea;for(let s=0;s<t.length;s++){const i=t[s];e.updateAxisOptions(i.axis,i.range)}e.redraw(e.panes)}}destroy(){this.removeElement(),delete this._marquee,delete this.chart}_updateAxisRanges(t,e){const s=(this.options.lock||"").toLowerCase(),i=[],n=this._zoomPane.axes;for(let o=0;o<n.length;o++){const a=n[o],l=a.options.vertical;if(!(s===T&&!l)&&!(s===P&&l)&&A(a.axisIndex)){const h=a.pointsRange(t,e);h&&i.push({axis:a,range:h})}}this.axisRanges=i}_selectionPosition(t){const e=this._zoomPaneClipBox,s={x:t.x.startLocation,y:t.y.startLocation},{x:{location:i},y:{location:n}}=t,o=(this.options.lock||"").toLowerCase();let a=Math.min(s.x,i),l=Math.min(s.y,n),h=Math.abs(s.x-i),c=Math.abs(s.y-n);return o===T&&(a=e.x1,h=e.width()),o===P&&(l=e.y1,c=e.height()),i>e.x2&&(h=e.x2-s.x),i<e.x1&&(h=s.x-e.x1),n>e.y2&&(c=e.y2-s.y),n<e.y1&&(c=s.y-e.y1),{left:Math.max(a,e.x1),top:Math.max(l,e.y1),width:h,height:c}}}_m.prototype.options={key:"shift",lock:"none"};const s0=.01,i0=.9,n0=.3;class o0{constructor(t,e){this.chart=t,this.options=m({rate:n0},this.options,e)}updateRanges(t,e){const s=(this.options.lock||"").toLowerCase(),i=[],n=this.chart._plotArea.axes;for(let o=0;o<n.length;o++){const a=n[o],l=a.options.vertical;if(!(s===T&&!l)&&!(s===P&&l)&&a.zoomRange){const h=M(this.options.rate,s0,i0),c=a.zoomRange(-t*h,e);c&&i.push({axis:a,range:c})}}return this.axisRanges=i,lc(i)}zoom(){const t=this.axisRanges,e=this.chart._plotArea;if(t&&t.length&&e.updateAxisOptions){for(let s=0;s<t.length;s++){const i=t[s];e.updateAxisOptions(i.axis,i.range)}e.redraw(e.panes)}}destroy(){delete this.chart}}const r0=r=>r?Xn:_r;class a0 extends Y{constructor(t,e){super(t),this.chartService=e}render(){const{children:t,options:e}=this,s=e.vertical;this.visual=new wg(null,{spacing:s?0:e.spacing,lineSpacing:s?e.spacing:0,orientation:s?fb:vl,reverse:e.rtl,alignItems:s?r0(e.rtl):O});for(let i=0;i<t.length;i++){let n=t[i];n.reflow(new _),n.renderVisual()}}reflow(t){this.visual.rect(t.toRect()),this.visual.reflow();const e=this.visual.clippedBBox();e?this.box=Fi(e):this.box=new _}renderVisual(){this.addVisual()}createVisual(){}}const As=10,Zs=2;class Am extends Et{visualStyle(){const t=this.markerOptions(),e=t.border;return{stroke:{width:e.width,color:e.color,opacity:L(e.opacity,t.opacity),dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},cursor:t.cursor}}markerOptions(){return this.options}markerHighlightOptions(){const t=this.markerOptions(),e=t.highlight.border.width;return m({},t,{background:t.border.color},t.highlight,t.type===yh?{background:t.highlight.border.color,border:{color:t.highlight.background,width:e/2},width:t.width,height:t.height,margin:{top:0,left:0}}:{})}createHighlight(){const t=new Et(this.markerHighlightOptions()),e=this.paddingBox.clone();return t.reflow(e.pad(t.options.border.width)),this.highlight=[t.getElement()],this.highlight}}b(Am,{border:{width:Zs},width:As-Zs,height:As-Zs,background:U,margin:{top:-1,left:-1},vAlign:N,align:z,highlight:{width:As,height:As,border:{color:U,width:Zs}}});class hc extends Et{getElement(){const t=new W,e=new Wt(this.visualStyle()),{paddingBox:s}=this,i=s.height()/2;return e.moveTo(s.x1,s.y1+i).lineTo(s.x1,s.y2).lineTo(s.x2,s.y2),t.append(e),t}}b(hc,{width:15,height:15,align:G,vAlign:j,margin:{right:-2,bottom:2}});class Sm extends Et{getElement(){const t=new W,e=new Wt({stroke:{color:this.options.border.color,opacity:this.options.opacity,width:this.options.height,dashType:this.options.dashType}}),s=this.paddingBox,i=s.center().y;return e.moveTo(s.x1,i).lineTo(s.x2,i),t.append(e),t}createHighlight(){return this.highlight=[this.createHighlightLine(),this.createHighlightMarker()],this.highlight}createHighlightLine(){const t=m({},{border:{color:this.options.border.color,opacity:this.options.border.opacity,dashType:this.options.border.dashType}},this.options.highlight),e=new hc(t);return e.reflow(this.parent.paddingBox.clone()),this.highlightLine=e.getElement(),this.highlightLine}createHighlightMarker(){const t=m({},{background:this.options.background},this.options.highlight.markers),e=new Et(t),s=this.parent.paddingBox,i=t.border.width,n=this.parent.box.clone();return n.pad({left:i-s.x1,top:i-s.y1}),e.reflow(n),this.highlightMarker=e.getElement(),this.highlightMarker}}b(Sm,{border:{width:0},type:gb,align:z,vAlign:O,highlight:{border:{width:Zs},markers:{type:Xt,width:As,height:As,border:{width:Zs,color:U},align:z,vAlign:N}}});class km extends Et{createHighlight(){const t=m({},{background:this.options.background},this.options.highlight.markers),e=new Et(t),s=this.paddingBox.clone(),i=this.parent.box.clone();return s.align(i,T,z),s.align(i,P,N),e.reflow(s),this.highlight=[e.getElement()],this.highlight}}b(km,{highlight:{markers:{type:Xt,width:As,height:As,border:{width:Zs,color:U},margin:{top:-3,left:-3}}}});class Cm extends es{constructor(t){super(t),this.createContainer(),t.rtl?(this.createLabel(),this.createMarker()):(this.createMarker(),this.createLabel()),this._id=sa(),this.options.accessibility.ariaChecked=t.active}createContainer(){this.container=new ia({vertical:!1,wrap:!1,align:O,spacing:this.options.spacing}),this.append(this.container)}createMarker(){this.markerWrap=new es({vertical:!1,shrinkToFit:!0,wrap:!1,margin:1,width:22,height:22}),this.container.append(this.markerWrap),this.createMarkerArea(),this.options.markers.visible&&(this._marker=this._createMarker(),this.markerWrap.append(this._marker))}createMarkerArea(){const t=this.options,{markerColor:e,line:s={}}=t,i={border:{color:s.color||e,opacity:s.opacity,dashType:s.dashType}};return this._createLine(i)||this._createMarkerLine(i,s)||this._createSquare()}markerOptions(){const t=this.options,{markers:e={},markerColor:s}=t,{border:i={}}=e;return e.zIndex=void 0,m({},e,{border:{color:i.color||s},highlight:t.highlight.markers})}_highlightOptions(){const t=this.options;return m({markers:{type:t.markers.type}},t.highlight)}_createLine(t){const e=this.options;return e.type===rs&&!e.markers.visible&&(this._line=new Sm(m({},{background:e.markerColor,highlight:this._highlightOptions()},t,e.line)),this.markerWrap.append(this._line)),this._line}_createMarkerLine(t,e){return this.options.type===rs&&(this._markerLineArea=new hc(m({},{border:{width:e.height}},t)),this.markerWrap.append(this._markerLineArea)),this._markerLineArea}_reduceSize(t,e,s=.6){typeof t[e]=="number"&&(t[e]=t[e]*s)}_createSquare(){const t=this.options;if(t.type===os){let e=t.pattern||(t.series||{}).pattern;e&&(typeof e=="function"&&(e=e(t.series)),e=Object.assign({},e),this._reduceSize(e,"gap"),this._reduceSize(e,"width"),this._reduceSize(e,"radius")),this._square=new km(Object.assign({},{border:t.border,vAlign:t.markers.visible?j:O,highlight:this._highlightOptions()},t.area,{pattern:e,background:t.area.background||t.markerColor})),this.markerWrap.append(this._square)}return this._square}_createMarker(){return new Am(this.markerOptions())}_highlightMarkers(){this.options.active&&this._toggleHighlight(!0)}_restoreMarkers(){this._toggleHighlight(!1)}_toggleHighlight(t){if(!this.options.highlight.visible)return;const e=this._marker||this._square||this._line;if(e&&e===this._line&&this._line.visual.visible(!t),e){let s=e.highlight;s||(s=e.createHighlight(),s.forEach(i=>i&&this.markerWrap.appendVisual(i))),s.forEach(i=>i&&i.visible(t))}}createLabel(){const t=this.options,e=m({},t.labels);this.container.append(new qt(t.text,e))}getAriaLabelText(){return this.options.text}focusVisual(){this.visual.options.set("id",this._id),this.toggleFocusHighlight(!0),this._highlightMarkers()}clearFocusFromVisual(){this.visual.options.set("id",""),this.toggleFocusHighlight(!1),this._restoreMarkers()}renderComplete(){super.renderComplete();const t=this.options.cursor||{},e=this._itemOverlay=C.fromRect(this.container.box.toRect(),{fill:{color:U,opacity:0},stroke:null,cursor:t.style||t});this.appendVisual(e)}click(t,e){const s=this.eventArgs(e);!t.trigger(Hf,s)&&e&&e.type==="contextmenu"&&e.preventDefault()}over(t,e){const s=this.eventArgs(e);return t.trigger(Qw,s)||(t._legendItemHover(s.seriesIndex,s.pointIndex),this._highlightMarkers()),!0}out(t,e){t._unsetActivePoint(),this._restoreMarkers(),t.trigger(Kw,this.eventArgs(e))}eventArgs(t){const e=this.options;return{element:Ae(t),text:e.text,series:e.series,seriesIndex:e.series.index,pointIndex:e.pointIndex}}createVisual(){super.createVisual();const t=this.options;if(this.options.visible){const e=m({ariaLabel:t.accessibility.ariaLabel!==void 0?t.accessibility.ariaLabel:t.text},t.accessibility);kh(this.visual,e)}}renderVisual(){const t=this.options,e=t.visual;e?(this.visual=e({active:t.active,series:t.series,sender:this.getSender(),pointIndex:t.pointIndex,options:{type:t.type,markers:m({background:this.options.markerColor},this.markerOptions()),labels:t.labels},createVisual:()=>{this.createVisual(),this.renderChildren(),this.renderComplete();const s=this.visual;return delete this.visual,s}}),this._marker=this._markerLineArea=this._square=this._line=null,this.addVisual()):super.renderVisual()}createFocusHighlight(t){const e=t.stroke.width;return C.fromRect(this.container.box.pad(e/2).toRect(),t)}}b(Cm,{accessibility:{role:s1,className:i1,ariaRoleDescription:n1},markers:{},highlight:{visible:!0,markers:{}}});const Go="custom";let cc=class extends Y{constructor(t,e={}){super(t),this.chartService=e,D(this.options.position,[N,G,j,z,Go])||(this.options.position=G),this.createContainers(),this.createLegendTitle(t.title),this.createItems()}createContainers(){const t=this.options,{position:e,align:s}=t;let i=e,n=O;e===Go?i=z:D(e,[N,j])?(s===_r?i=z:s===Xn?i=G:i=O,n=e):s&&(s===_r?n=N:s===Xn&&(n=j)),this.container=new es({margin:t.margin,padding:t.padding,background:t.background,border:t.border,vAlign:n,align:i,zIndex:t.zIndex,shrinkToFit:!0}),this.hasTitle()?this.itemsContainer=new es({vAlign:n,align:i,zIndex:t.zIndex,shrinkToFit:!0}):this.itemsContainer=this.container,this.append(this.container)}createItems(){const t=this.getService(),e=this.options,s=this.isVertical(),i=new a0({vertical:s,spacing:e.spacing,rtl:t.rtl},t);let n=e.data;e.reverse&&(n=n.slice(0).reverse());const o=n.length;for(let a=0;a<o;a++){let l=n[a];const{markers:h={},dashType:c,legendItem:d,opacity:u}=l.series||{},p=m({visible:h.visible!==!1,type:Xt},h);delete p.size;const g=m({},{markers:p,labels:e.labels,rtl:t.rtl,line:Object.assign({},{dashType:c},e.line),area:Object.assign({},{opacity:u},e.area),opacity:u,accessibility:e.accessibility,focusHighlight:e.focusHighlight},e.item,d,l,{markers:e.markers});i.append(new Cm(g))}i.render(),this.itemsContainer.append(i)}isVertical(){const{orientation:t,position:e}=this.options;return e===Go&&t!==vl||(A(t)?t!==vl:D(e,[z,G]))}hasItems(){return this.container.children[0].children.length>0}getItems(){return this.itemsContainer.children[0].children}reflow(t){const e=this.options,s=t.clone();if(!this.hasItems()){this.box=s;return}e.position===Go?(this.containerCustomReflow(s),this.box=s):this.containerReflow(s),this.hasTitle()&&(this.title.reflow(new _(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2)),this.title.box.width()>this.itemsContainer.box.width()&&this.itemsContainer.reflow(new _(this.container.box.x1,this.itemsContainer.box.y1,this.container.box.x2,this.itemsContainer.box.y2)))}containerReflow(t){const{options:e,container:s}=this,{position:i,width:n,height:o}=e,a=i===N||i===j?T:P,l=this.isVertical(),h=t.clone();let c=t.clone();(i===z||i===G)&&(c.y1=h.y1=0),l&&o?(c.y2=c.y1+o,c.align(h,P,s.options.vAlign)):!l&&n&&(c.x2=c.x1+n,c.align(h,T,s.options.align)),s.reflow(c),c=s.box;const d=c.clone();(e.offsetX||e.offsetY)&&(c.translate(e.offsetX,e.offsetY),s.reflow(c)),d[a+1]=t[a+1],d[a+2]=t[a+2],this.box=d}containerCustomReflow(t){const{options:e,container:s}=this,{offsetX:i,offsetY:n,width:o,height:a}=e,l=this.isVertical();let h=t.clone();l&&a?h.y2=h.y1+a:!l&&o&&(h.x2=h.x1+o),s.reflow(h),h=s.box,s.reflow(new _(i,n,i+h.width(),n+h.height()))}renderVisual(){this.hasItems()&&super.renderVisual()}createLegendTitle(t){let e=m({},{color:ut,position:N,align:O},t),s=e.text;if(!(!t||t.visible===!1||!t.text)){if(A(e)&&e.visible){const i=bt(e);i?s=i({text:s}):e.format&&(s=this.chartService.format.auto(e.format,s))}this.title=new qt(s,e),this.createTitleLayout(),this.appendTitleLayoutContent()}}createTitleLayout(){this.layout=new ia({vertical:!0,wrap:!1}),this.container.append(this.layout)}hasTitle(){return!!(this.options.title&&this.options.title.visible!==!1&&this.options.title.text)}appendTitleLayoutContent(){this.options.title.position===j?(this.layout.append(this.itemsContainer),this.layout.append(this.title)):(this.layout.append(this.title),this.layout.append(this.itemsContainer))}};b(cc,{position:G,data:[],offsetX:0,offsetY:0,margin:X(2),padding:X(5),border:{color:ut,width:0},item:{cursor:yl,spacing:6},spacing:6,background:"",zIndex:1,markers:{},line:{width:20,height:2,cursor:yl,opacity:1},area:{type:pb,align:G,width:15,height:15}});class Se{constructor(){this._registry=[]}register(t,e){this._registry.push({type:t,seriesTypes:e})}create(t,e,s){const i=this._registry;let n=i[0],o;for(let a=0;a<i.length;a++){const l=i[a];o=lt(t,l.seriesTypes);const h=lt(t,ln);if(o.length-h.length>0){n=l;break}}return new n.type(o,e,s)}}Se.current=new Se;const l0=3,h0=.1;function Fe(r){const t=document.createElement("div");return r&&(t.className=r),t}function vu(r){let t=r;for(;t&&!qn(t,"k-handle");)t=t.parentNode;return t}class dc{constructor(t,e,s,i){const n=t.element;this.options=m({},this.options,s),this.chart=t,this.observer=i,this.chartElement=n,this.categoryAxis=e,this._dateAxis=this.categoryAxis instanceof fi,this.initOptions(),this.visible=this.options.visible&&n.offsetHeight,this.visible&&(this.createElements(),this.set(this._index(this.options.from),this._index(this.options.to)),this.bindEvents())}onPane(t){return this.categoryAxis.pane===t}createElements(){const t=this.options,e=this.wrapper=Fe("k-selector k-pointer-events-none");at(e,{top:t.offset.top,left:t.offset.left,width:t.width,height:t.height,direction:"ltr"});const s=this.selection=Fe("k-selection k-pointer-events-none");this.leftMask=Fe("k-mask k-pointer-events-none"),this.rightMask=Fe("k-mask k-pointer-events-none"),e.appendChild(this.leftMask),e.appendChild(this.rightMask),e.appendChild(s);const i=this.body=Fe("k-selection-bg k-pointer-events-none");s.appendChild(i);const n=this.leftHandle=Fe("k-handle k-left-handle k-pointer-events-auto"),o=this.rightHandle=Fe("k-handle k-right-handle k-pointer-events-auto");n.appendChild(Fe()),o.appendChild(Fe()),s.appendChild(n),s.appendChild(o),this.chartElement.appendChild(e);const a=at(s,["borderLeftWidth","borderRightWidth","height"]),l=at(n,"height").height,h=at(o,"height").height;t.selection={border:{left:a.borderLeftWidth,right:a.borderRightWidth}},at(n,{top:(a.height-l)/2}),at(o,{top:(a.height-h)/2}),e.style.cssText=e.style.cssText}bindEvents(){this.options.mousewheel!==!1&&(this._mousewheelHandler=this._mousewheel.bind(this),Pn(this.chartElement,{[Vr]:this._mousewheelHandler})),this._domEvents=wf.create(this.chartElement,{stopPropagation:!0,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})}initOptions(){const{options:t,categoryAxis:e}=this,s=e.pane.chartsBox(),i=this.chart.chartService.intl;this._dateAxis&&m(t,{min:kt(i,t.min),max:kt(i,t.max),from:kt(i,t.from),to:kt(i,t.to)});const{paddingLeft:n,paddingTop:o}=at(this.chartElement,["paddingLeft","paddingTop"]);this.options=m({},{width:s.width(),height:s.height()+h0,padding:{left:n,top:o},offset:{left:s.x1+n,top:s.y1+o},from:t.min,to:t.max},t)}destroy(){this._domEvents&&(this._domEvents.destroy(),delete this._domEvents),clearTimeout(this._mwTimeout),this._state=null,this.wrapper&&(this._mousewheelHandler&&(En(this.chartElement,{[Vr]:this._mousewheelHandler}),this._mousewheelHandler=null),this.chartElement.removeChild(this.wrapper),this.wrapper=null)}_rangeEventArgs(t){return{axis:this.categoryAxis.options,from:this._value(t.from),to:this._value(t.to)}}_pointInPane(t,e){const s=this.categoryAxis.pane.box,i=this.chart._toModelCoordinates(t,e);return s.containsPoint(i)}_start(t){const e=this.options,s=Ae(t);if(this._state||!s)return;const i=rf(t);if(!this._pointInPane(i.x,i.y))return;const o=vu(s),a=this.body.getBoundingClientRect(),l=!o&&i.x>=a.x&&i.x<=a.x+a.width&&i.y>=a.y&&i.y<=a.y+a.height;this.chart._unsetActivePoint(),this._state={moveTarget:o,startLocation:t.x?t.x.location:0,inBody:l,range:{from:this._index(e.from),to:this._index(e.to)}};const h=this._rangeEventArgs({from:this._index(e.from),to:this._index(e.to)});this.trigger(El,h)&&(this._state=null)}_press(t){let e;this._state?e=this._state.moveTarget:e=vu(Ae(t)),e&&dt(e,"k-handle-active")}_move(t){if(!this._state)return;const{_state:e,options:s,categoryAxis:i}=this,{range:n,moveTarget:o}=e,a=i.options.reverse,l=this._index(s.from),h=this._index(s.to),c=this._index(s.min),d=this._index(s.max),u=e.startLocation-t.x.location,p={from:n.from,to:n.to},g=n.to-n.from,f=at(this.wrapper,"width").width/(i.categoriesCount()-1),x=Math.round(u/f)*(a?-1:1);if(!o&&!e.inBody)return;const y=o&&qn(o,"k-left-handle"),v=o&&qn(o,"k-right-handle");e.inBody?(n.from=Math.min(Math.max(c,l-x),d-g),n.to=Math.min(n.from+g,d)):y&&!a||v&&a?(n.from=Math.min(Math.max(c,l-x),d-1),n.to=Math.max(n.from+1,n.to)):(y&&a||v&&!a)&&(n.to=Math.min(Math.max(c+1,h-x),d),n.from=Math.min(n.to-1,n.from)),(n.from!==p.from||n.to!==p.to)&&(this.move(n.from,n.to),this.trigger(Rn,this._rangeEventArgs(n)))}_end(){if(this._state){const t=this._state.moveTarget;t&&Jr(t,"k-handle-active");const e=this._state.range;this.set(e.from,e.to),this.trigger(Ml,this._rangeEventArgs(e)),delete this._state}}_tap(t){const{options:e,categoryAxis:s}=this,i=this.chart._eventCoordinates(t),n=s.pointCategoryIndex(new R(i.x,s.box.y1)),o=this._index(e.from),a=this._index(e.to),l=this._index(e.min),h=this._index(e.max),c=a-o,d=o+c/2,u={},p=t.event.which===3;let g=Math.round(d-n);this._state||p||(this.chart._unsetActivePoint(),s.options.justified||g--,u.from=Math.min(Math.max(l,o-g),h-c),u.to=Math.min(u.from+c,h),this._start(t),this._state&&(this._state.range=u,this.trigger(Rn,this._rangeEventArgs(u)),this._end()))}_mousewheel(t){let e=_h(t);if(this._start(t),this._state){const s=this._state.range;t.preventDefault(),t.stopPropagation(),Math.abs(e)>1&&(e*=l0),this.options.mousewheel.reverse&&(e*=-1),this.expand(e)&&this.trigger(Rn,{axis:this.categoryAxis.options,delta:e,originalEvent:t,from:this._value(s.from),to:this._value(s.to)}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout(()=>{this._end()},Il)}}_gesturestart(t){const e=this.options,s=t.touches[0];if(!this._pointInPane(s.pageX,s.pageY))return;this._state={range:{from:this._index(e.from),to:this._index(e.to)}};const n=this._rangeEventArgs(this._state.range);this.trigger(El,n)?this._state=null:t.preventDefault()}_gestureend(){this._state&&(this.trigger(Ml,this._rangeEventArgs(this._state.range)),delete this._state)}_gesturechange(t){if(!this._state)return;const{chart:e,_state:s,options:i,categoryAxis:n}=this,o=s.range,a=e._toModelCoordinates(t.touches[0].x.location).x,l=e._toModelCoordinates(t.touches[1].x.location).x,h=Math.min(a,l),c=Math.max(a,l);t.preventDefault(),o.from=n.pointCategoryIndex(new R(h))||i.min,o.to=n.pointCategoryIndex(new R(c))||i.max,this.move(o.from,o.to),this.trigger(Rn,this._rangeEventArgs(o))}_index(t){let e=t;return t instanceof Date&&(e=this.categoryAxis.categoryIndex(t)),e}_value(t){let e=t;return this._dateAxis&&(e=this.categoryAxis.categoryAt(t),e>this.options.max&&(e=this.options.max)),e}_slot(t){const e=this.categoryAxis,s=this._index(t);return e.getSlot(s,s,!0)}move(t,e){const s=this.options,i=this.categoryAxis.options.reverse,{offset:n,padding:o,selection:{border:a}}=s,l=i?e:t,h=i?t:e,c="x"+(i?2:1);let d=this._slot(l);const u=S(d[c]-n.left+o.left);at(this.leftMask,{width:u}),at(this.selection,{left:u}),d=this._slot(h);const p=S(s.width-(d[c]-n.left+o.left));at(this.rightMask,{width:p});let g=s.width-p;g!==s.width&&(g+=a.right),at(this.rightMask,{left:g}),at(this.selection,{width:Math.max(s.width-(u+p)-a.right,0)})}set(t,e){const s=this.options,i=this._index(s.min),n=this._index(s.max),o=M(this._index(t),i,n),a=M(this._index(e),o+1,n);s.visible&&this.move(o,a),s.from=this._value(o),s.to=this._value(a)}expand(t){const e=this.options,s=this._index(e.min),i=this._index(e.max),n=e.mousewheel.zoom,o=this._index(e.from),a=this._index(e.to);let l={from:o,to:a};const h=m({},l);if(this._state&&(l=this._state.range),n!==G&&(l.from=M(M(o-t,0,a-1),s,i)),n!==z&&(l.to=M(M(a+t,l.from+1,i),s,i)),l.from!==h.from||l.to!==h.to)return this.set(l.from,l.to),!0}zoom(t,e){const s=this.options,i=this._index(s.min),n=this._index(s.max),o=this._index(s.from),a=this._index(s.to);let l={from:o,to:a};const h=m({},l),{reverse:c}=this.categoryAxis.options,d=T+(c?"2":"1"),u=this.categoryAxis.lineBox(),p=Math.abs(u[d]-e[T]),g=u.width(),f=S(p/g,2),x=S(f*t),y=S((1-f)*t);if(this._state&&(l=this._state.range),l.from=M(M(o-x,0,a-1),i,n),l.to=M(M(a+y,l.from+1,n),i,n),l.from!==h.from||l.to!==h.to)return this.set(l.from,l.to),!0}trigger(t,e){return(this.observer||this.chart).trigger(t,e)}}b(dc,{visible:!0,mousewheel:{zoom:"both"},min:vt,max:gt});let c0=class extends pa{show(t){if(!t||!t.tooltipAnchor||this._current&&this._current===t)return;const e=m({},this.options,t.options.tooltip),s=t.tooltipAnchor();s?(this._current=t,super.show({point:t,anchor:s},e,t)):this.hide()}hide(){delete this._current,super.hide()}},uc=class extends pa{constructor(t,e){super(t.chartService,e),this.plotArea=t,this.formatService=t.chartService.format}showAt(t,e){const s=te(t,function(i){const n=i.series.tooltip;return!(n&&n.visible===!1)});if(s.length>0){const i=s[0],n=this.plotArea.categoryAxis.getSlot(i.categoryIx),o=e?this._slotAnchor(e,n):this._defaultAnchor(i,n);this.show({anchor:o,shared:!0,points:t,category:i.category,categoryText:this.formatService.auto(this.options.categoryFormat,i.category),series:this.plotArea.series},this.options)}}_slotAnchor(t,e){const s=this.plotArea.categoryAxis,i={horizontal:"left",vertical:"center"};return s.options.vertical||(t.x=e.center().x),{point:t,align:i}}_defaultAnchor(t,e){const s=t.owner.pane.chartsBox(),i=this.plotArea.categoryAxis.options.vertical,n=s.center(),o=e.center(),a={horizontal:"center",vertical:"center"};let l;return i?l=new R(n.x,o.y):l=new R(o.x,n.y),{point:l,align:a}}};b(uc,{categoryFormat:"{0:d}"});class Tm extends ne{setup(){const{element:t,options:e}=this;if(t.bbox()){this.origin=e.origin;const i=e.vertical?P:T,n=this.fromScale=new w(1,1);n[i]=Qn,t.transform(K().scale(n.x,n.y))}else this.abort()}step(t){const e=ue(this.fromScale.x,1,t),s=ue(this.fromScale.y,1,t);this.element.transform(K().scale(e,s,this.origin))}abort(){super.abort(),this.element.transform(null)}}b(Tm,{duration:ge});ie.current.register(fe,Tm);class Pm extends ne{setup(){const t=this.center=this.element.bbox().center();this.element.transform(K().scale(Qn,Qn,t))}step(t){this.element.transform(K().scale(t,t,this.center))}}b(Pm,{easing:"easeOutElastic"});ie.current.register(on,Pm);class Em extends ne{setup(){this.fadeTo=this.element.opacity(),this.element.opacity(0)}step(t){this.element.opacity(t*this.fadeTo)}}b(Em,{duration:200,easing:"linear"});ie.current.register(zs,Em);class Mm extends ne{setup(){this.element.transform(K().scale(Qn,Qn,this.options.center))}step(t){this.element.transform(K().scale(t,t,this.options.center))}}b(Mm,{easing:"easeOutElastic",duration:ge});ie.current.register(Rs,Mm);class pc extends pn{render(){super.render(),this.renderSegments()}createSegment(t,e,s){const i=e.style;let n;return i===nn?n=tc:n=mi,new n(t,e,s)}animationPoints(){return super.animationPoints().concat(this._segments)}createMissingValue(t,e){if(e===ns){const s={x:t.x,y:t.y};return Gt(s.x)||(s.x=0),Gt(s.y)||(s.y=0),s}}}m(pc.prototype,ec);function Ao(r,t,e){const s=[];let{xMin:i,xMax:n}=t;const o=(e||{}).forecast;o&&(o.before>0&&(i-=o.before),o.after>0&&(n+=o.after));const a=(e||{}).samplingInterval;let l=L(a,Ji(i,n)/10);a<=0&&(l=n-i);for(let h=i;h<=n;h+=l)s.push([h,r(h)]);return s}function d0(r){const{options:t,seriesValues:e}=r,s=p0({seriesValues:e,options:t});return s?Object.assign({},t,{type:"scatterLine",data:s}):null}const u0=r=>({valueFields:t})=>({xValue:t.x,yValue:Math.log(t[r])});function p0({seriesValues:r,options:t}){const e=r();if(!wo(e,t.field))return null;let{slope:s,intercept:i,count:n,xMin:o,xMax:a}=js(e,u0(t.field));const l={xMin:o,xMax:a};if(n>0){const h=Math.exp(i),c=s;return Ao(d=>h*Math.exp(c*d),l,t.trendline)}return null}const ga=r=>({valueFields:t})=>({xValue:t.x,yValue:t[r]});function g0(r){const{options:t,seriesValues:e}=r,s=f0({seriesValues:e,options:t});return s?Object.assign({},t,{type:"scatterLine",data:s}):null}function f0({seriesValues:r,options:t}){let{slope:e,intercept:s,count:i,xMin:n,xMax:o}=js(r(),ga(t.field));const a={xMin:n,xMax:o};return i>0?Ao(l=>e*l+s,a,t.trendline):null}function Im(r,t){let e=Number.MAX_VALUE,s=Number.MIN_VALUE;for(let i=0;i<r.length;i++){const n=r[i],{xValue:o,yValue:a}=t(n);isFinite(o)&&o!==null&&isFinite(a)&&a!==null&&(e=Math.min(o,e),s=Math.max(o,s))}return{xMin:e,xMax:s}}function m0(r){const{options:t,seriesValues:e}=r,s=v0({seriesValues:e,options:t});return s?Object.assign({},t,{type:"scatterLine",data:s}):null}const x0=r=>({valueFields:t})=>({xValue:t.x,yValue:t[r]}),y0=r=>({valueFields:t})=>({xValue:Math.log(t.x),yValue:t[r]});function v0({seriesValues:r,options:t}){const e=r();if(!wo(e,"x"))return null;let{slope:s,intercept:i,count:n}=js(e,y0(t.field)),o=Im(e,x0(t.field));if(n>0){const a=s,l=i;return Ao(h=>a*Math.log(h)+l,o,t.trendline)}return null}function b0(r){const{options:t}=r,e=w0(r);return e?Object.assign({},t,{type:"scatterLine",data:e}):null}function w0({options:r,seriesValues:t}){const e=(r.trendline||{}).period||qh,i=ym(t({before:e,after:e}),ga(r.field),e);return i.length>0?i:null}function _0(r){const{options:t,seriesValues:e}=r,s=A0({seriesValues:e,options:t});return s?Object.assign({},t,{type:"scatterLine",data:s}):null}function A0({seriesValues:r,options:t}){const e=(t.trendline||{}).order,s=ga(t.field),{count:i,valueMapper:n,xMin:o,xMax:a}=vm(r(),s,e),l={xMin:o,xMax:a};return i>0?Ao(n,l,t.trendline):null}function S0(r){const{options:t,seriesValues:e}=r,s=C0({seriesValues:e,options:t});return s?Object.assign({},t,{type:"scatterLine",data:s}):null}const k0=r=>({valueFields:t})=>({xValue:Math.log(t.x),yValue:Math.log(t[r])});function C0({seriesValues:r,options:t}){const e=r();if(!wo(e,"x"))return null;let{slope:s,intercept:i,count:n}=js(e,k0(t.field)),o=Im(e,ga(t.field));if(n>0){const a=Math.exp(i),l=s;return Ao(h=>a*Math.pow(h,l),o,t.trendline)}return null}const vi={};vi[jh]=d0;vi[Gh]=g0;vi[$h]=m0;vi[Wh]=b0;vi[Xh]=_0;vi[Yh]=S0;class So extends gs{initFields(){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new Nr,this.yAxisRangeTracker=new Nr}render(t=this.panes){this.series=[...this.originalSeries],this.createTrendlineSeries();const e=this.groupSeriesByPane();for(let s=0;s<t.length;s++){const i=t[s],n=e[i.options.name||"default"]||[];this.addToLegend(n);const o=this.filterVisibleSeries(n);o&&(this.createScatterChart(lt(o,Hh),i),this.createScatterLineChart(lt(o,Uh),i),this.createBubbleChart(lt(o,on),i))}this.createAxes(t)}appendChart(t,e){this.xAxisRangeTracker.update(t.xAxisRanges),this.yAxisRangeTracker.update(t.yAxisRanges),super.appendChart(t,e)}removeAxis(t){const e=t.options.name;super.removeAxis(t),t.options.vertical?(this.yAxisRangeTracker.reset(e),delete this.namedYAxes[e]):(this.xAxisRangeTracker.reset(e),delete this.namedXAxes[e]),t===this.axisX&&delete this.axisX,t===this.axisY&&delete this.axisY}seriesPaneName(t){const e=this.options,s=t.xAxis,i=[].concat(e.xAxis),n=te(i,function(u){return u.name===s})[0],o=t.yAxis,a=[].concat(e.yAxis),l=te(a,function(u){return u.name===o})[0],c=(e.panes||[{}])[0].name||"default";return(n||{}).pane||(l||{}).pane||c}createScatterChart(t,e){t.length>0&&this.appendChart(new pn(this,{series:t,clip:e.options.clip}),e)}createScatterLineChart(t,e){t.length>0&&this.appendChart(new pc(this,{series:t,clip:e.options.clip}),e)}createBubbleChart(t,e){t.length>0&&this.appendChart(new rm(this,{series:t,clip:e.options.clip}),e)}createXYAxis(t,e,s){const i=t.name,n=e?this.namedYAxes:this.namedXAxes,o=e?this.yAxisRangeTracker:this.xAxisRangeTracker,a=m({reverse:!e&&this.chartService.rtl},t,{vertical:e}),l=Ye(a.type,Dr),h=o.query(),c=l?{min:.1,max:1}:{min:0,max:1},d=o.query(i)||h||c,u=[a.min,a.max],p=this.series;for(let y=0;y<p.length;y++){const v=p[y],k=v[e?"yAxis":"xAxis"];if(k===a.name||s===0&&!k){const E=et.current.bindPoint(v,0).valueFields;u.push(E[e?"y":"x"]);break}}s===0&&h&&(d.min=Math.min(d.min,h.min),d.max=Math.max(d.max,h.max));let g;for(let y=0;y<u.length;y++)if(u[y]instanceof Date){g=!0;break}let f;Ye(a.type,Je)||!a.type&&g?f=oa:l?f=ci:f=Ft;const x=new f(d.min,d.max,a,this.chartService);if(x.axisIndex=s,i){if(n[i])throw new Error(`${e?"Y":"X"} axis with name ${i} is already defined`);n[i]=x}return this.appendAxis(x),x}createAxes(t){const e=this.options,s=[].concat(e.xAxis),i=[],n=[].concat(e.yAxis),o=[];for(let a=0;a<s.length;a++){const l=this.findPane(s[a].pane);D(l,t)&&i.push(this.createXYAxis(s[a],!1,a))}for(let a=0;a<n.length;a++){const l=this.findPane(n[a].pane);D(l,t)&&o.push(this.createXYAxis(n[a],!0,a))}this.axisX=this.axisX||i[0],this.axisY=this.axisY||o[0]}_dispatchEvent(t,e,s){const i=t._eventCoordinates(e),n=new R(i.x,i.y),o=this.axes,a=o.length,l=[],h=[];for(let c=0;c<a;c++){const d=o[c],u=d.options.vertical?h:l,p=d.getValue(n);p!==null&&u.push(p)}l.length>0&&h.length>0&&t.trigger(s,{element:Ae(e),originalEvent:e,x:Xi(l),y:Xi(h)})}updateAxisOptions(t,e){const s=t.options.vertical,i=this.groupAxes(this.panes),n=(s?i.y:i.x).indexOf(t);bu(this.options,n,s,e),bu(this.originalOptions,n,s,e)}trendlineFactory(t,e){const s=this.seriesValues.bind(this,e.index),i=xm(vi,t.type,{options:t,seriesValues:s});return i&&(i.xAxis=e.xAxis,i.yAxis=e.yAxis),i}seriesValues(t){const e=[],s=this.series[t];for(let i=0;i<s.data.length;i++){const n=this.bindPoint(s,i);e.push({pointIx:i,valueFields:n.valueFields})}return e}}function bu(r,t,e,s){const i=[].concat(e?r.yAxis:r.xAxis)[t];m(i,s)}b(So,{xAxis:{},yAxis:{}});m(So.prototype,bo);class ko extends Y{constructor(t,e,s){super(s),this.value=t,this.sector=e}render(){this._rendered||this.visible===!1||(this._rendered=!0,this.createLabel())}createLabel(){const t=this.options.labels,e=this.owner.chartService;let s=this.getLabelText(t);if(t.visible&&(s||s===0)){if(t.position===O||t.position===zr)t.color||(t.color=ea(this.options.color)),t.background||(t.background=this.options.color);else{const i=e.theme.seriesDefaults.labels;t.color=t.color||i.color,t.background=t.background||i.background}this.label=new qt(s,m({},t,{align:O,vAlign:"",animation:{type:zs,delay:this.animationDelay}}),this.pointData()),this.append(this.label)}}getLabelText(t){let e=bt(t);return e?e(this.pointData()):this.owner.chartService.format.auto(t.format,this.value)}reflow(t){this.render(),this.box=t,this.reflowLabel()}reflowLabel(){const{options:{labels:t},label:e}=this,s=this.sector.clone(),i=t.distance,n=s.middle();if(e){const o=e.box.height(),a=e.box.width();let l;if(t.position===O)s.radius=Math.abs((s.radius-o)/2)+o,l=s.point(n),e.reflow(new _(l.x,l.y-o/2,l.x,l.y));else if(t.position===zr)s.radius=s.radius-o/2,l=s.point(n),e.reflow(new _(l.x,l.y-o/2,l.x,l.y));else{let h;l=s.clone().expand(i).point(n),l.x>=s.center.x?(h=l.x+a,e.orientation=G):(h=l.x-a,e.orientation=z),e.reflow(new _(h,l.y-o,l.x,l.y))}}}createVisual(){const{sector:t,options:e}=this;if(super.createVisual(),this.addAccessibilityAttributesToVisual(),this.value)if(e.visual){const s=(t.startAngle+180)%360,i=e.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new w(t.center.x,t.center.y),radius:t.radius,innerRadius:t.innerRadius,startAngle:s,endAngle:s+t.angle,options:e,sender:this.getSender(),createVisual:()=>{const n=new W;return this.createSegmentVisual(n),n}});i&&this.visual.append(i)}else this.createSegmentVisual(this.visual)}createSegmentVisual(t){const{sector:e,options:s}=this,i=s.border||{},n=i.width>0?{stroke:{color:i.color,width:i.width,opacity:i.opacity,dashType:i.dashType}}:{},o=s.color,a=Ds(s.pattern,{color:o,opacity:s.opacity}),l=this.createSegment(e,m({fill:a,stroke:{opacity:s.opacity},zIndex:s.zIndex},n));t.append(l),Kh(s)&&t.append(this.createGradientOverlay(l,{baseColor:o,fallbackFill:a},m({center:[e.center.x,e.center.y],innerRadius:e.innerRadius,radius:e.radius,userSpace:!0},s.overlay)))}createSegment(t,e){return e.singleSegment?new Kt(new Rt(new w(t.center.x,t.center.y),t.radius),e):Ni.current.createRing(t,e)}createAnimation(){const{options:t,sector:{center:e}}=this;m(t,{animation:{center:[e.x,e.y],delay:this.animationDelay}}),super.createAnimation()}createHighlight(t){const e=this.options.highlight||{},s=e.border||{};return this.createSegment(this.sector,m({},t,{fill:{color:e.color,opacity:e.opacity},stroke:{opacity:s.opacity,width:s.width,color:s.color,dashType:s.dashType}}))}highlightVisual(){return this.visual.children[0]}highlightVisualArgs(){const t=this.sector;return{options:this.options,radius:t.radius,innerRadius:t.innerRadius,center:new w(t.center.x,t.center.y),startAngle:t.startAngle,endAngle:t.angle+t.startAngle,visual:this.visual}}createFocusHighlight(t){const e=this.options.focusHighlight.border.width,s=this.createSegment(this.sector,m({},t,{stroke:{width:e*2}})),i=new Wt;return i.paths.push(C.fromRect(s.bbox())),i.paths.push(this.createSegment(this.sector,{})),s.clip(i),s}tooltipAnchor(){const t=this.sector.clone().expand(we),e=t.middle();return{point:t.point(e),align:E0(e+180)}}formatValue(t){return this.owner.formatPointValue(this,t)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}}getIndex(){return this.index}}const T0=S(yt(30),tt),P0=S(yt(60),tt);function E0(r){const t=yt(r),e=S(Math.sin(t),tt),s=S(Math.cos(t),tt);let i;Math.abs(e)>P0?i=O:s<0?i=G:i=z;let n;return Math.abs(e)<T0?n=O:e<0?n=j:n=N,{horizontal:i,vertical:n}}b(ko,{color:U,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:Qg,margin:X(.5),align:Xt,zIndex:1,position:ii},animation:{type:Rs},highlight:{visible:!0,border:{width:1}},visible:!0,accessibility:{role:Vs,className:Ns,ariaRoleDescription:Fs}});m(ko.prototype,Ce);m(ko.prototype,dn);const Rm={createLegendItem:function(r,t,e){const s=this.options.legend||{},i=s.labels||{},n=s.inactiveItems||{},o=n.labels||{};if(e&&e.visibleInLegend!==!1){const a=e.visible!==!1,l=a?bt(i):bt(o)||bt(i);let h=e.category;l&&(h=l({text:h,series:e.series,dataItem:e.dataItem,percentage:e.percentage,value:r}));let c,d;a?(c={},d=t.color):(c={color:o.color,font:o.font},d=(n.markers||{}).color),Gt(h)&&h!==""&&this.legendItems.push({active:a,pointIndex:e.index,text:h,series:e.series,markerColor:d,pattern:t.pattern,labels:c})}}},M0=70;class Co extends Y{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this.points=[],this.legendItems=[],this.render()}render(){this.traverseDataPoints(this.addValue.bind(this))}traverseDataPoints(t){const{options:e,plotArea:{options:{seriesColors:s=[]}}}=this,i=s.length,n=e.series,o=n.length;for(let a=0;a<o;a++){const l=n[a],h=l.data,{total:c,points:d,count:u}=Qf(l),p=360/c;let g;isFinite(p)||(g=360/u);let f;A(l.startAngle)?f=l.startAngle:f=e.startAngle,a!==o-1&&l.labels.position===ii&&(l.labels.position=O);for(let x=0;x<d.length;x++){const y=d[x];if(!y)continue;const{fields:v,value:k,visible:E}=y,I=k!==0?g||k*p:0,B=h.length!==1&&!!v.explode;rt(l.color)||(l.color=v.color||s[x%i]),t(k,new tn(null,0,0,f,I),{owner:this,category:A(v.category)?v.category:"",pattern:A(v.pattern)?v.pattern:l.pattern,index:x,series:l,seriesIx:a,dataItem:h[x],percentage:c!==0?k/c:0,explode:B,visibleInLegend:v.visibleInLegend,visible:E,zIndex:o-a,animationDelay:this.animationDelay(x,a,o)}),E!==!1&&(f+=I)}}}evalSegmentOptions(t,e,s){const i=s.series;as(t,{value:e,series:i,dataItem:s.dataItem,category:s.category,percentage:s.percentage},{defaults:i._defaults,excluded:["data","content","template","visual","toggle","ariaTemplate","ariaContent"]})}addValue(t,e,s){const i=m({},s.series,{index:s.index});if(i.pattern=s.pattern||i.pattern,this.evalSegmentOptions(i,t,s),this.createLegendItem(t,i,s),s.visible===!1)return;const n=new ko(t,e,i);Object.assign(n,s),this.append(n),this.points.push(n)}reflow(t){const{options:e,points:s,seriesConfigs:i=[]}=this,n=s.length,o=t.clone(),a=5,l=Math.min(o.width(),o.height()),h=l/2,c=l-l*.85,d=new _(o.x1,o.y1,o.x1+l,o.y1+l),u=d.center(),p=o.center(),g=e.series.length,f=[],x=[];let y=L(e.padding,c);this.targetBox=t,y=y>h-a?h-a:y,d.translate(p.x-u.x,p.y-u.y);const v=h-y,k=new R(v+d.x1+y,v+d.y1+y);for(let E=0;E<n;E++){const I=s[E],B=I.sector,V=I.seriesIx;if(B.radius=v,B.center=k,i.length){const ht=i[V];B.innerRadius=ht.innerRadius,B.radius=ht.radius}V===g-1&&I.explode&&(B.center=B.clone().setRadius(B.radius*.15).point(B.middle())),I.reflow(d);const q=I.label;q&&q.options.position===ii&&V===g-1&&(q.orientation===G?x.push(q):f.push(q))}f.length>0&&(f.sort(this.labelComparator(!0)),this.leftLabelsReflow(f)),x.length>0&&(x.sort(this.labelComparator(!1)),this.rightLabelsReflow(x)),this.box=d}leftLabelsReflow(t){const e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)}rightLabelsReflow(t){const e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)}distanceBetweenLabels(t){const e=pt(this.points),s=e.sector,i=t.length-1,n=s.radius+e.options.labels.distance,o=[];let a=t[0].box,l=S(a.y1-(s.center.y-n-a.height()-a.height()/2));o.push(l);for(let h=0;h<i;h++){const c=t[h+1].box;a=t[h].box,l=S(c.y1-a.y2),o.push(l)}return l=S(s.center.y+n-t[i].box.y2-t[i].box.height()/2),o.push(l),o}distributeLabels(t,e){const s=t.length;let i,n,o;for(let a=0;a<s;a++)for(o=-t[a],i=n=a;o>0&&(i>=0||n<s);)o=this._takeDistance(t,a,--i,o),o=this._takeDistance(t,a,++n,o);this.reflowLabels(t,e)}_takeDistance(t,e,s,i){let n=i;if(t[s]>0){const o=Math.min(t[s],n);n-=o,t[s]-=o,t[e]+=o}return n}reflowLabels(t,e){const s=pt(this.points),i=s.sector,n=s.options.labels,o=e.length,a=n.distance;let l=i.center.y-(i.radius+a)-e[0].box.height(),h;t[0]+=2;for(let c=0;c<o;c++){const d=e[c],u=d.box;l+=t[c],h=this.hAlignLabel(u.x2,i.clone().expand(a),l,l+u.height(),d.orientation===G),d.orientation===G?(n.align!==Xt&&(h=i.radius+i.center.x+a),d.reflow(new _(h+u.width(),l,h,l))):(n.align!==Xt&&(h=i.center.x-i.radius-a),d.reflow(new _(h-u.width(),l,h,l))),l+=u.height()}}createVisual(){const{options:{connectors:t},points:e}=this,s=e.length,i=4;super.createVisual(),this._connectorLines=[];for(let n=0;n<s;n++){const o=e[n],{sector:a,label:l}=o,h=a.middle(),c=(o.options.connectors||{}).color||t.color;if(l){const d=new C({stroke:{color:c,width:t.width},animation:{type:zs,delay:o.animationDelay}});if(l.options.position===ii){const u=l.box,p=a.center;let g=a.point(h),f=new R(u.x1,u.center().y),x,y,v;g=a.clone().expand(t.padding).point(h),d.moveTo(g.x,g.y),l.orientation===G?(y=new R(u.x1-t.padding,u.center().y),v=wu(p,g,f,y),f=new R(y.x-i,y.y),v=v||f,v.x=Math.min(v.x,f.x),this.pointInCircle(v,a.center,a.radius+i)||v.x<a.center.x?(x=a.center.x+a.radius+i,o.options.labels.align!==Ve?x<f.x?d.lineTo(x,g.y):d.lineTo(g.x+i*2,g.y):d.lineTo(x,g.y),d.lineTo(f.x,y.y)):(v.y=y.y,d.lineTo(v.x,v.y))):(y=new R(u.x2+t.padding,u.center().y),v=wu(p,g,f,y),f=new R(y.x+i,y.y),v=v||f,v.x=Math.max(v.x,f.x),this.pointInCircle(v,a.center,a.radius+i)||v.x>a.center.x?(x=a.center.x-a.radius-i,o.options.labels.align!==Ve?x>f.x?d.lineTo(x,g.y):d.lineTo(g.x-i*2,g.y):d.lineTo(x,g.y),d.lineTo(f.x,y.y)):(v.y=y.y,d.lineTo(v.x,v.y))),d.lineTo(y.x,y.y),this._connectorLines.push(d),this.visual.append(d)}}}}renderVisual(){if(super.renderVisual(),hf(this.options.series,t=>t.autoFit)){const t=this.targetBox,e=this.box.center(),s=this.visual.bbox();if(!s)return;const i=s.bottomRight(),n=Math.min((e.y-t.y1)/(e.y-s.origin.y),(t.y2-e.y)/(i.y-e.y),(e.x-t.x1)/(e.x-s.origin.x),(t.x2-e.x)/(i.x-e.x));n<1&&this.visual.transform(K().scale(n,n,[e.x,e.y]))}}labelComparator(t){const e=t?-1:1;return function(s,i){const n=(s.parent.sector.middle()+270)%360,o=(i.parent.sector.middle()+270)%360;return(n-o)*e}}hAlignLabel(t,e,s,i,n){const{radius:o,center:{x:a,y:l}}=e,h=Math.min(Math.abs(l-s),Math.abs(l-i));return h>o?t:a+Math.sqrt(o*o-h*h)*(n?1:-1)}pointInCircle(t,e,s){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(s,2)}formatPointValue(t,e){return this.chartService.format.auto(e,t.value)}animationDelay(t){return t*M0}stackRoot(){return this}}function wu(r,t,e,s){const i=(s.x-e.x)*(r.y-e.y)-(s.y-e.y)*(r.x-e.x),n=(s.y-e.y)*(t.x-r.x)-(s.x-e.x)*(t.y-r.y);let o;if(n!==0){const a=i/n;o=new R(r.x+a*(t.x-r.x),r.y+a*(t.y-r.y))}return o}b(Co,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}});m(Co.prototype,Rm);Co.prototype.isStackRoot=!0;class Lm extends gs{render(){this.createPieChart(this.series)}createPieChart(t){const e=t[0],s=new Co(this,{series:t,padding:e.padding,startAngle:e.startAngle,connectors:e.connectors,legend:this.options.legend});this.appendChart(s)}appendChart(t,e){super.appendChart(t,e),gi(this.options.legend.data,t.legendItems)}getPointBelow(t){return this.getPointToTheRight(t)}getPointAbove(t){return this.getPointToTheLeft(t)}}class fa extends ko{reflowLabel(){const{options:{labels:t},label:e}=this,s=this.sector.clone(),i=s.middle();if(e){const n=e.box.height();if(t.position===O){s.radius-=(s.radius-s.innerRadius)/2;const o=s.point(i);e.reflow(new _(o.x,o.y-n/2,o.x,o.y))}else super.reflowLabel()}}createSegment(t,e){return Ni.current.createRing(t,e)}}b(fa,{overlay:{gradient:"roundedGlass"},labels:{position:O},animation:{type:Rs}});m(fa.prototype,Ce);const I0=50;class Om extends Co{addValue(t,e,s){const i=m({},s.series,{index:s.index});if(i.pattern=s.pattern||i.pattern,this.evalSegmentOptions(i,t,s),this.createLegendItem(t,i,s),s.visible===!1)return;const n=new fa(t,e,i);Object.assign(n,s),this.append(n),this.points.push(n)}reflow(t){const e=this.options,s=t.clone(),i=5,n=Math.min(s.width(),s.height()),o=n/2,a=n-n*.85,l=e.series,h=l.length;let c=L(e.padding,a);c=c>o-i?o-i:c;let d=o-c,u=0,p;for(let v=0;v<h;v++){const k=l[v];v===0&&A(k.holeSize)&&(p=k.holeSize,d-=k.holeSize),A(k.size)?d-=k.size:u++,A(k.margin)&&v!==h-1&&(d-=k.margin)}A(p)||(p=(o-c)/(h+.75)*.75,d-=p);let g=p,f=0,x,y;this.seriesConfigs=[];for(let v=0;v<h;v++){const k=l[v];x=L(k.size,d/u),g+=f,y=g+x,this.seriesConfigs.push({innerRadius:g,radius:y}),f=k.margin||0,g=y}super.reflow(t)}animationDelay(t,e,s){return t*I0+ge*(e+1)/(s+1)}}b(Om,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});class R0 extends Lm{render(){this.createDonutChart(this.series)}createDonutChart(t){const e=t[0],s=new Om(this,{series:t,padding:e.padding,connectors:e.connectors,legend:this.options.legend});this.appendChart(s)}getPointBelow(t){return this._getNextPoint(t,this._pointsByVertical,-1)}getPointAbove(t){return this._getNextPoint(t,this._pointsByVertical,1)}}const L0=.15;class Bm extends gs{initFields(){this.valueAxisRangeTracker=new Nr}render(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()}alignAxes(){const t=this.valueAxis,e=t.range(),s=t.options.reverse?e.max:e.min,i=t.getSlot(s),n=this.polarAxis.getSlot(0).center,o=t.box.translate(n.x-i.x1,n.y-i.y1);t.reflow(o)}createValueAxis(){const e=this.valueAxisRangeTracker.query(),s=this.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});let i,n;s.type===Dr?(i=Bf,n={min:.1,max:1}):(i=Of,n={min:0,max:1});const o=e||n,a=new i(o.min,o.max,s,this.chartService);this.valueAxis=a,this.appendAxis(a)}reflowAxes(){const{options:{plotArea:t},valueAxis:e,polarAxis:s,box:i}=this,n=Math.min(i.width(),i.height())*L0,o=X(t.padding||{},n),a=i.clone().unpad(o),l=a.clone();l.y2=l.y1+Math.min(l.width(),l.height()),l.align(a,P,O);const h=l.clone().shrink(0,l.height()/2);s.reflow(l),e.reflow(h);const c=e.lineBox().height()-e.box.height();e.reflow(e.box.unpad({top:c})),this.axisBox=l,this.alignAxes(l)}backgroundBox(){return this.box}detachLabels(){}}class gc extends pn{pointSlot(t,e){const s=t.center.y-e.y1,i=R.onCircle(t.center,t.startAngle,s);return new _(i.x,i.y,i.x,i.y)}}b(gc,{clip:!1});class ma extends pc{}ma.prototype.pointSlot=gc.prototype.pointSlot;b(ma,{clip:!1});class O0 extends ic{fillToAxes(t){const e=this._polarAxisCenter();t.lineTo(e.x,e.y)}_polarAxisCenter(){return this.parent.plotArea.polarAxis.box.center()}strokeSegments(){let t=this._strokeSegments;if(!t){const e=this._polarAxisCenter(),s=new ra(!1),i=this.points();i.push(e),t=this._strokeSegments=s.process(i),t.pop()}return t}}class B0 extends cn{fillToAxes(t){const s=this.parent.plotArea.polarAxis.box.center(),i=new Tt([s.x,s.y]);t.segments.unshift(i),t.segments.push(i)}}class D0 extends ma{createSegment(t,e,s){const i=(e.line||{}).style;let n;return i===nn?n=new O0(t,e,s):n=new B0(t,e,s),n}createMissingValue(t,e){let s;return Gt(t.x)&&e!==Hi&&(s={x:t.x,y:t.y},e===ns&&(s.y=0)),s}seriesMissingValues(t){return t.missingValues||ns}_hasMissingValuesGap(){const t=this.options.series;for(let e=0;e<t.length;e++)if(this.seriesMissingValues(t[e])===cu)return!0}sortPoints(t){if(t.sort(z0),this._hasMissingValuesGap())for(let e=0;e<t.length;e++){const s=t[e];if(s){const i=s.value;!Gt(i.y)&&this.seriesMissingValues(s.series)===cu&&delete t[e]}}return t}}function z0(r,t){return r.value.x-t.value.x}class fc extends Bm{createPolarAxis(){const t=new zh(this.options.xAxis,this.chartService);this.polarAxis=t,this.axisX=t,this.appendAxis(t)}render(){this.series=[...this.originalSeries],this.createTrendlineSeries(),super.render()}valueAxisOptions(t){return m(t,{majorGridLines:{type:Ss},minorGridLines:{type:Ss}},this.options.yAxis)}createValueAxis(){super.createValueAxis(),this.axisY=this.valueAxis}trendlineFactory(t,e){const s=So.prototype.trendlineFactory.call(this,t,e);return s&&(s.type=Br),s}appendChart(t,e){this.valueAxisRangeTracker.update(t.yAxisRanges),gs.prototype.appendChart.call(this,t,e)}createCharts(){const t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createLineChart(lt(t,[Br]),e),this.createScatterChart(lt(t,[Fh]),e),this.createAreaChart(lt(t,[Nh]),e)}createLineChart(t,e){if(t.length===0)return;const s=new ma(this,{series:t});this.appendChart(s,e)}createScatterChart(t,e){if(t.length===0)return;const s=new gc(this,{series:t});this.appendChart(s,e)}createAreaChart(t,e){if(t.length===0)return;const s=new D0(this,{series:t});this.appendChart(s,e)}_dispatchEvent(t,e,s){const i=t._eventCoordinates(e),n=new R(i.x,i.y),o=this.axisX.getValue(n),a=this.axisY.getValue(n);o!==null&&a!==null&&t.trigger(s,{element:Ae(e),x:o,y:a})}createCrosshairs(){}}b(fc,{xAxis:{},yAxis:{}});m(fc.prototype,bo,{seriesValues:So.prototype.seriesValues});function V0(r){const t=[];for(let e=0;e<r.length;e++){const s=r[e];t[s.seriesIx]=t[s.seriesIx]||[],t[s.seriesIx].push(s)}return t}class mc extends ca{pointSlot(t,e){const s=t.center.y-e.y1,i=R.onCircle(t.center,t.middle(),s);return new _(i.x,i.y,i.x,i.y)}renderSegments(){if(super.renderSegments(),this._segments&&this._segments.length>1){const t=V0(this._segments);for(let e=0;e<t.length;e++){const s=t[e];if(s&&s.length>1){const i=s[0].linePoints[0],n=pt(s),o=pt(n.linePoints),a=i.categoryIx===0,l=o.categoryIx===o.categoriesCount-1;a&&l&&pt(s).linePoints.push(i)}}}}createSegment(t,e,s){const i=e.style;let n;i===nn?n=tc:n=mi;const o=new n(t,e,s),a=this.seriesMissingValues(e);return(t.length===e.data.length||a===Hi)&&(o.options.closed=!0),o}}b(mc,{clip:!1,limitPoints:!1});class N0 extends ic{fillToAxes(){}}class F0 extends cn{fillToAxes(){}}class H0 extends mc{createSegment(t,e,s,i){const n=this.options.isStacked,o=(e.line||{}).style;let a,l,h;return n&&s>0&&i&&(l=i.linePoints.slice(0),a=i),o===nn?(h=new N0(t,e,s,a,l),h.options.closed=!0):(t.push(t[0]),h=new F0(t,e,s,a,l)),h}seriesMissingValues(t){return t.missingValues||ns}}class Dm extends fa{constructor(t,e){super(t,null,e)}getIndex(){return this.categoryIx}}b(Dm,{overlay:{gradient:"none"},labels:{distance:10}});class zm extends Y{constructor(t){super(t),this.forEach=t.rtl?nm:im}reflow(t){const{options:e,children:s}=this,{gap:i,spacing:n}=e,o=s.length,a=o+i+n*(o-1),l=t.angle/a;let h=t.startAngle+l*(i/2);this.forEach(s,c=>{const d=t.clone();d.startAngle=h,d.angle=l,c.sector&&(d.radius=c.sector.radius),c.reflow(d),c.sector=d,h+=l+l*n})}}b(zm,{gap:1,spacing:0});class U0 extends Y{reflow(t){const{options:{reverse:e},children:s}=this,i=s.length,n=e?i-1:0,o=e?-1:1;this.box=new _;for(let a=n;a>=0&&a<i;a+=o){const l=s[a].sector;l.startAngle=t.startAngle,l.angle=t.angle}}}class xc extends un{pointType(){return Dm}clusterType(){return zm}stackType(){return U0}categorySlot(t,e){return t.getSlot(e)}pointSlot(t,e){const s=t.clone(),i=t.center.y;return s.radius=i-e.y1,s.innerRadius=i-e.y2,s}reflowPoint(t,e){t.sector=e,t.reflow()}createAnimation(){this.options.animation.center=this.box.toRect().center(),super.createAnimation()}}xc.prototype.reflow=Hs.prototype.reflow;b(xc,{clip:!1,limitPoints:!1,animation:{type:"pie"}});class yc extends Bm{createPolarAxis(){const t=new Zn(this.options.categoryAxis,this.chartService);this.polarAxis=t,this.categoryAxis=t,this.appendAxis(t),this.aggregateCategories(),this.createTrendlineSeries(),this.createCategoryAxesLabels()}valueAxisOptions(t){return this._hasBarCharts&&m(t,{majorGridLines:{type:Ss},minorGridLines:{type:Ss}}),this._isStacked100&&m(t,{roundToMajorUnit:!1,labels:{format:"P0"}}),m(t,this.options.valueAxis)}aggregateCategories(){_e.prototype.aggregateCategories.call(this,this.panes)}createCategoryAxesLabels(){_e.prototype.createCategoryAxesLabels.call(this,this.panes)}filterSeries(t){return t}trendlineFactory(t,e){const s=_e.prototype.trendlineFactory.call(this,t,e);return s&&(s.type=ji),s}createCharts(){const t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createAreaChart(lt(t,[fo]),e),this.createLineChart(lt(t,[ji]),e),this.createBarChart(lt(t,[la]),e)}chartOptions(t){const e={series:t},s=t[0];if(s){const i=this.filterVisibleSeries(t),n=s.stack;e.isStacked=n&&i.length>1,e.isStacked100=n&&n.type==="100%"&&i.length>1,e.isStacked100&&(this._isStacked100=!0)}return e}createAreaChart(t,e){if(t.length===0)return;const s=new H0(this,this.chartOptions(t));this.appendChart(s,e)}createLineChart(t,e){if(t.length===0)return;const s=new mc(this,this.chartOptions(t));this.appendChart(s,e)}createBarChart(t,e){if(t.length===0)return;const s=t[0],i=this.chartOptions(t),n=this.filterVisibleSeries(t),o=n.some(h=>h.stack),a=n.some(h=>h.stack&&h.stack.type==="100%");i.gap=s.gap,i.spacing=s.spacing,i.defaultStack=s.stack&&n.length>1,i.isStacked=o&&n.length>1,i.isStacked100=a&&n.length>1;const l=new xc(this,i);this.appendChart(l,e),this._hasBarCharts=!0}seriesCategoryAxis(){return this.categoryAxis}_dispatchEvent(t,e,s){const i=t._eventCoordinates(e),n=new R(i.x,i.y),o=this.categoryAxis.getCategory(n),a=this.valueAxis.getValue(n);o!==null&&a!==null&&t.trigger(s,{element:Ae(e),category:o,value:a})}createCrosshairs(){}_pointsByVertical(t){return super._pointsByVertical(t).sort(this._getSeriesCompareFn())}_getSeriesCompareFn(){return(t,e)=>e.value-t.value}}m(yc.prototype,bo,{appendChart:_e.prototype.appendChart,aggregateSeries:_e.prototype.aggregateSeries,seriesSourcePoints:_e.prototype.seriesSourcePoints,seriesValues:_e.prototype.seriesValues});b(yc,{categoryAxis:{categories:[]},valueAxis:{}});class xa extends Y{constructor(t,e,s){super(e),this.value=t,this.options.index=s.index}getLabelText(t){let e=bt(t);return e?e(this.pointData()):t.format?this.formatValue(t.format):this.value}reflow(t){const e=this.points,s=this.children[0],i=Math.min(e[0].x,e[3].x),n=Math.max(e[1].x,e[2].x);this.box=new _(i,e[0].y,n,e[2].y),s&&s.reflow(new _(t.x1,e[0].y,t.x2,e[2].y))}createVisual(){const t=this.options;let e;super.createVisual(),this.addAccessibilityAttributesToVisual(),t.visual?e=t.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:t,sender:this.getSender(),createVisual:()=>this.createPath()}):e=this.createPath(),e&&this.visual.append(e)}createPath(){const t=this.options,e=t.border;return C.fromPoints(this.points,{fill:Ds(t.pattern,{color:t.color,opacity:t.opacity}),stroke:{color:e.color,opacity:e.opacity,width:e.width}}).close()}createHighlight(t){return C.fromPoints(this.points,t)}highlightVisual(){return this.visual.children[0]}highlightVisualArgs(){const t=C.fromPoints(this.points).close();return{options:this.options,path:t}}createFocusHighlight(t){const e=this.options.focusHighlight.border.width,s=C.fromPoints(this.points,m({},t,{stroke:{width:e*2}})).close(),i=new Wt;return i.paths.push(C.fromRect(this.box.clone().pad(e).toRect())),i.paths.push(C.fromPoints(this.points)),s.clip(i),s}tooltipAnchor(){const t=this.box;return{point:new R(t.center().x,t.y1),align:{horizontal:"center",vertical:"top"}}}formatValue(t){const e=this;return e.owner.formatPointValue(e,t)}pointData(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}}getIndex(){return this.index}}b(xa,{color:U,border:{width:1},labels:{format:""},accessibility:{role:Vs,className:Ns,ariaRoleDescription:Fs}});m(xa.prototype,Ce);m(xa.prototype,dn);class ya extends Y{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this.points=[],this.labels=[],this.legendItems=[],this.render()}formatPointValue(t,e){return this.plotArea.chartService.format.auto(e,t.value)}render(){const{options:e,plotArea:{options:{seriesColors:s=[]}}}=this,i=e.series[0],n=i.data;if(!n)return;const{total:o,points:a}=Qf(i);for(let l=0;l<a.length;l++){const h=a[l];if(!h)continue;let c=h.fields;rt(i.color)||(i.color=c.color||s[l%s.length]),c=m({index:l,owner:this,series:i,seriesIx:0,dataItem:n[l],percentage:h.value/o},c,{visible:h.visible});const d=h.valueFields.value,u=this.createSegment(d,c),p=this.createLabel(d,c);u&&p&&u.append(p)}}evalSegmentOptions(t,e,s){const i=s.series;as(t,{value:e,series:i,dataItem:s.dataItem,index:s.index},{defaults:i._defaults,excluded:["data","content","template","toggle","visual","ariaTemplate","ariaContent"]})}createSegment(t,e){const s=m({},e.series);if(s.pattern=e.pattern||s.pattern,this.evalSegmentOptions(s,t,e),this.createLegendItem(t,s,e),e.visible!==!1){const i=new xa(t,s,e);return Object.assign(i,e),this.append(i),this.points.push(i),i}}createLabel(t,e){const{series:s,dataItem:i}=e,n=m({},this.options.labels,s.labels);let o=t;if(n.visible){const a=bt(n),l={dataItem:i,value:t,percentage:e.percentage,category:e.category,series:s};a?o=a(l):n.format&&(o=this.chartService.format.auto(n.format,o)),n.color||(n.color=ea(s.color),n.background||(n.background=s.color)),this.evalSegmentOptions(n,t,e);const h=new qt(o,m({vAlign:n.position},n),l);return this.labels.push(h),h}}labelPadding(){const t=this.labels,e={left:0,right:0};for(let s=0;s<t.length;s++){const n=t[s].options.align;if(n!==O){const o=t[s].box.width();n===z?e.left=Math.max(e.left,o):e.right=Math.max(e.right,o)}}return e}dynamicSlopeReflow(t,e,s){const{options:i,points:n}=this,o=n.length,a=n[0];let l=a;for(let u=0;u<n.length;u++)n[u].percentage>l.percentage&&(l=n[u]);let h=a.percentage/l.percentage*e,c=(e-h)/2,d=0;for(let u=0;u<o;u++){const p=n[u].percentage,g=n[u+1],f=g?g.percentage:p,x=n[u].points=[],y=i.dynamicHeight?s*p:s/o;let v;p?v=(e-h*(f/p))/2:v=f?0:e/2,v=M(v,0,e),x.push(new w(t.x1+c,t.y1+d)),x.push(new w(t.x1+e-c,t.y1+d)),x.push(new w(t.x1+e-v,t.y1+y+d)),x.push(new w(t.x1+v,t.y1+y+d)),c=v,d+=y+i.segmentSpacing,h=M(e-2*v,0,e)}}constantSlopeReflow(t,e,s){const{options:i,points:n}=this,o=n.length,a=i.neckRatio<=1,l=a?i.neckRatio*e:e;let h=a?0:(e-e/i.neckRatio)/2;const d=((a?e:e-h*2)-l)/2;let u=0;for(let p=0;p<o;p++){const g=n[p].points=[],f=n[p].percentage,x=i.dynamicHeight?d*f:d/o,y=i.dynamicHeight?s*f:s/o;g.push(new w(t.x1+h,t.y1+u)),g.push(new w(t.x1+e-h,t.y1+u)),g.push(new w(t.x1+e-h-x,t.y1+y+u)),g.push(new w(t.x1+h+x,t.y1+y+u)),h+=x,u+=y+i.segmentSpacing}}reflow(t){const e=this.points,s=e.length;if(!s)return;const i=this.options,n=t.clone().unpad(this.labelPadding()),o=n.height()-i.segmentSpacing*(s-1),a=n.width();i.dynamicSlope?this.dynamicSlopeReflow(n,a,o):this.constantSlopeReflow(n,a,o);for(let l=0;l<s;l++)e[l].reflow(t)}}b(ya,{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:O,position:O,zIndex:1}});m(ya.prototype,Rm);const j0=1e6;class G0 extends ya{constructor(t,e){e.dynamicSlope=!1,e.neckRatio=j0,super(t,e)}}class $0 extends gs{render(){this.createChart(ya,lt(this.series,[Kn])),this.createChart(G0,lt(this.series,[Jn]))}createChart(t,e){const s=e[0];if(!s)return;const i=new t(this,{series:e,legend:this.options.legend,neckRatio:s.neckRatio,dynamicHeight:s.dynamicHeight,dynamicSlope:s.dynamicSlope,segmentSpacing:s.segmentSpacing,highlight:s.highlight});this.appendChart(i)}appendChart(t,e){super.appendChart(t,e),gi(this.options.legend.data,t.legendItems)}_pointsByVertical(t){return this.pointsBySeriesIndex(t.series.index)}getPointToTheRight(t){return this.getPointBelow(t)}getPointToTheLeft(t){return this.getPointAbove(t)}}const W0=(r,t=.05)=>{const e=Gr(r),s=1-t;return i=>{const n=e.toHSL(),o=100-n.l,a=s-i;return n.l+=Math.min(a*o,o),n.toCss()}};class Yi extends Y{constructor(t,e){super(),this.options=e,this.color=e.color||U,this.value=t}render(){this._rendered||(this._rendered=!0,this.createMarker(),this.createLabel(),this.createNote())}createLabel(){const e=this.options.labels;e.visible&&(this.label=this.createLabelElement(e),this.append(this.label))}createLabelElement(t){let e=t.color;return e||(e=ea(this.color)),new qt(this.getLabelText(t),m({align:O,vAlign:O,margin:{left:5,right:5},zIndex:L(t.zIndex,this.series.zIndex)},t,{color:e}),this.pointData())}getLabelText(t){let e=bt(t);return e?e(this.pointData()):this.formatValue(t.format)}formatValue(t){return this.owner.formatPointValue(this,t)}reflow(t){this.render();const e=this.label;this.box=t,e&&e.reflow(this.markerBox()),this.note&&this.note.reflow(t),this.marker.reflow(this.markerBox())}createVisual(){super.createVisual(),this.addAccessibilityAttributesToVisual()}markerBox(){const e=this.options.markers,s=e.border,i=this.box.toRect(),o=L(e.type,"rect")===ef;let a=L(s.width,o?1:0);const l=Math.round(a/2);if(e.size){const h=i.center();i.size.width=i.size.height=e.size,i.origin.x=Math.round(h.x-i.size.width/2),i.origin.y=Math.round(h.y-i.size.height/2)}return i.size.width-=a,i.size.height-=a,i.origin.y+=l+.5,i.origin.x+=l+.5,Fi(i)}markerBorder(){const t=this.options,s=t.markers.border,i=L(s.opacity,t.opacity);return{color:s.color||this.color,width:s.width,opacity:i,dashType:s.dashType}}createMarker(){const t=this.options,e=t.markers,s=new Et({type:L(e.type,"rect"),width:e.size,height:e.size,rotation:e.rotation,background:this.color,border:this.markerBorder(),pattern:t.pattern,borderRadius:e.borderRadius,opacity:this.series.opacity||t.opacity,zIndex:L(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=s,this.append(s)}createHighlight(t){const e=this.options,s=this.options.highlight.markers||this.options.markers,i=new Et({type:L(s.type,"rect"),width:s.size,height:s.size,rotation:s.rotation,background:s.color||this.color,border:this.markerBorder(),borderRadius:s.borderRadius,opacity:this.series.opacity||e.opacity,zIndex:L(e.zIndex,this.series.zIndex)});i.reflow(this.markerBox());const n=i.getElement();return n.options.fill=t.fill,n.options.stroke=t.stroke,n}highlightVisual(){return this.rectVisual}highlightVisualArgs(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}}createFocusHighlight(){const t=this.options.markers,e=this.options.focusHighlight,s=new Et({type:L(t.type,"rect"),width:t.size,height:t.size,rotation:t.rotation,background:e.color,border:e.border,borderRadius:t.borderRadius,padding:e.border.width/2,zIndex:e.zIndex});return s.reflow(this.markerBox()),s.getElement()}tooltipAnchor(){const t=this.box.center().x,e=this.box.y1-we;return{point:new R(t,e),align:{horizontal:O,vertical:j}}}overlapsBox(t){return this.box.overlaps(t)}unclipElements(){}pointData(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}}}m(Yi.prototype,Ce);m(Yi.prototype,hn);m(Yi.prototype,dn);Yi.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:!1,padding:3},opacity:1,notes:{label:{}},accessibility:{role:Vs,className:Ns,ariaRoleDescription:Fs}};class Vm extends Y{constructor(t,e){super(e),this.plotArea=t,this.chartService=t.chartService,this._initFields(),this.render()}_initFields(){this.points=[],this.seriesOptions=[],this.valueRange={min:gt,max:vt},this._evalSeries=[]}render(){this.setRange(),this.traverseDataPoints(this.addValue.bind(this))}setRange(){const{options:{series:t}}=this;for(let e=0;e<t.length;e++){const s=t[e];for(let i=0;i<s.data.length;i++){const{valueFields:n}=this.plotArea.bindPoint(s,i);A(n.value)&&n.value!==null&&(this.valueRange.min=Math.min(this.valueRange.min,n.value),this.valueRange.max=Math.max(this.valueRange.max,n.value))}}}addValue(t,e){let s;t&&A(t.value)&&t.value!==null&&(s=this.createPoint(t,e),s&&Object.assign(s,e)),this.points.push(s)}evalPointOptions(t,e,s){const{series:i,seriesIx:n}=s,o={defaults:i._defaults,excluded:["data","tooltip","content","template","visual","toggle","drilldownSeriesFactory","ariaTemplate","ariaContent"]};let a=this._evalSeries[n];A(a)||(this._evalSeries[n]=a=as(t,{},o,!0));let l=t;return a&&(l=m({},t),as(l,{value:e,series:i,dataItem:s.dataItem,min:this.valueRange.min,max:this.valueRange.max},o)),l}pointType(){return Yi}pointOptions(t,e){let s=this.seriesOptions[e];if(!s){const i=this.pointType().prototype.defaults;this.seriesOptions[e]=s=m({},i,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return Object.assign({},s)}createPoint(t,e){const s=e.series;let i=this.pointOptions(s,e.seriesIx),n=e.color||s.color;i.pattern=e.pattern||i.pattern,i=this.evalPointOptions(i,t,e),rt(s.color)?n=i.color:this.valueRange.max!==0&&(n=W0(n)(t.value/this.valueRange.max));const o=new Yi(t,i);return o.color=n,this.append(o),o}seriesAxes(t){const{xAxis:e,yAxis:s}=t,i=this.plotArea,n=e?i.namedXAxes[e]:i.axisX,o=s?i.namedYAxes[s]:i.axisY;if(!n)throw new Error("Unable to locate X axis with name "+e);if(!o)throw new Error("Unable to locate Y axis with name "+s);return{xAxis:n,yAxis:o}}reflow(t){const e=this.points,s=!this.options.clip;let i=0;this.traverseDataPoints((n,o)=>{const a=e[i++],{xAxis:l,yAxis:h}=this.seriesAxes(o.series),c=l.categoryIndex(n.x),d=h.categoryIndex(n.y),u=l.getSlot(c,c,s),p=h.getSlot(d,d,s);if(a)if(u&&p){const g=this.pointSlot(u,p);a.reflow(g)}else a.visible=!1}),this.box=t}pointSlot(t,e){return new _(t.x1,e.y1,t.x2,e.y2)}traverseDataPoints(t){const{options:{series:e}}=this;for(let s=0;s<e.length;s++){const i=e[s],{xAxis:n,yAxis:o}=this.seriesAxes(i),a=n.currentRangeIndices(),l=o.currentRangeIndices();for(let h=0;h<i.data.length;h++){const{valueFields:c,fields:d}=this.plotArea.bindPoint(i,h),u=n.totalIndex(c.x),p=o.totalIndex(c.y),g=a.min<=u&&u<=a.max,f=l.min<=p&&p<=l.max;g&&f&&t(c,m({pointIx:h,series:i,seriesIx:s,dataItem:i.data[h],owner:this},d))}}}formatPointValue(t,e){const s=t.value;return this.chartService.format.auto(e,s.x,s.y,s.value)}animationPoints(){const t=this.points,e=[];for(let s=0;s<t.length;s++)e.push((t[s]||{}).marker);return e}}b(Vm,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:!0});class vc extends gs{initFields(){this.namedXAxes={},this.namedYAxes={}}render(t=this.panes){this.bindCategories(),this.createAxes(t),this.createCharts(t),this.createAxisLabels()}bindCategories(){const t=this.srcSeries||this.series;for(let e=0;e<t.length;e++){const s=t[e],i=s.data||[],{xAxis:n,yAxis:o}=this.seriesAxes(s),a=Nd(n.categories||[]),l=Nd(o.categories||[]);for(let h=0;h<i.length;h++){const{x:c,y:d}=et.current.bindPoint(s,h).valueFields;a.has(c)||a.add(c),l.has(d)||l.add(d)}n.categories=a.values(),o.categories=l.values()}}createCharts(t){const e=this.groupSeriesByPane();for(let s=0;s<t.length;s++){const i=t[s],n=e[i.options.name||"default"]||[];this.addToLegend(n);const o=this.filterVisibleSeries(n);o&&this.createHeatmapChart(lt(o,[Vh]),i)}}createHeatmapChart(t,e){const s=new Vm(this,{series:t});this.appendChart(s,e)}seriesPaneName(t){const e=this.options,s=t.xAxis,i=[].concat(e.xAxis),n=te(i,function(u){return u.name===s})[0],o=t.yAxis,a=[].concat(e.yAxis),l=te(a,function(u){return u.name===o})[0],c=(e.panes||[{}])[0].name||"default";return(n||{}).pane||(l||{}).pane||c}seriesAxes(t){let e,s;const i=this.options,n=[].concat(i.xAxis),o=t.xAxis;o?e=n.find(h=>h.name===o):e=n[0];const a=[].concat(i.yAxis),l=t.yAxis;if(l?s=a.find(h=>h.name===l):s=a[0],!e)throw new Error("Unable to locate X axis with name "+o);if(!s)throw new Error("Unable to locate Y axis with name "+l);return{xAxis:e,yAxis:s}}createAxisLabels(){const t=this.axes;for(let e=0;e<t.length;e++)t[e].createLabels()}createXYAxis(t,e,s){const i=t.name,n=e?this.namedYAxes:this.namedXAxes,o=Object.assign({axisCrossingValue:0},t,{vertical:e,reverse:e||this.chartService.rtl?!t.reverse:t.reverse,justified:!1}),a=o.categories?o.categories[0]:null,l=[o.min,o.max,a],h=this.series;for(let p=0;p<h.length;p++){const g=h[p],f=g[e?"yAxis":"xAxis"];if(f===o.name||s===0&&!f){const x=et.current.bindPoint(g,0).valueFields;l.push(x[e?"y":"x"]);break}}let c;for(let p=0;p<l.length;p++)if(l[p]instanceof Date){c=!0;break}let d;Ye(o.type,Je)||!o.type&&c?d=fi:d=pe;const u=new d(o,this.chartService);if(u.axisIndex=s,i){if(n[i])throw new Error(`${e?"Y":"X"} axis with name ${i} is already defined`);n[i]=u}return this.appendAxis(u),u.indexCategories(),u}createAxes(t){const e=this.options,s=[].concat(e.xAxis),i=[],n=[].concat(e.yAxis),o=[];for(let a=0;a<s.length;a++){const l=this.findPane(s[a].pane);D(l,t)&&i.push(this.createXYAxis(s[a],!1,a))}for(let a=0;a<n.length;a++){const l=this.findPane(n[a].pane);D(l,t)&&o.push(this.createXYAxis(n[a],!0,a))}this.axisX=this.axisX||i[0],this.axisY=this.axisY||o[0]}removeAxis(t){const e=t.options.name;super.removeAxis(t),t.options.vertical?delete this.namedYAxes[e]:delete this.namedXAxes[e],t===this.axisX&&delete this.axisX,t===this.axisY&&delete this.axisY}_dispatchEvent(t,e,s){const i=t._eventCoordinates(e),n=new R(i.x,i.y),o=this.axes,a=o.length,l=[],h=[];for(let c=0;c<a;c++){const d=o[c],u=d.options.vertical?h:l;ir(u,d.getCategory(n))}l.length>0&&h.length>0&&t.trigger(s,{element:Ae(e),originalEvent:e,x:Xi(l),y:Xi(h)})}updateAxisOptions(t,e){const s=t.options.vertical,i=this.groupAxes(this.panes),n=(s?i.y:i.x).indexOf(t);_u(this.options,n,s,e),_u(this.originalOptions,n,s,e)}crosshairOptions(t){return Object.assign({},t.options.crosshair,{zIndex:0})}_pointsByVertical(t,e=0){const s=this.axisX.options.reverse?e*-1:e,i=this.axisX.children;let n=this._getPointAxisXIndex(t)+s;n=Ar(n,i.length);const o=i[n].value,a=this.filterPoints(l=>Za(l.pointData().x,o)).sort((l,h)=>this._getPointAxisYIndex(l)-this._getPointAxisYIndex(h));return this.axisY.options.reverse?a.reverse():a}_pointsByHorizontal(t,e=0){const s=this.axisY.options.reverse?e*-1:e,i=this.axisY.children;let n=this._getPointAxisYIndex(t)+s;n=Ar(n,i.length);const o=i[n].value,a=this.filterPoints(l=>Za(l.pointData().y,o)).sort((l,h)=>this._getPointAxisXIndex(l)-this._getPointAxisXIndex(h));return this.axisX.options.reverse?a.reverse():a}_getPointAxisXIndex(t){return this._getPointAxisIndex(this.axisX,t.pointData().x)}_getPointAxisYIndex(t){return this._getPointAxisIndex(this.axisY,t.pointData().y)}_getPointAxisIndex(t,e){return t.children.findIndex(s=>Za(e,s.value))}}function Za(r,t){return r instanceof Date&&t instanceof Date?Pr(r,t):r===t}function _u(r,t,e,s){const i=[].concat(e?r.yAxis:r.xAxis)[t];m(i,s)}b(vc,{xAxis:{},yAxis:{}});m(vc.prototype,bo);const oe="color",ee="first",X0="from",Dt="max",bc="min",fs="noteText",Y0="summary",q0="to";Se.current.register(_e,[fe,Ve,rs,ei,os,ti,rn,an,Is,xo,go,Wi,mo,$i,yo,Ui,Gi,si,...ln]);Se.current.register(So,[Hh,Uh,on,...ln]);Se.current.register(Lm,[Rs]);Se.current.register(R0,[Or]);Se.current.register($0,[Kn,Jn]);Se.current.register(fc,[Nh,Br,Fh,...ln]);Se.current.register(yc,[fo,la,ji,...ln]);Se.current.register(vc,[Vh]);et.current.register([fe,Ve,rs,ei,os,ti],[Qt],[ke,oe,fs,Vf,Nf,us,ye]);et.current.register([mo,$i,Gi,si],[X0,q0],[ke,oe,fs,us,ye]);et.current.register([yo,Ui],[Qt],[ke,oe,fs,Y0,us,ye]);et.current.register([Nh,Br,Fh],[T,P],[oe,us,ye]);et.current.register([fo,la,ji],[Qt],[ke,oe,us,ye]);et.current.register([Kn,Jn],[Qt],[ke,oe,"visibleInLegend","visible",us,ye]);ls.current.register([fe,Ve,rs,ei,os,ti,yo,Ui],{value:Dt,color:ee,noteText:ee,errorLow:bc,errorHigh:Dt});ls.current.register([mo,$i,Gi,si],{from:bc,to:Dt,color:ee,noteText:ee});ls.current.register([fo,la,ji],{value:Dt,color:ee});et.current.register([Hh,Uh,on],[T,P],[oe,fs,Xw,Yw,qw,Zw]);et.current.register([on],[T,P,"size"],[oe,ke,fs,ye]);et.current.register([Vh],[T,P,Qt],[oe,fs,ye]);et.current.register([rn,an],["open","high","low","close"],[ke,oe,"downColor",fs,ye]);ls.current.register([rn,an],{open:Dt,high:Dt,low:bc,close:Dt,color:ee,downColor:ee,noteText:ee});et.current.register([go,Wi],["lower","q1","median","q3","upper","mean","outliers"],[ke,oe,fs,us,ye]);ls.current.register([go,Wi],{lower:Dt,q1:Dt,median:Dt,q3:Dt,upper:Dt,mean:Dt,outliers:ee,color:ee,noteText:ee});et.current.register([Is,xo],["current","target"],[ke,oe,"visibleInLegend",fs,us,ye]);ls.current.register([Is,xo],{current:Dt,target:Dt,color:ee,noteText:ee});et.current.register([Rs,Or],[Qt],[ke,oe,"explode","visibleInLegend","visible",us,ye]);function Z0(r,t,e){const s=getComputedStyle(r),i=new Map;e.forEach(l=>{i.set(l,s.getPropertyValue(l))});let n=!1;const o=()=>{if(!r.isConnected)return;let l=!1;e.forEach(h=>{const c=s.getPropertyValue(h);i.get(h)!==c&&(i.set(h,c),l=!0)}),l&&t()},a=setInterval(()=>{n||(n=!0,requestAnimationFrame(()=>{n=!1,o()}))},500);return{disconnect:()=>{clearInterval(a),i.clear()}}}const Nm=30,Bl="--kendo-chart-series-",To=r=>r.ownerDocument.defaultView.getComputedStyle(r),Qa={},Q0=(r,t)=>{if(Qa[r])return Qa[r];const e=t.style.color;t.style.color=r;const s=To(t).color;return t.style.color=e,Qa[r]=s,s},Bt=(r,t)=>{let e=To(r).getPropertyValue(t);return/^color-mix/i.test(e)&&(e=Q0(e,r)),e},Ka=(r,t)=>parseFloat(To(r).getPropertyValue(t)),va=(r,t,e,s)=>{const i=To(r);return[i.getPropertyValue(t),i.getPropertyValue(e),i.getPropertyValue(s)||i.fontFamily].join(" ")},wc={};for(let r=1;r<=Nm;r++)wc[`series-color-${r}`]=`${Bl}${r}`;const K0=r=>{const t=To(r),e=[];let s=1,i=t.getPropertyValue(`${Bl}${s}`);for(;i||s<=Nm;)e.push(i),s++,i=t.getPropertyValue(`${Bl}${s}`);return e},hs={text:"--kendo-chart-text",chartBg:"--kendo-chart-bg",fontWeight:"--kendo-font-weight",fontFamily:"--kendo-font-family"},ts={majorLines:"--kendo-chart-major-lines",minorLines:"--kendo-chart-minor-lines",areaOpacity:"--kendo-chart-area-opacity",surface:"--kendo-color-surface",primaryBg:"--kendo-chart-primary-bg",crosshairBg:"--kendo-chart-crosshair-bg",axisLabelFontSize:"--kendo-chart-label-font-size",axisLabelFontWeight:"--kendo-font-weight",axisLabelFontFamily:"--kendo-font-family",chartFontSize:"--kendo-chart-font-size",paneTitleFontSize:"--kendo-chart-pane-title-font-size",paneTitleFontWeight:"--kendo-chart-pane-title-font-weight",titleFontSize:"--kendo-chart-title-font-size",titleFontWeight:"--kendo-font-weight",errorBarsBg:"--kendo-chart-error-bars-bg",areaInactiveOpacity:"--kendo-chart-area-inactive-opacity",lineInactiveOpacity:"--kendo-chart-line-inactive-opacity",bulletTarget:"--kendo-chart-bullet-target",notesBg:"--kendo-chart-notes-bg",notesBorder:"--kendo-chart-notes-border",notesLines:"--kendo-chart-notes-lines",inactive:"--kendo-chart-inactive"},J0={linksColor:"--kendo-color-subtle"},t_={gaugePointer:"--kendo-chart-gauge-pointer",gaugeTrack:"--kendo-chart-gauge-track"},_c=r=>va(r,hs.fontWeight,ts.chartFontSize,hs.fontFamily),Au=r=>va(r,ts.paneTitleFontWeight,ts.paneTitleFontSize,hs.fontFamily),Ac=r=>Bt(r,hs.text),e_=r=>({color:Ac(r),font:va(r,hs.fontWeight,ts.titleFontSize,hs.fontFamily)}),s_=r=>{const t=Ac(r);return{labels:{color:t,font:_c(r)},title:{color:t}}},i_=r=>{const t=Bt(r,ts.inactive);return Object.assign({},{inactiveItems:{labels:{color:t},markers:{color:t}}},s_(r))},Fm=Object.assign({},hs,ts,wc);Object.assign({},hs,J0,wc);const n_=Object.assign({},hs,t_),PC=r=>{const t=n_,e=Ac(r);return{pointer:{color:Bt(r,t.gaugePointer)},scale:{labels:{color:e},rangePlaceholderColor:Bt(r,t.gaugeTrack),minorTicks:{color:e},majorTicks:{color:e},line:{color:e}}}},o_=r=>({icon:{background:Bt(r,ts.notesBg),border:{color:Bt(r,ts.notesBorder)}},line:{color:Bt(r,ts.notesLines)},label:{font:_c(r)}}),EC=r=>{const t=Fm,e=Bt(r,t.majorLines),s=Bt(r,t.text),i=va(r,t.axisLabelFontWeight,t.axisLabelFontSize,t.axisLabelFontFamily),n=Bt(r,t.chartBg),o=o_(r),a=Ka(r,t.areaOpacity),l=Bt(r,t.surface),h=Bt(r,t.primaryBg),c=()=>({downColor:e,mean:{color:l},median:{color:l},whiskers:{color:h}}),d=()=>({line:{color:e}}),u=()=>({opacity:a,highlight:{inactiveOpacity:Ka(r,t.areaInactiveOpacity)}}),p=()=>({highlight:{inactiveOpacity:Ka(r,t.lineInactiveOpacity)}}),g=()=>({target:{color:s}});return{axisDefaults:{crosshair:{color:Bt(r,t.crosshairBg)},labels:{color:s,font:i},line:{color:e},majorGridLines:{color:e},minorGridLines:{color:Bt(r,t.minorLines)},notes:structuredClone(o),title:{color:s,font:_c(r)}},chartArea:{background:n},legend:i_(r),seriesColors:K0(r),seriesDefaults:{area:u(),verticalArea:u(),radarArea:u(),boxPlot:c(),verticalBoxPlot:c(),bullet:g(),verticalBullet:g(),horizontalWaterfall:d(),waterfall:d(),line:p(),verticalLine:p(),candlestick:{downColor:s,line:{color:s}},errorBars:{color:Bt(r,t.errorBarsBg)},icon:{border:{color:e}},labels:{background:n,color:s,font:i,opacity:a},notes:structuredClone(o)},subtitle:{color:s,font:Au(r)},title:e_(r),paneDefaults:{title:{font:Au(r)}}}},Dl=[ke,Qt,T,P],Su="mousedown",$s="mousemove",ku="contextmenu",Cu="mouseleave",Tu="keydown",Pu="focus",Eu="blur",r_=20,Mu="k-chart-overlay-top";class Sc{constructor(t,e,s,i={}){this.observers=[],this.addObserver(i.observer),this.chartService=new Th(this,i),this.chartService.theme=s,this._initElement(t);const n=m({},this.options,e);this._originalOptions=m({},n),this._theme=s,this._initTheme(n,s),this._focusState={},this._initHandlers(),this._createSurface=i.createSurface||ai.create.bind(ai),this._initSurface(),this.bindCategories(),zn.preloadFonts(e,()=>{this.fontLoaded=!0,this._destroyed||(this.trigger("init"),this._redraw(),this._attachEvents(),this._restoreOverlayElement(),this._initStyleObserver())})}_initStyleObserver(){this._destroyStyleObserver(),this.options.observeStyles&&(this._stylesObserver=Z0(this.element,()=>{this.trigger("styleChanged")},Object.values(Fm)))}_destroyStyleObserver(){this._stylesObserver&&(this._stylesObserver.disconnect(),this._stylesObserver=null)}_initElement(t){this._setElementClass(t),t.style.position="relative",t.tabIndex=t.getAttribute("tabindex")?t.getAttribute("tabindex"):0,t.setAttribute("role","graphics-document document");for(let e=t.childNodes.length-1;e>=0;e--){const s=t.childNodes[e];qn(s,"k-chart-overlay")?this.overlayElement=s:t.removeChild(s)}this.element=t}_setElementClass(t){dt(t,"k-chart")}_restoreOverlayElement(){this.overlayElement&&(this._hasSeriesData()?this.overlayElement.style.display="none":(!this.options.title||this.options.title&&this.options.title.position!==j?dt(this.overlayElement,Mu):Jr(this.overlayElement,Mu),this.overlayElement.style.display=""),this.overlayElement.parentElement!==this.element&&this.element.appendChild(this.overlayElement))}_hasSeriesData(){const t=this.options.series||[];return t.length>0&&t.some(s=>s.data&&s.data.length>0)}_initTheme(t,e){const s=[],i=t.series||[];for(let n=0;n<i.length;n++)s.push(Object.assign({},i[n]));t.series=s,a_(t),this.applyDefaults(t,e),t.seriesColors===null&&delete t.seriesColors,Yt(t.title)&&(t.title={text:t.title}),this.options=m({},e,t),this.applySeriesColors()}getSize(){const t=this.options.chartArea||{},e=t.width?parseInt(t.width,10):Math.floor(this.element.offsetWidth),s=t.height?parseInt(t.height,10):Math.floor(this.element.offsetHeight);return{width:e,height:s}}resize(t){const e=this.getSize(),s=this._size,i=e.width>0||e.height>0;t||i&&(!s||e.width!==s.width||e.height!==s.height)?(this._size=e,this._resize(e,t),this.trigger("resize",e)):i&&this._selections&&hf(this._selections,n=>!n.visible)&&(this._destroySelections(),this._setupSelection())}_resize(){this._noTransitionsRedraw()}redraw(t){if(this.applyDefaults(this.options),this.applySeriesColors(),t){const e=this._model._plotArea,s=e.findPane(t);e.redraw(s)}else this._redraw()}getAxis(t){return Df(t,this._plotArea.axes)}findAxisByName(t){return this.getAxis(t)}findPaneByName(t){const e=this._plotArea.panes;for(let s=0;s<e.length;s++)if(e[s].options.name===t)return new kl(e[s])}findPaneByIndex(t){const e=this._plotArea.panes;if(e[t])return new kl(e[t])}plotArea(){return new Fw(this._plotArea)}toggleHighlight(t,e){const s=this._plotArea,i=(s.srcSeries||s.series||[])[0];let n;if(rt(e))n=s.filterPoints(e);else{let o,a;me(e)?(o=e.series,a=e.category):o=a=e,i.type===Or?n=Iu(s.pointsBySeriesName(o),a):D(i.type,[Rs,Kn,Jn])?n=Iu((s.charts[0]||{}).points,a):n=s.pointsBySeriesName(o)}n&&this.togglePointsHighlight(t,n)}togglePointsHighlight(t,e){const s=this._highlight;for(let i=0;i<e.length;i++)s.togglePointHighlight(e[i],t)}showTooltip(t){const e=this._sharedTooltip(),{_tooltip:s,_plotArea:i}=this;let n,o;if(rt(t)?(n=i.findPoint(t),n&&e&&(o=n.categoryIx)):e&&A(t)&&(o=i.categoryAxis.categoryIndex(t)),e){if(o>=0){const a=this._plotArea.pointsByCategoryIndex(o);s.showAt(a)}}else n&&s.show(n)}hideTooltip(){this._tooltip.hide()}_initSurface(){const t=this.surface,e=this._surfaceWrap(),s=this.options.chartArea||{};s.width&&We(e,{width:s.width}),s.height&&We(e,{height:s.height}),!t||t.options.type!==this.options.renderAs?(this._destroySurface(),this.surface=this._createSurface(e,{type:this.options.renderAs}),this.surface.bind("mouseenter",this._surfaceMouseenterHandler),this.surface.bind("mouseleave",this._surfaceMouseleaveHandler)):(this.surface.clear(),this.surface.resize()),this.element._kendoExportVisual=this._kendoExportVisual.bind(this)}_surfaceWrap(){return this.element}_redraw(){const t=this._getModel();this._size={width:t.options.width,height:t.options.height},this._destroyView(),this._setElementAccessibilityAttributes(),this._model=t,this._plotArea=t._plotArea,this._legend=t._legend,t.renderVisual();const e=this.options.transitions;e!==!1&&t.traverse(function(s){if(s.animation){const i=e&&e!==!0?e.loading:e;s.animation.options=Object.assign({},s.animation.options,i),s.animation.setup()}}),this._initSurface(),this.surface.draw(t.visual),e!==!1&&t.traverse(function(s){s.animation&&s.animation.play()}),this._tooltip=this._createTooltip(),this._highlight=new t0,this._setupSelection(),this._createPannable(),this._createZoomSelection(),this._createMousewheelZoom(),this._setComputedStyles(),this.trigger(t1),Lu(this._plotArea.panes),this._navState||this._cancelDomEvents(),this._redrawFocusHighlight()}_setComputedStyles(){const t=this.titleHeight();this.element.style.setProperty("--kendo-chart-computed-title-height",`${t}px`)}_redrawFocusHighlight(){if(this._destroyed)return;const{_focusState:{legendInFocus:t,preserveHighlight:e}}=this;t&&e&&(this._focusElement(this._getFocusedLegendItem(),!1),this._focusState.preserveHighlight=!1)}_setElementAccessibilityAttributes(){let t=this.options.title,e=Yt(t)?t:t.description||t.text;e&&this.element.setAttribute("aria-roledescription",e)}_kendoExportVisual(t){if(t&&t.width&&t.height){const e=this._originalOptions.chartArea||{},s={width:e.width||t.width,height:e.height||t.height};return this.exportVisual(s)}return this.exportVisual()}exportVisual(t){let e;if(t&&(t.width||t.height||t.options)){const s=this.options,i=m({},t.options,{chartArea:{width:t.width,height:t.height}});zl(this._originalOptions,i),this.options=m({},this._originalOptions,i),this._initTheme(this.options,this._theme),this.bindCategories();const n=this._getModel();n.renderVisual(),Lu(n._plotArea.panes),e=n.visual,this.options=s}else e=this.surface.exportVisual();return e}_sharedTooltip(){return this._plotArea instanceof _e&&this.options.tooltip&&this.options.tooltip.shared}_createPannable(){const t=this.options;t.pannable!==!1&&(this._pannable=new wm(this._plotArea,t.pannable))}_createZoomSelection(){const t=this.options.zoomable,e=(t||{}).selection;t!==!1&&e!==!1&&(this._zoomSelection=new _m(this,e))}_createMousewheelZoom(){const t=this.options.zoomable,e=(t||{}).mousewheel;t!==!1&&e!==!1&&(this._mousewheelZoom=new o0(this,e))}_toggleDragZoomEvents(){const t=this.options.pannable,e=this.options.zoomable,s=(e||{}).selection,i=(e||{}).mousewheel,n=!t&&(e===!1||s===!1)&&!this.requiresHandlers([Wa,Mn,In]),o=(e===!1||i===!1)&&!this.requiresHandlers([bn,Ti,Pi]),a=this.element;this._dragZoomEnabled&&n&&o?(a.style.touchAction=this._touchAction||"",this._dragZoomEnabled=!1):!this._dragZoomEnabled&&!(n&&o)&&(a.style.touchAction="none",this._dragZoomEnabled=!0),this._toggleDomEvents(!n,!o)}_toggleDomEvents(t,e){const s=this.domEvents;s&&(s.toggleDrag&&s.toggleDrag(t),s.toggleZoom&&s.toggleZoom(e))}_createTooltip(){const{options:{tooltip:t}}=this;let e;return this._sharedTooltip()?e=this._createSharedTooltip(t):e=new c0(this.chartService,t),e}_createSharedTooltip(t){return new uc(this._plotArea,t)}applyDefaults(t,e){l_(t,e),h_(t,e)}applySeriesColors(){const t=this.options,e=t.series,s=t.seriesColors||[];for(let i=0;i<e.length;i++){const n=e[i],o=s[i%s.length],a=n._defaults;n.color=n.color||o,a&&(a.color=a.color||o)}}_getModel(){const t=this.options,e=this._createPlotArea(),s=new xf(this._modelOptions());s.chart=this,s._plotArea=e;const i=Oi.buildTitle(t.title),n=Oi.buildTitle(t.subtitle,{align:t.title.align,position:t.title.position});if(s.append.apply(s,Oi.orderTitles([i,n])),t.legend&&t.legend.visible){const o=new cc(e.options.legend,this.chartService);s.append(o),s._legend=o}return s.append(e),s.reflow(),this._setTitleBox(i,n),s}_setTitleBox(t,e){if(!t&&!e)return;this._titleBox=(t||e).box.clone();const s=t?t.options.position:"",i=e?e.options.position:"";s===i&&e?this._titleBox.wrap(e.box):t&&e&&i!==j&&(this._titleBox=e.box.clone())}_modelOptions(){const t=this.options,e=this.getSize();return m({transitions:t.transitions,width:e.width||vh,height:e.height||Kg},t.chartArea)}_createPlotArea(t){const e=this.options;return Se.current.create(t?[]:e.series,e,this.chartService)}_setupSelection(){const{_plotArea:{axes:t}}=this,e=this._selections=[];for(let s=0;s<t.length;s++){const i=t[s],n=i.options;if(i instanceof pe&&n.select&&!n.vertical){const o=i.range(),a=new dc(this,i,m({min:o.min,max:o.max},n.select));e.push(a)}}}_selectStart(t){return this.trigger(El,t)}_select(t){return this.trigger(Rn,t)}_selectEnd(t){return this.trigger(Ml,t)}_initHandlers(){this._clickHandler=this._click.bind(this),this._keydownHandler=this._keydown.bind(this),this._focusHandler=this._focus.bind(this),this._blurHandler=this._blur.bind(this),this._mousedownHandler=this._mousedown.bind(this),this._mousewheelHandler=this._mousewheel.bind(this),this._mouseleaveHandler=this._mouseleave.bind(this),this._surfaceMouseenterHandler=this._mouseover.bind(this),this._surfaceMouseleaveHandler=this._mouseout.bind(this),this._mousemoveThrottled=Ur(this._mousemove.bind(this),r_)}addObserver(t){t&&this.observers.push(t)}removeObserver(t){const e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)}requiresHandlers(t){const e=this.observers;for(let s=0;s<e.length;s++)if(e[s].requiresHandlers(t))return!0}trigger(t,e={}){e.sender=this,t===Xf?e.anchor.point=this._toDocumentCoordinates(e.anchor.point):t===Gf?this._updateDrilldownPoint(e.point):t===$f?this._resetDrilldownPoint():t===Uf?(this._focusPoint(e.point),this._startDrilldown(e.point)):t===Hf&&this._focusLegendItem(e);const s=this.observers;let i=!1;for(let n=0;n<s.length;n++)s[n].trigger(t,e)&&(i=!0);return i}titleHeight(){return this._titleBox?this._titleBox.height():0}_attachEvents(){const t=this.element;this._touchAction=t.style.touchAction,Pn(t,{[ku]:this._clickHandler,[Vr]:this._mousewheelHandler,[Cu]:this._mouseleaveHandler,[Tu]:this._keydownHandler,[Su]:this._mousedownHandler,[Pu]:this._focusHandler,[Eu]:this._blurHandler}),this._shouldAttachMouseMove()&&Pn(t,{[$s]:this._mousemoveThrottled}),this.domEvents=wf.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)}),this._toggleDragZoomEvents()}_mouseleave(t){this._hoveredPoint&&(this._hoveredPoint.out(this,t),this._hoveredPoint=null),this._plotAreaHovered&&(this._plotAreaHovered=!1,this.trigger($a)),this._hasInactiveOpacity()&&this._activeChartInstance&&(this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._updateSeriesOpacity(null,!0))}_cancelDomEvents(){this.domEvents&&this.domEvents.cancel&&this.domEvents.cancel()}_gesturestart(t){this._mousewheelZoom&&!this._stopChartHandlers(t)&&(this._gestureDistance=t.distance,this._unsetActivePoint(),this._clearFocusedElement(),this.surface.suspendTracking())}_gestureend(t){this._zooming&&!this._stopChartHandlers(t)&&(this.surface&&this.surface.resumeTracking(),this._zooming=!1,this.trigger(Pi,{}))}_gesturechange(t){const e=this._mousewheelZoom;if(e&&!this._stopChartHandlers(t)){t.preventDefault();const s=this._gestureDistance;let i=-t.distance/s+1;if(Math.abs(i)>=.1){i=Math.round(i*10),this._gestureDistance=t.distance;const n={delta:i,axisRanges:wn(this._plotArea.axes),originalEvent:t};if(this._zooming||!this.trigger(bn,n)){const o=this._eventCoordinates(t);this._zooming||(this._zooming=!0),(n.axisRanges=e.updateRanges(i,o))&&!this.trigger(Ti,n)&&e.zoom()}}}}_mouseout(t){if(t.element){const e=this._drawingChartElement(t.element,t);e&&e.leave&&e.leave(this,t.originalEvent)}}_start(t){const e=this._eventCoordinates(t);this._stopChartHandlers(t)||!this._plotArea.backgroundContainsPoint(e)||(this.requiresHandlers([Wa,Mn,In])&&this._startNavigation(t,e,Wa),this._pannable&&this._pannable.start(t)&&(this.surface.suspendTracking(),this._unsetActivePoint(),this._clearFocusedElement(),this._suppressHover=!0,this.chartService.panning=!0),this._zoomSelection&&this._zoomSelection.start(t)&&this.trigger(bn,{axisRanges:wn(this._plotArea.axes),originalEvent:t}))}_move(t){let{_navState:e,_pannable:s}=this;if(!this._stopChartHandlers(t)){if(s){const i=s.move(t);i&&!this.trigger(Mn,{axisRanges:i,originalEvent:t})&&s.pan()}else if(e){const i={},n=e.axes;for(let o=0;o<n.length;o++){const a=n[o];if(a.options.name){const h=a.options.vertical?t.y:t.x,c=h.startLocation-h.location;c!==0&&(i[a.options.name]=a.translateRange(c))}}e.axisRanges=i,this.trigger(Mn,{axisRanges:i,originalEvent:t})}this._zoomSelection&&this._zoomSelection.move(t)}}_end(t){if(this._stopChartHandlers(t))return;const e=this._pannable;if(e&&e.end(t)?(this.surface.resumeTracking(),this.trigger(In,{axisRanges:wn(this._plotArea.axes),originalEvent:t}),this._suppressHover=!1,this.chartService.panning=!1):this._endNavigation(t,In),this._zoomSelection){const s=this._zoomSelection.end(t);s&&!this.trigger(Ti,{axisRanges:s,originalEvent:t})&&(this._zoomSelection.zoom(),this.trigger(Pi,{axisRanges:s,originalEvent:t}))}}_stopChartHandlers(t){const e=this._selections||[];if(!e.length)return!1;const s=this._eventCoordinates(t),i=this._plotArea.paneByPoint(s);if(i){for(let n=0;n<e.length;n++)if(e[n].onPane(i))return!0}}_mousewheelZoomRate(){const e=(this.options.zoomable||{}).mousewheel||{};return L(e.rate,r1)}_mousewheel(t){const e=_h(t),s=this._mousewheelZoom,i=this._eventCoordinates(t);if(!(this._stopChartHandlers(t)||!this._plotArea.backgroundContainsPoint(i)))if(s){const n={delta:e,axisRanges:wn(this._plotArea.axes),originalEvent:t};(this._zooming||!this.trigger(bn,n))&&(t.preventDefault(),this._zooming||(this._unsetActivePoint(),this._clearFocusedElement(),this.surface.suspendTracking(),this._zooming=!0),this._mwTimeout&&clearTimeout(this._mwTimeout),n.axisRanges=s.updateRanges(e,i),n.axisRanges&&!this.trigger(Ti,n)&&s.zoom(),this._mwTimeout=setTimeout(()=>{this.trigger(Pi,n),this._zooming=!1,this.surface&&this.surface.resumeTracking()},Il))}else{let n=this._navState;if(n||this._startNavigation(t,i,bn)||(n=this._navState),n){const o=n.totalDelta||e;n.totalDelta=o+e;const a=this._navState.axes,l={};for(let h=0;h<a.length;h++){const c=a[h],d=c.options.name;d&&(l[d]=c.scaleRange(-o*this._mousewheelZoomRate(),i))}this.trigger(Ti,{delta:e,axisRanges:l,originalEvent:t}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout(()=>{this._endNavigation(t,Pi)},Il)}}}_startNavigation(t,e,s){const i=this._model._plotArea,n=i.findPointPane(e),o=i.axes.slice(0);if(!n)return;const a=wn(o);this.trigger(s,{axisRanges:a,originalEvent:t})?this._cancelDomEvents():(this._suppressHover=!0,this._unsetActivePoint(),this._clearFocusedElement(),this._navState={axisRanges:a,pane:n,axes:o})}_endNavigation(t,e){this._navState&&(this.trigger(e,{axisRanges:this._navState.axisRanges,originalEvent:t}),this._suppressHover=!1,this._navState=null)}_getChartElement(t,e){const s=this.surface.eventTarget(t);if(s)return this._drawingChartElement(s,t,e)}_drawingChartElement(t,e,s){let i=t,n;for(;i&&!n;)n=i.chartElement,i=i.parent;if(n)return n.aliasFor&&(n=n.aliasFor(e,this._eventCoordinates(e))),s&&(n=n.closest(s),n&&n.aliasFor&&(n=n.aliasFor())),n}_eventCoordinates(t){const e=rf(t);return this._toModelCoordinates(e.x,e.y)}_elementPadding(){if(!this._padding){const{paddingLeft:t,paddingTop:e}=at(this.element,["paddingLeft","paddingTop"]);this._padding={top:e,left:t}}return this._padding}_toDocumentCoordinates(t){const e=this._elementPadding(),s=Vi(this.element);return{left:S(t.x+e.left+s.left),top:S(t.y+e.top+s.top)}}_toModelCoordinates(t,e){const s=this.element,i=Vi(s),n=this._elementPadding(),o=Ib(s).invert(),a=new w(t-i.left-n.left,e-i.top-n.top).transform(o);return new R(a.x,a.y)}_tap(t){const e=this.surface.eventTarget(t),s=this._drawingChartElement(e,t),i=this._sharedTooltip();!this._startHover(e,t)&&!i&&this._unsetActivePoint(),i&&this._trackSharedTooltip(this._eventCoordinates(t),t,!0),this._propagateClick(s,t),this.handlingTap=!0,setTimeout(()=>{this.handlingTap=!1},0)}_click(t){const e=this._getChartElement(t);this._propagateClick(e,t)}_propagateClick(t,e){let s=t;for(;s;)s.click&&s.click(this,e),s=s.parent}_isLegendBeforeChart(){const{options:{legend:{position:t}},_legend:e}=this;return e&&e.hasItems()&&(t===N||t===z)}_focus(){this._preventInitialPointFocus||(this._isLegendBeforeChart()?this._focusFirstLegendItem():this._focusFirstPoint()),this._preventInitialPointFocus=!1}_keydown(t){const{_focusState:{legendInFocus:e,focusedElement:s},_legend:i}=this;if(t.key===ob){this._clearFocusedElement();const n=this._isLegendBeforeChart();e&&n!==t.shiftKey?this._navigatePoints(t):!e&&n===t.shiftKey&&i.hasItems()&&this._navigateLegend(t)}else t.key===lb?(s&&t.stopPropagation(),this._tooltip&&this._tooltip.visible?this._hideTooltip():this._blur()):t.key===ab?s&&(this._focusState.preserveHighlight=!0,this._propagateClick(s,t),this._focusElement(s)):e?this._navigateLegend(t):this._navigatePoints(t)}_navigatePoints(t){const{_focusState:e,_plotArea:s}=this;if(e.legendInFocus=!1,!e.focusedElement){this._focusFirstPoint(),t.preventDefault();return}const i=n=>{e.focusedPoint=n,this._focusElement(e.focusedPoint),this._displayTooltip(n),t.preventDefault()};switch(t.key){case kd:i(s.getPointToTheRight(e.focusedPoint));break;case Sd:i(s.getPointToTheLeft(e.focusedPoint));break;case Ad:i(s.getPointBelow(e.focusedPoint));break;case _d:i(s.getPointAbove(e.focusedPoint));break}}_navigateLegend(t){const{_focusState:e,_legend:s,chartService:{rtl:i}}=this;if(e.legendInFocus=!0,!e.focusedElement){this._focusFirstLegendItem(),t.preventDefault();return}const n=s.getItems().length,o=a=>{e.focusedLegendItemIndex=a(e.focusedLegendItemIndex,n),this._focusElement(this._getFocusedLegendItem()),t.preventDefault()};switch(t.key){case _d:case Sd:o(i?Ed:Md);break;case Ad:case kd:o(i?Md:Ed);break}}_focusFirstPoint(){const t=this._focusState.focusedPoint=this._plotArea.getFirstPoint();t&&(this._focusElement(t),this._displayTooltip(t))}_hasFocus(){return this.element.ownerDocument.activeElement===this.element}_mousedown(){this._hasFocus()||(this._preventInitialPointFocus=!0)}_focusChart(){this._hasFocus()||(this._preventInitialPointFocus=!0,this.element.focus())}_focusPoint(t){this._focusState.focusedPoint=t,this._focusChart(),this._focusElement(t,!0)}_focusFirstLegendItem(){const{_focusState:t}=this;t.focusedLegendItemIndex=0,this._focusElement(this._getFocusedLegendItem()),t.legendInFocus=!0,this._hideTooltip()}_focusLegendItem(t){const{_focusState:e}=this;e.focusedLegendItemIndex=this._legend.getItems().findIndex(s=>s.options.series.index===t.seriesIndex&&s.options.pointIndex===t.pointIndex),e.legendInFocus=!0,this._focusChart(),this._focusElement(this._getFocusedLegendItem(),!0)}_getFocusedLegendItem(){const{_focusState:t,_legend:e}=this;return e.getItems()[t.focusedLegendItemIndex]}_focusElement(t,e){const{_focusState:s}=this;if(this._clearFocusedElement(),!!t&&(s.focusedElement=t,this._setElementActiveDescendant(t),!e))if(t.focusVisual(),s.legendInFocus){const i=t.options;this._showSeriesInactiveOpacity(i.series.index,i.pointIndex)}else this._showInactiveOpacity(t)}_clearFocusedElement(){const{_focusState:t}=this;t&&(t.focusedElement&&t.focusedElement.clearFocusFromVisual&&(t.focusedElement.clearFocusFromVisual(),this._clearElementActiveDescendant()),t.focusedElement=null)}_setElementActiveDescendant(t){this.options.renderAs==="canvas"&&(this._pseudoFocusedElement=this._createPseudoFocusedElement(t),this.element.append(this._pseudoFocusedElement)),this.element.setAttribute(zi,t._id)}_clearElementActiveDescendant(){this._pseudoFocusedElement&&(this._pseudoFocusedElement.remove(),this._pseudoFocusedElement=null),this.element.removeAttribute(zi)}_createPseudoFocusedElement(t){const e=document.createElement("div"),s=t.options.accessibility;e.id=t._id,e.setAttribute("aria-label",t.getAriaLabelText()),e.setAttribute("role",s.role),e.setAttribute("aria-roledescription",s.ariaRoleDescription);const i=s.ariaChecked;return A(i)&&e.setAttribute("aria-checked",i),e}_blur(){this._focusState.legendInFocus=!1,this._clearFocusedElement(),this._hideInactiveOpacity()}_startHover(t,e){if(this._suppressHover)return!1;let s=this._drawingChartElement(t,e,function(n){return(n.hover||n.over)&&!(n instanceof gs)});const i=this._activePoint;return this._updateHoveredPoint(s,e),s&&i!==s&&s.hover&&(this._activePoint=s,!this._sharedTooltip()&&!s.hover(this,e)&&(this._displayTooltip(s),this._showInactiveOpacity(s))),s}_displayTooltip(t){m({},this.options.tooltip,t.options.tooltip).visible&&(this._sharedTooltip()&&t.box?this._trackSharedTooltip(t.box.center(),{}):this._tooltip.show(t))}_hideTooltip(){this._tooltip&&this._tooltip.hide()}_displayInactiveOpacity(t,e,s){const i=this._activeChartInstance=this._chartInstanceFromPoint(t);if(i)if(e)this._updateSeriesOpacity(t),this._applySeriesOpacity(i.children,null,!0),this._applySeriesOpacity(i.children,t.series),this._highlight.show(s||t);else{let n;if(!i.supportsPointInactiveOpacity()){this._highlight.show(t);return}n=this._getInactivePoints(t,i),n&&n.length&&this._highlight.show(n,this._getInactiveOpacityForSeries(t.series))}}_getInactivePoints(t,e){return this._getAllPointsOfType(e,t.constructor).filter(i=>i!==t)}_getAllPointsOfType(t,e){let s=[];for(let i=0;i<t.children.length;i++){const n=t.children[i];n.constructor===e?s.push(n):n.children&&n.children.length&&(s=s.concat(this._getAllPointsOfType(n,e)))}return s}_updateHoveredPoint(t,e){const s=this._hoveredPoint;s&&s!==t&&(s.out(this,e),this._hoveredPoint=null),t&&s!==t&&t.over&&(this._hoveredPoint=t,t.over(this,e))}_updateDrilldownPoint(t){if(!t||!t.series)return;const{fields:e}=et.current.bindPoint(t.series,null,t.dataItem);e.drilldown&&(this._drilldownState={cursor:this.element.style.cursor},this.element.style.cursor="pointer")}_resetDrilldownPoint(){this._drilldownState&&(this.element.style.cursor=this._drilldownState.cursor,this._drilldownState=null)}_startDrilldown(t){if(!t||!t.series)return;const e=t.series,{fields:s}=et.current.bindPoint(e,null,t.dataItem),i=s.drilldown;if(i){const n={series:e,point:t,value:i,sender:this};this.trigger(a1,n)}}_updateSeriesOpacity(t,e){const s=this._plotArea,i=s.series.length;for(let n=0;n<i;n++){const o=s.series[n],a=this._getDefaultOpacityForSeries(o),l=this._getInactiveOpacityForSeries(o);!e&&o!==t.series?(o.defaultOpacity=a,o.opacity=l,o.line&&(o.line.opacity=l)):(o.opacity=a,o.line&&(o.line.opacity=a))}}_applySeriesOpacity(t,e,s,i){for(let n=0;n<t.length;n++){const o=t[n],a=o.series||i;if(a&&(a.highlight||{}).visible&&o.visual){const h=i?i.opacity:o.series.opacity;(a!==e||s)&&o.visual.opacity(s?1:h)}o.children&&o.children.length&&this._applySeriesOpacity(o.children,e,s,o.series)}}_chartInstanceFromPoint(t){let e=t.parent;for(;e&&!e.plotArea;)e=e.parent;return e}_showInactiveOpacity(t){const e=this._plotArea.series.length>1;this._hasInactiveOpacity()?this._displayInactiveOpacity(t,e):this._highlight.show(t)}_hideInactiveOpacity(t){const e=this._plotArea.series.length>1;this._hasInactiveOpacity()&&(e&&this._activeChartInstance&&(this._updateSeriesOpacity(t,!0),this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._activeChartInstance=null),this._highlight&&this._highlight.hide(),this._activePoint=null)}_hasInactiveOpacity(){let t=this.options.seriesDefaults.highlight.inactiveOpacity!==void 0,e=this.options.series.filter(s=>s.highlight.inactiveOpacity!==void 0).length>0;return t||e}_getInactiveOpacityForSeries(t){let e=this.options.seriesDefaults.highlight.inactiveOpacity,s=t.highlight.inactiveOpacity;return s!==void 0?s:e!==void 0?e:t.opacity!==void 0?t.opacity:Td}_getDefaultOpacityForSeries(t){return t.defaultOpacity||t.opacity||Td}_mouseover(t){const e=this._startHover(t.element,t.originalEvent);e&&e.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()&&(this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this),Pn(document,{[$s]:this._mouseMoveTrackHandler}))}_mouseMoveTracking(t){const{options:e,_tooltip:s,_highlight:i,_activePoint:n}=this,o=this._eventCoordinates(t);if(this._plotArea.box.containsPoint(o)){if(n&&n.tooltipTracking&&n.series&&n.parent.getNearestPoint){const a=n.parent.getNearestPoint(o.x,o.y,n.seriesIx);a&&a!==n&&(this._activePoint=a,a.hover(this,t)||(m({},e.tooltip,a.options.tooltip).visible&&s.show(a),i.show(a)))}}else En(document,{[$s]:this._mouseMoveTrackHandler}),this._unsetActivePoint(),this._clearFocusedElement(),this._mouseMoveTrackHandler=null,this._hideInactiveOpacity(n)}_mousemove(t){const e=this._eventCoordinates(t),s=this._plotArea;if(this._trackCrosshairs(e),s.hover){const i=s.backgroundContainsPoint(e);i?(this._plotAreaHovered=!0,this._plotArea.hover(this,t)):this._plotAreaHovered&&!i&&(this._plotAreaHovered=!1,this.trigger($a))}this._sharedTooltip()&&this._trackSharedTooltip(e,t)}_trackCrosshairs(t){const e=this._plotArea.crosshairs;for(let s=0;s<e.length;s++){const i=e[s];i.box.containsPoint(t)?i.showAt(t):i.hide()}}_trackSharedTooltip(t,e,s){if(this._suppressHover)return;const{options:{tooltip:i},_plotArea:n,_plotArea:{categoryAxis:o},_tooltip:a,_highlight:l}=this;if(n.backgroundContainsPoint(t)){const h=o.pointCategoryIndex(t);if(h!==this._tooltipCategoryIx||!this._sharedHighlight&&s){const c=n.pointsByCategoryIndex(h),d=c.map(function(p){return p.eventArgs(e)}),u=d[0]||{};u.categoryPoints=d,c.length>0&&!this.trigger(jf,u)?(i.visible&&a.showAt(c,t),l.show(c),this._sharedHighlight=!0):a.hide(),this._tooltipCategoryIx=h}else s&&this._sharedHighlight&&(l.hide(),a.hide(),this._sharedHighlight=!1)}else this._sharedHighlight&&(l.hide(),a.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1)}hideElements(t){const e=this._plotArea;this._mousemoveThrottled.cancel(),e.hideCrosshairs(),this._unsetActivePoint(t)}_unsetActivePoint(t){const{_highlight:e}=this;this._activePoint=null,this._hoveredPoint=null,(!t||!t.keepTooltipOpen)&&this._hideTooltip(),this._tooltipCategoryIx=null,this._sharedHighlight=!1,e&&e.hide()}_deferRedraw(){this._redraw()}_clearRedrawTimeout(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)}bindCategories(){const t=this.options,e=[].concat(t.categoryAxis);for(let s=0;s<e.length;s++){const i=e[s];i.autoBind!==!1&&this.bindCategoryAxisFromSeries(i,s)}}bindCategoryAxisFromSeries(t,e){const s=new Set,i=this.options.series.filter(c=>c.categoryAxis===t.name||!c.categoryAxis&&e===0),n=i.some(c=>!!c.categoryField),o=i.filter(c=>c.data&&c.data.length>0),a=o.map(c=>et.current.bindPoint(c,0).fields.category),l=a.reduce((c,d)=>c||Jf(t,d),!1);if(o.filter((c,d)=>c.categoryField||A(a[d])).forEach(c=>c.data.forEach((d,u)=>{let p=et.current.bindPoint(c,u).fields.category;if(l){const g=Kf(p,d,this.chartService.intl);p=g?g.getTime():void 0}s.add(p)})),s.size>0){let c=Array.from(s.values());l&&(c=c.sort().map(d=>d&&new Date(d))),t.categories=c}else n&&(t.categories=[])}_isBindable(t){const e=et.current.valueFields(t);let s=!0;for(let i=0;i<e.length;i++){let n=e[i];if(n===Qt?n="field":n=n+"Field",!A(t[n])){s=!1;break}}return s}_noTransitionsRedraw(){const t=this.options;let e;t.transitions!==!1&&(e=t.transitions,t.transitions=!1),this._redraw(),e&&(t.transitions=e)}_legendItemHover(t,e){this._showSeriesInactiveOpacity(t,e)}_showSeriesInactiveOpacity(t,e){const{_plotArea:s,_highlight:i}=this,n=(s.srcSeries||s.series)[t];let o;if(D(n.type,[Rs,Or,Kn,Jn])?o=s.findPoint(function(a){return a.series.index===t&&a.index===e}):o=s.pointsBySeriesIndex(t),this._hasInactiveOpacity()&&n.visible&&o){const a=s.series.length>1,l=o.length?o[0]:o;this._displayInactiveOpacity(l,a,o)}else i.show(o)}_shouldAttachMouseMove(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([Wf,$a])}updateMouseMoveHandler(){En(this.element,{[$s]:this._mousemoveThrottled}),this._shouldAttachMouseMove()&&Pn(this.element,{[$s]:this._mousemoveThrottled})}applyTheme(t){const e=Object.assign({},this._originalOptions);requestAnimationFrame(()=>{this.applyOptions(e,t),this.noTransitionsRedraw()})}applyOptions(t,e){zl(this._originalOptions,t),this._originalOptions=m(this._originalOptions,t),this.options=m({},this._originalOptions),e&&(this._theme=e,this.chartService.theme=e),this._initTheme(this.options,this._theme),this._toggleDragZoomEvents()}setOptions(t,e){this.applyOptions(t,e),this.bindCategories(),this.redraw(),this.updateMouseMoveHandler(),this._restoreOverlayElement(),this._initStyleObserver()}setDirection(t){this.chartService.rtl=!!t,this.surface&&this.surface.type==="svg"&&this._destroySurface()}setIntlService(t){this.chartService.intl=t}noTransitionsRedraw(){this._noTransitionsRedraw()}destroy(){this._destroyed=!0,En(this.element,{[ku]:this._clickHandler,[Vr]:this._mousewheelHandler,[$s]:this._mousemoveThrottled,[Cu]:this._mouseleaveHandler,[Su]:this._mousedownHandler,[Tu]:this._keydownHandler,[Pu]:this._focusHandler,[Eu]:this._blurHandler}),this.domEvents&&(this.domEvents.destroy(),delete this.domEvents),this._mouseMoveTrackHandler&&En(document,{[$s]:this._mouseMoveTrackHandler}),this._focusState=null,this.element._kendoExportVisual=null,this._destroyView(),this._destroySurface(),this._clearRedrawTimeout(),this._destroyStyleObserver()}_destroySurface(){const t=this.surface;t&&(t.unbind("mouseenter",this._surfaceMouseenterHandler),t.unbind("mouseleave",this._surfaceMouseleaveHandler),t.destroy(),this.surface=null)}_destroySelections(){const t=this._selections;if(t)for(;t.length>0;)t.shift().destroy()}_destroyView(){const t=this._model;t&&(t.destroy(),this._model=null),this._unsetActivePoint(),this._clearFocusedElement(),this._resetDrilldownPoint(),this._destroySelections(),this._tooltip&&this._tooltip.destroy(),this._highlight&&this._highlight.destroy(),this._zoomSelection&&(this._zoomSelection.destroy(),delete this._zoomSelection),this._pannable&&(this._pannable.destroy(),delete this._pannable),this._mousewheelZoom&&(this._mousewheelZoom.destroy(),delete this._mousewheelZoom)}}function a_(r){const t=Dl;for(let e=0;e<t.length;e++){const s=t[e]+"Axes";r[s]&&(r[t[e]+"Axis"]=r[s],delete r[s])}}function Iu(r,t){if(r){for(let e=0;e<r.length;e++)if(r[e].category===t)return[r[e]]}}function l_(r,t){const e=(t||{}).axisDefaults||{};let s,i,n;function o(a){const l=(a||{}).color||i.color,h=m({},e,e[s],i,i[s],{line:{color:l},labels:{color:l},title:{color:l}},a);return delete h[s],h}for(let a=0;a<Dl.length;a++)s=Dl[a]+"Axis",i=r.axisDefaults||{},n=[].concat(r[s]),n=n.map(o),r[s]=n.length>1?n:n[0]}function h_(r,t){const e=r.series,s=e.length,i=r.seriesDefaults,n=m({},r.seriesDefaults),o=t?m({},t.seriesDefaults):{},a=m({},o);Ru(n),Ru(a);for(let l=0;l<s;l++){const h=e[l].type||r.seriesDefaults.type,c=m({data:[]},a,o[h],{tooltip:r.tooltip},n,i[h]);e[l]._defaults=c,e[l]=m({},c,e[l]),e[l].data=e[l].data||[]}}function Ru(r){delete r.bar,delete r.column,delete r.rangeColumn,delete r.line,delete r.verticalLine,delete r.pie,delete r.donut,delete r.area,delete r.verticalArea,delete r.scatter,delete r.scatterLine,delete r.bubble,delete r.candlestick,delete r.ohlc,delete r.boxPlot,delete r.bullet,delete r.verticalBullet,delete r.polarArea,delete r.polarLine,delete r.radarArea,delete r.radarLine,delete r.waterfall}function wn(r){const t={};for(let e=0;e<r.length;e++){const s=r[e],i=s.options.name;i&&(t[i]=s.range())}return t}const c_=["data","categories"];function zl(r,t){for(let e in t)if(!D(e,c_)&&Sh(t,e)){const s=t[e],i=r[e];if(A(i)){const n=s===null;n||!A(s)?(delete r[e],n&&delete t[e]):i&&me(s)&&me(i)&&zl(i,s)}}}function Lu(r){for(let t=0;t<r.length;t++)r[t].notifyRender()}b(Sc,{renderAs:"",chartArea:{},legend:{visible:!0,labels:{},accessibility:{},focusHighlight:{border:{opacity:1,color:ut,width:2}}},categoryAxis:{},seriesDefaults:{type:Ve,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1},accessibility:{},focusHighlight:{border:{opacity:1,width:2},zIndex:200}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,observeStyles:!1,valueAxis:{narrowRange:!1},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1});const d_=-2;class u_ extends uc{_slotAnchor(t,e){const i=this.plotArea.categoryAxis.options.vertical,n=i?{horizontal:"left",vertical:"center"}:{horizontal:"center",vertical:"bottom"};let o;return i?o=new R(this.plotArea.box.x2,e.center().y):o=new R(e.center().x,d_),{point:o,align:n}}_defaultAnchor(t,e){return this._slotAnchor({},e)}}const p_=150,g_=150,Ou=[fe,Is];function Bu(r){const t=[];for(let e=0;e<r.length;e++){const s=r[e];t[e]=s.style.display,s.style.display="none"}return t}function Du(r,t){for(let e=0;e<r.length;e++)r[e].style.display=t[e]}function zu(r){return F(r)?[r]:r}class f_ extends Sc{_setElementClass(t){dt(t,"k-sparkline")}_initElement(t){super._initElement(t),this._initialWidth=Math.floor(We(t).width)}_resize(){const t=this.element,e=Bu(t.childNodes);this._initialWidth=Math.floor(We(t).width),Du(t.childNodes,e),super._resize()}_modelOptions(){const t=this.options,e=this._surfaceWrap(),s=Bu(e.childNodes),i=document.createElement("span");i.innerHTML="&nbsp;",e.appendChild(i);const n=m({width:this._autoWidth,height:We(e).height,transitions:t.transitions},t.chartArea,{inline:!0,align:!1});return We(e,{width:n.width,height:n.height}),e.removeChild(i),Du(e.childNodes,s),this.surface&&this.surface.resize(),n}_surfaceWrap(){if(!this.stage){const t=this.stage=document.createElement("span");this.element.appendChild(t)}return this.stage}_createPlotArea(t){const e=super._createPlotArea(t);return this._autoWidth=this._initialWidth||this._calculateWidth(e),e}_calculateWidth(t){const e=this.options,s=X(e.chartArea.margin),i=t.charts,n=this._surfaceWrap();let o=0;for(let l=0;l<i.length;l++){const h=i[l],c=(h.options.series||[])[0];if(!c)continue;if(c.type===fe)return p_;if(c.type===Is)return g_;if(c.type===Rs)return We(n).height;const d=h.categoryAxis;if(d){const u=d.categoriesCount()*(!h.options.isStacked&&D(c.type,[Ve,xo])?h.seriesOptions.length:1);o=Math.max(o,u)}}let a=o*e.pointWidth;return a>0&&(a+=s.left+s.right),a}_createSharedTooltip(t){return new u_(this._plotArea,t)}static normalizeOptions(t){let e=zu(t);return Ct(e)?e={seriesDefaults:{data:e}}:e=m({},e),e.series||(e.series=[{data:zu(e.data)}]),m(e,{seriesDefaults:{type:e.type}}),(D(e.series[0].type,Ou)||D(e.seriesDefaults.type,Ou))&&(e=m({},{categoryAxis:{crosshair:{visible:!1}}},e)),e}}b(f_,{chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]});class m_ extends ne{setup(){this._initialOpacity=parseFloat(at(this.element,"opacity").opacity)}step(t){at(this.element,{opacity:String(ue(this._initialOpacity,0,t))})}abort(){super.abort(),at(this.element,{display:"none",opacity:String(this._initialOpacity)})}cancel(){super.abort(),at(this.element,{opacity:String(this._initialOpacity)})}}function Ja(r,t){const e=document.createElement("div");return e.className=r,t&&(e.style.cssText=t),e}class Hm{constructor(t,e,s){this.options=m({},this.options,s),this.container=t,this.chartService=e;const i=at(t,["paddingLeft","paddingTop"]);this.chartPadding={top:i.paddingTop,left:i.paddingLeft},this.createElements(),t.appendChild(this.element)}createElements(){const t=this.element=Ja("k-navigator-hint","display: none; position: absolute; top: 1px; left: 1px;"),e=this.tooltip=Ja("k-tooltip k-chart-tooltip"),s=this.scroll=Ja("k-scroll");e.innerHTML="&nbsp;",t.appendChild(e),t.appendChild(s)}show(t,e,s){const{element:i,options:n,scroll:o,tooltip:a}=this,l=st(it(t)+it(e-t)/2),h=s.width()*.4,c=s.center().x-h,u=s.center().x-c,p=n.max-n.min,g=u/p,f=l-n.min;let x=this.chartService.intl.format(n.format,t,e);const y=bt(n);this.clearHideTimeout(),this._visible||(at(i,{visibility:"hidden",display:"block"}),this._visible=!0),y&&(x=y({from:t,to:e})),a.innerHTML=x,at(a,{left:s.center().x-a.offsetWidth/2,top:s.y1});const v=at(a,["marginTop","borderTopWidth","height"]);at(o,{width:h,left:c+f*g,top:s.y1+v.marginTop+v.borderTopWidth+v.height/2}),at(i,{visibility:"visible"})}clearHideTimeout(){this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideAnimation&&this._hideAnimation.cancel()}hide(){this.clearHideTimeout(),this._hideTimeout=setTimeout(()=>{this._visible=!1,this._hideAnimation=new m_(this.element),this._hideAnimation.setup(),this._hideAnimation.play()},this.options.hideDelay)}destroy(){this.clearHideTimeout(),this.container&&this.container.removeChild(this.element),delete this.container,delete this.chartService,delete this.element,delete this.tooltip,delete this.scroll}}b(Hm,{format:"{0:d} - {1:d}",hideDelay:500});const qe="_navigator",Ue=qe,Vu="_default",x_=3;let Nu=class Vl{constructor(t){this.chart=t;const e=this.options=m({},this.options,t.options.navigator),s=e.select;s&&(s.from=this.parseDate(s.from),s.to=this.parseDate(s.to)),A(e.hint.visible)||(e.hint.visible=e.visible),this.chartObserver=new Od(this,{[Mn]:"_drag",[In]:"_dragEnd",[Ti]:"_zoom",[Pi]:"_zoomEnd"}),t.addObserver(this.chartObserver)}parseDate(t){return kt(this.chart.chartService.intl,t)}clean(){this.selection&&(this.selection.destroy(),this.selection=null),this.hint&&(this.hint.destroy(),this.hint=null)}destroy(){this.chart&&(this.chart.removeObserver(this.chartObserver),delete this.chart),this.clean()}redraw(){this._redrawSelf(),this.initSelection()}initSelection(){const{chart:t,options:e}=this,s=this.mainAxis(),{min:i,max:n}=s.roundedRange(),{from:o,to:a,mousewheel:l}=e.select,h=y_(s);s.categoriesCount()!==0&&(this.clean(),h.box=s.box,this.selection=new dc(t,h,{min:i,max:n,from:o||i,to:a||n,mousewheel:L(l,{zoom:"left"}),visible:e.visible},new Od(this,{selectStart:"_selectStart",select:"_select",selectEnd:"_selectEnd"})),e.hint.visible&&(this.hint=new Hm(t.element,t.chartService,{min:i,max:n,template:bt(e.hint),format:e.hint.format})))}setRange(){const e=this.chart._createPlotArea(!0).namedCategoryAxes[Ue],{min:s,max:i}=e.roundedRange(),n=this.options.select||{};let o=n.from||s;o<s&&(o=s);let a=n.to||i;a>i&&(a=i),this.options.select=m({},n,{from:o,to:a}),this.filterAxes()}_redrawSelf(t){const e=this.chart._plotArea;e&&e.redraw(pt(e.panes),t)}redrawSlaves(){const t=this.chart,e=t._plotArea,s=e.panes.filter(i=>i.options.name!==qe);e.srcSeries=t.options.series,e.options.categoryAxis=t.options.categoryAxis,e.clearSeriesPointsCache(),e.redraw(s)}_drag(t){const{chart:e,selection:s}=this,i=e._eventCoordinates(t.originalEvent),n=this.mainAxis(),o=n.roundedRange(),a=n.pane.box.containsPoint(i),l=e._plotArea.categoryAxis,h=t.axisRanges[l.options.name],c=this.options.select;let d;if(!h||a||!s)return;c.from&&c.to?d=it(c.to)-it(c.from):d=it(s.options.to)-it(s.options.from);const u=st(M(it(h.min),o.min,it(o.max)-d)),p=st(M(it(u)+d,it(o.min)+d,o.max));this.options.select={from:u,to:p},this.options.liveDrag&&(this.filterAxes(),this.redrawSlaves()),s.set(u,p),this.showHint(u,p)}_dragEnd(){this.filterAxes(),this.filter(),this.redrawSlaves(),this.hint&&this.hint.hide()}readSelection(){const{selection:{options:{from:t,to:e}},options:{select:s}}=this;s.from=t,s.to=e}filterAxes(){const{options:{select:t={}},chart:e}=this,s=e.options.categoryAxis,{from:i,to:n}=t;for(let o=0;o<s.length;o++){const a=s[o];a.pane!==qe&&(a.min=i,a.max=n)}}filter(){const{chart:t,options:{select:e}}=this;if(!t.requiresHandlers(["navigatorFilter"]))return;const s=this.mainAxis(),i={from:e.from,to:e.to};if(s.options.type!=="category"){const n=new fi(m({baseUnit:"fit"},t.options.categoryAxis[0],{categories:[e.from,e.to]}),t.chartService).options;i.from=Pt(n.min,-n.baseUnitStep,n.baseUnit),i.to=Pt(n.max,n.baseUnitStep,n.baseUnit)}this.chart.trigger("navigatorFilter",i)}_zoom(t){const{chart:{_plotArea:{categoryAxis:e}},selection:s,options:{select:i,liveDrag:n}}=this,o=this.mainAxis();let a=t.delta;if(!s)return;const l=o.categoryIndex(s.options.from),h=o.categoryIndex(s.options.to),c=this.chart._eventCoordinates(t.originalEvent);t.originalEvent.preventDefault(),Math.abs(a)>1&&(a*=x_),h-l>1?(s.zoom(a,c),this.readSelection()):(e.options.min=i.from,i.from=e.scaleRange(-t.delta*this.chart._mousewheelZoomRate(),c).min),n&&(this.filterAxes(),this.redrawSlaves()),s.set(i.from,i.to),this.showHint(this.options.select.from,this.options.select.to)}_zoomEnd(t){this._dragEnd(t)}showHint(t,e){const s=this.chart._plotArea;this.hint&&this.hint.show(t,e,s.backgroundBox())}_selectStart(t){return this.chart._selectStart(t)}_select(t){return this.showHint(t.from,t.to),this.chart._select(t)}_selectEnd(t){return this.hint&&this.hint.hide(),this.readSelection(),this.filterAxes(),this.filter(),this.redrawSlaves(),this.chart._selectEnd(t)}mainAxis(){const t=this.chart._plotArea;if(t)return t.namedCategoryAxes[Ue]}select(t,e){const s=this.options.select;return t&&e&&(s.from=this.parseDate(t),s.to=this.parseDate(e),this.filterAxes(),this.filter(),this.redrawSlaves(),this.selection.set(t,e)),{from:s.from,to:s.to}}static setup(t={},e={}){if(t.__navi)return;t.__navi=!0;const s=m({},e.navigator,t.navigator),i=t.panes=[].concat(t.panes),n=m({},s.pane,{name:qe});s.visible||(n.visible=!1,n.height=.1),t.navigator.position!=="top"?i.push(n):i.unshift(n),i.forEach(o=>{o.name=o.name||Vu}),Vl.attachAxes(t,s),Vl.attachSeries(t,s,e)}static attachAxes(t,e){const s=e.series||[],i=t.categoryAxis=[].concat(t.categoryAxis),n=t.valueAxis=[].concat(t.valueAxis);i.concat(n).forEach(d=>{d.pane=d.pane||Vu});const l=lt(s,Ff).length===0,h=m({type:"date",pane:qe,roundToBaseUnit:!l,justified:l,_collapse:!1,majorTicks:{visible:!0},tooltip:{visible:!1},labels:{step:1},autoBind:e.autoBindElements,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]}}),c=e.categoryAxis;i.push(m({},h,{maxDateGroups:200},c,{name:Ue,title:null,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),m({},h,c,{name:Ue+"_labels",maxDateGroups:20,baseUnitStep:"auto",labels:{position:""},plotBands:[],autoBaseUnitSteps:{minutes:[]},_overlap:!0}),m({},h,c,{name:Ue+"_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],title:null,labels:{visible:!1,mirror:!0},_overlap:!0})),n.push(m({name:Ue,pane:qe,majorGridLines:{visible:!1},visible:!1},e.valueAxis))}static attachSeries(t,e,s){const i=t.series=t.series||[],n=[].concat(e.series||[]),o=s.seriesColors,a=e.seriesDefaults;for(let l=0;l<n.length;l++)i.push(m({color:o[l%o.length],categoryField:e.dateField,visibleInLegend:!1,tooltip:{visible:!1}},a,n[l],{axis:Ue,categoryAxis:Ue,autoBind:e.autoBindElements}))}};function Fu(){}function y_(r){return Fu.prototype=r,new Fu}const v_=28;class b_ extends Sc{applyDefaults(t,e){const s=We(this.element).width||vh;let i=e;const n={seriesDefaults:{categoryField:t.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:Math.floor(s/v_)}}};i&&(i=m({},i,n)),Nu.setup(t,i),super.applyDefaults(t,i)}_setElementClass(t){dt(t,"k-chart k-stockchart")}setOptions(t){this.destroyNavigator(),super.setOptions(t)}noTransitionsRedraw(){const t=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=t}_resize(){this.noTransitionsRedraw()}_redraw(){const t=this.navigator;!this._dirty()&&t&&t.options.partialRedraw?t.redrawSlaves():this._fullRedraw()}_dirty(){const t=this.options,e=[].concat(t.series,t.navigator.series),s=te(e,function(n){return n&&n.visible}).length,i=this._seriesCount!==s;return this._seriesCount=s,i}_fullRedraw(){let t=this.navigator;t||(t=this.navigator=new Nu(this),this.trigger("navigatorCreated",{navigator:t})),t.clean(),t.setRange(),super._redraw(),t.initSelection()}_trackSharedTooltip(t){const s=this._plotArea.paneByPoint(t);s&&s.options.name===qe?this._unsetActivePoint():super._trackSharedTooltip(t)}bindCategories(){super.bindCategories(),this.copyNavigatorCategories()}copyNavigatorCategories(){const t=[].concat(this.options.categoryAxis);let e;for(let s=0;s<t.length;s++){const i=t[s];i.name===Ue?e=i.categories:e&&i.pane===qe&&(i.categories=e)}}destroyNavigator(){this.navigator&&(this.navigator.destroy(),this.navigator=null)}destroy(){this.destroyNavigator(),super.destroy()}_stopChartHandlers(t){const e=this._eventCoordinates(t),s=this._plotArea.paneByPoint(e);return super._stopChartHandlers(t)||s&&s.options.name===qe}_toggleDragZoomEvents(){this._dragZoomEnabled||(this.element.style.touchAction="none",this._dragZoomEnabled=!0)}}b(b_,{dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!1},highlight:{visible:!1},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}});const Po=150,Um=250,w_="arrow",jm="arrowPointer",so="barPointer",Gm=200,Bi=.5,$m=200,Wm=Math.PI/180,Cs="inside",ba="linear",tl="outside",Xm="radialPointer",Ym="radialRangePointer";function qm(r,t){const e=r.getOrigin(),s=r.getSize(),i=X(t);return r.setOrigin([e.x-i.left,e.y-i.top]),r.setSize([s.width+(i.left+i.right),s.height+(i.top+i.bottom)]),r}const{Group:__,Path:Hu,Text:A_}=pi;function Zm(r,t){const e=r.box,s=r.children[0].box,i=t.border||{},n=t.background||"",o=Hu.fromRect(new H([e.x1,e.y1],[e.width(),e.height()]),{stroke:{}}),a=new A_(r.text,new w(s.x1,s.y1),{font:t.font,fill:{color:t.color}}),l=qm(a.bbox().clone(),t.padding),h=Hu.fromRect(l,{stroke:{color:i.width?i.color:"",width:i.width,opacity:i.opacity,dashType:i.dashType,lineJoin:"round",lineCap:"round"},fill:{color:n}}),c=new __;return c.append(o),c.append(h),c.append(a),c}function Qm(r,t,e){const s=A(r.from)?r.from:vt,i=A(r.to)?r.to:gt;return r.from=Math.max(Math.min(i,s),t),r.to=Math.min(Math.max(i,s),e),r}function Uu(r,t){const e=X(t);return e.left=-e.left,e.top=-e.top,e.right=-e.right,e.bottom=-e.bottom,qm(r,e)}const S_=5,{Path:k_,Surface:C_}=pi;class kc{constructor(t,e,s,i={}){this.element=t,this.theme=s,this.contextService=new Th(this,i),this._originalOptions=m({},this.options,e),this.options=m({},this._originalOptions),this._initTheme(s),this.redraw()}destroy(){this.surface&&(this.surface.destroy(),this.surface=null),delete this.element,delete this.surfaceElement}value(t){const e=this.pointers[0];if(arguments.length===0)return e.value();e.value(t),this._setValueOptions(t)}_draw(){const t=this.surface;t.clear(),t.draw(this._visuals)}exportVisual(){return this._visuals}allValues(t){const e=this.pointers,s=[];if(arguments.length===0){for(let i=0;i<e.length;i++)s.push(e[i].value());return s}if(Ct(t))for(let i=0;i<t.length;i++)F(t[i])&&e[i].value(t[i]);this._setValueOptions(t)}_setValueOptions(t){const e=[].concat(this.options.pointer),s=[].concat(t);for(let i=0;i<s.length;i++)e[i].value=s[i]}resize(){this.noTransitionsRedraw()}noTransitionsRedraw(){const t=this.options.transitions;this._toggleTransitions(!1),this.redraw(),this._toggleTransitions(t)}redraw(){const t=this._surfaceSize(),e=new H([0,0],[t.width,t.height]);this._initSurface(),this.gaugeArea=this._createGaugeArea(),this._createModel();const s=Uu(e.bbox(),this._gaugeAreaMargin);this.reflow(s)}setOptions(t,e){this._originalOptions=m(this._originalOptions,t),this.options=m({},this._originalOptions),this._initTheme(e),this.redraw()}setDirection(t){this.contextService.rtl=!!t,this.surface&&this.surface.type==="svg"&&(this.surface.destroy(),this.surface=null)}setIntlService(t){this.contextService.intl=t}_initTheme(t){let e=t||this.theme||{};this.theme=e,this.options=m({},e,this.options);const s=this.options,i=s.pointer;if(Ct(i)){const n=[];for(let o=0;o<i.length;o++)n.push(m({},e.pointer,i[o]));s.pointer=n}}_createGaugeArea(){const t=this.options.gaugeArea,e=this.surface.size(),s=t.border||{};let i=new H([0,0],[e.width,e.height]);return this._gaugeAreaMargin=t.margin||S_,s.width>0&&(i=Uu(i,s.width)),k_.fromRect(i,{stroke:{color:s.width?s.color:"",width:s.width,opacity:s.opacity,dashType:s.dashType,lineJoin:"round",lineCap:"round"},fill:{color:t.background}})}_initSurface(){const{options:t,surface:e}=this,s=this._surfaceElement(),i=this._surfaceSize();We(s,i),!e||e.options.type!==t.renderAs?(e&&e.destroy(),this.surface=C_.create(s,{type:t.renderAs})):(this.surface.clear(),this.surface.resize())}_surfaceSize(){const t=this.options,e=this._getSize();return t.gaugeArea&&m(e,t.gaugeArea),e}_surfaceElement(){return this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement)),this.surfaceElement}getSize(){return this._getSize()}_getSize(){const t=this.element,e=this._defaultSize();let s=t.offsetWidth,i=t.offsetHeight;return s||(s=e.width),i||(i=e.height),{width:s,height:i}}_defaultSize(){return{width:$m,height:Gm}}_toggleTransitions(t){this.options.transitions=t;for(let e=0;e<this.pointers.length;e++)this.pointers[e].options.animation.transitions=t}}b(kc,{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}});const{Path:Nl,Group:_n}=pi,$o=w;function T_(r,t){const{position:e,tickX:s,tickY:i}=r;let n,o;return r.vertical?(n=new $o(s,e),o=new $o(s+t.size,e)):(n=new $o(e,i),o=new $o(e,i+t.size)),new Nl({stroke:{color:t.color,width:t.width}}).moveTo(n).lineTo(o)}function ju(r,t,e,s){const i=t.length;if(s.visible){const{mirror:n,lineBox:o}=e;for(let a=s.skip;a<i;a+=s.step)a%s.skipUnit!==0&&(e.tickX=n?o.x2:o.x2-s.size,e.tickY=n?o.y1-s.size:o.y1,e.position=t[a],r.append(T_(e,s)))}}class Km extends Ft{constructor(t,e){let s=t||{};!A(s.reverse)&&s.vertical===!1&&(e||{}).rtl&&(s=Object.assign({},s,{reverse:!0})),super(0,1,s,e),this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10}initUserOptions(t){let e=m({},this.options,t);return e=m({},e,{labels:{mirror:e.mirror}}),e.majorUnit=e.majorUnit||Ji(e.min,e.max),e}initFields(){}render(){const t=this.elements=new _n,e=this.renderLabels(),s=this.renderLine(),i=this.renderTicks(),n=this.renderRanges();return t.append(s,e,i,n),t}renderRanges(){const t=this.options,{min:e,max:s,vertical:i,labels:{mirror:n}}=t,o=t.ranges||[],a=new _n,l=o.length,h=t.rangeSize||t.minorTicks.size/2;for(let c=0;c<l;c++){const d=Qm(o[c],e,s),u=this.getSlot(d.from,d.to),p=i?this.lineBox():u,g=i?u:this.lineBox();i?p.x1-=h*(n?-1:1):g.y2+=h*(n?-1:1),a.append(Nl.fromRect(new H([p.x1,g.y1],[p.x2-p.x1,g.y2-g.y1]),{fill:{color:d.color,opacity:d.opacity},stroke:{}}))}return a}renderLabels(){const{labels:t,options:e}=this,s=new _n;for(let i=0;i<t.length;i++)s.append(Zm(t[i],e.labels));return s}renderLine(){const t=this.options.line,e=this.lineBox(),s=new _n;if(t.width>0&&t.visible){const i=new Nl({stroke:{color:t.color,dashType:t.dashType,width:t.width}});i.moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),s.append(i)}return s}renderTicks(){const t=new _n,e=this.options,s=e.majorTicks.visible?e.majorUnit:0,i={vertical:e.vertical,mirror:e.labels.mirror,lineBox:this.lineBox()};return ju(t,this.getMajorTickPositions(),i,e.majorTicks),ju(t,this.getMinorTickPositions(),i,m({},{skipUnit:s/e.minorUnit},e.minorTicks)),t}}b(Km,{min:0,max:50,majorTicks:{size:15,align:Cs,color:ut,width:Bi,visible:!0},minorTicks:{size:10,align:Cs,color:ut,width:Bi,visible:!0},line:{width:Bi},labels:{position:Cs,padding:2},mirror:!1,_alignLines:!1});class wa{constructor(t,e){const{min:s,max:i}=t.options,n=this.options=m({},this.options,e);n.fill=n.color,this.scale=t,A(n.value)?n.value=M(n.value,s,i):n.value=s}value(t){const e=this.options,s=e.value;if(arguments.length===0)return s;const{min:i,max:n}=this.scale.options;e._oldValue=A(e._oldValue)?e.value:i,e.value=M(t,i,n),this.elements&&this.repaint()}}b(wa,{color:ut});class Cc extends wa{constructor(t,e){super(t,e),this.options=m({track:{visible:A(e.track)}},this.options)}reflow(){const{options:t,scale:e}=this,{mirror:s,vertical:i}=e.options,n=e.lineBox(),o=t.track.size||t.size,a=t.size/2,l=X(t.margin);let h=i?l[s?"left":"right"]:l[s?"bottom":"top"],c,d,u;h=s?-h:h,i?(u=new _(n.x1+h,n.y1,n.x1+h,n.y2),s?u.x1-=o:u.x2+=o,t.shape!==so&&(d=new _(n.x2+h,n.y1-a,n.x2+h,n.y2+a),c=d)):(u=new _(n.x1,n.y1-h,n.x2,n.y1-h),s?u.y2+=o:u.y1-=o,t.shape!==so&&(d=new _(n.x1-a,n.y1-h,n.x2+a,n.y1-h),c=d)),this.trackBox=u,this.pointerRangeBox=d,this.box=c||u.clone().pad(t.border.width)}getElementOptions(){const t=this.options;return{fill:{color:t.color,opacity:t.opacity},stroke:A(t.border)?{color:t.border.width?t.border.color||t.color:"",width:t.border.width,dashType:t.border.dashType,opacity:t.opacity}:null}}_margin(){const{scale:t,options:e}=this,{mirror:s,vertical:i}=t.options,n=X(e.margin);return i?n[s?"left":"right"]:n[s?"bottom":"top"]}}b(Cc,{shape:so,track:{border:{width:1}},color:ut,border:{width:1},opacity:1,margin:X(3),animation:{type:so},visible:!0});class Tc extends ne{setup(){const t=this.options,{margin:e,from:s,to:i,vertical:n}=t,o=n?"x1":"y1";t.mirror===n?(s[o]-=e,i[o]-=e):(s[o]+=e,i[o]+=e);const a=this.fromScale=new w(s.x1,s.y1),l=this.toScale=new w(i.x1,i.y1);t.duration!==0&&(t.duration=Math.max(a.distanceTo(l)/t.duration*1e3,1))}step(t){const e=ue(this.fromScale.x,this.toScale.x,t),s=ue(this.fromScale.y,this.toScale.y,t);this.element.transform(K().translate(e,s))}}b(Tc,{easing:ba,duration:Um});ie.current.register(jm,Tc);const wi=w,P_=C;class E_ extends Cc{constructor(t,e){super(t,e),A(this.options.size)||(this.options.size=this.scale.options.majorTicks.size*.6)}pointerShape(){const{scale:t,options:{size:e}}=this,s=e/2,i=t.options.mirror?-1:1;let n;return t.options.vertical?n=[new wi(0,0-s),new wi(0-i*e,0),new wi(0,0+s)]:n=[new wi(0-s,0),new wi(0,0+i*e),new wi(0+s,0)],n}repaint(){const{scale:t,options:e}=this,s=new Tc(this.elements,m(e.animation,{vertical:t.options.vertical,mirror:t.options.mirror,margin:this._margin(e.margin),from:t.getSlot(e._oldValue),to:t.getSlot(e.value)}));e.animation.transitions===!1&&(s.options.duration=0),s.setup(),s.play()}render(){const{scale:t,options:e}=this,s=this.getElementOptions(),i=this.pointerShape(e.value);e.animation.type=jm;const n=new P_({stroke:s.stroke,fill:s.fill}).moveTo(i[0]).lineTo(i[1]).lineTo(i[2]).close(),o=t.getSlot(e.value);return n.transform(K().translate(o.x1,o.y1)),this.elements=n,n}}class Pc extends ne{setup(){const t=this.options,e=this.axis=t.vertical?P:T,s=this.to=t.newPoints[0][e],i=this.from=t.oldPoints[0][e];t.duration!==0&&(t.duration=Math.max(Math.abs(s-i)/t.speed*1e3,1)),this._set(i)}step(t){const e=ue(this.from,this.to,t);this._set(e)}_set(t){const e="set"+this.axis.toUpperCase(),s=this.options.newPoints;s[0][e](t),s[1][e](t)}}b(Pc,{easing:ba,speed:Um});ie.current.register(so,Pc);const{Group:M_,Path:Gu}=pi;class I_ extends Cc{constructor(t,e){super(t,e),A(this.options.size)||(this.options.size=this.scale.options.majorTicks.size*.3)}pointerShape(t){const{scale:e,options:s}=this,{mirror:i,vertical:n}=e.options,o=i===n?-1:1,a=s.size*o,l=e.getSlot(e.options.min),h=e.getSlot(t),c=n?P:T,d=n?T:P,u=this._margin()*o,p=new w;p[c]=l[c+"1"],p[d]=l[d+"1"];const g=new w;g[c]=h[c+"1"],g[d]=h[d+"1"],n?(p.translate(u,0),g.translate(u,0)):(p.translate(0,u),g.translate(0,u));const f=g.clone(),x=p.clone();return n?(f.translate(a,0),x.translate(a,0)):(f.translate(0,a),x.translate(0,a)),[p,g,f,x]}repaint(){const{scale:t,options:e}=this,s=this.pointerShape(e.value),i=this.pointerPath,n=this.pointerShape(e._oldValue);i.moveTo(s[0]).lineTo(s[1]).lineTo(s[2]).lineTo(s[3]).close();const o=new Pc(i,m(e.animation,{reverse:t.options.reverse,vertical:t.options.vertical,oldPoints:[n[1],n[2]],newPoints:[s[1],s[2]]}));e.animation.transitions===!1&&(o.options.duration=0),o.setup(),o.play()}render(){const t=new M_,e=this.getElementOptions();this.options.track.visible&&t.append(this.renderTrack());const s=this.pointerPath=new Gu({stroke:e.stroke,fill:e.fill});return t.append(s),this.elements=t,t}renderTrack(){const t=this.options.track,e=t.border||{},s=this.trackBox.clone().pad(e.width||0);return Gu.fromRect(s.toRect(),{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.width?e.color||t.color:"",width:e.width,dashType:e.dashType}})}}const R_=60,L_=60,O_=W;class B_ extends kc{reflow(t){const e=this.pointers,s=t.origin.x,i=t.origin.y,n=new _(s,i,s+t.width(),i+t.height());this.scale.reflow(n),this._shrinkScaleWidth(n);for(let o=0;o<e.length;o++)e[o].reflow();this.bbox=this._getBox(n),this._alignElements(),this._shrinkElements(),this._buildVisual(),this._draw()}_buildVisual(){const t=new O_,e=this.scale.render(),s=this.pointers;t.append(this.gaugeArea),t.append(e);for(let i=0;i<s.length;i++){const n=s[i];t.append(n.render()),n.value(n.options.value)}this._visuals=t}_createModel(){const t=this.options,e=this.scale=new Km(t.scale,this.contextService);this.pointers=[];let s=t.pointer;s=Ct(s)?s:[s];for(let i=0;i<s.length;i++){const n=m({},s[i],{animation:{transitions:t.transitions}}),o=n.shape===w_?E_:I_;this.pointers.push(new o(e,n))}}_defaultSize(){const t=this.options.scale.vertical;return{width:t?R_:$m,height:t?Gm:L_}}_getBox(t){const{scale:e,pointers:s}=this,i=t.center();let n=s[0].box.clone().wrap(e.box);for(let a=0;a<s.length;a++)n.wrap(s[a].box.clone());let o;return e.options.vertical?(o=n.width()/2,n=new _(i.x-o,t.y1,i.x+o,t.y2)):(o=n.height()/2,n=new _(t.x1,i.y-o,t.x2,i.y+o)),n}_alignElements(){const{scale:t,pointers:e}=this,s=t.box,i=e[0].box.clone().wrap(t.box),n=this.bbox;for(let a=0;a<e.length;a++)i.wrap(e[a].box.clone());let o;t.options.vertical?(o=n.center().x-i.center().x,t.reflow(new _(s.x1+o,n.y1,s.x2+o,n.y2))):(o=n.center().y-i.center().y,t.reflow(new _(s.x1,s.y1+o,s.x2,s.y2+o)));for(let a=0;a<e.length;a++)e[a].reflow(this.bbox)}_shrinkScaleWidth(t){const{scale:e}=this;if(!e.options.vertical){const s=e.contentBox().width()-t.width();s>0&&(e.box.shrink(s,0),e.box.alignTo(t,"center"),e.reflow(e.box))}}_shrinkElements(){const{scale:t,pointers:e}=this,s=t.box.clone(),i=t.options.vertical?"y":"x",n=e[0].box;for(let o=0;o<e.length;o++)n.wrap(e[o].box.clone());s[i+1]+=Math.max(s[i+1]-n[i+1],0),s[i+2]-=Math.max(n[i+2]-s[i+2],0),t.reflow(s);for(let o=0;o<e.length;o++)e[o].reflow(this.bbox)}}b(B_,{transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}});const Wo=180,{Arc:D_,Path:z_,Group:nr}=pi;function $u(r,t,e,s){const i=new nr,n=r.center,o=r.getRadiusX();if(s.visible)for(let a=0;a<t.length;a++){const l=r.pointAt(t[a]),h=new w(n.x+o-s.size,n.y).rotate(t[a],n);i.append(new z_({stroke:{color:s.color,width:s.width}}).moveTo(l).lineTo(h))}return i}function el(r,t,e,s){return{from:r,to:t,color:e,opacity:s}}class Ec extends Ft{constructor(t,e){super(0,1,t,e)}initUserOptions(t){const e=m({},this.options,t);return e.majorUnit=e.majorUnit||Ji(e.min,e.max),e.minorUnit=e.minorUnit||e.majorUnit/10,e}initFields(){}render(t,e){const s=this.renderArc(t,e);this.bbox=s.bbox(),this.labelElements=this.renderLabels(),this.ticks=this.renderTicks(),this.ranges=this.renderRanges()}reflow(t){const e=t.center(),s=Math.min(t.height(),t.width())/2;if(A(this.bbox))this.bbox=this.arc.bbox(),this.radius(this.arc.getRadiusX()),this.repositionRanges(),this.renderLabels();else return this.render(e,s)}slotAngle(t){const{min:e,max:s,reverse:i,startAngle:n,endAngle:o}=this.options,a=o-n;let l;return i?l=o-(t-e)/(s-e)*a:l=(t-e)/(s-e)*a+n,l+Wo}hasRanges(){const t=this.options.ranges;return t&&t.length}ticksSize(){const{majorTicks:t,minorTicks:e}=this.options;let s=0;return t.visible&&(s=t.size),e.visible&&(s=Math.max(e.size,s)),s}labelsCount(){let t=super.labelsCount();const e=this.options;return e.endAngle-e.startAngle>=360&&e.max%e.majorUnit===0&&(t-=1),t}renderLabels(){const t=this.options,e=this.arc.clone();let s=e.getRadiusX();const i=this.tickAngles(e,t.majorUnit),n=t.rangeSize=t.rangeSize||s*.1,o=new nr;let a=s*.05;A(t.rangeDistance)?a=t.rangeDistance:t.rangeDistance=a;const l=t.labels,h=l.position===Cs,c=A(this.labelElements);h&&(s-=this.ticksSize(),this.hasRanges()&&!c&&(s-=n+a),e.setRadiusX(s).setRadiusY(s));const d=this.labels,u=d.length,p=X(l.padding),g=(p.left+p.right)/2,f=(p.top+p.bottom)/2;for(let x=0;x<u;x++){const y=d[x],v=y.box.width()/2,k=y.box.height()/2,E=i[x],I=(E-Wo)*Wm,B=e.pointAt(E),V=B.x+Math.cos(I)*(v+g)*(h?1:-1),q=B.y+Math.sin(I)*(k+f)*(h?1:-1);y.reflow(new _(V-v,q-k,V+v,q+k));const ht=new w(y.box.x1,y.box.y1);let $;if(!c)$=Zm(y,t.labels),o.append($);else{$=this.labelElements.children[x];const mt=$.bbox().origin,xt=$.transform()||K();xt.translate(ht.x-mt.x,ht.y-mt.y),$.transform(xt)}this.bbox=H.union(this.bbox,$.bbox())}return o}repositionRanges(){const t=this.ranges.children;if(t.length>0){const{rangeDistance:e,rangeSize:s}=this.options;let i=this.getRangeRadius();this.options.labels.position===Cs&&(i+=s+e);const n=i+s/2;for(let o=0;o<t.length;o++)t[o]._geometry.setRadiusX(n).setRadiusY(n);this.bbox=H.union(this.bbox,this.ranges.bbox())}}renderRanges(){const t=this.rangeSegments(),e=t.length,s=new nr;if(e){const{rangeSize:i,reverse:n,rangeDistance:o}=this.options,a=this.getRangeRadius();this.radius(this.radius()-i-o);for(let l=0;l<e;l++){const h=t[l],c=this.slotAngle(h[n?"to":"from"]),d=this.slotAngle(h[n?"from":"to"]);d-c!==0&&s.append(this.createRange(c,d,a,h))}}return s}createRange(t,e,s,i){const n=this.options.rangeSize,o=new Ps(this.arc.center,{radiusX:s+n/2,radiusY:s+n/2,startAngle:t,endAngle:e});return new D_(o,{stroke:{width:n,color:i.color,opacity:i.opacity,lineCap:i.lineCap}})}rangeSegments(){const t=this.options,e=t.ranges||[],s=e.length,i=[];if(s){const{min:n,max:o,rangePlaceholderColor:a}=t;i.push(el(n,o,a));for(let l=0;l<s;l++){const h=Qm(e[l],n,o),c=i.length;for(let d=0;d<c;d++){const u=i[d];if(u.from<=h.from&&h.from<=u.to){i.push(el(h.from,h.to,h.color,h.opacity)),u.from<=h.to&&h.to<=u.to&&i.push(el(h.to,u.to,a,h.opacity)),u.to=h.from;break}}}}return i}getRangeRadius(){const{arc:t,options:e}=this,{rangeSize:s,rangeDistance:i,majorTicks:{size:n}}=e;let o;return e.labels.position===tl?o=t.getRadiusX()-n-i-s:o=t.getRadiusX()-s,o}renderArc(t,e){const s=this.options;return this.arc=new Ps(t,{radiusX:e,radiusY:e,startAngle:s.startAngle+Wo,endAngle:s.endAngle+Wo})}renderTicks(){const{arc:t,options:e}=this,s=t.clone();this.majorTickAngles=this.tickAngles(t,e.majorUnit),this.majorTicks=$u(s,this.majorTickAngles,e.majorUnit,e.majorTicks);const i=new nr;i.append(this.majorTicks);const n=e.majorTicks.size,o=e.minorTicks.size;if(this._tickDifference=n-o,e.labels.position===tl){const a=s.getRadiusX();s.setRadiusX(a-n+o).setRadiusY(a-n+o)}return this.minorTickAngles=this.normalizeTickAngles(this.tickAngles(t,e.minorUnit)),this.minorTicks=$u(s,this.minorTickAngles,e.minorUnit,e.minorTicks),i.append(this.minorTicks),i}normalizeTickAngles(t){const e=this.options,s=e.majorUnit/e.minorUnit;for(let i=t.length-1;i>=0;i--)i%s===0&&t.splice(i,1);return t}tickAngles(t,e){const s=this.options,i=s.reverse,n=s.max-s.min,o=t.endAngle-t.startAngle;let a=n/e,l=t.startAngle,h=o/a;i&&(l+=o,h=-h),o>=360&&s.max%e===0&&(a-=1);const c=[];for(let d=0;d<a;d++)c.push(S(l,At)),l+=h;return S(l)<=t.endAngle&&c.push(l),c}radius(t){if(t)this.arc.setRadiusX(t).setRadiusY(t),this.repositionTicks(this.majorTicks.children,this.majorTickAngles),this.repositionTicks(this.minorTicks.children,this.minorTickAngles,!0);else return this.arc.getRadiusX()}repositionTicks(t,e,s){const i=s&&this._tickDifference||0;let n=this.arc;const o=n.getRadiusX();s&&this.options.labels.position===tl&&i!==0&&(n=this.arc.clone(),n.setRadiusX(o-i).setRadiusY(o-i));for(let a=0;a<t.length;a++){const l=n.pointAt(e[a]),h=t[a].segments,c=l.x-h[0].anchor().x,d=l.y-h[0].anchor().y;t[a].transform(new K().translate(c,d))}}}b(Ec,{min:0,max:100,majorTicks:{size:15,align:Cs,color:ut,width:Bi,visible:!0},minorTicks:{size:10,align:Cs,color:ut,width:Bi,visible:!0},startAngle:-30,endAngle:210,labels:{position:Cs,padding:2}});class Mc extends ne{constructor(t,e){super(t,e);const s=this.options;s.duration=Math.max(Math.abs(s.newAngle-s.oldAngle)/s.duration*1e3,1)}step(t){const e=this.options,s=ue(e.oldAngle,e.newAngle,t);this.element.transform(K().rotate(s,e.center))}}b(Mc,{easing:ba,duration:Po});ie.current.register(Xm,Mc);const V_=.05,{Circle:N_,Group:F_,Path:H_}=pi;class Jm extends wa{setAngle(t){this.elements.transform(K().rotate(t,this.center))}repaint(){const{scale:t,options:e}=this,s=t.slotAngle(e._oldValue),i=t.slotAngle(e.value);e.animation.transitions===!1?this.setAngle(i):new Mc(this.elements,m(e.animation,{oldAngle:s,newAngle:i})).play()}render(){const{scale:t,options:e}=this,s=new F_;return e.animation!==!1&&m(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),s.append(this._renderNeedle(),this._renderCap()),this.elements=s,this.setAngle(Wm),s}reflow(t){const e=this.center=t.center,s=M(this.options.length||1,.1,1.5),i=this.radius=t.getRadiusX()*s,n=this.capSize=Math.round(i*this.options.cap.size);this.bbox=H.fromPoints(new w(e.x-n,e.y-n),new w(e.x+n,e.y+n))}_renderNeedle(){const t=this.scale.options.minorTicks.size,e=this.center,s=this.options.color,i=new H_({fill:{color:s},stroke:{color:s,width:Bi}});return i.moveTo(e.x+this.radius-t,e.y).lineTo(e.x,e.y-this.capSize/2).lineTo(e.x,e.y+this.capSize/2).close(),i}_renderCap(){const t=this.options,e=t.cap.color||t.color,s=new Rt(this.center,this.capSize);return new N_(s,{fill:{color:e},stroke:{color:e}})}}b(Jm,{cap:{size:V_},arrow:{width:16,height:14},animation:{type:Xm,duration:Po}});const U_=W;class j_ extends kc{reflow(t){const e=this.pointers;this.scale.reflow(t),this._initialPlotArea=this.scale.bbox;for(let s=0;s<e.length;s++)e[s].reflow(this.scale.arc),this._initialPlotArea=H.union(this._initialPlotArea,e[s].bbox);this.fitScale(t),this.alignScale(t),this._buildVisual(this.gaugeArea,e,this.scale),this._draw()}_buildVisual(t,e,s){const i=this._visuals=new U_;i.append(t),i.append(s.ticks),i.append(s.ranges),this._buildPointers(e),i.append(s.labelElements)}_buildPointers(t){for(let e=0;e<t.length;e++){const s=t[e];s.render(),this._visuals.append(s.elements),s.value(s.options.value)}}fitScale(t){const e=this.scale.arc,s=this._initialPlotArea,i=Math.abs(this.getDiff(s,t));let n=S(i,At),o=S(-i,At),a,l,h,c,d,u=0,p=0;for(;p++<100&&(u=d===h?u+1:0,!(u>5||n!==c&&(a=this.getPlotBox(n,t,e),0<=a&&a<=2)||o!==c&&(h=this.getPlotBox(o,t,e),0<=h&&h<=2)||(a>0&&h>0?c=n*2:a<0&&h<0?c=o*2:c=S((n+o)/2||1,At),l=this.getPlotBox(c,t,e),0<=l&&l<=2)));)d=h,l>0?(o=c,h=l):(n=c,a=l)}getPlotBox(t,e,s){const i=this.scale,n=this.pointers,o=s.getRadiusX(),a=s.clone();a.setRadiusX(o+t).setRadiusY(o+t),i.arc=a,i.reflow(e),this.plotBbox=i.bbox;for(let l=0;l<n.length;l++)n[l].reflow(a),this.plotBbox=H.union(this.plotBbox,n[l].bbox);return this.getDiff(this.plotBbox,e)}getDiff(t,e){return Math.min(e.width()-t.width(),e.height()-t.height())}alignScale(t){const e=this.plotBbox.center(),s=t.center(),i=e.x-s.x,n=e.y-s.y,{scale:o,pointers:a}=this;o.arc.center.x-=i,o.arc.center.y-=n,o.reflow(t);for(let l=0;l<a.length;l++)a[l].reflow(o.arc),this.plotBbox=H.union(o.bbox,a[l].bbox)}_createModel(){const t=this.options,e=t.pointer,s=this.scale=new Ec(t.scale,this.contextService);this.pointers=[];const i=Ct(e)?e:[e];for(let n=0;n<i.length;n++){const o=new Jm(s,m({},i[n],{animation:{transitions:t.transitions}}));this.pointers.push(o)}}}b(j_,{transitions:!0,gaugeArea:{background:""}});class G_ extends Ec{rangeSegments(){const{min:t,max:e,rangePlaceholderColor:s,rangeLineCap:i}=this.options;return[{from:t,to:e,color:s,lineCap:i}]}hasRanges(){return!0}placeholderRangeAngle(t){const e=this.ranges.children[0].geometry();this.options.reverse?e.setEndAngle(t):e.setStartAngle(t)}addRange(t,e,s){const i=this.options.reverse,n=this.slotAngle(i?e:t),o=this.slotAngle(i?t:e),a=this.createRange(n,o,this.getRangeRadius(),s);return this.ranges.append(a),a}}b(G_,{min:0,max:100,majorTicks:{visible:!1},minorTicks:{visible:!1},labels:{visible:!1},startAngle:0,endAngle:180,rangeLineCap:"round"});const $_=800;class Ic extends ne{constructor(t,e){super(t,e);const s=this.options,i=Math.abs(s.newAngle-s.oldAngle)/s.duration*1e3;s.duration=M(i,Po,$_);const n=t.elements.options.get("stroke.color"),o=t.currentColor();n!==o&&(this.startColor=new Nt(n),this.color=new Nt(o))}step(t){const{options:e,startColor:s,color:i}=this,n=ue(e.oldAngle,e.newAngle,t);if(this.element.angle(n),i){const o=S(ue(s.r,i.r,t)),a=S(ue(s.g,i.g,t)),l=S(ue(s.b,i.b,t));this.element.stroke(new Nt(o,a,l).toHex())}}}b(Ic,{easing:ba,duration:Po});ie.current.register(Ym,Ic);class W_ extends wa{repaint(){const{scale:t,options:e}=this,s=t.slotAngle(e._oldValue),i=t.slotAngle(e.value);this.animation&&this.animation.abort(),e.animation.transitions===!1?(this.angle(i),this.stroke(this.currentColor())):(this.animation=new Ic(this,m(e.animation,{oldAngle:s,newAngle:i})),this.animation.play())}angle(t){const e=this.elements.geometry();this.scale.options.reverse?e.setStartAngle(t):e.setEndAngle(t),this.scale.placeholderRangeAngle(t)}stroke(t){this.elements.stroke(t)}render(){if(this.elements)return;const{scale:t,options:e}=this;e.animation!==!1&&m(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),this.elements=t.addRange(t.options.min,this.options.value,{color:this.currentColor(),opacity:e.opacity,lineCap:t.options.rangeLineCap})}currentColor(){const{min:t,max:e}=this.scale.options,{colors:s,color:i,value:n}=this.options,o=F(n)?n:t;if(s)for(let a=0;a<s.length;a++){const{color:l,from:h=t,to:c=e}=s[a];if(h<=o&&o<=c)return l}return i}reflow(){this.render(),this.bbox=this.elements.bbox()}}b(W_,{animation:{type:Ym,duration:Po}});const tx=10;class bi{constructor(t){this.setOptions(t),this.initProperties()}initProperties(){}setOptions(t){this.options=Object.assign({},this.options,t),this.quietZoneLength=this.options.addQuietZone?2*this.options.quietZoneLength:0}encode(t,e,s){const i=A(t)?String(t):t;return this.initValue(i,e,s),this.options.addQuietZone&&this.addQuietZone(),this.addData(),this.options.addQuietZone&&this.addQuietZone(),{baseUnit:this.baseUnit,pattern:this.pattern}}initValue(){}addQuietZone(){this.pattern.push(this.options.quietZoneLength||tx)}addData(){}invalidCharacterError(t){throw new Error(`Character "${t}" is not valid for symbology ${this.name}.`)}}b(bi,{quietZoneLength:tx,addQuietZone:!0,addCheckSum:!0});const X_=Object.assign;class ex extends bi{initProperties(){super.initProperties(),X_(this,{name:"Code 11",characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221"})}initValue(t,e){this.pattern=[],this.value=t,this.width=e,this.totalUnits=0}addData(){const t=this.value;this.addPattern(this.START);for(let e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()}setBaseUnit(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)}addCheckSum(){const t=this.value;let e=t.length;const s=this.getWeightedSum(t,e,this.cCheckSumTotal)%this.checkSumMod;if(this.checksum=String(s),this.addPattern(this.characterMap[s]),e++,e>=this.kCheckSumMinLength){let i=(s+this.getWeightedSum(t,e,this.kCheckSumTotal))%this.checkSumMod;this.checksum+=i,this.addPattern(this.characterMap[i])}}getWeightedSum(t,e,s){let i=0;for(let n=0;n<t.length;n++)i+=this.weightedValue(this.getValue(t.charAt(n)),e,n,s);return i}weightedValue(t,e,s,i){return((e-s)%i||i)*t}getValue(t){if(isNaN(t))t!==this.DASH&&this.invalidCharacterError(t);else return parseInt(t,10);return this.DASH_VALUE}addCharacter(t){const e=this.getValue(t),s=this.characterMap[e];this.addPattern(s)}addPattern(t){let e;for(let s=0;s<t.length;s++)e=parseInt(t.charAt(s),10),this.pattern.push(e),this.totalUnits+=e}}b(ex,{addCheckSum:!0});const sx=Object.assign;class ix extends bi{initProperties(){super.initProperties(),sx(this,{minBaseUnitLength:.7})}addData(){const t=this.value;this.addStart();for(let e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.pushCheckSum(),this.addStop(),this.prepareValues()}addCharacter(t){const e=this.characterMap[t];e||this.invalidCharacterError(t),this.addBase(e)}addBase(){}}class Rc extends ix{initProperties(){super.initProperties(),sx(this,{name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}}})}initValue(t,e,s){this.width=e,this.height=s,this.value=t,this.dataLength=t.length,this.pattern=[],this.patternString=""}prepareValues(){const t=this.minBaseUnitLength,e=this.minRatio,s=Math.ceil(Math.max(.15*this.width,24));let i,n=this.maxRatio;if(this.height<s)throw new Error(`Insufficient height for Code39 encoding: the current height is ${this.height}px and the minimum height is ${s}px.`);for(i=this.getBaseUnit(n);i<t&&n>e;)n=parseFloat((n-.1).toFixed(1)),i=this.getBaseUnit(n);if(i<t){let o=Math.ceil(this.getBaseWidth(e)*t);throw new Error(`Insufficient width for Code39 encoding: the current width is ${this.width}px and the minimum width for value "${this.value}" is ${o}px.`)}this.ratio=n,this.baseUnit=i,this.patternString=this.patternString.substring(0,this.patternString.length-1),this.pattern=this.pattern.concat(this.patternString.replace(/ratio/g,n).split(this.splitCharacter))}getBaseUnit(t){return this.width/this.getBaseWidth(t)}getBaseWidth(t){const e=3*(t+2);return this.quietZoneLength+e*(this.dataLength+2)+this.gapWidth*(this.dataLength+1)}addStart(){this.addPattern(this.characterMap.START.pattern),this.addCharacterGap()}addBase(t){this.addPattern(t.pattern),this.addCharacterGap()}addStop(){this.addPattern(this.characterMap.START.pattern)}addPattern(t){for(let e=0;e<t.length;e++)this.patternString+=this.patternMappings[t.charAt(e)]}addCharacterGap(){this.patternString+=this.gapWidth+this.splitCharacter}}b(Rc,{addCheckSum:!1});const nx={addCharacter(r){this.characterMap[r]?this.addBase(this.characterMap[r]):r.charCodeAt(0)>127?this.invalidCharacterError(r):this.addExtended(r.charCodeAt(0))},addExtended(r){let t;for(let e=0;e<this.extendedMappings.length;e++)if(t=this.extendedMappings[e].call(this,r),t){for(let s=0;s<t.length;s++){const i=t[s];this.addBase(i)}this.dataLength+=t.length-1;return}},extendedMappings:[function(r){if(97<=r&&r<=122)return[this.characterMap[this.shiftCharacters[0]],this.characterMap[String.fromCharCode(r-32)]]},function(r){if(33<=r&&r<=58)return[this.characterMap[this.shiftCharacters[1]],this.characterMap[String.fromCharCode(r+32)]]},function(r){if(1<=r&&r<=26)return[this.characterMap[this.shiftCharacters[2]],this.characterMap[String.fromCharCode(r+64)]]},function(r){let t,e;if(!this.specialAsciiCodes[r])e=Math.floor(r/32)*6+(r-27)%32+64,t=[this.characterMap[this.shiftCharacters[3]],this.characterMap[String.fromCharCode(e)]];else{t=[];for(let s=0;s<this.specialAsciiCodes[r].length;s++)t.push(this.characterMap[this.shiftCharacters[3]]),t.push(this.characterMap[this.specialAsciiCodes[r][s]])}return t}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]};class Y_ extends Rc{initProperties(){super.initProperties(),m(this,nx,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})}}const q_=Object.assign;class ox extends ix{initProperties(){super.initProperties(),q_(this,{name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}})}initValue(t,e,s){this.value=t,this.width=e,this.height=s,this.pattern=[],this.values=[],this.dataLength=t.length}prepareValues(){let t=Math.ceil(Math.max(.15*this.width,24));if(this.height<t)throw new Error(`Insufficient height for Code93 encoding: the current height is ${this.height}px, the minimum required height is ${t}px.`);if(this.setBaseUnit(),this.baseUnit<this.minBaseUnitLength){const e=Math.ceil(this.minBaseUnitLength*(this.width/this.baseUnit));throw new Error(`Insufficient width for Code93 encoding: the current width is ${this.width}px and the minimum required width for value "${this.value}" is ${e}px.`)}}setBaseUnit(){this.baseUnit=this.width/(9*(this.dataLength+2+2)+this.quietZoneLength+1)}addStart(){let t=this.characterMap.START.pattern;this.addPattern(t)}addStop(){this.addStart(),this.pattern.push(this.characterMap.TERMINATION_BAR)}addBase(t){this.addPattern(t.pattern),this.values.push(t.value)}pushCheckSum(){const t=this._getCheckValues();let e;this.checksum=t.join("");for(let s=0;s<t.length;s++)e=this.characterMap[this._findCharacterByValue(t[s])],this.addPattern(e.pattern)}_getCheckValues(){const t=this.values,e=t.length;let s=0,i,n,o;for(o=e-1;o>=0;o--)s+=this.weightedValue(t[o],e-o,this.cCheckSumTotal);for(i=s%this.checkSumMod,s=this.weightedValue(i,1,this.kCheckSumTotal),o=e-1;o>=0;o--)s+=this.weightedValue(t[o],e-o+1,this.kCheckSumTotal);return n=s%this.checkSumMod,[i,n]}_findCharacterByValue(t){for(let e in this.characterMap)if(this.characterMap[e].value===t)return e}weightedValue(t,e,s){return(e%s||s)*t}addPattern(t){let e;for(let s=0;s<t.length;s++)e=parseInt(t.charAt(s),10),this.pattern.push(e)}}class Z_ extends ox{initProperties(){super.initProperties(),m(this,nx,{name:"Code 93 extended",pushCheckSum:function(){const t=this._getCheckValues();let e;this.checksum=t.join("");for(let s=0;s<t.length;s++)if(e=t[s],this.shiftValuesAsciiCodes[e])this.addExtended(this.shiftValuesAsciiCodes[e]);else{const i=this._findCharacterByValue(e);this.addPattern(this.characterMap[i].pattern)}}})}}const Q_=/^\d+$/,K_=Object.assign;class J_ extends bi{initProperties(){super.initProperties(),K_(this,{name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]})}initValue(t,e,s){this.height=s,this.width=e,this.baseHeight=s/2,this.value=t.replace(new RegExp(this.DIGIT_SEPARATOR,"g"),""),this.pattern=[],this.validate(this.value),this.checkSum=0,this.setBaseUnit()}addData(){const t=this.value;this.addPattern(this.START);for(let e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.START),this.pattern.pop()}addCharacter(t){const e=this.characterMap[t];this.checkSum+=parseInt(t,10),this.addPattern(e)}addCheckSum(){this.checksum=(10-this.checkSum%10)%10,this.addCharacter(this.checksum)}setBaseUnit(){this.baseUnit=this.width/((this.value.length+1)*10+3+this.quietZoneLength)}validate(t){if(Q_.test(t)||this.invalidCharacterError(t.match(/[^0-9]/)[0]),!D(t.length,this.VALID_CODE_LENGTHS))throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+this.VALID_CODE_LENGTHS.join(",")+".")}addPattern(t){let e;for(let s=0;s<t.length;s++)e=this.height-this.baseHeight*t.charAt(s),this.pattern.push({width:1,y1:e,y2:this.height}),this.pattern.push(1)}}const Fl=/^\d+$/,tA=/^[a-z0-9]+$/i,Te=Object.assign;class _a{constructor(t){this.encoding=t,this.initProperties()}initProperties(){}addStart(){}is(){}isCode(){return!1}move(){}pushState(){}}class rx extends _a{constructor(t,e){super(t),this.states=e,this._initMoves(e)}initProperties(){super.initProperties(),m(this,{FNC4:"FNC4",SHIFT:98})}addStart(){this.encoding.addPattern(this.START)}is(t,e){let s=t.charCodeAt(e);return this.isCode(s)}move(t){let e=0;for(;!this._moves[e].call(this,t)&&e<this._moves.length;)e++}pushState(t){let e=this.states,s=t.value,i=s.length,n;if(D("C",e)){let o=s.substr(t.index).match(/\d{4,}/g);o&&(i=s.indexOf(o[0],t.index))}for(;(n=t.value.charCodeAt(t.index))>=0&&this.isCode(n)&&t.index<i;)this.encoding.addPattern(this.getValue(n)),t.index++}_initMoves(t){this._moves=[],D(this.FNC4,t)&&this._moves.push(this._moveFNC),D(this.shiftKey,t)&&this._moves.push(this._shiftState),this._moves.push(this._moveState)}_moveFNC(t){if(t.fnc)return t.fnc=!1,t.previousState===this.key}_shiftState(t){if(t.previousState===this.shiftKey&&(t.index+1>=t.value.length||this.encoding[this.shiftKey].is(t.value,t.index+1)))return this.encoding.addPattern(this.SHIFT),t.shifted=!0,!0}_moveState(){return this.encoding.addPattern(this.MOVE),!0}}const gn={};gn.A=class extends rx{initProperties(){super.initProperties(),Te(this,{key:"A",shiftKey:"B",MOVE:101,START:103})}isCode(t){return 0<=t&&t<96}getValue(t){return t<32?t+64:t-32}};gn.B=class extends rx{initProperties(){super.initProperties(),Te(this,{key:"B",shiftKey:"A",MOVE:100,START:104})}isCode(t){return 32<=t&&t<128}getValue(t){return t-32}};gn.C=class extends _a{initProperties(){super.initProperties(),Te(this,{key:"C",MOVE:99,START:105})}addStart(){this.encoding.addPattern(this.START)}is(t,e){let s=Hl(t,e,4);return(e+4<=t.length||t.length===2)&&Fl.test(s)}move(){this.encoding.addPattern(this.MOVE)}pushState(t){let e;for(;(e=Hl(t.value,t.index,2))&&Fl.test(e)&&e.length===2;)this.encoding.addPattern(parseInt(e,10)),t.index+=2}getValue(t){return t}};gn.FNC4=class extends _a{constructor(t,e){super(t),this._initSubStates(e)}initProperties(){super.initProperties(),Te(this,{key:"FNC4",dependentStates:["A","B"]})}addStart(t){let e=t.value.charCodeAt(0)-128,s=this._getSubState(e);this.encoding[s].addStart()}is(t,e){let s=t.charCodeAt(e);return this.isCode(s)}isCode(t){return 128<=t&&t<256}pushState(t){let e=this._initSubState(t),s=this.encoding,i=e.value.length,n;if(t.index+=i,i<3)for(;e.index<i;e.index++)n=e.value.charCodeAt(e.index),e.state=this._getSubState(n),e.previousState!==e.state&&(e.previousState=e.state,s[e.state].move(e)),s.addPattern(s[e.state].MOVE),s.addPattern(s[e.state].getValue(n));else e.state!==e.previousState&&s[e.state].move(e),this._pushStart(e),s.pushData(e,this.subStates),t.index<t.value.length&&this._pushStart(e);t.fnc=!0,t.state=e.state}_pushStart(t){this.encoding.addPattern(this.encoding[t.state].MOVE),this.encoding.addPattern(this.encoding[t.state].MOVE)}_initSubState(t){const e={value:this._getAll(t.value,t.index),index:0};return e.state=this._getSubState(e.value.charCodeAt(0)),e.previousState=t.previousState===this.key?e.state:t.previousState,e}_initSubStates(t){this.subStates=[];for(let e=0;e<t.length;e++)D(t[e],this.dependentStates)&&this.subStates.push(t[e])}_getSubState(t){for(let e=0;e<this.subStates.length;e++)if(this.encoding[this.subStates[e]].isCode(t))return this.subStates[e]}_getAll(t,e){let s,i="",n=e;for(;(s=t.charCodeAt(n++))&&this.isCode(s);)i+=String.fromCharCode(s-128);return i}};gn.FNC1=class extends _a{constructor(t,e){super(t),this.states=e}initProperties(){super.initProperties(),Te(this,{key:"FNC1",startState:"C",startAI:"(",endAI:")",dependentStates:["C","B"],applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102})}addStart(){this.encoding[this.startState].addStart()}is(){return D(this.key,this.states)}pushState(t){let e=this.encoding,s=t.value.replace(/\s/g,""),i=new RegExp("["+this.startAI+this.endAI+"]","g"),n=t.index,o={state:this.startState},a,l,h;e.addPattern(this.START);const c=!0;for(;c;){if(o.index=0,h=s.charAt(n)===this.startAI?2:0,a=h>0?this.getBySeparator(s,n):this.getByLength(s,n),a.ai.length)l=n+h+a.id.length+a.ai.length;else if(l=s.indexOf(this.startAI,n+1),l<0){if(n+a.ai.max+a.id.length+h<s.length)throw new Error("Separators are required after variable length identifiers");l=s.length}if(o.value=s.substring(n,l).replace(i,""),this.validate(a,o.value),e.pushData(o,this.dependentStates),l>=s.length)break;n=l,o.state!==this.startState&&(e[this.startState].move(o),o.state=this.startState),a.ai.length||e.addPattern(this.START)}t.index=t.value.length}validate(t,e){let s=e.substr(t.id.length),i=t.ai;if(!i.type&&!Fl.test(s))throw new Error("Application identifier "+t.id+" is numeric only but contains non numeric character(s).");if(i.type==="alphanumeric"&&!tA.test(s))throw new Error("Application identifier "+t.id+" is alphanumeric only but contains non alphanumeric character(s).");if(i.length&&i.length!==s.length)throw new Error("Application identifier "+t.id+" must be "+i.length+" characters long.");if(i.min&&i.min>s.length)throw new Error("Application identifier "+t.id+" must be at least "+i.min+" characters long.");if(i.max&&i.max<s.length)throw new Error("Application identifier "+t.id+" must be at most "+i.max+" characters long.")}getByLength(t,e){let s,i;for(let n=2;n<=4;n++)if(s=Hl(t,e,n),i=this.getApplicationIdentifier(s)||this.getApplicationIdentifier(s.substring(0,s.length-1)),i)return{id:s,ai:i};this.unsupportedAIError(s)}unsupportedAIError(t){throw new Error("'"+t+"' is not a supported Application Identifier")}getBySeparator(t,e){let s=t.indexOf(this.startAI,e),i=t.indexOf(this.endAI,s),n=t.substring(s+1,i),o=this.getApplicationIdentifier(n)||this.getApplicationIdentifier(n.substr(n.length-1));return o||this.unsupportedAIError(n),{ai:o,id:n}}getApplicationIdentifier(t){let e=this.applicationIdentifiers,s=e.multiKey;if(e[t])return e[t];for(let i=0;i<s.length;i++){if(s[i].ids&&D(t,s[i].ids))return s[i].type;if(s[i].ranges){let n=s[i].ranges;for(let o=0;o<n.length;o++)if(n[o][0]<=t&&t<=n[o][1])return s[i].type}}}};class Eo extends bi{constructor(t){super(t),this._initStates()}initProperties(){super.initProperties(),Te(this,{characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106})}_initStates(){for(let t=0;t<this.states.length;t++)this[this.states[t]]=new gn[this.states[t]](this,this.states)}initValue(t,e,s){this.pattern=[],this.value=t,this.width=e,this.height=s,this.checkSum=0,this.totalUnits=0,this.index=0,this.position=1}addData(){let t={value:this.value,index:0,state:""};this.value.length!==0&&(t.state=t.previousState=this.getNextState(t,this.states),this.addStart(t),this.pushData(t,this.states),this.addCheckSum(),this.addStop(),this.setBaseUnit())}pushData(t,e){for(;this[t.state].pushState(t),!(t.index>=t.value.length);)if(!t.shifted)t.previousState=t.state,t.state=this.getNextState(t,e),this[t.state].move(t);else{let i=t.state;t.state=t.previousState,t.previousState=i,t.shifted=!1}}addStart(t){this[t.state].addStart(t),this.position=1}addCheckSum(){this.checksum=this.checkSum%103,this.addPattern(this.checksum)}addStop(){this.addPattern(this.STOP)}setBaseUnit(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)}addPattern(t){const e=this.characterMap[t].toString();let s;for(let i=0;i<e.length;i++)s=parseInt(e.charAt(i),10),this.pattern.push(s),this.totalUnits+=s;this.checkSum+=t*this.position++}getNextState(t,e){for(let s=0;s<e.length;s++)if(this[e[s]].is(t.value,t.index))return e[s];this.invalidCharacterError(t.value.charAt(t.index))}}class eA extends Eo{initProperties(){super.initProperties(),Te(this,{name:"Code 128 A",states:["A"]})}}class sA extends Eo{initProperties(){super.initProperties(),Te(this,{name:"Code 128 B",states:["B"]})}}class iA extends Eo{initProperties(){super.initProperties(),Te(this,{name:"Code 128 C",states:["C"]})}}class nA extends Eo{initProperties(){super.initProperties(),Te(this,{name:"Code 128",states:["C","B","A","FNC4"]})}}class oA extends Eo{initProperties(){super.initProperties(),Te(this,{name:"Code GS1-128",states:["FNC1","C","B"]})}}function Hl(r,t,e){return r.substring(t,t+e)}const Mo=Object.assign;class Aa extends bi{initProperties(){super.initProperties(),Mo(this,{characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:"",checkSums:cA})}initValue(t,e){this.pattern=[],this.value=t,this.checkSumLength=0,this.width=e}setBaseUnit(){this.baseUnit=this.width/(12*(this.value.length+this.checkSumLength)+this.quietZoneLength+7)}addData(){const t=this.value;this.addPattern(this.START);for(let e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()}addCharacter(t){const e=this.characterMap[t];e||this.invalidCharacterError(t),this.addPattern(e)}addPattern(t){for(let e=0;e<t.length;e++)this.pattern.push(parseInt(t.charAt(e),10))}addCheckSum(){const e=this.checkSums[this.checkSumType].call(this.checkSums,this.value);this.checksum=e.join("");for(let s=0;s<e.length;s++)this.checkSumLength++,this.addPattern(this.characterMap[e[s]])}}class rA extends Aa{initProperties(){super.initProperties(),Mo(this,{name:"MSI Modulo10",checkSumType:"Modulo10"})}}class aA extends Aa{initProperties(){super.initProperties(),Mo(this,{name:"MSI Modulo11",checkSumType:"Modulo11"})}}class lA extends Aa{initProperties(){super.initProperties(),Mo(this,{name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"})}}class hA extends Aa{initProperties(){super.initProperties(),Mo(this,{name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"})}}const cA={Modulo10(r){let t=[0,""],e=r.length%2,s,i,n;for(s=0;s<r.length;s++)t[(s+e)%2]+=parseInt(r.charAt(s),10);for(n=t[0],i=(t[1]*2).toString(),s=0;s<i.length;s++)n+=parseInt(i.charAt(s),10);return[(10-n%10)%10]},Modulo11(r){let t=0,e=11,s=r.length,i,n;for(let o=0;o<s;o++)i=((s-o)%6||6)+1,t+=i*r.charAt(o);return n=(e-t%e)%e,n!==10?[n]:[1,0]},Modulo11Modulo10(r){let t=this.Modulo11(r),e;return e=r+t[0],t.concat(this.Modulo10(e))},Modulo10Modulo10(r){let t=this.Modulo10(r),e;return e=r+t[0],t.concat(this.Modulo10(e))}},dA=Object.assign;class ax extends bi{initProperties(){super.initProperties(),dA(this,{name:"EAN 13",keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}})}initValue(t,e,s){const i=String(t);if(i.length!==12||/\D/.test(i))throw new Error('The value of the "EAN13" encoding should be 12 symbols');this.pattern=[],this.options.height=s,this.baseUnit=e/(95+this.quietZoneLength),this.value=i,this.checksum=this.calculateChecksum(),this.leftKey=i[0],this.leftPart=i.substr(1,6),this.rightPart=i.substr(7)+this.checksum}addData(){this.addPieces(this.characterMap.start),this.addSide(this.leftPart,this.leftKey),this.addPieces(this.characterMap.middle),this.addSide(this.rightPart),this.addPieces(this.characterMap.start)}addSide(t,e){for(let s=0;s<t.length;s++)e&&parseInt(this.keyTable[e].charAt(s),10)?this.addPieces(Array.prototype.slice.call(this.characterMap.digits[t.charAt(s)]).reverse(),!0):this.addPieces(this.characterMap.digits[t.charAt(s)],!0)}addPieces(t,e){for(let s=0;s<t.length;s++)e?this.pattern.push({y1:0,y2:this.options.height*.95,width:t[s]}):this.pattern.push(t[s])}calculateChecksum(){let t=0,e=0,s=this.value.split("").reverse().join("");for(let n=0;n<s.length;n++)n%2?e+=parseInt(s.charAt(n),10):t+=parseInt(s.charAt(n),10);return(10-(3*t+e)%10)%10}}const uA=Object.assign;class pA extends ax{initProperties(){super.initProperties(),uA(this,{name:"EAN 8"})}initValue(t,e,s){if(t.length!==7||/\D/.test(t))throw new Error("Invalid value provided");this.value=t,this.options.height=s,this.checksum=this.calculateChecksum(this.value),this.leftPart=this.value.substr(0,4),this.rightPart=this.value.substr(4)+this.checksum,this.pattern=[],this.baseUnit=e/(67+this.quietZoneLength)}}const Wu={code11:ex,code39:Rc,code39extended:Y_,code93:ox,code93extended:Z_,code128:nA,code128a:eA,code128b:sA,code128c:iA,"gs1-128":oA,msimod10:rA,msimod11:aA,msimod1010:lA,msimod1110:hA,postnet:J_,ean8:pA,ean13:ax};function lx(r,t){const e=r.style.display;t==="canvas"&&(r.style.display="block");const s={width:r.clientWidth,height:r.clientHeight};return r.style.display=e,s}const gA=300,fA=100;class mA{constructor(t,e,s=cf){this.options=m({},this.options,e),this.element=t,this.onError=s,this._initElement(),this._initSurface(),this._setOptions(e),e&&A(e.value)&&this.redraw()}destroy(){this._destroySurface()}_initElement(){dt(this.element,"k-barcode")}_initSurface(){const{options:t,surface:e}=this;(!e||e.options.type!==t.renderAs)&&(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())}_createSurface(){return ai.create(this.surfaceElement,{type:this.options.renderAs})}_destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())}_initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))}_destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)}setOptions(t){this._setOptions(t),this._initSurface(),this.redraw()}redraw(){let t=this._getSize();this.surface.clear(),this.surface.setSize({width:t.width,height:t.height}),this.createVisual(),this.surface.draw(this.visual)}getSize(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}}_resize(){this.redraw()}createVisual(){this.visual=this._render()}_render(){const t=this.options,e=t.value,s=t.text,i=X(s.margin),n=this._getSize(),o=t.border||{},a=this.encoding,l=new _(0,0,n.width,n.height).unpad(o.width).unpad(t.padding);let h=l.height(),c,d,u;const p=new W;this.contentBox=l,p.append(this._getBackground(n)),s.visible&&(u=Xr(e,{font:s.font}).height,h-=u+i.top+i.bottom);try{c=a.encode(e,l.width(),h)}catch(g){return this.onError(g),p}return s.visible&&(d=e,t.checksum&&A(a.checksum)&&(d+=" "+a.checksum),p.append(this._getText(d))),this.barHeight=h,this._bandsGroup=this._getBands(c.pattern,c.baseUnit),p.append(this._bandsGroup),p}exportVisual(){return this._render()}_getSize(){const t=this.element,e=lx(t,this.options.renderAs),s=new zt(gA,fA);return e.width>0&&(s.width=e.width),e.height>0&&(s.height=e.height),this.options.width&&(s.width=this.options.width),this.options.height&&(s.height=this.options.height),s}value(t){if(!A(t))return this.options.value;this.options.value=String(t),this.redraw()}_getBands(t,e){const s=this.contentBox;let i=s.x1,n,o;const a=new W;for(let l=0;l<t.length;l++){if(o=me(t[l])?t[l]:{width:t[l],y1:0,y2:this.barHeight},n=o.width*e,l%2){const h=H.fromPoints(new w(i,o.y1+s.y1),new w(i+n,o.y2+s.y1)),c=C.fromRect(h,{fill:{color:this.options.color},stroke:null});a.append(c)}i+=n}return a}_getBackground(t){const e=this.options,s=e.border||{},i=new _(0,0,t.width,t.height).unpad(s.width/2);return C.fromRect(i.toRect(),{fill:{color:e.background},stroke:{color:s.width?s.color:"",width:s.width,dashType:s.dashType}})}_getText(t){const e=this.options.text,s=this._textbox=new qt(t,{font:e.font,color:e.color,align:"center",vAlign:"bottom",margin:e.margin});return s.reflow(this.contentBox),s.renderVisual(),s.visual}_setOptions(t){if(this.type=(t.type||this.options.type).toLowerCase(),this.type==="upca"&&(this.type="ean13",t.value="0"+t.value),this.type==="upce"&&(this.type="ean8",t.value="0"+t.value),!Wu[this.type])throw new Error(`Encoding '${this.type}' is not supported.`);this.encoding=new Wu[this.type],this.options=m({},this.options,t)}}b(mA,{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}});const fn=Object.assign;function hx(r,t){let e=[],s=0;for(;s<r.length;)e.push(r.substring(s,s+t)),s+=t;return e}function $t(r,t){let e=Number(r).toString(2);return e.length<t&&(e=new Array(t-e.length+1).join(0)+e),e}function Fr(r){return parseInt(r,2)}class xA{constructor(t){this.matrix=t,this.row=t.length-1,this.column=t.length-1,this.startColumn=this.column,this.dir=-1,this.c=0}move(){this.row+=this.dir*this.c,this.c^=1,this.column=this.startColumn-this.c}getNextCell(){for(;this.matrix[this.row][this.column]!==void 0;)this.move(),(this.row<0||this.row>=this.matrix.length)&&(this.dir=-this.dir,this.startColumn-=this.startColumn!==8?2:3,this.column=this.startColumn,this.row=this.dir<0?this.matrix.length-1:0);return{row:this.row,column:this.column}}getNextRemainderCell(){if(this.move(),this.matrix[this.row][this.column]===void 0)return{row:this.row,column:this.column}}}class cx{constructor(t,e){this.dataString=t,this.version=e}}const yA="numeric",Xu="alphanumeric",vA="byte",bA=/^\d+/,dx="A-Z0-9 $%*+./:-",wA="A-Z $%*+./:-",_A=new RegExp("^["+wA+"]+"),Yu=new RegExp("^["+dx+"]+"),qu=new RegExp("^[^"+dx+"]+");function Zu(r,t,e,s,i){let n=bA.exec(r),o=n?n[0]:"",a=_A.exec(r),l=a?a[0]:"",h=Yu.exec(r),c=h?h[0]:"",d,u;return o&&(o.length>=t||r.length===o.length||o.length>=e&&!Yu.test(r.charAt(o.length)))?(d=yA,u=o):c&&(r.length===c.length||c.length>=s||i===Xu)?(d=Xu,u=o||l):(d=vA,c?u=c+qu.exec(r.substring(c.length))[0]:u=qu.exec(r)[0]),{mode:d,modeString:u}}class Lc{constructor(){this.initProperties()}initProperties(){fn(this,{modeIndicator:"",bitsInCharacterCount:[]})}getVersionIndex(t){return t<10?0:t>26?2:1}getBitsCharacterCount(t){return this.bitsInCharacterCount[this.getVersionIndex(t||40)]}getModeCountString(t,e){return this.modeIndicator+$t(t,this.getBitsCharacterCount(e))}encode(){}getStringBitsLength(){}getValue(){}}class AA extends Lc{initProperties(){super.initProperties(),fn(this,{bitsInCharacterCount:[10,12,14],modeIndicator:"0001"})}getValue(t){return parseInt(t,10)}encode(t,e){let s=this,i=hx(t,3),n=s.getModeCountString(t.length,e),o;for(o=0;o<i.length-1;o++)n+=$t(i[o],10);return n+$t(i[o],1+3*i[o].length)}getStringBitsLength(t,e){let s=t%3;return 4+this.getBitsCharacterCount(e)+10*Math.floor(t/3)+3*s+(s===0?0:1)}}class SA extends Lc{initProperties(){super.initProperties(),fn(this,{characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010"})}getValue(t){return this.characters[t]}encode(t,e){let s=hx(t,2),i=this.getModeCountString(t.length,e),n,o;for(o=0;o<s.length-1;o++)n=45*this.getValue(s[o].charAt(0))+this.getValue(s[o].charAt(1)),i+=$t(n,11);return n=s[o].length===2?45*this.getValue(s[o].charAt(0))+this.getValue(s[o].charAt(1)):this.getValue(s[o].charAt(0)),i+$t(n,1+5*s[o].length)}getStringBitsLength(t,e){return 4+this.getBitsCharacterCount(e)+11*Math.floor(t/2)+6*(t%2)}}class kA extends Lc{initProperties(){super.initProperties(),fn(this,{bitsInCharacterCount:[8,16,16],modeIndicator:"0100"})}getValue(t){let e=t.charCodeAt(0);if(e<=127||160<=e&&e<=255)return e;throw new Error(`Unsupported character in QR Code: "${t}".`)}encode(t,e){let s=this,i=s.getModeCountString(t.length,e);for(let n=0;n<t.length;n++)i+=$t(s.getValue(t.charAt(n)),8);return i}getStringBitsLength(t,e){return 4+this.getBitsCharacterCount(e)+8*t}}const CA="numeric",TA="alphanumeric",PA="byte";let Oc={[CA]:new AA,[TA]:new SA,[PA]:new kA};function EA(r){let t=0,e;for(let s=0;s<r.length;s++)e=Oc[r[s].mode],t+=e.getStringBitsLength(r[s].modeString.length);return Math.ceil(t/8)}function MA(r,t){let e="",s;for(let i=0;i<r.length;i++)s=Oc[r[i].mode],e+=s.encode(r[i].modeString,t);return e}const IA=8,RA=5,LA=8,OA=17,BA=9,DA=16;function zA(r){let t=[],e,s=0,i=r;for(t.push(Zu(i,IA,RA,LA,e)),e=t[0].mode,i=i.substr(t[0].modeString.length);i.length>0;){let n=Zu(i,OA,BA,DA,e);n.mode!==e?(e=n.mode,t.push(n),s++):t[s].modeString+=n.modeString,i=i.substr(n.modeString.length)}return t}const Ln=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}];function ux(r,t){let e=0,s=Ln.length-1,i=Math.floor(Ln.length/2);do r<Ln[i][t].totalDataCodewords?s=i:e=i,i=e+Math.floor((s-e)/2);while(s-e>1);return r<=Ln[e][t].totalDataCodewords?i+1:s+1}class VA{getEncodingResult(t,e){let s=zA(t),i=EA(s),n=ux(i,e),o=MA(s,n);return new cx(o,n)}}const NA="byte";class FA{constructor(){this.initProperties(),this.mode=Oc[this.encodingMode]}initProperties(){fn(this,{encodingMode:NA,utfBOM:"111011111011101110111111",initialModeCountStringLength:20,ranges:[128,2048,65536,2097152,67108864]})}getEncodingResult(t,e){let s=this.encode(t),i=this.getDataCodewordsCount(s),n=ux(i,e),o=this.mode.getModeCountString(s.length/8,n)+s;return new cx(o,n)}getDataCodewordsCount(t){let e=t.length;return Math.ceil((this.initialModeCountStringLength+e)/8)}encode(t){let e=this.utfBOM;for(let s=0;s<t.length;s++)e+=this.encodeCharacter(t.charCodeAt(s));return e}encodeCharacter(t){let e=this.getBytesCount(t),s=e-1,i="";if(e===1)i=$t(t,8);else{let n=8-e;for(let o=0;o<s;o++)i=$t(t>>o*6&63|128,8)+i;i=(t>>s*6|255>>n<<n).toString(2)+i}return i}getBytesCount(t){let e=this.ranges;for(let s=0;s<e.length;s++)if(t<e[s])return s+1}}let Qu="0000",Bc={1:0},ws={0:1},HA={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},sl=[1,0,1,1,1],UA=[1,0,1],jA={L:"01",M:"00",Q:"11",H:"10"},GA="101010000010010",$A="10100110111",WA="1111100100101",XA=["11101100","00010001"],YA=93,Ul=[(r,t)=>(r+t)%2===0,(r,t)=>r%2===0,(r,t)=>t%3===0,(r,t)=>(r+t)%3===0,(r,t)=>(Math.floor(r/2)+Math.floor(t/3))%2===0,(r,t)=>r*t%2+r*t%3===0,(r,t)=>(r*t%2+r*t%3)%2===0,(r,t)=>((r+t)%2+r*t%3)%2===0];const jl=[[1,0],[1,25,0]];function Vt(r,t,e,s){for(let i=0;i<r.length;i++)r[i][e][s]=t}function Ku(r,t,e,s){for(let i=0;i<Ul.length;i++)r[i][e][s]=Ul[i](e,s)?t^1:parseInt(t,10)}function qA(r,t){let e=new xA(r[0]),s,i,n;for(let o=0;o<t.length;o++)for(s=t[o],i=0;s.length>0;){for(let a=0;a<s.length;a++)for(let l=0;l<8;l++)n=e.getNextCell(),Ku(r,s[a][i].charAt(l),n.row,n.column);for(i++;s[0]&&i===s[0].length;)s.splice(0,1)}for(;n=e.getNextRemainderCell();)Ku(r,0,n.row,n.column)}function ZA(r,t){let e=t*8,s=0,i=0,n=r;for(;n.length<e&&s<Qu.length;)n+=Qu.charAt(s++);for(n.length%8!==0&&(n+=new Array(9-n.length%8).join("0"));n.length<e;)n+=XA[i],i^=1;return n}function QA(){let r,t;for(t=1;t<255;t++)r=ws[t-1]*2,r>255&&(r=r^285),ws[t]=r,Bc[r]=t;r=ws[t-1]*2^285,ws[t]=r,ws[-1]=0}function KA(r,t){let e=[],s=r.length-2;for(let i=s;i>=0;i--)e[i]=r[i]^t[i];return e}function JA(r,t){let e=[];for(let s=0;s<r.length;s++)for(let i=0;i<t.length;i++)e[s+i]===void 0?e[s+i]=(r[s]+(t[i]>=0?t[i]:0))%255:e[s+i]=Bc[ws[e[s+i]]^ws[(r[s]+t[i])%255]];return e}function tS(){let r=68;for(let t=2;t<=r;t++){let e=jl[t-1],s=[t,0];jl[t]=JA(e,s)}}QA();tS();function eS(r,t){let e=[],s=r.length-1;do e[s]=ws[(r[s]+t)%255],s--;while(r[s]!==void 0);return e}function sS(r,t){let e=jl[t-1],s=new Array(t).concat(r),i=new Array(s.length-e.length).concat(e),n=r.length,o=[],a,l;for(l=0;l<n;l++)a=eS(i,Bc[s[s.length-1]]),i.splice(0,1),s=KA(a,s);for(l=s.length-1;l>=0;l--)o[t-1-l]=$t(s[l],8);return o}function iS(r,t){let e=0,s=[],i=[],n,o=t.groups,a,l,h,c;for(let d=0;d<o.length;d++){l=o[d][0];for(let u=0;u<l;u++){a=o[d][1],n=[],h=[];for(let p=1;p<=a;p++)c=r.substring(e,e+8),n.push(c),h[a-p]=Fr(c),e+=8;s.push(n),i.push(sS(h,t.errorCodewordsPerBlock))}}return[s,i]}function nS(r){let t=Fr(r),e,s="";if(t===0)return"101010000010010";e=px(Fr(r),$A,15);for(let i=0;i<e.length;i++)s+=e.charAt(i)^GA.charAt(i);return s}function px(r,t,e){let s=Fr(t),i=t.length-1,n=r<<i,o=e-i,a=$t(r,o),l=oS(n,s);return l=a+$t(l,i),l}function oS(r,t){let e=t.toString(2).length,s=r.toString(2).length,i=r;do i^=t<<s-e,s=i.toString(2).length;while(s>=e);return i}function On(r,t){return parseInt(r.charAt(t),10)}function rS(r){let t=[],e=17+4*r;for(let s=0;s<Ul.length;s++){t[s]=new Array(e);for(let i=0;i<e;i++)t[s][i]=new Array(e)}return t}function Ju(r,t){let e=r[0],s,i,n=0,o=t.length;for(s=0,i=8;s<=8;s++)s!==6&&Vt(r,On(t,o-1-n++),s,i);for(s=8,i=7;i>=0;i--)i!==6&&Vt(r,On(t,o-1-n++),s,i);for(n=0,i=e.length-1,s=8;i>=e.length-8;i--)Vt(r,On(t,o-1-n++),s,i);for(Vt(r,1,e.length-8,8),s=e.length-7,i=8;s<e.length;s++)Vt(r,On(t,o-1-n++),s,i)}function aS(r){return px(r,WA,18)}function tp(r,t){let e=r[0],s=e.length,i=0,n=s-11,o=s-11,a=0,l,h,c;for(let d=0;d<t.length;d++)l=Math.floor(d/3),h=d%3,c=On(t,t.length-d-1),Vt(r,c,i+l,n+h),Vt(r,c,o+h,a+l)}function or(r,t,e,s){let i=t.length+2,n=t.length+1,o;for(let a=0;a<t.length;a++)for(let l=a;l<i-a;l++)o=t[a],Vt(r,o,e+l,s+a),Vt(r,o,e+a,s+l),Vt(r,o,e+n-l,s+n-a),Vt(r,o,e+n-a,s+n-l)}function il(r,t,e,s){let i=e,n=s,o=r[0];do Vt(r,0,i,s),Vt(r,0,e,n),i+=t[0],n+=t[1];while(i>=0&&i<o.length)}function lS(r){let t=r[0].length;or(r,sl,0,0),il(r,[-1,-1],7,7),or(r,sl,t-7,0),il(r,[1,-1],t-8,7),or(r,sl,0,t-7),il(r,[-1,1],7,t-8)}function hS(r,t){if(t<2)return;let e=r[0],s=e.length,i=Math.floor(t/7),n=[6],o,a,l=0;for((o=HA[t])?a=(s-13-o)/i:o=a=(s-13)/(i+1),n.push(n[l++]+o);n[l]+a<s;)n.push(n[l++]+a);for(let h=0;h<n.length;h++)for(let c=0;c<n.length;c++)e[n[h]][n[c]]===void 0&&or(r,UA,n[h]-2,n[c]-2)}function cS(r){let t=6,e=6,s=1,i=r[0].length;for(let n=8;n<i-8;n++)Vt(r,s,t,n),Vt(r,s,n,e),s^=1}function dS(r){let t=[],e=[],s=[],i=[],n=[],o,a,l=0,h=1,c=r[0].length;for(a=0;a<r.length;a++)t[a]=0,s[a]=0,n[a]=[0,0],i[a]=[0,0],e[a]=[];for(let g=0;g<c;g++)for(let f=0;f<c;f++)for(let x=0;x<r.length;x++)o=r[x],s[x]+=parseInt(o[g][f],10),e[x][l]===o[g][f]&&g+1<c&&f-1>=0&&o[g+1][f]===e[x][l]&&o[g+1][f-1]===e[x][l]&&(t[x]+=3),ep(x,i,t,l,o[g][f]),ep(x,i,t,h,o[f][g]),sp(x,t,e,o[g][f],n,l),sp(x,t,e,o[f][g],n,h);let d=c*c,u,p=Number.MAX_VALUE;for(a=0;a<t.length;a++)t[a]+=uS(s[a],d),t[a]<p&&(p=t[a],u=a);return u}function ep(r,t,e,s,i){t[r][s]=(t[r][s]<<1^i)%128,t[r][s]===YA&&(e[r]+=40)}function sp(r,t,e,s,i,n){e[r][n]===s?i[r][n]++:(e[r][n]=s,i[r][n]>=5&&(t[r]+=3+i[r][n]-5),i[r][n]=1)}function uS(r,t){let e=Math.floor(r/t*100),s=e%5,i=Math.abs(e-s-50),n=Math.abs(e+5-s-50);return 10*Math.min(i/5,n/5)}function pS(r){return r&&r.toLowerCase().indexOf("utf_8")>=0?new FA:new VA}function gS(r,t,e){let s=pS(e),i=s.getEncodingResult(r,t),n=i.version,o=Ln[n-1][t],a=ZA(i.dataString,o.totalDataCodewords),l=iS(a,o),h=rS(n);lS(h),hS(h,n),cS(h),n>=7&&tp(h,$t(0,18)),Ju(h,$t(0,15)),qA(h,l);let c=dS(h),d=h[c];n>=7&&tp([d],aS(n));let u=jA[t]+$t(c,3);return Ju([d],nS(u)),d}const An=Math.round,fS=[[0,1],[1,1],[1,2],[2,2],[2,1],[3,1],[3,0],[2,0],[2,-1],[1,-1],[1,0]],ip=[[0,1],[1,1],[1,0]],$e={DEFAULT_SIZE:200,DEFAULT_ERROR_CORRECTION_LEVEL:"L",DEFAULT_BACKGROUND:"#fff",DEFAULT_DARK_MODULE_COLOR:"#000",MIN_BASE_UNIT_SIZE:1,DEFAULT_LOGO_SIZE:7};class mS{constructor(t,e,s=cf){this.options=m({},this.options,e),this.element=t,this.wrapper=this.element,this.onError=s,this._initElement(),this._initSurface(),this.setOptions(e)}destroy(){this._destroySurface()}_initElement(){dt(this.element,"k-qrcode")}_initSurface(){const{options:t,surface:e}=this;(!e||e.options.type!==t.renderAs)&&(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())}_createSurface(){return ai.create(this.surfaceElement,{type:this.options.renderAs})}_destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())}_initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))}_destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)}redraw(){let t=this._getSize();this.surface.clear(),this.surface.setSize({width:t,height:t}),this.createVisual(),this.surface.draw(this.visual)}getSize(){const t=this.element,e=t.clientWidth,s=t.clientHeight,i={width:0,height:0};return e>0&&(i.width=e),s&&(i.height=s),i}_resize(){this.redraw()}createVisual(){this.visual=this._render()}exportVisual(){return this._render()}_render(){let t=this._value,e,s=this.options.border||{},i=this.options.padding||0,n=s.width||0,o,a,l,h,c;s.width=n;let d=new W;try{t&&(a=gS(t,this.options.errorCorrection,this.options.encoding),l=this._getSize(),c=l-2*(n+i),e=this._calculateBaseUnit(c,a.length),h=a.length*e,o=n+i+(c-h)/2,d.append(this._renderBackground(l,s)),d.append(this._renderMatrix(a,e,o)),this._hasCustomLogo()?d.append(this._renderLogo(l,e)):this._isSwiss()&&d.append(this._renderSwissCode(l,e)))}catch(u){this.onError(u)}return d}_renderLogo(t,e){let s,i,n=An(t/2),o=this._getLogoSize(e*$e.DEFAULT_LOGO_SIZE),a=this.options.overlay.imageUrl,l={x:n-o.width/2,y:n-o.height/2};return i=new H(new w(l.x,l.y),new zt(o.width,o.height)),s=new bg(a,i),s}_renderSwissCode(t,e){let s=this._getLogoSize(e*$e.DEFAULT_LOGO_SIZE);s=Math.max(s.width,s.height);let i=s/4,n=i/2,o=t/2,a={},l=new W;return a.x=a.y=Math.ceil(o-e-s/2),l.append(this._renderShape(a,Math.ceil(s+e*2),ip,"#fff")),a.x=a.y=o-s/2,l.append(this._renderShape(a,s,ip,this.options.color)),a.x=o+n-s/2,a.y=o+n+i-s/2,l.append(this._renderShape(a,i,fS,"#fff")),l}_renderShape(t,e,s,i){let n=new Wt({fill:{color:i},stroke:null});n.moveTo(t.x,t.y);for(let o=0;o<s.length;o++)n.lineTo(t.x+e*s[o][0],t.y+e*s[o][1]);return n.close(),n}_getSize(){let t;if(this.options.size)t=parseInt(this.options.size,10);else{const e=this.element,s=lx(e,this.options.renderAs),i=Math.min(s.width,s.height);i>0?t=i:t=$e.DEFAULT_SIZE}return t}_calculateBaseUnit(t,e){let s=Math.floor(t/e);if(s<$e.MIN_BASE_UNIT_SIZE){const i=Math.ceil(e*$e.MIN_BASE_UNIT_SIZE);this.onError(new Error(`Insufficient size for QR Code: the current size is ${t}px and the minimum size is ${i}px.`))}else s*e>=t&&s-1>=$e.MIN_BASE_UNIT_SIZE&&s--;return s}_renderMatrix(t,e,s){let i=new Wt({fill:{color:this.options.color},stroke:null});for(let n=0;n<t.length;n++){let o=s+n*e,a=0;for(;a<t.length;){for(;t[n][a]===0&&a<t.length;)a++;if(a<t.length){let l=a;for(;t[n][a]===1;)a++;let h=An(s+l*e),c=An(o),d=An(s+a*e),u=An(o+e);i.moveTo(h,c).lineTo(h,u).lineTo(d,u).lineTo(d,c).close()}}}return i}_renderBackground(t,e){const s=new _(0,0,t,t).unpad(e.width/2);return C.fromRect(s.toRect(),{fill:{color:this.options.background},stroke:{color:e.color,width:e.width}})}setOptions(t){let e=t||{};this.options=fn(this.options,e),t.value!==void 0&&(this._value=String(this.options.value)),this._initSurface(),this.redraw()}value(t){if(t===void 0)return this._value;this._value=String(t),this.redraw()}_hasCustomLogo(){return!!this.options.overlay.imageUrl}_isSwiss(){return this.options.overlay.type==="swiss"}_getLogoSize(t){let e=this.options.overlay.width,s=this.options.overlay.height;return!e&&!s?e=s=t:e&&!s?s=e:!e&&s&&(e=s),{width:e,height:s}}}b(mS,{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:$e.DEFAULT_ERROR_CORRECTION_LEVEL,background:$e.DEFAULT_BACKGROUND,color:$e.DEFAULT_DARK_MODULE_COLOR,size:"",padding:0,border:{color:"",width:0},overlay:{type:"image",imageUrl:"",width:0,height:0}});const xS={a:6378137,b:6356752314245179e-9,f:.0033528106647474805,e:.08181919084262149},Gl={WGS84:xS};function Re(r){return r*r}let Ls=Math,yS=Ls.abs,np=Ls.atan,Xo=Ls.atan2,xs=Ls.cos,He=Ls.sin,op=Ls.tan;class ot{constructor(t,e){this.initProperties(),arguments.length===1?(this.lat=t[0],this.lng=t[1]):(this.lat=t,this.lng=e)}initProperties(){m(this,{DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6}{1:N6}"})}toArray(){return[this.lat,this.lng]}equals(t){return t&&t.lat===this.lat&&t.lng===this.lng}clone(){return new ot(this.lat,this.lng)}round(t){return this.lng=S(this.lng,t),this.lat=S(this.lat,t),this}wrap(){return this.lng=this.lng%180,this.lat=this.lat%90,this}distanceTo(t,e){return this.greatCircleTo(t,e).distance}destination(t,e,s){let i=yt(e),n=s||Gl.WGS84,o=yt(this.lat),a=yt(this.lng),l=t/n.a,h=Ls.asin(He(o)*xs(l)+xs(o)*He(l)*xs(i)),c=a+Xo(He(i)*He(l)*xs(o),xs(l)-He(o)*He(h));return new ot(_s(h),_s(c))}greatCircleTo(t,e){let s=ot.create(s),i=e||Gl.WGS84;if(!s||this.clone().round(8).equals(s.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};let n=i.a,o=i.b,a=i.f,l=yt(s.lng-this.lng),h=np((1-a)*op(yt(this.lat))),c=He(h),d=xs(h),u=np((1-a)*op(yt(s.lat))),p=He(u),g=xs(u),f=l,x,y=this.DISTANCE_ITERATIONS,v=!1,k,E,I,B,V,q,ht;for(;!v&&y-- >0;){k=He(f),E=xs(f),I=Ls.sqrt(Re(g*k)+Re(d*p-c*g*E)),V=c*p+d*g*E,ht=Xo(I,V);let Z=d*g*k/I;B=1-Re(Z),q=0,B!==0&&(q=V-2*c*p/B),x=f;let ct=a/16*B*(4+a*(4-3*B));f=l+(1-ct)*a*Z*(ht+ct*I*(q+ct*V*(-1+2*Re(q)))),v=yS(f-x)<=this.DISTANCE_CONVERGENCE}let $=B*(Re(n)-Re(o))/Re(o),mt=1+$/16384*(4096+$*(-768+$*(320-175*$))),xt=$/1024*(256+$*(-128+$*(74-47*$))),Pe=xt*I*(q+xt/4*(V*(-1+2*Re(q))-xt/6*q*(-3+4*Re(I))*(-3+4*Re(q)))),ms=Xo(g*k,d*p-c*g*E),J=Xo(d*k,-c*g+d*p*E);return{distance:S(o*mt*(ht-Pe),this.DISTANCE_PRECISION),azimuthFrom:_s(ms),azimuthTo:_s(J)}}toString(){return String(this.lat)+","+String(this.lng)}static fromLngLat(t){return new ot(t[1],t[0])}static fromLatLng(t){return new ot(t[0],t[1])}static create(t,e){if(A(t))return t instanceof ot?t.clone():arguments.length===1&&t.length===2?ot.fromLatLng(t):new ot(t,e)}}let Gs=Math,$l=Gs.atan,gx=Gs.exp,rp=Gs.pow,ap=Gs.sin,fx=Gs.log,mx=Gs.tan,vS=w,Sa=Gs.PI,Wl=Sa/2,xx=Sa/4,bS=Sa/180,wS=Gl.WGS84;class yx{constructor(t){this.initProperties(),this._initOptions(t)}_initOptions(t){this.options=m({},this.options,t)}initProperties(){m(this,{MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12})}forward(t,e){let s=this,i=s.options,n=i.datum,o=n.a,a=i.centralMeridian,l=M(t.lat,-s.MAX_LAT,s.MAX_LAT),h=e?M(t.lng,-s.MAX_LNG,s.MAX_LNG):t.lng,c=yt(h-a)*o,d=s._projectLat(l);return new vS(c,d)}_projectLat(t){let e=this.options.datum,s=e.e,i=e.a,n=yt(t),o=mx(xx+n/2),a=s*ap(n),l=rp((1-a)/(1+a),s/2);return i*fx(o*l)}inverse(t,e){let s=this,i=s.options,n=i.datum,o=n.a,a=i.centralMeridian,l=t.x/(bS*o)+a,h=M(s._inverseY(t.y),-s.MAX_LAT,s.MAX_LAT);return e&&(l=M(l,-s.MAX_LNG,s.MAX_LNG)),new ot(h,l)}_inverseY(t){let e=this,s=e.options.datum,i=s.a,n=s.e,o=n/2,a=gx(-t/i),l=Wl-2*$l(a),h;for(h=0;h<=e.INVERSE_ITERATIONS;h++){let c=n*ap(l),d=rp((1-c)/(1+c),o),u=Wl-2*$l(a*d)-l;if(l+=u,Gs.abs(u)<=e.INVERSE_CONVERGENCE)break}return _s(l)}}b(yx,{centralMeridian:0,datum:wS});class _S extends yx{initProperties(){super.initProperties(),m(this,{MAX_LAT:85.0511287798})}_projectLat(t){let e=this.options.datum.a,s=yt(t),i=mx(xx+s/2);return e*fx(i)}_inverseY(t){let e=this.options.datum.a,s=gx(-t/e);return _s(Wl-2*$l(s))}}class AS{constructor(){let t=this,e=t._proj=new _S,s=this.c=2*Sa*e.options.datum.a;this._tm=K().translate(.5,.5).scale(1/s,-1/s),this._itm=K().scale(s,-s).translate(-.5,-.5)}toPoint(t,e,s){return this._proj.forward(t,s).transform(this._tm).scale(e||1)}toLocation(t,e,s){let i=t.clone().scale(1/(e||1)).transform(this._itm);return this._proj.inverse(i,s)}}const ft=(r,t)=>r.bind(t);let di=r=>{const t=document.createElement("div");return t.innerHTML=r,t.firstChild},SS=(r,t)=>{const e=document.createElement("div");for(e.innerHTML=r;e.childNodes.length>0;)t.appendChild(e.childNodes[0])},io=r=>{for(;r.firstChild;)r.removeChild(r.firstChild)},lp=(r,t)=>{t.insertBefore(r,t.firstChild)},kS=(r,t)=>{for(r.appendChild(t);r.firstChild!==t;)t.appendChild(r.firstChild)},CS=r=>r.replace(/([a-z][A-Z])/g,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()}),hp=r=>{let t;return r&&String(r).endsWith("px")?t=r:t=String(r)+"px",t},TS=r=>{const{mobileOS:t}=co();return t.ios||t.android};const ka=(r,t)=>{const e=r.prototype;e.events?t.forEach(s=>{e.events.indexOf(s)<0&&e.events.push(s)}):e.events=t},PS=r=>{const t=r.wheelDeltaY;let e;return r.wheelDelta?(t===void 0||t)&&(e=r.wheelDelta):r.detail&&r.axis===r.VERTICAL_AXIS&&(e=-r.detail*10),e},cp=r=>{let t=[];switch(r){case"topLeft":return"k-top-start";case"topRight":return"k-top-end";case"bottomLeft":return"k-bottom-start";case"bottomRight":return"k-bottom-end"}return t.join(" ")};class vx extends xe{constructor(t,e){super(),this.element=t,this._initOptions(e),this.items=[],dt(this.element,"k-widget k-attribution")}_initOptions(t){this.options=m({},this.options,t)}filter(t,e){this._extent=t,this._zoom=e,this._render()}add(t){let e=t;A(t)&&(typeof t=="string"&&(e={text:t}),this.items.push(e),this._render())}remove(t){let e=[];for(let s=0;s<this.items.length;s++){let i=this.items[s];i.text!==t&&e.push(i)}this.items=e,this._render()}clear(){this.items=[],io(this.element)}_render(){let t=[];for(let e=0;e<this.items.length;e++){let s=this.items[e],i=this._itemText(s);i!==""&&t.push(i)}if(t.length>0){io(this.element);const e=t.join(this.options.separator);SS(e,this.element),this.showElement()}else this.hideElement()}hideElement(){this.element.style.display="none"}showElement(){this.element.style.display=""}_itemText(t){let e="",s=this._inZoomLevel(t.minZoom,t.maxZoom),i=this._inArea(t.extent);return s&&i&&(e+=t.text),e}_inZoomLevel(t,e){let s=!0,i=L(t,-Number.MAX_VALUE),n=L(e,Number.MAX_VALUE);return s=this._zoom>i&&this._zoom<n,s}_inArea(t){let e=!0;return t&&(e=t.contains(this._extent)),e}}b(vx,{name:"Attribution",separator:"&nbsp;|&nbsp;"});const bx="pan",ES={up:{className:"k-navigator-n",iconClass:"k-i-caret-alt-up"},down:{className:"k-navigator-s",iconClass:"k-i-caret-alt-down"},right:{className:"k-navigator-e",iconClass:"k-i-caret-alt-right"},left:{className:"k-navigator-w",iconClass:"k-i-caret-alt-left"}};function Yo(r,t){const e='<button type="button" class="k-button k-button-square k-rounded-full k-button-flat k-button-flat-base k-icon-button '+ES[r].className+'" aria-label="move '+r+'">'+Ii({icon:`caret-alt-${r}`,iconClass:"k-button-icon",svgIcons:t.svgIcons,type:t.type})+"</button>";return di(e)}class Dc extends xe{constructor(t,e){super(),this.element=t,this._initOptions(e);const s=Yo("up",e.icons),i=Yo("right",e.icons),n=Yo("down",e.icons),o=Yo("left",e.icons);this.element.appendChild(s),this.element.appendChild(i),this.element.appendChild(n),this.element.appendChild(o),dt(this.element,"k-widget k-navigator"),jt(this.element,"click",".k-button",ft(this._click,this));let a=this.element.parentNode.closest("[data-role]");this._keyroot=a||this.element,this._tabindex(this._keyroot),this._keydownHandler=ft(this._keydown,this),jt(this._keyroot,"keydown",this._keydownHandler)}destroy(){this.dispose()}dispose(){Zt(this._keyroot,"keydown",this._keydownHandler)}_tabindex(t){const e=t||this.wrapper||this.element;let s=this.element,i="tabindex",n=e.getAttribute(i)||s.getAttribute(i);s.removeAttribute(i),e.setAttribute(i,isNaN(n)?0:n)}_initOptions(t){this.options=m({},this.options,t)}_pan(t,e){let s=this.options.panStep;this.trigger(bx,{x:t*s,y:e*s})}_click(t){let e=0,s=0,i=t.currentTarget;i.matches(".k-navigator-n")?s=1:i.matches(".k-navigator-s")?s=-1:i.matches(".k-navigator-e")?e=1:i.matches(".k-navigator-w")&&(e=-1),this._pan(e,s),t.preventDefault()}_keydown(t){switch(t.which){case Ri.UP:this._pan(0,1),t.preventDefault();break;case Ri.DOWN:this._pan(0,-1),t.preventDefault();break;case Ri.RIGHT:this._pan(1,0),t.preventDefault();break;case Ri.LEFT:this._pan(-1,0),t.preventDefault();break}}}b(Dc,{name:"Navigator",panStep:1});ka(Dc,[bx]);function dp(r,t,e){const s='<button type="button" class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-zoom-'+r+'" title="zoom-'+r+'" aria-label="zoom-'+r+'">'+Ii({icon:t,iconClass:"k-button-icon",svgIcons:e.svgIcons,type:e.type})+"</button>";return di(s)}let MS=187,IS=189,RS=61,LS=173;const wx="change";class zc extends xe{constructor(t,e,s){super(),this.element=t,this._initOptions(e);const i=dp("in","plus",s),n=dp("out","minus",s);this.element.appendChild(i),this.element.appendChild(n),this.element.setAttribute("role","group"),dt(this.element,"k-widget k-zoom-control k-button-group k-group-horizontal"),this._clickHandler=this._click.bind(this),jt(this.element,"click",".k-button",this._clickHandler);let o=this.element.parentNode.closest("[data-role]");this._keyroot=o||this.element,this._tabindex(this._keyroot),this._keydownHandler=this._keydown.bind(this),jt(this._keyroot,"keydown",this._keydownHandler)}destroy(){this.element&&Zt(this.element,"click",this._clickHandler),this._keyroot&&Zt(this._keyroot,"keydown",this._keydownHandler)}_tabindex(t){const e=t||this.wrapper||this.element;let s=this.element,i="tabindex",n=e.getAttribute(i)||s.getAttribute(i);s.removeAttribute(i),e.setAttribute(i,isNaN(n)?0:n)}_initOptions(t){this.options=m({},this.options,t)}_change(t){let e=this.options.zoomStep;this.trigger(wx,{delta:t*e})}_click(t){let e=t.currentTarget,s=1;qn(e,"k-zoom-out")&&(s=-1),this._change(s),t.preventDefault()}_keydown(t){switch(t.which){case Ri.NUMPAD_PLUS:case MS:case RS:this._change(1);break;case Ri.NUMPAD_MINUS:case IS:case LS:this._change(-1);break}}}b(zc,{name:"ZoomControl",zoomStep:1});ka(zc,[wx]);let _x=Math,up=_x.max,pp=_x.min;class Qe{constructor(t,e){let s=ot.create(t),i=ot.create(e);s.lng+180>i.lng+180&&s.lat+90<i.lat+90?(this.se=s,this.nw=i):(this.se=i,this.nw=s)}contains(t){let e=this.nw,s=this.se,i=L(t.lng,t[1]),n=L(t.lat,t[0]);return t&&i+180>=e.lng+180&&i+180<=s.lng+180&&n+90>=s.lat+90&&n+90<=e.lat+90}center(){let t=this.nw,e=this.se,s=t.lng+(e.lng-t.lng)/2,i=t.lat+(e.lat-t.lat)/2;return new ot(i,s)}containsAny(t){let e=!1;for(let s=0;s<t.length;s++)e=e||this.contains(t[s]);return e}include(t){let e=this.nw,s=this.se,i=L(t.lng,t[1]),n=L(t.lat,t[0]);e.lng=pp(e.lng,i),e.lat=up(e.lat,n),s.lng=up(s.lng,i),s.lat=pp(s.lat,n)}includeAll(t){for(let e=0;e<t.length;e++)this.include(t[e])}edges(){let t=this.nw,e=this.se;return{nw:this.nw,ne:new ot(t.lat,e.lng),se:this.se,sw:new ot(e.lat,t.lng)}}toArray(){let t=this.nw,e=this.se;return[t,new ot(t.lat,e.lng),e,new ot(e.lat,t.lng)]}overlaps(t){return this.containsAny(t.toArray())||t.containsAny(this.toArray())}static create(t,e){if(t instanceof Qe)return t;if(t&&e)return new Qe(t,e);if(t&&t.length===4&&!e)return new Qe([t[0],t[1]],[t[2],t[3]])}static get World(){return new Qe([90,-180],[-90,180])}}const OS="showTooltip",BS="hideTooltip",gp="centerChange",DS="zoomChange",zS="init";class Ax{constructor(t,e){this.widgetService=t,this.options=m({},this.options,e),this.offset={x:0,y:0}}show(t,e){this.location!==e.location&&(this.anchor=t,this.location=e.location,this.widgetService.notify(OS,Object.assign({anchor:this.anchor},e)),this.visible=!0)}hide(){this.widgetService&&this.widgetService.notify(BS),this.visible=!1,this.location=null}get anchor(){return this._anchor}set anchor(t){const e=this.widgetService.widget._toDocumentCoordinates({x:t.left-this.offset.x,y:t.top-this.offset.y});this._anchor={left:e.left,top:e.top}}destroy(){this.widgetService=null}}b(Ax,{border:{width:1},opacity:1});class Vc{constructor(t,e){this.support=co(),this._initOptions(e),this.map=t;let s=document.createElement("div");dt(s,"k-layer"),s.style.zIndex=this.options.zIndex,s.style.opacity=this.options.opacity,this.element=s,t.scrollElement.appendChild(this.element),this._beforeReset=this._beforeReset.bind(this),this._reset=this._reset.bind(this),this._resize=this._resize.bind(this),this._panEnd=this._panEnd.bind(this),this._activate(),this._updateAttribution()}destroy(){this._deactivate()}_initOptions(t){this.options=m({},this.options,t)}show(){this.reset(),this._activate(),this._applyExtent(!0)}hide(){this._deactivate(),this._setVisibility(!1)}reset(){this._beforeReset(),this._reset()}_reset(){this._applyExtent()}_beforeReset(){}_resize(){}_panEnd(){this._applyExtent()}_applyExtent(){let t=this.options,e=this.map.zoom(),s=!A(t.minZoom)||e>=t.minZoom,i=!A(t.maxZoom)||e<=t.maxZoom,n=Qe.create(t.extent),o=!n||n.overlaps(this.map.extent());this._setVisibility(s&&i&&o)}_setVisibility(t){this.element.style.display=t?"":"none"}_activate(){let t=this.map;this._deactivate(),t.bind("beforeReset",this._beforeReset),t.bind("reset",this._reset),t.bind("resize",this._resize),t.bind("panEnd",this._panEnd)}_deactivate(){let t=this.map;t.unbind("beforeReset",this._beforeReset),t.unbind("reset",this._reset),t.unbind("resize",this._resize),t.unbind("panEnd",this._panEnd)}_updateAttribution(){const t=this.map.attribution;t&&t.add(this.options.attribution)}_readData(){return this.options.data||[]}_hasData(){return this._data&&this._data.length>0}_layerIndex(){return(this.map.layers||[]).indexOf(this)}}let ys=Math,Xl=w;function fp(r){return rt(r)?r:ta.compile(r)}function VS(r){return new Xl(S(r.x),S(r.y))}function mp(r){let t=r;return typeof r!="string"&&(t+="px"),t}class Sx extends Vc{constructor(t,e){super(t,e),typeof this.options.subdomains=="string"&&(this.options.subdomains=this.options.subdomains.split(""));let s=this._viewType();this._view=new s(this.element,this.options)}destroy(){super.destroy(),this._view.destroy(),this._view=null}_beforeReset(){let t=this.map,e=t.locationToLayer(t.extent().nw).round();this._view.viewOrigin(e)}_reset(){super._reset(),this._updateView(),this._view.reset()}_viewType(){return NS}_activate(){super._activate(),this.support.mobileOS||(this._pan||(this._pan=Ur(this._render.bind(this),100)),this.map.bind("pan",this._pan))}_deactivate(){super._deactivate(),this._pan&&this.map.unbind("pan",this._pan)}_updateView(){let t=this._view,e=this.map,s=e.extent(),i={nw:e.locationToLayer(s.nw).round(),se:e.locationToLayer(s.se).round()};t.center(e.locationToLayer(e.center())),t.extent(i),t.zoom(e.zoom())}_resize(){this._render()}_panEnd(t){super._panEnd(t),this._render()}_render(){this._updateView(),this._view.render()}}b(Sx,{tileSize:256,subdomains:["a","b","c"],urlTemplate:"",zIndex:1});class NS{constructor(t,e){this.element=t,this._initOptions(e),this.pool=new Cx}_initOptions(t){this.options=m({},this.options,t)}center(t){this._center=t}extent(t){this._extent=t}viewOrigin(t){this._viewOrigin=t}zoom(t){this._zoom=t}pointToTileIndex(t){return new Xl(ys.floor(t.x/this.options.tileSize),ys.floor(t.y/this.options.tileSize))}tileCount(){let t=this.size(),e=this.pointToTileIndex(this._extent.nw),s=this._extent.nw,i=this.indexToPoint(e).translate(-s.x,-s.y);return{x:ys.ceil((ys.abs(i.x)+t.width)/this.options.tileSize),y:ys.ceil((ys.abs(i.y)+t.height)/this.options.tileSize)}}size(){let t=this._extent.nw,e=this._extent.se,s=e.clone().translate(-t.x,-t.y);return{width:s.x,height:s.y}}indexToPoint(t){let e=t.x,s=t.y;return new Xl(e*this.options.tileSize,s*this.options.tileSize)}subdomainText(){let t=this.options.subdomains;return t[this.subdomainIndex++%t.length]}destroy(){io(this.element),this.pool.empty()}reset(){this.pool.reset(),this.subdomainIndex=0,this.render()}render(){let t=this.tileCount(),e=this.pointToTileIndex(this._extent.nw),s,i,n;for(i=0;i<t.x;i++)for(n=0;n<t.y;n++)s=this.createTile({x:e.x+i,y:e.y+n}),s.visible||s.show()}createTile(t){let e=this.tileOptions(t),s=this.pool.get(this._center,e);return s.element.parentNode||this.element.append(s.element),s}tileOptions(t){let e=this.wrapIndex(t),s=this.indexToPoint(t),i=this._viewOrigin,n=s.clone().translate(-i.x,-i.y);return{index:e,currentIndex:t,point:s,offset:VS(n),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}}wrapIndex(t){let e=ys.pow(2,this._zoom);return{x:this.wrapValue(t.x,e),y:M(t.y,0,e-1)}}wrapValue(t,e){let s=ys.abs(t)%e,i=t;return t>=0?i=s:i=e-(s===0?e:s),i}}class kx{constructor(t,e){this.id=t,this.visible=!0,this._initOptions(e),this.createElement(),this.show()}destroy(){const t=this.element,e=t?t.parentNode:null;t&&(e&&e.removeChild(t),this.element=null)}_initOptions(t){this.options=m({},this.options,t)}createElement(){let t=document.createElement("img");const e=this.options.size+"px";t.setAttribute("alt",""),t.style.position="absolute",t.style.display="block",t.style.width=t.style.maxWidth=e,t.style.height=t.style.maxHeight=e,this.element=t}show(){let t=this.element;t.style.top=mp(this.options.offset.y),t.style.left=mp(this.options.offset.x);let e=this.url();e&&t.setAttribute("src",e),t.style.visibility="visible",this.visible=!0}hide(){this.element.style.visibility="hidden",this.visible=!1}url(){return fp(this.options.urlTemplate)(this.urlOptions())}errorUrl(){return fp(this.options.errorUrlTemplate)(this.urlOptions())}urlOptions(){let t=this.options;return{zoom:t.zoom,subdomain:t.subdomain,z:t.zoom,x:t.index.x,y:t.index.y,s:t.subdomain,quadkey:t.quadkey,q:t.quadkey,culture:t.culture,c:t.culture}}}b(kx,{urlTemplate:"",errorUrlTemplate:""});class Cx{constructor(){this._items=[]}get(t,e){return this._items.length>=this.options.maxSize&&this._remove(t),this._create(e)}empty(){let t=this._items;for(let e=0;e<t.length;e++)t[e].destroy();this._items=[]}reset(){let t=this._items;for(let e=0;e<t.length;e++)t[e].hide()}_create(t){let e=this._items,s,i=Sb(t.point.toString()+t.offset.toString()+t.zoom+t.urlTemplate);for(let n=0;n<e.length;n++)if(e[n].id===i){s=e[n];break}return s?s.show():(s=new kx(i,t),this._items.push(s)),s}_remove(t){let e=this._items,s=-1,i=-1;for(let n=0;n<e.length;n++){let o=e[n].options.point.distanceTo(t);o>s&&!e[n].visible&&(i=n,s=o)}i!==-1&&(e[i].destroy(),e.splice(i,1))}}b(Cx,{maxSize:100});const ui=Object.assign,no="change";class FS extends xe{constructor(t,e){super();let s=this,i=t[0]||t;s.capture=!1,i.addEventListener?(Li.down.split(" ").forEach(function(n){i.addEventListener(n,ft(s._press,s),!0)}),Li.up.split(" ").forEach(function(n){i.addEventListener(n,ft(s._release,s),!0)})):(Li.down.split(" ").forEach(function(n){i.attachEvent(n,ft(s._press,s))}),Li.up.split(" ").forEach(function(n){i.attachEvent(n,ft(s._release,s))})),s.bind(["press","release"],e||{})}captureNext(){this.capture=!0}cancelCapture(){this.capture=!1}_press(t){let e=this;e.trigger("press"),e.capture&&t.preventDefault()}_release(t){let e=this;e.trigger("release"),e.capture&&(t.preventDefault(),e.cancelCapture())}}class xp extends xe{constructor(t){super();let e=this;e.forcedEnabled=!1,ui(e,t),e.scale=1,e.horizontal?(e.measure="offsetWidth",e.scrollSize="scrollWidth",e.axis="x"):(e.measure="offsetHeight",e.scrollSize="scrollHeight",e.axis="y")}makeVirtual(){ui(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})}virtualSize(t,e){(this._virtualMin!==t||this._virtualMax!==e)&&(this._virtualMin=t,this._virtualMax=e,this.update())}outOfBounds(t){return t>this.max||t<this.min}forceEnabled(){this.forcedEnabled=!0}getSize(){return this.container[this.measure]}getTotal(){return this.element[this.scrollSize]}rescale(t){this.scale=t}update(t){let e=this,s=e.virtual?e._virtualMax:e.getTotal(),i=s*e.scale,n=e.getSize();s===0&&!e.forcedEnabled||(e.max=e.virtual?-e._virtualMin:0,e.size=n,e.total=i,e.min=Math.min(e.max,n-i),e.minScale=n/s,e.centerOffset=(i-n)/2,e.enabled=e.forcedEnabled||i>n,t||e.trigger(no,e))}}class HS extends xe{constructor(t){super();let e=this;e.x=new xp(ui({horizontal:!0},t)),e.y=new xp(ui({horizontal:!1},t)),e.container=t.container,e.forcedMinScale=t.minScale,e.maxScale=t.maxScale||100,e.bind(no,t)}rescale(t){this.x.rescale(t),this.y.rescale(t),this.refresh()}centerCoordinates(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}}refresh(){let t=this;t.x.update(),t.y.update(),t.enabled=t.x.enabled||t.y.enabled,t.minScale=t.forcedMinScale||Math.min(t.x.minScale,t.y.minScale),t.fitScale=Math.max(t.x.minScale,t.y.minScale),t.trigger(no)}}class yp extends xe{constructor(t){super(),ui(this,t)}outOfBounds(){return this.dimension.outOfBounds(this.movable[this.axis])}dragMove(t){let e=this,s=e.dimension,i=e.axis,n=e.movable,o=n[i]+t;if(!s.enabled)return;let a=t;(o<s.min&&t<0||o>s.max&&t>0)&&(a*=e.resistance),n.translateAxis(i,a),e.trigger(no,e)}}class US{constructor(t){let e=this,s,i,n,o;ui(e,{elastic:!0},t),n=e.elastic?.5:0,o=e.movable,e.x=s=new yp({axis:"x",dimension:e.dimensions.x,resistance:n,movable:o}),e.y=i=new yp({axis:"y",dimension:e.dimensions.y,resistance:n,movable:o}),e.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart(a){e.gesture=a,e.offset=Vi(e.dimensions.container)},press(a){const l=a.event.target.closest("a");l&&l.matches("[data-navigate-on-press=true]")&&a.sender.cancel()},gesturechange(a){let l=e.gesture,h=l.center,c=a.center,d=a.distance/l.distance,u=e.dimensions.minScale,p=e.dimensions.maxScale,g;o.scale<=u&&d<1&&(d+=(1-d)*.8),o.scale*d>=p&&(d=p/o.scale);let f=o.x+e.offset.left,x=o.y+e.offset.top;g={x:(f-h.x)*d+c.x-f,y:(x-h.y)*d+c.y-x},o.scaleWith(d),s.dragMove(g.x),i.dragMove(g.y),e.dimensions.rescale(o.scale),e.gesture=a,a.preventDefault()},move(a){a.event.target.tagName.match(/textarea|input/i)||(s.dimension.enabled||i.dimension.enabled?(s.dragMove(a.x.delta),i.dragMove(a.y.delta),a.preventDefault()):a.touch.skip())},end(a){a.preventDefault()}})}}let vp=function(r,t,e){return"translate3d("+r+"px,"+t+"px,0) scale("+e+")"};class Nc extends xe{constructor(t){super();let e=this;e.element=t,e.element.style.transformOrigin="left top",e.x=0,e.y=0,e.scale=1;const s=vp(e.x,e.y,e.scale);e.element.style.transform=s,e._saveCoordinates(s)}translateAxis(t,e){this[t]+=e,this.refresh()}scaleTo(t){this.scale=t,this.refresh()}scaleWith(t){this.scale*=t,this.refresh()}translate(t){this.x+=t.x,this.y+=t.y,this.refresh()}moveAxis(t,e){this[t]=e,this.refresh()}moveTo(t){ui(this,t),this.refresh()}refresh(){let t=this,e=t.x,s=t.y,i;t.round&&(e=Math.round(e),s=Math.round(s)),i=vp(e,s,t.scale),i!==t.coordinates&&(t.element.style.transform=i,t._saveCoordinates(i),t.trigger(no))}_saveCoordinates(t){this.coordinates=t}}const Yl=W;class Fc extends Vc{constructor(t,e){super(t,e),this._pan=ft(this._pan,this),this.surface=ai.create(this.element,{width:t.scrollElement.clientWidth,height:t.scrollElement.clientHeight}),this._initRoot(),this.movable=new Nc(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this.surface.bind("mouseenter",this._mouseenter.bind(this))}destroy(){super.destroy(),this.surface.destroy()}_reset(){super._reset(),this._translateSurface(),this._data=this._readData(),this._hasData()&&this._load(this._data)}_initRoot(){this._root=new Yl,this.surface.draw(this._root)}_beforeReset(){this.surface.clear(),this._initRoot()}_resize(){this.surface.size(this.map.size())}_readData(){const t=super._readData();return t.type==="FeatureCollection"?t.features:t.type==="GeometryCollection"?t.geometries:t}_load(t){this._data=t,this._clearMarkers(),this._loader||(this._loader=new jS(this.map,this.options.style,this));let e=new Yl;for(let s=0;s<t.length;s++){let i=this._loader.parse(t[s]);i&&e.append(i)}this._root.clear(),this._root.append(e)}shapeCreated(t){let e=!1;if(t instanceof Kt&&this.map.options.renderPointsAsMarkers&&(e=A(this._createMarker(t))),!e){let s={layer:this,shape:t};e=this.map.trigger("shapeCreated",s)}return e}featureCreated(t){t.layer=this,this.map.trigger("shapeFeatureCreated",t)}_createMarker(t){let e=this.map.markers.bind({location:t.location},t.dataItem);return e&&this._markers.push(e),e}_clearMarkers(){for(let t=0;t<this._markers.length;t++)this.map.markers.remove(this._markers[t]);this._markers=[]}_pan(){this._panning||(this._panning=!0,this.surface.suspendTracking())}_panEnd(t){super._panEnd(t),this._translateSurface(),this.surface.resumeTracking(),this._panning=!1}_translateSurface(){let t=this.map,e=t.locationToView(t.extent().nw);this.surface.translate&&(this.surface.translate(e),this.movable.moveTo({x:e.x,y:e.y}))}_eventArgs(t){return{layer:this,layerIndex:this._layerIndex(),shape:t.element,shapeIndex:(this._data||[]).indexOf(t.element.dataItem),originalEvent:t.originalEvent}}_handler(t){return e=>{e.element&&this.map.trigger(t,this._eventArgs(e))}}_mouseenter(t){if(!t.element)return;this.map.trigger("shapeMouseEnter",this._eventArgs(t));const e=t.element,s=this._tooltipAnchor(t);this.map._tooltip.show(s,this._tooltipContext(e))}_tooltipContext(t){return{type:"shape",layerIndex:this._layerIndex(),className:"k-map-shape-tooltip",dataItem:t.dataItem,location:t.location}}_tooltipAnchor(t){const e=this.map.eventOffset(t.originalEvent);return{top:e.y,left:e.x}}_activate(){super._activate(),this._panHandler=ft(this._pan,this),this.map.bind("pan",this.panHandler)}_deactivate(){super._deactivate(),this.map.unbind("pan",this._panHandler)}}b(Fc,{autoBind:!0,zIndex:100});class jS{constructor(t,e,s){this.observer=s,this.locator=t,this.style=e}parse(t){let e=new Yl,s=!0;return t.type==="Feature"?(s=!1,this._loadGeometryTo(e,t.geometry,t),this._featureCreated(e,t)):this._loadGeometryTo(e,t,t),s&&e.children.length<2&&(e=e.children[0]),e}_shapeCreated(t){let e=!1;return this.observer&&this.observer.shapeCreated&&(e=this.observer.shapeCreated(t)),e}_featureCreated(t,e){this.observer&&this.observer.featureCreated&&this.observer.featureCreated({group:t,dataItem:e,properties:e.properties})}_loadGeometryTo(t,e,s){let i=e.coordinates,n,o;switch(e.type){case"LineString":o=this._loadPolygon(t,[i],s),this._setLineFill(o);break;case"MultiLineString":for(n=0;n<i.length;n++)o=this._loadPolygon(t,[i[n]],s),this._setLineFill(o);break;case"Polygon":this._loadPolygon(t,i,s);break;case"MultiPolygon":for(n=0;n<i.length;n++)this._loadPolygon(t,i[n],s);break;case"Point":this._loadPoint(t,i,s);break;case"MultiPoint":for(n=0;n<i.length;n++)this._loadPoint(t,i[n],s);break}}_setLineFill(t){let e=t.segments;(e.length<4||!e[0].anchor().equals(pt(e).anchor()))&&(t.options.fill=null)}_loadShape(t,e){return this._shapeCreated(e)||t.append(e),e}_loadPolygon(t,e,s){let i=this._buildPolygon(e);return i.dataItem=s,i.location=this.locator.viewToLocation(i.bbox().center()),this._loadShape(t,i)}_buildPolygon(t){let e=t.length>1?Wt:C,s=new e(this.style);for(let i=0;i<t.length;i++)for(let n=0;n<t[i].length;n++){let o=this.locator.locationToView(ot.fromLngLat(t[i][n]));n===0?s.moveTo(o.x,o.y):s.lineTo(o.x,o.y)}return s}_loadPoint(t,e,s){let i=ot.fromLngLat(e),n=this.locator.locationToView(i),o=new Rt(n,10),a=new Kt(o,this.style);return a.dataItem=s,a.location=i,this._loadShape(t,a)}}class Tx extends Fc{_readData(){return this.options.data||[]}_load(t){if(this._data=t,this.surface.clear(),t.length===0)return;let e=this.options,s=ks(e.valueField),i=t.slice(0);i.sort(function(l,h){return s(h)-s(l)});let n=this._scaleType(),o,a=ks(this.options.locationField);for(let l=0;l<i.length;l++){let h=i[l],c=a(h),d=s(h);if(A(c)&&A(d)){o||(o=new n([0,d],[e.minSize,e.maxSize])),c=ot.create(c);let u=this.map.locationToView(c),p=o.map(d),g=this._createSymbol({center:u,size:p,style:e.style,dataItem:h,location:c});g.dataItem=h,g.location=c,g.value=d,this._drawSymbol(g)}}}_scaleType(){let t=this.options.scale;return rt(t)?t:$S[t]}_createSymbol(t){let e=this.options.symbol;return rt(e)||(e=WS[e]),e(t)}_drawSymbol(t){let e={layer:this,shape:t};this.map.trigger("shapeCreated",e)||this.surface.draw(t)}_tooltipContext(t){return{type:"bubble",layerIndex:this._layerIndex(),className:"k-map-bubble-tooltip",dataItem:t.dataItem,location:t.location,value:t.value}}_tooltipAnchor(t){const s=t.element.bbox().center();return{top:s.y,left:s.x}}}b(Tx,{locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle",zIndex:200});class GS{constructor(t,e){this._domain=t,this._range=e;let s=Math.sqrt(t[1])-Math.sqrt(t[0]),i=e[1]-e[0];this._ratio=i/s}map(t){let e=(Math.sqrt(t)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+e}}let $S={sqrt:GS},WS={circle:function(r){let t=new Rt(r.center,r.size/2);return new Kt(t,r.style)},square:function(r){let t=new C(r.style),e=r.size/2,s=r.center;return t.moveTo(s.x-e,s.y-e).lineTo(s.x+e,s.y-e).lineTo(s.x+e,s.y+e).lineTo(s.x-e,s.y+e).close(),t}};const bp="click",wp="mouseenter",_p="mouseleave",XS=Object.assign,Px="k-marker",ql="."+Px;class Hc extends Vc{constructor(t,e){super(t,e),this._markerClickHandler=ft(this._markerClick,this),jt(this.element,bp,ql,this._markerClickHandler),this.items=[],this._load(this._readData())}destroy(){super.destroy(),Zt(this.element,bp,this._markerClickHandler),this.clear()}add(t){if(Ct(t))for(let e=0;e<t.length;e++)this._addOne(t[e]);else return this._addOne(t)}remove(t){t.destroy();let e=(this.items||[]).indexOf(t);e>-1&&this.items.splice(e,1)}clear(){for(let t=0;t<this.items.length;t++)this.items[t].destroy();this.items=[]}update(t){let e=t.location();if(e){t.showAt(this.map.locationToView(e));let s={marker:t,layer:this};this.map.trigger("markerActivate",s)}}_reset(){super._reset();let t=this.items;for(let e=0;e<t.length;e++)this.update(t[e])}bind(t,e){let s=oo.create(t,this.options);s.dataItem=e;let i={marker:s,layer:this};if(!this.map.trigger("markerCreated",i))return this.add(s),s}_addOne(t){let e=oo.create(t,this.options);return e.addTo(this),e}_readData(){return this.options.data||[]}_load(t){this._data=t,this.clear();let e=ks(this.options.locationField),s=ks(this.options.titleField);for(let i=0;i<t.length;i++){let n=t[i];this.bind({location:e(n),title:s(n)},n)}}_markerClick(t){const e=t.currentTarget._kendoNode;let s={layer:this,layerIndex:this._layerIndex(),marker:e,markerIndex:(this.items||[]).indexOf(e),originalEvent:t};this.map.trigger("markerClick",s)}_markerMouseEnter(t){const e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseEnter",e)}_markerMouseLeave(t){const e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseLeave",e)}_createMarkerEventArgs(t){const e=t.marker;return XS({},{layer:this,layerIndex:this._layerIndex(),marker:e,markerIndex:(this.items||[]).indexOf(e)},t)}}b(Hc,{zIndex:1e3,autoBind:!0,locationField:"location",titleField:"title",template:""});class oo{constructor(t){this.options=t||{}}destroy(){this.layer=null,this.unbindEvents(),this.hide()}addTo(t){this.layer=t.markers||t,this.layer.items.push(this),this.layer.update(this)}location(t){return t?(this.options.location=ot.create(t).toArray(),this.layer&&this.layer.update(this),this):ot.create(this.options.location)}showAt(t){this.render(),this._anchor={left:Math.round(t.x),top:Math.round(t.y)},this.element.style.left=hp(this._anchor.left),this.element.style.top=hp(this._anchor.top)}hide(){this.element&&(this.element.remove(),this.element=null)}bindEvents(){this.element&&(this._mouseEnterHandler=ft(this._mouseEnter,this),jt(this.element,wp,ql,this._mouseEnterHandler),this._mouseLeaveHandler=ft(this._mouseLeave,this),jt(this.element,_p,ql,this._mouseLeaveHandler))}unbindEvents(){this.element&&(Zt(this.element,wp,this._mouseEnterHandler),Zt(this.element,_p,this._mouseLeaveHandler))}render(){if(!this.element){let t=this.options,e=this.layer,s=document.createElement("span");if(dt(s,Px),this.options.template){const o=this._compileTemplate(this.options.template)(this.dataItem),a=di(o);s.appendChild(a)}else if(t.svgIcon)Ii(s,{icon:t.svgIcon,iconClass:"k-icon-xxl",svgIcons:this.options.icons.svgIcons,type:"svg"});else{let n={icon:"map-marker",iconClass:"k-icon-xxl",svgIcons:this.options.icons.svgIcons,type:this.options.icons.type};t.shape?t.shape==="pinTarget"?(n.icon="map-marker-target",Ii(s,n)):t.shape==="pin"?Ii(s,n):dt(s,"k-icon k-icon-xxl k-i-marker-"+CS(t.shape||"pin")):Ii(s,n)}t.title&&s.setAttribute("title",t.title);const i=t.attributes||{};Object.keys(i).forEach(function(n){s.setAttribute(n,i[n])}),s._kendoNode=this,s.style.zIndex=t.zIndex,this.element=s,e&&e.element.appendChild(this.element),this.bindEvents()}}_mouseEnter(t){const e=this._createEventArgs(t);this.layer._markerMouseEnter(e),this.layer.map._tooltip.show({top:this._anchor.top-this.element.offsetHeight,left:this._anchor.left},this._tooltipContext())}_tooltipContext(){return{type:"marker",layerIndex:this.layer._layerIndex(),className:"k-map-marker-tooltip",dataItem:this.dataItem,title:this.options.title,location:this.location()}}_mouseLeave(t){const e=this._createEventArgs(t);this.layer._markerMouseLeave(e)}_createEventArgs(t){return{marker:this,originalEvent:t}}_compileTemplate(t){return ta.compile(t,{paramName:"dataItem",useWithBlock:!1})}static create(t,e){return t instanceof oo?t:new oo(m({},e,t))}}const YS=Object.assign;function Ap(r){window.requestAnimationFrame(r)}class Ca{constructor(){let t=this;t._tickProxy=ft(t._tick,t),t._started=!1}tick(){}done(){}onEnd(){}onCancel(){}start(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,Ap(this._tickProxy)))}enabled(){return!0}cancel(){this._started=!1,this.onCancel()}_tick(){let t=this;t._started&&(t.tick(),t.done()?(t._started=!1,t.onEnd()):Ap(t._tickProxy))}}class Sp extends Ca{constructor(t){super(),YS(this,t)}done(){return this.timePassed()>=this.duration}timePassed(){return Math.min(this.duration,Es()-this.startDate)}moveTo(t){let e=this,s=e.movable;e.initial=s[e.axis],e.delta=t.location-e.initial,e.duration=typeof t.duration=="number"?t.duration:300,e.tick=e._easeProxy(t.ease),e.startDate=Es(),e.start()}_easeProxy(t){let e=this;return function(){e.movable.moveAxis(e.axis,t(e.timePassed(),e.initial,e.delta,e.duration))}}static easeOutExpo(t,e,s,i){return t===i?e+s:s*(-Math.pow(2,-10*t/i)+1)+e}}let qi=Object.assign,Qs=Math.abs,qS=500,ZS=.7,QS=.96,KS=10,nl=55,JS=.5,kp=5,tk="pull",rr="change",ek="resize",Ex="scroll",sk=2;class ik extends Ca{constructor(t){super(t);let e=this;qi(e,t),e.userEvents.bind("gestureend",e.start.bind(this)),e.tapCapture.bind("press",e.cancel.bind(this))}enabled(){return this.movable.scale<this.dimensions.minScale}done(){return this.dimensions.minScale-this.movable.scale<.01}tick(){let t=this.movable;t.scaleWith(1.1),this.dimensions.rescale(t.scale)}onEnd(){let t=this.movable;t.scaleTo(this.dimensions.minScale),this.dimensions.rescale(t.scale)}}class nk extends Ca{constructor(t){super();let e=this;qi(e,t,{transition:new Sp({axis:t.axis,movable:t.movable,onEnd(){e._end()}})}),e.tapCapture.bind("press",function(){e.cancel()}),e.userEvents.bind("end",ft(e.start,e)),e.userEvents.bind("gestureend",ft(e.start,e)),e.userEvents.bind("tap",ft(e.onEnd,e))}onCancel(){this.transition.cancel()}freeze(t){let e=this;e.cancel(),e._moveTo(t)}onEnd(){let t=this;t.paneAxis.outOfBounds()?t._snapBack():t._end()}done(){return Qs(this.velocity)<1}start(t){let e=this,s;e.dimension.enabled&&(e.paneAxis.outOfBounds()?e.transition._started?(e.transition.cancel(),e.velocity=Math.min(t.touch[e.axis].velocity*e.velocityMultiplier,nl),super.start()):e._snapBack():(s=t.touch.id===sk?0:t.touch[e.axis].velocity,e.velocity=Math.max(Math.min(s*e.velocityMultiplier,nl),-nl),e.tapCapture.captureNext(),super.start()))}tick(){let t=this,e=t.dimension,s=t.paneAxis.outOfBounds()?JS:t.friction,i=t.velocity*=s,n=t.movable[t.axis]+i;!t.elastic&&e.outOfBounds(n)&&(n=Math.max(Math.min(n,e.max),e.min),t.velocity=0),t.movable.moveAxis(t.axis,n)}_end(){this.tapCapture.cancelCapture(),this.end()}_snapBack(){let t=this,e=t.dimension,s=t.movable[t.axis]>e.max?e.max:e.min;t._moveTo(s)}_moveTo(t){this.transition.moveTo({location:t,duration:qS,ease:Sp.easeOutExpo})}}class ok extends Ca{constructor(t){super(t),qi(this,t,{origin:{},destination:{},offset:{}})}tick(){this._updateCoordinates(),this.moveTo(this.origin)}done(){return Qs(this.offset.y)<kp&&Qs(this.offset.x)<kp}onEnd(){this.moveTo(this.destination),this.callback&&this.callback.call()}setCoordinates(t,e){this.offset={},this.origin=t,this.destination=e}setCallback(t){t&&rt(t)?this.callback=t:t=void 0}_updateCoordinates(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}}}class rk{constructor(t){let e=this,s=t.axis==="x";const n=di('<div class="km-touch-scrollbar km-'+(s?"horizontal":"vertical")+'-scrollbar" />');qi(e,t,{element:n,elementSize:0,movable:new Nc(n),scrollMovable:t.movable,alwaysVisible:t.alwaysVisible,size:s?"width":"height"}),e.scrollMovable.bind(rr,e.refresh.bind(e)),e.container.appendChild(n),t.alwaysVisible&&e.show()}refresh(){let t=this,e=t.axis,s=t.dimension,i=s.size,n=t.scrollMovable,o=i/s.total,a=Math.round(-n[e]*o),l=Math.round(i*o);o>=1?this.element.style.display="none":this.element.style.display="",a+l>i?l=i-a:a<0&&(l+=a,a=0),t.elementSize!==l&&(t.element.style[t.size]=l+"px",t.elementSize=l),t.movable.moveAxis(e,a)}show(){this.element.style.opacity=ZS,this.element.style.visibility="visible"}hide(){this.alwaysVisible||(this.element.style.opacity=0)}}class Uc extends xe{constructor(t,e){super();let s=this;this.element=t,this._initOptions(e);const i=TS();s._native=s.options.useNative&&i;const n=di('<div class="km-scroll-header"/>');if(s._native){dt(t,"km-native-scroller"),lp(n,t),qi(s,{scrollElement:t,fixedContainer:t.children[0]});return}t.style.overflow="hidden",dt(t,"km-scroll-wrapper");const o=di('<div class="km-scroll-container"/>');kS(t,o),lp(n,t);let a=t.children[1],l=new FS(t),h=new Nc(a),c=new HS({element:a,container:t,forcedEnabled:s.options.zoom}),d=this.options.avoidScrolling,u=new li(t,{touchAction:"none",allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:s.options.zoom,supportDoubleTap:s.options.supportDoubleTap,start(x){c.refresh();let y=Qs(x.x.velocity),v=Qs(x.y.velocity),k=y*2>=v,E=s.fixedContainer.contains(x.event.target),I=v*2>=y;!E&&!d(x)&&s.enabled&&(c.x.enabled&&k||c.y.enabled&&I)?u.capture():u.cancel()}}),p=new US({movable:h,dimensions:c,userEvents:u,elastic:s.options.elastic}),g=new ik({movable:h,dimensions:c,userEvents:u,tapCapture:l}),f=new ok({moveTo(x){s.scrollTo(x.x,x.y)}});h.bind(rr,function(){s.scrollTop=-h.y,s.scrollLeft=-h.x,s.trigger(Ex,{scrollTop:s.scrollTop,scrollLeft:s.scrollLeft})}),s.options.mousewheelScrolling&&(this._wheelScrollHandler=this._wheelScroll.bind(this),jt(t,"wheel",this._wheelScrollHandler)),qi(s,{movable:h,dimensions:c,zoomSnapBack:g,animatedScroller:f,userEvents:u,pane:p,tapCapture:l,pulled:!1,enabled:!0,scrollElement:a,scrollTop:0,scrollLeft:0,fixedContainer:t.children[0]}),s._initAxis("x"),s._initAxis("y"),s._wheelEnd=function(){s._wheel=!1,s.userEvents.end(0,s._wheelY)},c.refresh(),s.options.pullToRefresh&&s._initPullToRefresh()}_initOptions(t){this.options=m({},this.options,t)}_wheelScroll(t){if(t.ctrlKey)return;this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);let e=PS(t);e&&(this._wheelY+=e,this.userEvents.move(0,this._wheelY)),t.preventDefault()}makeVirtual(){this.dimensions.y.makeVirtual()}virtualSize(t,e){this.dimensions.y.virtualSize(t,e)}height(){return this.dimensions.y.size}scrollHeight(){return this.scrollElement.scrollHeight}scrollWidth(){return this.scrollElement.scrollWidth}_resize(){this._native||this.contentResized()}setOptions(t){let e=this;this._initOptions(t),t.pullToRefresh&&e._initPullToRefresh()}reset(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))}contentResized(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)}zoomOut(){let t=this.dimensions;t.refresh(),this._scale(t.fitScale),this.movable.moveTo(t.centerCoordinates())}enable(){this.enabled=!0}disable(){this.enabled=!1}scrollTo(t,e){this._native?(this.scrollElement.scrollLeft(Qs(t)),this.scrollElement.scrollTop(Qs(e))):(this.dimensions.refresh(),this.movable.moveTo({x:t,y:e}))}animatedScrollTo(t,e,s){let i,n;this._native?this.scrollTo(t,e):(i={x:this.movable.x,y:this.movable.y},n={x:t,y:e},this.animatedScroller.setCoordinates(i,n),this.animatedScroller.setCallback(s),this.animatedScroller.start())}pullHandled(){}destroy(){const t=this.element;Zt(t,"wheel",this._wheelScrollHandler),this.userEvents&&this.userEvents.destroy()}_scale(t){this.dimensions.rescale(t),this.movable.scaleTo(t)}_initPullToRefresh(){}_dragEnd(){}_paneChange(){}_initAxis(t){let e=this,s=e.movable,i=e.dimensions[t],n=e.tapCapture,o=e.pane[t],a=new rk({axis:t,movable:s,dimension:i,container:e.element,alwaysVisible:e.options.visibleScrollHints});i.bind(rr,function(){a.refresh()}),o.bind(rr,function(){a.show()}),e[t+"inertia"]=new nk({axis:t,paneAxis:o,movable:s,tapCapture:n,userEvents:e.userEvents,dimension:i,elastic:e.options.elastic,friction:e.options.friction||QS,velocityMultiplier:e.options.velocityMultiplier||KS,end(){a.hide(),e.trigger("scrollEnd",{axis:t,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})}})}}b(Uc,{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}});ka(Uc,[tk,Ex,ek]);class ak{constructor(t,e={}){this.sender=e.sender||t,this.widget=t,this.rtl=!!e.rtl}notify(t,e){this.widget&&this.widget.trigger(t,e)}}let bs=Math,Cp=bs.min,ol=bs.pow,Tp=w,ar="marker",qo="location",lk=.9,hk=.93,Pp="wheel",ck=50,dk=5,uk=1;const pk={bubble:Tx,shape:Fc,tile:Sx,[ar]:Hc};let Mx=class extends xe{constructor(t,e={},s={},i={}){super(),this._init(t,e,s,i)}destroy(){this.scroller.destroy(),this._tooltip&&this._tooltip.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),Ct(this.markers)?this.markers.forEach(t=>{t.destroy()}):this.markers.destroy();for(let t=0;t<this.layers.length;t++)this.layers[t].destroy();Zt(this.element,Pp,this._mousewheelHandler),super.destroy()}_init(t,e={},s={},i={}){this.support=co(),this.context=i,this.initObserver(i),this.initServices(i),this._notifyObserver(zS),this._initOptions(e),this._setEvents(e),this.crs=new AS,this._initElement(t),this._viewOrigin=this._getOrigin(),this._tooltip=this._createTooltip(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset();const n=Ur(this._mousewheel.bind(this),ck);this._mousewheelHandler=o=>{o.preventDefault(),n(o)},jt(this.element,Pp,this._mousewheelHandler)}_initOptions(t){this.options=m({},this.options,t)}_initElement(t){this.element=t,dt(t,"k-map"),t.style.position="relative",t.setAttribute("data-role","map"),io(t);const e=di("<div />");this.element.appendChild(e)}initServices(t={}){this.widgetService=new ak(this,t)}initObserver(t={}){this.observers=[],this.addObserver(t.observer)}addObserver(t){t&&this.observers.push(t)}removeObserver(t){const e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)}requiresHandlers(t){const e=this.observers;for(let s=0;s<e.length;s++)if(e[s].requiresHandlers(t))return!0}trigger(t,e={}){e.sender=this;const s=this.observers;let i=!1;for(let n=0;n<s.length;n++)s[n].trigger(t,e)&&(i=!0);return i||super.trigger(t,e),i}_notifyObserver(t,e={}){e.sender=this;const s=this.observers;let i=!1;for(let n=0;n<s.length;n++)s[n].trigger(t,e)&&(i=!0);return i}zoom(t){let e=this.options,s;if(A(t)){const i=bs.round(M(t,e.minZoom,e.maxZoom));e.zoom!==i&&(e.zoom=i,this.widgetService.notify(DS,{zoom:e.zoom}),this._reset()),s=this}else s=e.zoom;return s}center(t){let e;if(t){const s=ot.create(t),i=ot.create(this.options.center);s.equals(i)||(this.options.center=s.toArray(),this.widgetService.notify(gp,{center:this.options.center}),this._reset()),e=this}else e=ot.create(this.options.center);return e}extent(t){let e;return t?(this._setExtent(t),e=this):e=this._getExtent(),e}setOptions(t={}){const e=this.element;this.destroy(),io(e),this._init(e,t,{},this.context),this._reset()}locationToLayer(t,e){let s=!this.options.wraparound;const i=ot.create(t);return this.crs.toPoint(i,this._layerSize(e),s)}layerToLocation(t,e){let s=!this.options.wraparound;const i=Tp.create(t);return this.crs.toLocation(i,this._layerSize(e),s)}locationToView(t){const e=ot.create(t);let s=this.locationToLayer(this._viewOrigin);return this.locationToLayer(e).translateWith(s.scale(-1))}viewToLocation(t,e){const s=this.locationToLayer(this._getOrigin(),e),n=Tp.create(t).clone().translateWith(s);return this.layerToLocation(n,e)}eventOffset(t){let e,s,i=Vi(this.element);if(t.x&&t.x[qo]||t.y&&t.y[qo])e=t.x[qo]-i.left,s=t.y[qo]-i.top;else{let o=t.originalEvent||t;e=L(o.pageX,o.clientX)-i.left,s=L(o.pageY,o.clientY)-i.top}return new w(e,s)}eventToView(t){let e=this.eventOffset(t);return this.locationToView(this.viewToLocation(e))}eventToLayer(t){return this.locationToLayer(this.eventToLocation(t))}eventToLocation(t){let e=this.eventOffset(t);return this.viewToLocation(e)}viewSize(){let t=this.element,e=this._layerSize(),s=t.clientWidth;return this.options.wraparound||(s=Cp(e,s)),{width:s,height:Cp(e,t.clientHeight)}}exportVisual(){return this._reset(),!1}hideTooltip(){this._tooltip&&this._tooltip.hide()}_setOrigin(t,e){let s=this.viewSize(),i;const n=this._origin=ot.create(t);return i=this.locationToLayer(n,e),i.x+=s.width/2,i.y+=s.height/2,this.options.center=this.layerToLocation(i,e).toArray(),this.widgetService.notify(gp,{center:this.options.center}),this}_getOrigin(t){let e=this.viewSize(),s;return(t||!this._origin)&&(s=this.locationToLayer(this.center()),s.x-=e.width/2,s.y-=e.height/2,this._origin=this.layerToLocation(s)),this._origin}_setExtent(t){let e=Qe.create(t),s=e.se.clone();this.options.wraparound&&s.lng<0&&t.nw.lng>0&&(s.lng=180+(180+s.lng));const i=new Qe(e.nw,s);this.center(i.center());let n=this.element.clientWidth,o=this.element.clientHeight,a;for(a=this.options.maxZoom;a>=this.options.minZoom;a--){let l=this.locationToLayer(i.nw,a),h=this.locationToLayer(i.se,a),c=bs.abs(h.x-l.x),d=bs.abs(h.y-l.y);if(c<=n&&d<=o)break}this.zoom(a)}_getExtent(){let t=this._getOrigin(),e=this.locationToLayer(t),s=this.viewSize();e.x+=s.width,e.y+=s.height;let i=this.layerToLocation(e);return new Qe(t,i)}_zoomAround(t,e){this._setOrigin(this.layerToLocation(t,e),e),this.zoom(e)}_initControls(){let t=this.options.controls;t.attribution&&this._createAttribution(t.attribution),this.support.mobileOS||(t.navigator&&this._createNavigator(t.navigator),t.zoom&&this._createZoomControl(t.zoom))}_createControlElement(t,e){let s=t.position||e,i="."+cp(s).replace(" ","."),n=this.element.querySelector(".k-map-controls"+i)||[];if(n.length===0){let a=document.createElement("div");dt(a,"k-map-controls "+cp(s)),n=a,this.element.appendChild(n)}let o=document.createElement("div");return n.appendChild(o),o}_createAttribution(t){let e=this._createControlElement(t,"bottomRight");this.attribution=new vx(e,t)}_createNavigator(t){let e=this._createControlElement(t,"topLeft"),s=this.navigator=new Dc(e,m({},t,{icons:this.options.icons}));this._navigatorPan=this._navigatorPan.bind(this),s.bind("pan",this._navigatorPan),this._navigatorCenter=this._navigatorCenter.bind(this),s.bind("center",this._navigatorCenter)}_navigatorPan(t){let e=this.scroller,s=e.scrollLeft+t.x,i=e.scrollTop-t.y,n=this._virtualSize,o=this.element.clientWidth,a=this.element.clientHeight;s=M(s,n.x.min,n.x.max-o),i=M(i,n.y.min,n.y.max-a),this.scroller.one("scroll",ft(this._scrollEnd,this)),this.scroller.scrollTo(-s,-i)}_navigatorCenter(){this.center(this.options.center)}_createZoomControl(t){let e=this._createControlElement(t,"topLeft"),s=this.zoomControl=new zc(e,t,this.options.icons);this._zoomControlChange=this._zoomControlChange.bind(this),s.bind("change",this._zoomControlChange)}_zoomControlChange(t){this.trigger("zoomStart",{originalEvent:t})||(this.zoom(this.zoom()+t.delta),this.trigger("zoomEnd",{originalEvent:t}))}_initScroller(){let t=this.support.mobileOS?hk:lk,e=this.options.zoomable!==!1,s=this.scroller=new Uc(this.element.children[0],{friction:t,velocityMultiplier:dk,zoom:e,mousewheelScrolling:!1,supportDoubleTap:!0});s.bind("scroll",ft(this._scroll,this)),s.bind("scrollEnd",ft(this._scrollEnd,this)),s.userEvents.bind("gesturestart",ft(this._scaleStart,this)),s.userEvents.bind("gestureend",ft(this._scale,this)),s.userEvents.bind("doubleTap",ft(this._doubleTap,this)),s.userEvents.bind("tap",ft(this._tap,this)),this.scrollElement=s.scrollElement}_initLayers(){let t=this.options.layers,e=this.layers=[];for(let s=0;s<t.length;s++){let i=t[s];const n=this._createLayer(i);e.push(n)}}_createLayer(t){let e=t.type||"shape",s=this.options.layerDefaults[e],i=e===ar?m({},this.options.markerDefaults,t,{icons:this.options.icons}):m({},s,t),n=pk[e],o=new n(this,i);return e===ar&&(this.markers=o),o}_createTooltip(){return new Ax(this.widgetService,this.options.tooltip)}_initMarkers(){(this.options.layers||[]).filter(e=>e&&e.type===ar).length>0||(this.markers=new Hc(this,m({},this.options.markerDefaults,{icons:this.options.icons})),this.markers.add(this.options.markers))}_scroll(t){let e=this.locationToLayer(this._viewOrigin).round(),s=t.sender.movable,i=new w(s.x,s.y).scale(-1).scale(1/s.scale);e.x+=i.x,e.y+=i.y,this._scrollOffset=i,this._tooltip.offset=i,this.hideTooltip(),this._setOrigin(this.layerToLocation(e)),this.trigger("pan",{originalEvent:t,origin:this._getOrigin(),center:this.center()})}_scrollEnd(t){!this._scrollOffset||!this._panComplete()||(this._scrollOffset=null,this._panEndTimestamp=Es(),this.trigger("panEnd",{originalEvent:t,origin:this._getOrigin(),center:this.center()}))}_panComplete(){return Es()-(this._panEndTimestamp||0)>50}_scaleStart(t){if(this.trigger("zoomStart",{originalEvent:t})){let e=t.touches[1];e&&e.cancel()}}_scale(t){let e=this.scroller.movable.scale,s=this._scaleToZoom(e),i=new w(t.center.x,t.center.y),n=this.viewToLocation(i,s),a=this.locationToLayer(n,s).translate(-i.x,-i.y);this._zoomAround(a,s),this.trigger("zoomEnd",{originalEvent:t})}_scaleToZoom(t){let s=this._layerSize()*t/this.options.minSize,i=bs.log(s)/bs.log(2);return bs.round(i)}_reset(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.hideTooltip(),this.trigger("beforeReset"),this.trigger("reset")}_resetScroller(){let t=this.scroller,e=t.dimensions.x,s=t.dimensions.y,i=this._layerSize(),n=this.extent().nw,o=this.locationToLayer(n).round();t.movable.round=!0,t.reset(),t.userEvents.cancel();let a=this.zoom();t.dimensions.forcedMinScale=ol(2,this.options.minZoom-a),t.dimensions.maxScale=ol(2,this.options.maxZoom-a);let l={min:-o.x,max:i-o.x},h={min:-o.y,max:i-o.y};if(this.options.wraparound&&(l.max=20*i,l.min=-l.max),this.options.pannable===!1){let c=this.viewSize();l.min=h.min=0,l.max=c.width,h.max=c.height}e.makeVirtual(),s.makeVirtual(),e.virtualSize(l.min,l.max),s.virtualSize(h.min,h.max),this._virtualSize={x:l,y:h}}_renderLayers(){}_layerSize(t){const e=L(t,this.options.zoom);return this.options.minSize*ol(2,e)}_tap(t){if(!this._panComplete())return;let e=this.eventOffset(t);this.hideTooltip(),this.trigger("click",{originalEvent:t,location:this.viewToLocation(e)})}_doubleTap(t){if(this.options.zoomable!==!1&&!this.trigger("zoomStart",{originalEvent:t})){let s=this.zoom()+uk,i=this.eventOffset(t),n=this.viewToLocation(i),a=this.locationToLayer(n,s).translate(-i.x,-i.y);this._zoomAround(a,s),this.trigger("zoomEnd",{originalEvent:t})}}_mousewheel(t){let e=_h(t)>0?-1:1,s=this.options,i=this.zoom(),n=M(i+e,s.minZoom,s.maxZoom);if(s.zoomable!==!1&&n!==i&&!this.trigger("zoomStart",{originalEvent:t})){let o=this.eventOffset(t),a=this.viewToLocation(o),h=this.locationToLayer(a,n).translate(-o.x,-o.y);this._zoomAround(h,n),this.trigger("zoomEnd",{originalEvent:t})}}_toDocumentCoordinates(t){const e=Vi(this.element);return{left:S(t.x+e.left),top:S(t.y+e.top)}}};b(Mx,{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],icons:{type:"font",svgIcons:{}},zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0,renderPointsAsMarkers:!1});ka(Mx,["beforeReset","click","markerActivate","markerClick","markerCreated","markerMouseEnter","markerMouseLeave","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"]);const gk=(r,t)=>Math.max.apply(null,r.map(t)),fk=(r,t)=>Math.min.apply(null,r.map(t)),rl=(r,t)=>r.map(t).reduce((e,s)=>e+s,0),Hr=(r,t)=>r.y0===t.y0?r.index-t.index:r.y0+r.y1-t.y0-t.y1,mk=(r,t)=>Hr(r.source,t.source),xk=(r,t)=>Hr(r.target,t.target),al=r=>r.value;function ll(r){r.forEach(t=>{t.targetLinks.forEach(e=>{e.source.sourceLinks.sort(xk)}),t.sourceLinks.forEach(e=>{e.target.targetLinks.sort(mk)})})}const yk=(r,t)=>r.align==="left"?r.depth:r.align==="right"?t-r.height:r.sourceLinks.length?r.depth:t;let vk=class{constructor(t){const{offset:e={},align:s}=t.nodesOptions;this.data={nodes:t.nodes.map(i=>m({},{offset:e,align:s},i)),links:t.links.map(i=>m({},i))},this.width=t.width,this.height=t.height,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.nodeWidth=t.nodesOptions.width,this.nodePadding=t.nodesOptions.padding,this.reverse=t.reverse,this.targetColumnIndex=t.targetColumnIndex,this.loops=t.loops,this.autoLayout=t.autoLayout}calculate(){const{nodes:t,links:e}=this.data;this.connectLinksToNodes(t,e),this.calculateNodeValues(t);const s=this.calculateNodeHeights(t);if(s)return{nodes:[],links:[],columns:[],circularLinks:s};this.calculateNodeDepths(t);const i=this.calculateNodeColumns(t);return this.calculateNodeBreadths(i),this.applyNodesOffset(t),this.calculateLinkBreadths(t),Object.assign({},this.data,{columns:i})}connectLinksToNodes(t,e){const s=new Map;t.forEach((i,n)=>{i.index=n,i.sourceLinks=[],i.targetLinks=[],i.id=i.id!==void 0?i.id:i.label.text,s.set(i.id,i)}),e.forEach(i=>{i.source=s.get(i.sourceId),i.target=s.get(i.targetId),i.source.sourceLinks.push(i),i.target.targetLinks.push(i)})}calculateNodeValues(t){t.forEach(e=>{e.value=Math.max(rl(e.sourceLinks,al),rl(e.targetLinks,al))})}calculateNodeDepths(t){let e=new Set(t),s=new Set,i=0;for(;e.size;){const n=Array.from(e);for(let o=0;o<n.length;o++){const a=n[o];a.depth=i;for(let l=0;l<a.sourceLinks.length;l++){const h=a.sourceLinks[l];s.add(h.target)}}i++,e=s,s=new Set}}calculateNodeHeights(t){const e=t.length;let s=new Set(t),i=new Set,n=0;const o=a=>{a.height=n,a.targetLinks.forEach(l=>{i.add(l.source)})};for(;s.size;){if(s.forEach(o),n++,n>e)return!0;s=i,i=new Set}return!1}calculateNodeColumns(t){const e=gk(t,n=>n.depth),s=(this.width-this.offsetX-this.nodeWidth)/e,i=new Array(e+1);for(let n=0;n<t.length;n++){const o=t[n],a=Math.max(0,Math.min(e,yk(o,e)));o.x0=this.offsetX+a*s,o.x1=o.x0+this.nodeWidth,o.layer=a,i[a]=i[a]||[],i[a].push(o)}return i}calculateNodeBreadths(t){const e=fk(t,s=>(this.height-this.offsetY-(s.length-1)*this.nodePadding)/rl(s,al));if(t.forEach(s=>{let i=this.offsetY;s.forEach(n=>{n.y0=i,n.y1=i+n.value*e,i=n.y1+this.nodePadding,n.sourceLinks.forEach(o=>{o.width=o.value*e})}),i=(this.height-i+this.nodePadding)/(s.length+1),s.forEach((n,o)=>{n.y0+=i*(o+1),n.y1+=i*(o+1)})}),this.autoLayout!==!1){const s=this.loops!==void 0?this.loops:t.length-1,i=this.targetColumnIndex||1;for(let n=0;n<s;n++)this.reverse?(this.uncurlLinksToRight(t,i),this.uncurlLinksToLeft(t,i)):(this.uncurlLinksToLeft(t,i),this.uncurlLinksToRight(t,i))}t.forEach(ll)}applyNodesOffset(t){t.forEach(e=>{const s=(e.offset?e.offset.left:0)||0,i=(e.offset?e.offset.top:0)||0;e.x0+=s,e.x1+=s,e.y0+=i,e.y1+=i})}calculateLinkBreadths(t){t.forEach(e=>{const{sourceLinks:s,targetLinks:i}=e;let n=e.y0,o=n;s.forEach(a=>{a.x0=a.source.x1,a.y0=n+a.width/2,n+=a.width}),i.forEach(a=>{a.x1=a.target.x0,a.y1=o+a.width/2,o+=a.width})})}uncurlLinksToRight(t,e){const s=t.length;for(let i=e;i<s;i++){const n=t[i];n.forEach(o=>{let a=0,l=0;o.targetLinks.forEach(c=>{let d=c.value*(o.layer-c.source.layer);a+=this.targetTopPos(c.source,o)*d,l+=d});let h=a===0?0:a/l-o.y0;o.y0+=h,o.y1+=h,ll([o])}),n.sort(Hr),this.arrangeNodesVertically(n)}}uncurlLinksToLeft(t,e){const i=t.length-1-e;for(let n=i;n>=0;n--){const o=t[n];for(let a=0;a<o.length;a++){const l=o[a];let h=0,c=0;l.sourceLinks.forEach(u=>{let p=u.value*(u.target.layer-l.layer);h+=this.sourceTopPos(l,u.target)*p,c+=p});let d=h===0?0:h/c-l.y0;l.y0+=d,l.y1+=d,ll([l])}o.sort(Hr),this.arrangeNodesVertically(o)}}arrangeNodesVertically(t){const s=t.length-1;this.arrangeUp(t,this.height,s),this.arrangeDown(t,this.offsetY,0)}arrangeDown(t,e,s){let i=e;for(let n=s;n<t.length;n++){const o=t[n],a=Math.max(0,i-o.y0);o.y0+=a,o.y1+=a,i=o.y1+this.nodePadding}}arrangeUp(t,e,s){let i=e;for(let n=s;n>=0;--n){const o=t[n],a=Math.max(0,o.y1-i);o.y0-=a,o.y1-=a,i=o.y0-this.nodePadding}}sourceTopPos(t,e){let s=e.y0-(e.targetLinks.length-1)*this.nodePadding/2;for(let i=0;i<e.targetLinks.length;i++){const n=e.targetLinks[i];if(n.source===t)break;s+=n.width+this.nodePadding}for(let i=0;i<t.sourceLinks.length;i++){const n=t.sourceLinks[i];if(n.target===e)break;s-=n.width}return s}targetTopPos(t,e){let s=t.y0-(t.sourceLinks.length-1)*this.nodePadding/2;for(let i=0;i<t.sourceLinks.length;i++){const n=t.sourceLinks[i];if(n.target===e)break;s+=n.width+this.nodePadding}for(let i=0;i<e.targetLinks.length;i++){const n=e.targetLinks[i];if(n.source===t)break;s-=n.width}return s}};const _i=r=>new vk(r).calculate(),bk=r=>{let t=0;const e=r.length;for(let s=0;s<e;s++){const i=r[s];for(let n=s+1;n<e;n++){const o=r[n];wk(i,o)&&(t+=Math.min(i.value,o.value))}}return t};function Zo(r,t,e,s,i,n){const o=(n-t)*(e-r),a=(s-t)*(i-r);return o>a?1:o===a?0:-1}function wk(r,t){const e=Zo(r.x0,r.y0,r.x1,r.y1,t.x1,t.y1),s=Zo(r.x0,r.y0,r.x1,r.y1,t.x0,t.y0),i=Zo(r.x0,r.y0,t.x0,t.y0,t.x1,t.y1),n=Zo(r.x1,r.y1,t.x0,t.y0,t.x1,t.y1);return e!==s&&i!==n}class Io{constructor(t){this.options=m({},this.options,t),this.createVisual()}createVisual(){this.visual=this.createElement()}exportVisual(){return this.visual}createElement(){const t=this.options.visual;let e;return t?e=t({sender:this.getSender(),options:this.visualOptions(),createVisual:()=>this.getElement()}):e=this.getElement(),e}getSender(){return this}}class Ep extends Io{getElement(){return C.fromRect(this.getRect(),this.visualOptions())}getRect(){const t=this.options.node;return new H([t.x0,t.y0],[t.x1-t.x0,t.y1-t.y0])}getLabelText(t){let e=t.labels.ariaTemplate;if(e)return e({node:t.node})}visualOptions(){const t=m({},this.options,this.options.node),e=this.getLabelText(t);return{fill:{color:t.color,opacity:t.opacity},stroke:{width:0},className:"k-sankey-node",role:"graphics-symbol",ariaRoleDescription:"Node",ariaLabel:e}}createFocusHighlight(){if(this.options.navigatable)return this._highlight=C.fromRect(this.getRect(),{stroke:this.options.focusHighlight.border,visible:!1}),this._highlight}focus(t){if(this._highlight){const{highlight:e=!0}=t||{};e&&this._highlight.options.set("visible",!0);const s=this.options.node.id;this.visual.options.set("id",s),this.options.root()&&this.options.root().setAttribute(zi,s)}}blur(){this._highlight&&(this._highlight.options.set("visible",!1),this.visual.options.set("id",""),this.options.root()&&this.options.root().removeAttribute(zi))}}const _k=(r,t,e)=>r.color||t[e%t.length],Mp=(r,t,e,s)=>{const i=m({},t,t.node);return m({},{color:_k(r,e,s)},i,{node:r},{visual:r.visual,opacity:r.opacity,offset:r.offset,color:r.color})},Qo=(r,t,e,s,i)=>{const n=1-i,o=n*n,a=i*i;return r*o*n+3*t*i*o+3*e*a*n+s*a*i};function Ak(r,t,e,s,i){let n=(r+e)/2,o=(t+s)/2,a,l;if(t===s)a=0,l=i/2;else if(r===e)a=i/2,l=0;else{let u=-1/((s-t)/(e-r));a=i/2/Math.sqrt(1+u*u),l=u*a}let h={x:n-a,y:o-l},c={x:n+a,y:o+l};return{P1:h,P2:c}}function Sk(r,t,e,s,i){const n={x:(r.x+t.x)/2,y:(r.y+t.y)/2},o=t.x-r.x;let l=-(t.y-r.y),h=o;const c=Math.sqrt(l*l+h*h);l=l/c*e,h=h/c*e;const d={x:n.x+l,y:n.y+h},u={x:n.x-l,y:n.y-h},p=i.x-s.x,g=i.y-s.y,f=g*(d.x-u.x)-p*(d.y-u.y);if(Math.abs(f)<1e-10)return null;const x=(p*(u.y-s.y)-g*(u.x-s.x))/f,y=((d.x-u.x)*(u.y-s.y)-(d.y-u.y)*(u.x-s.x))/f;return x>=0&&x<=1&&y>=0&&y<=1?{x:u.x+x*(d.x-u.x)}:null}const kk=(r,t)=>{const e=r.width/2,s=t?r.x1:r.x0,i=t?r.x0:r.x1,n=t?r.y1:r.y0,o=t?r.y0:r.y1,a=(s+i)/2,l=[a,Qo(n,n,o,o,.5)],h=.4999,c=[Qo(s,a,a,i,h),Qo(n,n,o,o,h)],d=Ak(l[0],l[1],c[0],c[1],r.width),u=[a,Qo(n+e,n+e,o+e,o+e,.5)],p=d.P1.y>d.P2.y?d.P1:d.P2,g=e,f=(n>o?1:-1)*g,x=p,y={x:u[0],y:u[1]},v={x:u[0],y:u[1]},k={x:Math.max(1,u[0]+f),y:u[1]},E=Sk(x,y,g,v,k)||{x:(u[0]+p.x)/2},I=s,B=i,V=(E.x-.125*I-.125*B)/.75;return a-V};class Ck extends Io{getElement(){const t=this.options.link,{x0:e,x1:s,y0:i,y1:n}=t,o=(e+s)/2;return new C(this.visualOptions()).moveTo(e,i).curveTo([o,i],[o,n],[s,n])}getLabelText(t){let e=t.labels.ariaTemplate;if(e)return e({link:t.link})}visualOptions(){const t=this.options,e=this.options.link,s=this.getLabelText(t);return{stroke:{width:t.link.width,color:e.color||t.color,opacity:A(e.opacity)?e.opacity:t.opacity},role:"graphics-symbol",ariaRoleDescription:"Link",ariaLabel:s}}createFocusHighlight(){if(!this.options.navigatable)return;const{link:t}=this.options,{x0:e,x1:s,y0:i,y1:n}=t,o=(e+s)/2,a=t.width/2,l=kk(t,this.options.rtl);this._highlight=new C({stroke:this.options.focusHighlight.border,visible:!1}).moveTo(e,i+a).lineTo(e,i-a).curveTo([o+l,i-a],[o+l,n-a],[s,n-a]).lineTo(s,n+a).curveTo([o-l,n+a],[o-l,i+a],[e,i+a])}focus(t){if(this._highlight){const{highlight:e=!0}=t||{};e&&this._highlight.options.set("visible",!0);const s=`${this.options.link.sourceId}->${this.options.link.targetId}`;this.visual.options.set("id",s),this.options.root()&&this.options.root().setAttribute(zi,s)}}blur(){this._highlight&&(this._highlight.options.set("visible",!1),this.visual.options.set("id",""),this.options.root()&&this.options.root().removeAttribute(zi))}}const Tk=(r,t,e,s)=>{const i=m({},t,{link:r,opacity:r.opacity,color:r.color,colorType:r.colorType,visual:r.visual,highlight:r.highlight});return i.colorType==="source"?i.color=e.options.fill.color:i.colorType==="target"&&(i.color=s.options.fill.color),i},lr="inside",Ai="before",Ko="after";class Zl extends Io{getElement(){const t=m({},this.options,this.options.node.label),{node:e,diagramMinX:s,diagramMaxX:i,text:n,offset:o,rtl:a}=t;let l=t.position;if(a&&l!==lr&&(l=l===Ai?Ko:Ai),!t.visible||!n)return null;const h=new _(e.x0,e.y0,e.x1,e.y1),c=this.visualOptions();a&&!c.align&&(c.align="right");const d=new qt(n,c);d.reflow(new _);const u=d.box,p=h.center().y-u.height()/2,g=e.x1+u.width()>i,f=e.x0-u.width()<s;let x=l===Ai||l===lr&&g?Ai:Ko;a&&(x=l===Ko||l===lr&&f?Ko:Ai);const y=[x===Ai?e.x0-u.width():e.x1,p],v=new _(y[0],y[1],y[0]+u.width(),y[1]+u.height());return v.translate(o.left||0,o.top||0),d.reflow(v),d.renderVisual(),d.visual}visualOptions(){const t=m({},this.options,this.options.node.label);return{color:t.color,font:t.font,border:t.border,margin:t.margin,padding:t.padding,align:t.align,paintOrder:t.paintOrder,stroke:t.stroke}}}b(Zl,{position:lr});const Ip=(r,t,e,s,i)=>m({},t,{node:r,diagramMinX:s,diagramMaxX:i,rtl:e,visual:r.label.visual,visible:r.label.visible,margin:r.label.margin,padding:r.label.padding,border:r.label.border,align:r.label.align,offset:r.label.offset});class Ql extends Io{getElement(){const t=this.options,{drawingRect:e,text:s}=t;if(t.visible===!1||!s)return null;const i=Oi.buildTitle(s,t);return i.reflow(e),i.renderVisual(),i.visual}createElement(){return this.getElement()}}b(Ql,{align:O,border:{width:0},margin:X(5),padding:X(5)});const Pk=(r,t)=>r.node.x0-t.node.x0!==0?r.node.x0-t.node.x0:r.node.y0-t.node.y0,Ek=(r,t)=>r.node.x1-t.node.x1!==0?r.node.x1-t.node.x1:t.node.y0-r.node.y0,Mk=r=>r?Ek:Pk;class hr extends Io{getElement(){const t=this.options,{drawingRect:e,rtl:s,nodes:i=[],item:n,position:o}=t;if(t.visible===!1||!i.length)return null;const a=t.labels||{};let l;a.content&&(l=bt(a));const h=i.map(u=>{const p=u.label&&u.label.text||"";return{text:l?l({text:p,node:u}):p,area:{background:n.areaBackground!==void 0?n.areaBackground:u.color,opacity:n.areaOpacity!==void 0?n.areaOpacity:u.opacity},node:u}});h.sort(Mk(s));const c=s&&o!==z&&o!==G,d=new cc(Object.assign({},t,{data:h,reverse:c}),{rtl:s});return d.reflow(e),d.renderVisual(),d.visual}createElement(){return this.getElement()}}b(hr,{markers:{visible:!1},item:{type:os,cursor:yl,opacity:1},position:j,align:O,accessibility:{role:"presentation",ariaLabel:null,ariaRoleDescription:null},border:{width:0}});const Sn="link",Si="node",Ik=r=>{const{nodes:t,links:e}=r,s=Math.min(...t.map(o=>o.x0)),n=Math.max(...t.map(o=>o.x1))-s;t.forEach(o=>{const a=n-(o.x1-2*s),l=n-(o.x0-2*s);o.x0=a,o.x1=l}),e.forEach(o=>{const a=n-(o.x1-2*s),l=n-(o.x0-2*s);o.x1=a,o.x0=l})};class Rk extends xe{constructor(t,e,s){super(),this._initTheme(s),this._setOptions(e),this._initElement(t),this._initSurface(),e&&e.data&&(this._redraw(),this._initResizeObserver(),this._initNavigation(t))}destroy(){this.unbind(),this._destroySurface(),this._destroyResizeObserver(),this.element&&(this.element.removeEventListener("keydown",this._keydownHandler),this.element.removeEventListener("focus",this._focusHandler),this.element.removeEventListener("mousedown",this._onDownHandler),this.element.removeEventListener("touchstart",this._onDownHandler),this.element.removeEventListener("pointerdown",this._onDownHandler)),this._focusState=null,this.element=null}_initElement(t){this.element=t,dt(t,["k-chart","k-sankey"]),t.setAttribute("role","graphics-document");const{title:e}=this.options;e.text&&t.setAttribute("aria-label",e.text),e.description&&t.setAttribute("aria-roledescription",e.description)}_initSurface(){this.surface||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())}_initNavigation(t){t.tabIndex=t.getAttribute("tabindex")||0,!this.options.disableKeyboardNavigation&&(this._keydownHandler=this._keydown.bind(this),this._focusHandler=this._focus.bind(this),this._blurHandler=this._blur.bind(this),this._onDownHandler=this._onDown.bind(this),t.addEventListener("keydown",this._keydownHandler),t.addEventListener("focus",this._focusHandler),t.addEventListener("blur",this._blurHandler),t.addEventListener("mousedown",this._onDownHandler),t.addEventListener("touchstart",this._onDownHandler),t.addEventListener("pointerdown",this._onDownHandler),this._focusState={node:this.firstFocusableNode(),link:null})}firstFocusableNode(){return this.columns[0][0]}_initResizeObserver(){const t=new ResizeObserver(e=>{e.forEach(s=>{const{width:i,height:n}=s.contentRect;s.target!==this.element||this.size&&this.size.width===i&&this.size.height===n||(this.size={width:i,height:n},this.surface.setSize(this.size),this.resize=!0,this._redraw())})});this._resizeObserver=t,t.observe(this.element)}_createSurface(){return ai.create(this.surfaceElement,{mouseenter:this._mouseenter.bind(this),mouseleave:this._mouseleave.bind(this),mousemove:this._mousemove.bind(this),click:this._click.bind(this)})}_initTheme(t){let e=t||this.theme||{};this.theme=e,this.options=m({},e,this.options)}setLinksOpacity(t){this.linksVisuals.forEach(e=>{this.setOpacity(e,t,e.linkOptions.opacity)})}setLinksInactivityOpacity(t){this.linksVisuals.forEach(e=>{this.setOpacity(e,t,e.linkOptions.highlight.inactiveOpacity)})}setOpacity(t,e,s){t.options.set("stroke",Object.assign({},t.options.stroke,{opacity:A(s)?s:e}))}trigger(t,e){let s=e.element.dataItem;const i=e.element.type,n=Object.assign({},e,{type:t,targetType:i,dataItem:s});return super.trigger(t,n)}_mouseenter(t){const e=t.element,s=e.type===Sn,i=e.type===Si,n=!!(e.chartElement&&e.chartElement.options.node);if(s&&this.trigger("linkEnter",t)||i&&this.trigger("nodeEnter",t))return;const{highlight:o}=this.options.links;if(s)this.setLinksInactivityOpacity(o.inactiveOpacity),this.setOpacity(e,o.opacity,e.linkOptions.highlight.opacity);else if(i)this.highlightLinks(e,o);else if(n){const a=this.nodesVisuals.get(e.chartElement.options.node.id);this.highlightLinks(a,o)}}_mouseleave(t){const e=t.element,s=e.type===Sn,i=e.type===Si,n=!!(e.chartElement&&e.chartElement.options.node),o=t.originalEvent.relatedTarget;s&&o&&o.nodeName==="text"||((s||i)&&(this.tooltipTimeOut&&(clearTimeout(this.tooltipTimeOut),this.tooltipTimeOut=null),this.tooltipShown=!1,this.trigger("tooltipHide",t)),!(s&&this.trigger("linkLeave",t)||i&&this.trigger("nodeLeave",t))&&(s||i||n)&&this.linksVisuals.forEach(a=>{this.setOpacity(a,this.options.links.opacity,a.linkOptions.opacity)}))}_mousemove(t){const{followPointer:e,delay:s}=this.options.tooltip,i=t.element,n=i.type;if(n!==Sn&&n!==Si||this.tooltipShown&&!e)return;const o=t.originalEvent,a=this.element.getBoundingClientRect(),l=o.clientX-a.left<a.width/2,h=o.clientY-a.top<a.height/2;if(t.tooltipData={popupOffset:{left:o.pageX,top:o.pageY},popupAlign:{horizontal:l?"left":"right",vertical:h?"top":"bottom"}},n===Si){const{sourceLinks:d,targetLinks:u}=i.dataItem,p=u.length?u:d;t.nodeValue=p.reduce((g,f)=>g+f.value,0)}this.tooltipTimeOut&&(clearTimeout(this.tooltipTimeOut),this.tooltipTimeOut=null);const c=e&&this.tooltipShown?0:s;this.tooltipTimeOut=setTimeout(()=>{this.trigger("tooltipShow",t),this.tooltipShown=!0,this.tooltipTimeOut=null},c)}_click(t){const e=t.element,s=e.dataItem,i=e.type===Sn,n=e.type===Si,o=this._focusState||{};if(n)!o.link&&this.sameNode(o.node,s)||(this._focusState={node:s,link:null},this._focusNode({highlight:!1})),this.trigger("nodeClick",t);else if(i){const a={sourceId:s.source.id,targetId:s.target.id,value:s.value};this.sameLink(o.link,a)||(this._focusState={node:s.source,link:a},this._focusLink({highlight:!1})),this.trigger("linkClick",t)}}sameNode(t,e){return t&&e&&t.id===e.id}sameLink(t,e){return t&&e&&t.sourceId===e.sourceId&&t.targetId===e.targetId}_focusNode(t){this._cleanFocusHighlight();const e=this._focusState.node;this.models.map.get(e.id).focus(t)}_focusLink(t){this._cleanFocusHighlight();const e=this._focusState.link;this.models.map.get(`${e.sourceId}-${e.targetId}`).focus(t)}_focusNextNode(t=1){const e=this._focusState.node,s=this.columns.findIndex(a=>a.find(l=>l.id===e.id)),i=this.columns[s],n=i.findIndex(a=>a.id===e.id),o=i[n+t];o&&(this._focusState.node=o,this._focusNode())}_focusNextLink(t=1){const e=this._focusState.node,s=this._focusState.link,i=e.sourceLinks.findIndex(o=>o.sourceId===s.sourceId&&o.targetId===s.targetId),n=e.targetLinks.findIndex(o=>o.sourceId===s.sourceId&&o.targetId===s.targetId);if(i!==-1){const o=e.sourceLinks[i+t];o&&(this._focusState.link=o,this._focusLink())}else if(n!==-1){const o=e.targetLinks[n+t];o&&(this._focusState.link=o,this._focusLink())}}_focusSourceNode(){const t=this._focusState.link,e=this.models.map.get(t.sourceId);this._focusState={node:e.options.node,link:null},this._focusNode()}_focusTargetNode(){const t=this._focusState.link,e=this.models.map.get(t.targetId);this._focusState={node:e.options.node,link:null},this._focusNode()}_focusSourceLink(){const s=this._focusState.node.sourceLinks[0];s&&(this._focusState.link=s,this._focusLink())}_focusTargetLink(){const s=this._focusState.node.targetLinks[0];s&&(this._focusState.link=s,this._focusLink())}_focus(){this._skipFocusHighlight||(this._focusState.link?this._focusLink():this._focusNode()),this._skipFocusHighlight=!1}_blur(){this._cleanFocusHighlight()}_onDown(){this._hasFocus()||(this._skipFocusHighlight=!0)}_hasFocus(){return this.element.ownerDocument.activeElement===this.element}_cleanFocusHighlight(){this.models.nodes.forEach(t=>t.blur()),this.models.links.forEach(t=>t.blur())}_keydown(t){let e=this["on"+t.key];const s=this.options.rtl;s&&t.key==="ArrowLeft"?e=this.onArrowRight:s&&t.key==="ArrowRight"&&(e=this.onArrowLeft),e&&e.call(this,t)}onEscape(t){t.preventDefault(),this._focusState={node:this.firstFocusableNode(),link:null},this._focusNode()}onArrowDown(t){t.preventDefault(),this._focusState.link?this._focusNextLink(1):this._focusNextNode(1)}onArrowUp(t){t.preventDefault(),this._focusState.link?this._focusNextLink(-1):this._focusNextNode(-1)}onArrowLeft(t){t.preventDefault(),this._focusState.link?this._focusSourceNode():this._focusTargetLink()}onArrowRight(t){t.preventDefault(),this._focusState.link?this._focusTargetNode():this._focusSourceLink()}highlightLinks(t,e){t&&(this.setLinksInactivityOpacity(e.inactiveOpacity),t.links.forEach(s=>{this.setOpacity(s,e.opacity,s.linkOptions.highlight.opacity)}))}_destroySurface(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())}_destroyResizeObserver(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}_initSurfaceElement(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement))}_destroySurfaceElement(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)}setOptions(t,e){this._setOptions(t),this._initTheme(e),this._initSurface(),this._redraw()}_redraw(){this.surface.clear();const{width:t,height:e}=this._getSize();this.size={width:t,height:e},this.surface.setSize(this.size),this.createVisual(),this.surface.draw(this.visual)}_getSize(){return this.element.getBoundingClientRect()}createVisual(){this.visual=this._render()}titleBox(t,e){return!t||t.visible===!1||!t.text?null:new Ql(Object.assign({},{drawingRect:e},t)).exportVisual().chartElement.box}legendBox(t,e,s){return!t||t.visible===!1?null:new hr(Object.assign({},{nodes:e},t,{drawingRect:s})).exportVisual().chartElement.box}calculateSankey(t,e){const{title:s,legend:i,data:n,nodes:o,labels:a,nodeColors:l,disableAutoLayout:h,disableKeyboardNavigation:c,rtl:d}=e,u=!h,p=((o.focusHighlight||{}).border||{}).width||0,g=c?0:p/2,f=new _(0,0,t.width,t.height);f.unpad(g);const x=this.titleBox(s,f);let y=f.clone();if(x){const Q=x.height();s.position===N?(f.unpad({top:Q}),y=new _(0,Q,t.width,t.height)):(f.shrink(0,Q),y=new _(0,0,t.width,t.height-Q))}const v=this.legendBox(i,n.nodes,y),k=i&&i.position||hr.prototype.options.position;v&&(k===z&&f.unpad({left:v.width()}),k===G&&f.shrink(v.width(),0),k===N&&f.unpad({top:v.height()}),k===j&&f.shrink(0,v.height()));const{nodes:E,circularLinks:I}=_i(Object.assign({},t,{offsetX:0,offsetY:0,width:f.width(),height:f.height()}));if(I)return console.warn("Circular links detected. Kendo Sankey diagram does not support circular links."),{sankey:{nodes:[],links:[],columns:[[]],circularLinks:I},legendBox:v,titleBox:x};const B=new _,V=E.reduce((Q,Mt)=>Math.min(Q,Mt.x0),1/0),q=E.reduce((Q,Mt)=>Math.max(Q,Mt.x1),0);E.forEach((Q,Mt)=>{if(d){const{x0:zx,x1:Vx}=Q;Q.x0=q-Vx,Q.x1=q-zx}const Ea=Mp(Q,o,l,Mt),Lo=new Ep(Ea);B.wrap(Fi(Lo.exportVisual().rawBBox()));const Gc=new Zl(Ip(Q,a,d,V,q)).exportVisual();Gc&&B.wrap(Fi(Gc.rawBBox()))});let ht=f.x1,$=f.y1,mt=f.width()+ht,xt=f.height()+$;if(mt-=B.x2>f.width()?B.x2-f.width():0,xt-=B.y2>f.height()?B.y2-f.height():0,ht+=B.x1<0?-B.x1:0,$+=B.y1<0?-B.y1:0,u===!1)return{sankey:_i(Object.assign({},t,{offsetX:ht,offsetY:$,width:mt,height:xt,autoLayout:!1})),legendBox:v,titleBox:x};if(this.resize&&u&&this.permutation)return this.resize=!1,{sankey:_i(Object.assign({},t,{offsetX:ht,offsetY:$,width:mt,height:xt},this.permutation)),legendBox:v,titleBox:x};const Pe=1,ms=2,J=_i(Object.assign({},t,{offsetX:ht,offsetY:$,width:mt,height:xt,autoLayout:!1})).columns.length,Z=[],ct=(Q,Mt)=>{let Ea=_i(Object.assign({},t,{offsetX:ht,offsetY:$,width:mt,height:xt,loops:ms,targetColumnIndex:Q,reverse:Mt})),Lo=bk(Ea.links);return Z.push({crosses:Lo,reverse:Mt,targetColumnIndex:Q}),Lo===0};for(let Q=Pe;Q<=J-1&&!(ct(Q,!1)||ct(Q,!0));Q++);const _t=Math.min.apply(null,Z.map(Q=>Q.crosses)),re=Z.find(Q=>Q.crosses===_t);return this.permutation={targetColumnIndex:re.targetColumnIndex,reverse:re.reverse},{sankey:_i(Object.assign({},t,{offsetX:ht,offsetY:$,width:mt,height:xt},this.permutation)),legendBox:v,titleBox:x}}_render(t,e){const s=t||this.options,i=e||this,{labels:n,nodes:o,links:a,nodeColors:l,title:h,legend:c,rtl:d,disableKeyboardNavigation:u}=s;let p=s.data;const{width:g,height:f}=i.size,x=Object.assign({},p,{width:g,height:f,nodesOptions:o,title:h,legend:c}),{sankey:y,titleBox:v,legendBox:k}=this.calculateSankey(x,s);d&&Ik(y);const{nodes:E,links:I,columns:B}=y;i.columns=B.map(J=>{const Z=J.slice();return Z.sort((ct,_t)=>ct.y0-_t.y0),Z});const V=new W({clip:C.fromRect(new H([0,0],[g,f]))});if(v){const Z=new Ql(Object.assign({},h,{drawingRect:v})).exportVisual();V.append(Z)}if(y.circularLinks)return V;const q=new Map;i.nodesVisuals=q;const ht={nodes:[],links:[],map:new Map};i.models=ht;const $=[];E.forEach((J,Z)=>{const ct=Mp(J,o,l,Z);ct.root=()=>i.element,ct.navigatable=u!==!0;const _t=new Ep(ct),re=_t.exportVisual();re.links=[],re.type=Si,J.color=ct.color,J.opacity=ct.opacity,re.dataItem=Object.assign({},p.nodes[Z],{color:ct.color,opacity:ct.opacity,sourceLinks:J.sourceLinks.map(Ht=>({sourceId:Ht.sourceId,targetId:Ht.targetId,value:Ht.value})),targetLinks:J.targetLinks.map(Ht=>({sourceId:Ht.sourceId,targetId:Ht.targetId,value:Ht.value}))}),q.set(J.id,re),ht.nodes.push(_t),ht.map.set(J.id,_t),V.append(re),_t.createFocusHighlight(),_t._highlight&&$.push(_t._highlight)});const mt=I.slice().sort((J,Z)=>Z.value-J.value),xt=[];i.linksVisuals=xt,mt.forEach(J=>{const{source:Z,target:ct}=J,_t=q.get(Z.id),re=q.get(ct.id),Ht=Tk(J,a,_t,re);Ht.root=()=>i.element,Ht.navigatable=u!==!0,Ht.rtl=d;const Q=new Ck(Ht),Mt=Q.exportVisual();Mt.type=Sn,Mt.dataItem={source:Object.assign({},_t.dataItem),target:Object.assign({},re.dataItem),value:J.value},Mt.linkOptions=Ht,xt.push(Mt),_t.links.push(Mt),re.links.push(Mt),ht.links.push(Q),ht.map.set(`${Z.id}-${ct.id}`,Q),Q.createFocusHighlight(),Q._highlight&&$.push(Q._highlight),V.append(Mt)});const Pe=E.reduce((J,Z)=>Math.min(J,Z.x0),1/0),ms=E.reduce((J,Z)=>Math.max(J,Z.x1),0);if(E.forEach(J=>{const Z=Ip(J,n,d,Pe,ms),_t=new Zl(Z).exportVisual();_t&&V.append(_t)}),k){const Z=new hr(Object.assign({},c,{rtl:d,drawingRect:k,nodes:E})).exportVisual();V.append(Z)}if($.length!==0){const J=new W;J.append(...$),V.append(J)}return V}exportVisual(t){const e=t&&t.options?m({},this.options,t.options):this.options,s={size:{width:A(t&&t.width)?t.width:this.size.width,height:A(t&&t.height)?t.height:this.size.height}};return this._render(e,s)}_setOptions(t){this.options=m({},this.options,t)}}const Rp={opacity:1,width:2,color:ut};b(Rk,{title:{position:N},labels:{visible:!0,margin:{left:8,right:8},padding:0,border:{width:0},paintOrder:"stroke",stroke:{lineJoin:"round",width:1},offset:{left:0,top:0}},nodes:{width:24,padding:16,opacity:1,align:"stretch",offset:{left:0,top:0},focusHighlight:{border:Object.assign({},Rp)},labels:{ariaTemplate:({node:r})=>r.label.text}},links:{colorType:"static",opacity:.4,highlight:{opacity:.8,inactiveOpacity:.2},focusHighlight:{border:Object.assign({},Rp)},labels:{ariaTemplate:({link:r})=>`${r.source.label.text} to ${r.target.label.text}`}},tooltip:{followPointer:!1,delay:200}});const Lk=[{text:"Arial",value:"Arial, Helvetica, sans-serif",style:{fontFamily:"Arial, Helvetica, sans-serif"}},{text:"Courier New",value:"'Courier New', Courier, monospace",style:{fontFamily:"'Courier New', Courier, monospace"}},{text:"Georgia",value:"Georgia, serif",style:{fontFamily:"Georgia, serif"}},{text:"Impact",value:"Impact, Charcoal, sans-serif",style:{fontFamily:"Impact, Charcoal, sans-serif"}},{text:"Lucida Console",value:"'Lucida Console', Monaco, monospace",style:{fontFamily:"'Lucida Console', Monaco, monospace"}},{text:"Tahoma",value:"Tahoma, Geneva, sans-serif",style:{fontFamily:"Tahoma, Geneva, sans-serif"}},{text:"Times New Roman",value:"'Times New Roman', Times,serif",style:{fontFamily:"'Times New Roman', Times,serif"}},{text:"Trebuchet MS",value:"'Trebuchet MS', Helvetica, sans-serif",style:{fontFamily:"'Trebuchet MS', Helvetica, sans-serif"}},{text:"Verdana",value:"Verdana, Geneva, sans-serif",style:{fontFamily:"Verdana, Geneva, sans-serif"}}];Lk[0].value;const Ro=1.5,mn=.4,Ix="#000",jc="Arial, Helvetica, sans-serif",Ok="11px "+jc,Ta="12px "+jc,Rx="16px "+jc,Lx="transparent",Ox="#fff",xn={type:rs},Pa={type:os},Ot=Object.assign({},Pa,{markers:{visible:!1},highlight:{visible:!1}}),Bx=()=>({icon:{border:{width:1}},label:{font:Ta,padding:3},line:{length:10,width:2},legendItem:Ot,visible:!0}),Bk=()=>({labels:{font:Ta},notes:Bx(),title:{font:Rx,margin:5}}),Lp=()=>({highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:Pa,opacity:.4}),Op=()=>({highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:Pa,opacity:.4}),Dk=()=>({gap:Ro,spacing:mn,legendItem:Ot}),Bp=()=>({outliersField:"",meanField:"",border:{_brightness:.8,width:1},downColor:Ox,gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:.3,whiskers:{width:2},legendItem:Ot}),zk=()=>({border:{width:0},labels:{background:Lx},legendItem:Ot,opacity:.6}),Dp=()=>({gap:Ro,spacing:mn,target:{color:"#ff0000"},legendItem:Ot}),Vk=()=>({border:{_brightness:.8,width:1},downColor:Ox,gap:1,highlight:{border:{opacity:1,width:2},line:{width:2}},line:{color:Ix,width:1},legendItem:Ot,spacing:.3}),Nk=()=>({gap:Ro,spacing:mn,legendItem:Ot}),Fk=()=>({legendItem:Ot}),Hk=()=>({legendItem:xn}),Uk=()=>({legendItem:xn}),jk=()=>({margin:1,legendItem:Ot}),zp=()=>({width:2,legendItem:xn}),Gk=()=>({gap:1,highlight:{line:{opacity:1,width:3}},line:{width:1},legendItem:Ot,spacing:.3}),Vp=()=>({line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:Pa,opacity:.5}),Np=()=>({markers:{visible:!1},legendItem:xn,width:2}),$k=()=>({gap:Ro,spacing:mn,legendItem:Ot}),Wk=()=>({gap:Ro,spacing:mn,legendItem:Ot}),Xk=()=>({width:1,legendItem:xn}),Fp=()=>({gap:.5,line:{color:Ix,width:1},legendItem:Ot,spacing:mn}),Yk=()=>({labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}},legendItem:Ot}),Dx=()=>({labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}},legendItem:Ot}),qk=Dx,Zk=()=>({labels:{color:"",background:Lx,visible:!0},highlight:{border:{width:0}},legendItem:Ot}),ki=r=>Object.assign({color:tf,trendline:{},markers:{visible:!1},width:1,dashType:"longDash",legendItem:xn},r),Qk=r=>({visible:!0,labels:{font:Ok},overlay:r.gradients?{}:{gradient:"none"},area:Lp(),rangeArea:Op(),verticalRangeArea:Op(),bar:Dk(),boxPlot:Bp(),bubble:zk(),bullet:Dp(),candlestick:Vk(),column:Nk(),heatmap:Zk(),pie:Yk(),donut:jk(),funnel:Dx(),pyramid:qk(),horizontalWaterfall:Fp(),line:zp(),notes:Bx(),ohlc:Gk(),radarArea:Vp(),radarLine:Np(),radarColumn:Fk(),polarArea:Vp(),polarLine:Np(),polarScatter:Hk(),rangeBar:$k(),rangeColumn:Wk(),scatter:Uk(),scatterLine:Xk(),verticalArea:Lp(),verticalBoxPlot:Bp(),verticalBullet:Dp(),verticalLine:zp(),waterfall:Fp(),linearTrendline:ki(),exponentialTrendline:ki({style:"smooth"}),logarithmicTrendline:ki({style:"smooth"}),polynomialTrendline:ki({style:"smooth"}),powerTrendline:ki({style:"smooth"}),movingAverageTrendline:ki()}),Kk=()=>({font:Rx}),Jk=()=>({font:Ta}),tC=()=>({labels:{font:Ta}}),zC=(r={})=>({axisDefaults:Bk(),categoryAxis:{majorGridLines:{visible:!0}},navigator:{pane:{height:90,margin:{top:10}}},seriesDefaults:Qk(r),title:Kk(),subtitle:Jk(),legend:tC()});export{Ps as A,Kt as C,W as G,bg as I,Qr as L,It as M,C as P,H as R,b_ as S,vg as T,sg as a,Ay as b,jn as c,rh as d,Rt as e,Gp as f,Xr as g,ty as h,j_ as i,G_ as j,W_ as k,m as l,ny as m,PC as n,zC as o,Gr as p,EC as q,Od as r,Fn as s,K as t,Sc as u};
