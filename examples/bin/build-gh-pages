#!/usr/bin/env bash

# Builds example projects and deploys them to GH Pages
STANDALONE_PROJECTS=(coffee-warehouse dashboard vite-coffee-warehouse)

set -e

# Standalone Projects
for PROJECT in "${STANDALONE_PROJECTS[@]}"
do
  pushd ../examples-standalone/${PROJECT} > /dev/null

  echo Building ${PROJECT}
  
  # Skip build steps for coffee-warehouse
  if [[ "${PROJECT}" != "coffee-warehouse" ]]; then
    npm ci
    rm -rf dist
    npm run build
  else
    echo Skipping build for ${PROJECT}
  fi

  mkdir -p ../../examples/dist/${PROJECT}
  mv -v dist/* ../../examples/dist/${PROJECT}

  popd > /dev/null
done

# Copy static assets
cp static/* dist

